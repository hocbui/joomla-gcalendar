/*

 FullCalendar v1.4.9-gcalendar
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Tue Oct 26 20:41:38 2010 +0200

*/
(function(m,$){function jb(a){m.extend(true,Qa,a)}function Eb(a,b,d){function e(t){if(da){H();s();W();K(t)}else f()}function f(){X=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");da=m("<div class='fc-content "+X+"-widget-content' style='position:relative'/>").prependTo(a);oa=new Fb(T,b);(sa=oa.render())&&a.prepend(sa);C(b.defaultView);m(window).resize(pa);u()||j()}function j(){setTimeout(function(){!I.start&&u()&&K()},0)}function o(){m(window).unbind("resize",
pa);oa.destroy();da.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function q(){return va.offsetWidth!==0}function u(){return m("body")[0].offsetWidth!==0}function C(t){if(!I||t!=I.name){n++;x();var D=I,y;if(D){(D.beforeHide||kb)();Ta(da,Ba(da));D.element.hide()}else Ta(da,1);da.css("overflow","hidden");if(I=k[t])I.element.show();else I=k[t]=new Ia[t](y=i=m("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(da),T);D&&oa.deactivateButton(D.name);oa.activateButton(t);K();da.css("overflow",
"");D&&Ta(da,1);y||(I.afterShow||kb)();n--}}function K(t){if(q()){n++;x();F===$&&H();var D=false;if(!I.start||t||A<I.start||A>=I.end){I.render(A,t||0);ba(true);D=true}else if(I.sizeDirty){I.clearEvents();ba();D=true}else if(I.eventsDirty){I.clearEvents();D=true}I.sizeDirty=false;I.eventsDirty=false;U(D);w=a.outerWidth();oa.updateTitle(I.title);t=new Date;t>=I.start&&t<I.end?oa.disableButton("today"):oa.enableButton("today");n--;I.trigger("viewDisplay",va)}}function L(){s();if(q()){H();ba();x();I.renderEvents(S);
I.sizeDirty=false}}function s(){m.each(k,function(t,D){D.sizeDirty=true})}function H(){F=b.contentHeight?b.contentHeight:b.height?b.height-Ua(da[0])-(sa?Ba(sa):0):Math.round(Oa(da)/Math.max(b.aspectRatio,0.5))}function ba(t){n++;I.setHeight(F,t);if(i){i.css("position","relative");i=null}I.setWidth(Oa(da),t);n--}function pa(){if(!n)if(I.start){var t=++h;setTimeout(function(){if(t==h&&!n&&q())if(w!=(w=a.outerWidth())){n++;L();I.trigger("windowResize",va);n--}},200)}else j()}function U(t){if(!b.lazyFetching||
ia(I.visStart,I.visEnd))Q();else t&&R()}function Q(){la(I.visStart,I.visEnd)}function ea(t){S=t;R()}function ja(t){R(t)}function R(t){W();if(q()){I.clearEvents();I.renderEvents(S,t);I.eventsDirty=false}}function W(){m.each(k,function(t,D){D.eventsDirty=true})}function p(t,D,y){I.select(t,D,y===$?true:y)}function x(){I&&I.unselect()}function Y(){K(-1)}function l(){K(1)}function v(){Va(A,-1);K()}function E(){Va(A,1);K()}function c(){A=new Date;K()}function N(t,D,y){if(t instanceof Date)A=B(t);else lb(A,
t,D,y);K()}function M(t,D,y){t!==$&&Va(A,t);D!==$&&Wa(A,D);y!==$&&P(A,y);K()}function g(){return B(A)}function J(){return I}function ga(t,D){if(D===$)return b[t];if(t=="height"||t=="contentHeight"||t=="aspectRatio"){b[t]=D;L()}}function ma(t,D){if(b[t])return b[t].apply(D||va,Array.prototype.slice.call(arguments,2))}var T=this;T.options=b;T.render=e;T.destroy=o;T.refetchEvents=Q;T.reportEvents=ea;T.reportEventChange=ja;T.changeView=C;T.select=p;T.unselect=x;T.prev=Y;T.next=l;T.prevYear=v;T.nextYear=
E;T.today=c;T.gotoDate=N;T.incrementDate=M;T.formatDate=function(t,D){return Ka(t,D,b)};T.formatDates=function(t,D,y){return Xa(t,D,y,b)};T.getDate=g;T.getView=J;T.option=ga;T.trigger=ma;Gb.call(T,b,d);var ia=T.isFetchNeeded,la=T.fetchEvents,va=a[0],oa,sa,da,X,I,k={},w,F,i,h=0,n=0,A=new Date,S=[];lb(A,b.year,b.month,b.date);var ca;b.droppable&&m(document).bind("dragstart",function(t,D){var y=t.target,ka=m(y);if(!ka.parents(".fc").length){var aa=b.dropAccept;if(m.isFunction(aa)?aa.call(y,ka):ka.is(aa)){ca=
y;I.dragStart(ca,t,D)}}}).bind("dragstop",function(t,D){if(ca){I.dragStop(ca,t,D);ca=null}})}function Fb(a,b){function d(){s=b.theme?"ui":"fc";var H=b.header;if(H)return L=m("<table class='fc-header'/>").append(m("<tr/>").append(m("<td class='fc-header-left'/>").append(f(H.left))).append(m("<td class='fc-header-center'/>").append(f(H.center))).append(m("<td class='fc-header-right'/>").append(f(H.right))))}function e(){L.remove()}function f(H){if(H){var ba=m("<tr/>");m.each(H.split(" "),function(pa){pa>
0&&ba.append("<td><span class='fc-header-space'/></td>");var U;m.each(this.split(","),function(Q,ea){if(ea=="title"){ba.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");U&&U.addClass(s+"-corner-right");U=null}else{var ja;if(a[ea])ja=a[ea];else if(Ia[ea])ja=function(){R.removeClass(s+"-state-hover");a.changeView(ea)};if(ja){U&&U.addClass(s+"-no-right");var R;Q=b.theme?Ya(b.buttonIcons,ea):null;var W=Ya(b.buttonText,ea);if(Q)R=m("<div class='fc-button-"+ea+" ui-state-default'><a><span class='ui-icon ui-icon-"+
Q+"'/></a></div>");else if(W)R=m("<div class='fc-button-"+ea+" "+s+"-state-default'><a><span>"+W+"</span></a></div>");if(R){R.click(function(){R.hasClass(s+"-state-disabled")||ja()}).mousedown(function(){R.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-down")}).mouseup(function(){R.removeClass(s+"-state-down")}).hover(function(){R.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-hover")},function(){R.removeClass(s+"-state-hover").removeClass(s+
"-state-down")}).appendTo(m("<td/>").appendTo(ba));U?U.addClass(s+"-no-right"):R.addClass(s+"-corner-left");Za(R.closest("td"));U=R}}}});U&&U.addClass(s+"-corner-right")});return m("<table/>").append(ba)}}function j(H){L.find("h2.fc-header-title").html(H)}function o(H){L.find("div.fc-button-"+H).addClass(s+"-state-active")}function q(H){L.find("div.fc-button-"+H).removeClass(s+"-state-active")}function u(H){L.find("div.fc-button-"+H).addClass(s+"-state-disabled")}function C(H){L.find("div.fc-button-"+
H).removeClass(s+"-state-disabled")}var K=this;K.render=d;K.destroy=e;K.updateTitle=j;K.activateButton=o;K.deactivateButton=q;K.disableButton=u;K.enableButton=C;var L=m([]),s}function Gb(a,b){function d(c,N){return!W||c<W||N>p}function e(c,N){W=c;p=N;x++;E=[];Y=b.length;for(c=0;c<b.length;c++)f(b[c],x)}function f(c,N){j(c,function(M){if(N==x){for(var g=0;g<M.length;g++){U(M[g]);M[g].source=c}E=E.concat(M);Y--;Y||R(E)}})}function j(c,N){if(typeof c=="string"){var M={};M[a.startParam]=Math.round(W.getTime()/
1E3);M[a.endParam]=Math.round(p.getTime()/1E3);M.browserTimezone=W.getTimezoneOffset();if(a.cacheParam)M[a.cacheParam]=(new Date).getTime();ba();m.ajax({global:false,type:a.requestMethod||"GET",url:c,dataType:"json",data:M,cache:a.cacheParam||false,success:function(g){pa();N(g)}})}else if(m.isFunction(c)){ba();c(B(W),B(p),function(g){pa();N(g)})}else c&&N(c)}function o(c){b.push(c);Y++;f(c,x)}function q(c){var N=[];b=m.grep(b,function(M){if(typeof M==="object"&&c!==M)N=N.concat(M);return M!=c});E=
m.grep(E,function(M){return M.source!=c});b=N.concat(b);R(E)}function u(c){if(b.indexOf(c)<0){b.push(c);Y++}}function C(){E=b=[];b=[].concat(b);R(E)}function K(c){var N,M=E.length,g,J=ja().defaultEventEnd,ga=c.start-c._start,ma=c.end?c.end-(c._end||J(c)):0;for(N=0;N<M;N++){g=E[N];if(g._id==c._id&&g!=c){g.start=new Date(+g.start+ga);g.end=c.end?g.end?new Date(+g.end+ma):new Date(+J(g)+ma):null;g.title=c.title;g.url=c.url;g.allDay=c.allDay;g.className=c.className;g.editable=c.editable;g.resizable=c.resizable;
g.color=c.color;g.bgColor=c.bgColor;g.borderColor=c.borderColor;U(g)}}U(c);R(E)}function L(c,N){U(c);if(!c.source){if(N){v.push(c);c.source=v}E.push(c)}R(E)}function s(c){if(c){if(!m.isFunction(c)){var N=c+"";c=function(g){return g._id==N}}E=m.grep(E,c,true);for(M=0;M<b.length;M++)if(typeof b[M]=="object")b[M]=m.grep(b[M],c,true)}else{E=[];for(var M=0;M<b.length;M++)if(typeof b[M]=="object")b[M]=[]}R(E)}function H(c){if(m.isFunction(c))return m.grep(E,c);else if(c){c+="";return m.grep(E,function(N){return N._id==
c})}return E}function ba(){l++||ea("loading",null,true)}function pa(){--l||ea("loading",null,false)}function U(c){c._id=c._id||(c.id===$?"_fc"+Hb++:c.id+"");if(c.date){if(!c.start)c.start=c.date;delete c.date}c._start=B(c.start=$a(c.start,a.ignoreTimezone));c.end=$a(c.end,a.ignoreTimezone);if(c.end&&c.end<=c.start)c.end=null;c._end=c.end?B(c.end):null;if(c.allDay===$)c.allDay=a.allDayDefault;if(c.className){if(typeof c.className=="string")c.className=c.className.split(/\s+/)}else c.className=[]}var Q=
this;Q.isFetchNeeded=d;Q.fetchEvents=e;Q.addEventSource=o;Q.addEventSourceFast=u;Q.clearEventSources=C;Q.removeEventSource=q;Q.updateEvent=K;Q.renderEvent=L;Q.removeEvents=s;Q.clientEvents=H;Q.normalizeEvent=U;var ea=Q.trigger,ja=Q.getView,R=Q.reportEvents,W,p,x=0,Y=0,l=0,v=[],E=[];b.push(v)}function Ib(a,b){function d(q,u){if(u){Wa(q,u);q.setDate(1)}q=B(q,true);q.setDate(1);u=Wa(B(q),1);var C=B(q),K=B(u),L=f("firstDay"),s=f("weekends")?0:1;if(s){ua(C);ua(K,-1,true)}P(C,-((C.getDay()-Math.max(L,s)+
7)%7));P(K,(7-K.getDay()+Math.max(L,s))%7);L=Math.round((K-C)/(mb*7));if(f("weekMode")=="fixed"){P(K,(6-L)*7);L=6}e.title=o(q,f("titleFormat"));e.start=q;e.end=u;e.visStart=C;e.visEnd=K;j(L,s?5:7,true)}var e=this;e.render=d;ab.call(e,a,b,"month");var f=e.opt,j=e.renderBasic,o=b.formatDate}function Jb(a,b){function d(q,u){u&&P(q,u*7);q=P(B(q),-((q.getDay()-f("firstDay")+7)%7));u=P(B(q),7);var C=B(q),K=B(u),L=f("weekends");if(!L){ua(C);ua(K,-1,true)}e.title=o(C,P(B(K),-1),f("titleFormat"));e.start=
q;e.end=u;e.visStart=C;e.visEnd=K;j(1,L?7:5,false)}var e=this;e.render=d;ab.call(e,a,b,"basicWeek");var f=e.opt,j=e.renderBasic,o=b.formatDates}function Kb(a,b){function d(q,u){if(u){P(q,u);f("weekends")||ua(q,u<0?-1:1)}e.title=o(q,f("titleFormat"));e.start=e.visStart=B(q,true);e.end=e.visEnd=P(B(e.start),1);j(1,1,false)}var e=this;e.render=d;ab.call(e,a,b,"basicDay");var f=e.opt,j=e.renderBasic,o=b.formatDate}function ab(a,b,d){function e(i,h,n){ia=i;la=h;ga=0+x("weekNumbers");if(M=x("isRTL")){g=
-1;J=la-1;ga&&J++}else{g=1;J=0;ga&&J--}ma=x("firstDay");T=x("weekends")?0:1;var A=x("theme")?"ui":"fc",S=x("columnFormat"),ca=p.start.getMonth(),t=Ja(new Date),D,y=B(p.visStart);if(X){l();h=X.find("tr").length;if(ia<h)X.find("tr:gt("+(ia-1)+")").remove();else if(ia>h){i="";for(h=h;h<ia;h++){i+="<tr class='fc-week"+h+"'>";if(ga){D=B(y);P(D,1);i+="<th class='fc-axis "+A+"-state-default fc-leftmost fc-weeknumber'>"+D.getWeek()+"</th>"}for(D=0;D<la;D++){i+="<td class='fc-"+Ca[y.getDay()]+" "+A+"-state-default fc-new fc-day"+
(h*la+D)+(D==J?" fc-leftmost":"")+"'>"+(n?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";P(y,1);T&&ua(y)}i+="</tr>"}X.append(i)}o(X.find("td.fc-new").removeClass("fc-new"));y=B(p.visStart);X.find("td").each(function(){var aa=m(this);ga&&y.getDay()==1&&aa.closest("tr").find("th").text(y.getWeek());if(ia>1)y.getMonth()==ca?aa.removeClass("fc-other-month"):aa.addClass("fc-other-month");if(+y==+t)aa.removeClass("fc-not-today fc-before-today").addClass(A+
"-state-highlight fc-today");else+y<+t?aa.addClass("fc-not-today fc-before-today").removeClass(A+"-state-highlight fc-today"):aa.addClass("fc-not-today").removeClass(A+"-state-highlight fc-today fc-before-today");aa.find("div.fc-day-number").text(y.getDate());P(y,1);T&&ua(y)});if(ia==1){y=B(p.visStart);da.find("th").each(function(aa,V){m(V).text(N(y,S));V.className=V.className.replace(/^fc-\w+(?= )/,"fc-"+Ca[y.getDay()]);P(y,1);T&&ua(y)});y=B(p.visStart);X.find("td").each(function(aa,V){V.className=
V.className.replace(/^fc-\w+(?= )/,"fc-"+Ca[y.getDay()]);P(y,1);T&&ua(y)})}}else{var ka=m("<table/>").appendTo(a);i="<thead><tr>";if(ga)i+="<th width='25px' class='fc-axis fc-leftmost "+A+"-state-default'>&nbsp;</th>";for(h=0;h<la;h++){i+="<th class='fc-"+Ca[y.getDay()]+" "+A+"-state-default"+(h==J?" fc-leftmost":"")+"'>"+N(y,S)+"</th>";P(y,1);T&&ua(y)}da=m(i+"</tr></thead>").appendTo(ka);i="<tbody>";y=B(p.visStart);for(h=0;h<ia;h++){i+="<tr class='fc-week"+h+"'>";if(ga){D=B(y);P(D,1);i+="<th class='fc-axis "+
A+"-state-default fc-leftmost fc-weeknumber'>"+D.getWeek()+"</th>"}for(D=0;D<la;D++){i+="<td class='fc-"+Ca[y.getDay()]+" "+A+"-state-default fc-new fc-day"+(h*la+D)+(D==J?" fc-leftmost":"")+(ia>1&&y.getMonth()!=ca?" fc-other-month":"")+(+y==+t?" fc-today "+A+"-state-highlight":+y<+t?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(n?"<div class='fc-day-number'>"+y.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";P(y,1);T&&ua(y)}i+=
"</tr>"}X=m(i+"</tbody>").appendTo(ka);o(X.find("td.fc-new").removeClass("fc-new"));I=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function f(i){sa=i;i=X.find("tr td:first-child");var h=sa-da.outerHeight(),n;if(ga)i=X.find("tr th:first-child");if(x("weekMode")=="variable")n=h=Math.floor(h/(ia==1?2:6));else{n=Math.floor(h/ia);h=h-n*(ia-1)}if(bb===$){var A=X.find("tr:first").find("td:first");Fa(A,n);bb=n!=A.outerHeight()}if(bb){i.slice(0,-1).height(n);i.slice(-1).height(h)}else{Fa(i.slice(0,
-1),n);Fa(i.slice(-1),h)}}function j(i){oa=i;F.clear();if(ga){va=Math.floor((oa-25)/la);Aa(da.find("th").slice(1,-1),va)}else{va=Math.floor(oa/la);Aa(da.find("th").slice(0,-1),va)}}function o(i){i.click(q).mousedown(c)}function q(i){if(!x("selectable")){var h=parseInt(this.className.match(/fc\-day(\d+)/)[1]);h=P(B(p.visStart),Math.floor(h/la)*7+h%la);Y("dayClick",this,h,true,i)}}function u(i,h,n){n&&k.build();n=B(p.visStart);for(var A=P(B(n),la),S=0;S<ia;S++){var ca=new Date(Math.max(n,i)),t=new Date(Math.min(A,
h));if(ca<t){var D;if(M){D=Da(t,n)*g+J+1;ca=Da(ca,n)*g+J+1}else{D=Da(ca,n);ca=Da(t,n)}o(C(S,D,S,ca-1))}P(n,7);P(A,7)}}function C(i,h,n,A){i=k.rect(i,h,n,A,a);return v(i,a)}function K(i){return B(i)}function L(i,h){u(i,P(B(h),1),true)}function s(){E()}function H(i,h){w.start(function(n){E();n&&C(n.row,n.col,n.row,n.col)},h)}function ba(i,h,n){var A=w.stop();E();if(A){A=ja(A);Y("drop",i,A,true,h,n)}}function pa(i){return B(i.start)}function U(i){return F.left(i)}function Q(i){return F.right(i)}function ea(i){return(i-
Math.max(ma,T)+la)%la}function ja(i){return P(B(p.visStart),i.row*7+i.col*g+J+ga)}function R(i){return X.find("tr:eq("+i+")")}function W(){return{left:0,right:oa}}var p=this;p.renderBasic=e;p.setHeight=f;p.setWidth=j;p.renderDayOverlay=u;p.defaultSelectionEnd=K;p.renderSelection=L;p.clearSelection=s;p.dragStart=H;p.dragStop=ba;p.defaultEventEnd=pa;p.getHoverListener=function(){return w};p.colContentLeft=U;p.colContentRight=Q;p.dayOfWeekCol=ea;p.cellDate=ja;p.cellIsAllDay=function(){return true};p.allDayTR=
R;p.allDayBounds=W;p.getRowCnt=function(){return ia};p.getColCnt=function(){return la};p.getColWidth=function(){return va};p.getDaySegmentContainer=function(){return I};nb.call(p,a,b,d);ob.call(p);pb.call(p);Lb.call(p);var x=p.opt,Y=p.trigger,l=p.clearEvents,v=p.renderOverlay,E=p.clearOverlays,c=p.daySelectionMousedown,N=b.formatDate,M,g,J,ga,ma,T,ia,la,va,oa,sa,da,X,I,k,w,F;Za(a.addClass("fc-grid"));k=new qb(function(i,h){var n,A,S,ca=X.find("tr:first td");if(M)ca=m(ca.get().reverse());ca.each(function(t,
D){n=m(D);A=n.offset().left;if(t)S[1]=A;S=[A];h[t]=S});S[1]=A+n.outerWidth();X.find("tr").each(function(t,D){n=m(D);A=n.offset().top;if(t)S[1]=A;S=[A];i[t]=S});S[1]=A+n.outerHeight()});w=new rb(k);F=new sb(function(i){return X.find("td:eq("+i+") div div")})}function Lb(){function a(p,x){u(p);R(d(p),x)}function b(){C();ba().empty()}function d(p){var x=ea(),Y=ja(),l=B(j.visStart);Y=P(B(l),Y);var v=m.map(p,Pa),E,c,N,M,g,J,ga=[];for(E=0;E<x;E++){c=cb(db(p,v,l,Y));for(N=0;N<c.length;N++){M=c[N];for(g=
0;g<M.length;g++){J=M[g];J.row=E;J.level=N;ga.push(J)}}P(l,7);P(Y,7)}return ga}function e(p,x,Y){K(p,x);if(p.editable||p.editable===$&&o("editable")){f(p,x);Y.isEnd&&W(p,x)}}function f(p,x){if(!o("disableDragging")&&x.draggable){var Y=pa(),l;x.draggable({zIndex:9,delay:50,opacity:o("dragOpacity"),revertDuration:o("dragRevertDuration"),start:function(v,E){q("eventDragStart",x,p,v,E);s(p,x);Y.start(function(c,N,M,g){x.draggable("option","revert",!c||!M&&!g);Q();if(c){l=M*7+g*(o("isRTL")?-1:1);U(P(B(p.start),
l),P(Pa(p),l))}else l=0},v,"drag")},stop:function(v,E){Y.stop();Q();q("eventDragStop",x,p,v,E);if(l){x.find("a").removeAttr("href");H(this,p,l,0,p.allDay,v,E)}else{m.browser.msie&&x.css("filter","");L(p,x)}}})}}var j=this;j.renderEvents=a;j.clearEvents=b;j.bindDaySeg=e;tb.call(j);var o=j.opt,q=j.trigger,u=j.reportEvents,C=j.reportEventClear,K=j.eventElementHandlers,L=j.showEvents,s=j.hideEvents,H=j.eventDrop,ba=j.getDaySegmentContainer,pa=j.getHoverListener,U=j.renderDayOverlay,Q=j.clearOverlays,
ea=j.getRowCnt,ja=j.getColCnt,R=j.renderDaySegs,W=j.resizableDayEvent}function Mb(a,b){function d(q,u){u&&P(q,u*7);q=P(B(q),-((q.getDay()-f("firstDay")+7)%7));u=P(B(q),7);var C=B(q),K=B(u),L=f("weekends");if(!L){ua(C);ua(K,-1,true)}e.title=o(C,P(B(K),-1),f("titleFormat"));e.start=q;e.end=u;e.visStart=C;e.visEnd=K;j(L?7:5)}var e=this;e.render=d;ub.call(e,a,b,"agendaWeek");var f=e.opt,j=e.renderAgenda,o=b.formatDates}function Nb(a,b){function d(q,u){if(u){P(q,u);f("weekends")||ua(q,u<0?-1:1)}u=B(q,
true);var C=P(B(u),1);e.title=o(q,f("titleFormat"));e.start=e.visStart=u;e.end=e.visEnd=C;j(1)}var e=this;e.render=d;ub.call(e,a,b,"agendaDay");var f=e.opt,j=e.renderAgenda,o=b.formatDate}function ub(a,b,d){function e(r){i=r;y=J("theme")?"ui":"fc";aa=J("weekends")?0:1;ka=J("firstDay");if(V=J("isRTL")){fa=-1;ha=i-1}else{fa=1;ha=0}na=eb(J("minTime"));Ga=eb(J("maxTime"));r=V?P(B(g.visEnd),-1):B(g.visStart);var z=B(r),G=Ja(new Date),O=J("columnFormat");if(X){ma();J("weekNumbers")&&X.find("tr:first th:first").text(da(g.visStart,
"w"));X.find("tr:first th").slice(1,-1).each(function(La,wa){m(wa).text(da(z,O));wa.className=wa.className.replace(/^fc-\w+(?= )/,"fc-"+Ca[z.getDay()]);P(z,fa);aa&&ua(z,fa)});z=B(r);F.find("td").each(function(La,wa){wa.className=wa.className.replace(/^fc-\w+(?= )/,"fc-"+Ca[z.getDay()]);if(+z==+G)m(wa).removeClass("fc-not-today fc-before-today").addClass(y+"-state-highlight fc-today");else+z<+G?m(wa).addClass("fc-not-today fc-before-today").removeClass(y+"-state-highlight fc-today"):m(wa).addClass("fc-not-today").removeClass(y+
"-state-highlight fc-today fc-before-today");P(z,fa);aa&&ua(z,fa)})}else{var Z,ra,Ea=J("slotMinutes")%15==0,qa="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(J("allDaySlot")?"":" fc-last")+"'><th class='fc-leftmost "+y+"-state-default'>"+(J("weekNumbers")?da(g.visStart,"w"):"&nbsp;")+"</th>";for(Z=0;Z<i;Z++){qa+="<th class='fc-"+Ca[z.getDay()]+" "+y+"-state-default'>"+da(z,O)+"</th>";P(z,fa);aa&&ua(z,fa)}qa+="<th class='"+y+"-state-default'>&nbsp;</th></tr>";
if(J("allDaySlot"))qa+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+y+"-state-default'>"+J("allDayText")+"</th><td colspan='"+i+"' class='"+y+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+y+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+(i+2)+"' class='"+y+"-state-default fc-leftmost'><div/></th></tr>";qa+="</table></div>";X=m(qa).appendTo(a);C(X.find("td"));vb=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(X);
z=wb();var fb=ta(B(z),Ga);ta(z,na);qa="<table>";for(Z=0;z<fb;Z++){ra=z.getMinutes();qa+="<tr class='"+(!Z?"fc-first":!ra?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+y+"-state-default'>"+(!Ea||!ra?da(z,J("axisFormat")):"&nbsp;")+"</th><td class='fc-slot"+Z+" "+y+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";ta(z,J("slotMinutes"));h++}qa+="</table>";I=m("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(k=m("<div style='position:relative;overflow:hidden'>").append(w=
m(qa))).appendTo(a);K(I.find("td"));xb=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(k);z=B(r);qa="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(Z=0;Z<i;Z++){qa+="<td class='fc-"+Ca[z.getDay()]+" "+y+"-state-default "+(!Z?"fc-leftmost ":"")+(+z==+G?y+"-state-highlight fc-today":+z<+G?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";P(z,
fa);aa&&ua(z,fa)}qa+="</tr></table></div>";F=m(qa).appendTo(a)}}function f(r,z){if(r===$)r=t;t=r;gb={};var G=r-Ba(X);G=Math.min(G,Ba(w));Fa(I,G);Ra&&Fa(I,r-Ba(X)-1);S=Ba(I.find("tr:first div"))+1;z&&o()}function j(r){ca=r;Sa.clear();Aa(I,r);I.css("overflow","auto").width(r);var z=X.find("tr:first th"),G=X.find("tr.fc-all-day th:last"),O=F.find("td"),Z=I[0].clientWidth;Aa(w,Z);Z=I[0].clientWidth;w.width(Z);n=0;var ra=X.find("tr:lt(2) th:first").add(I.find("tr:first th"));ra.width(1);ra.each(function(){n=
Math.max(n,m(this).outerWidth())});Aa(ra,n);A=Math.floor((Z-n)/i);Aa(z.slice(1,-2),A);Aa(O.slice(0,-1),A);if(r!=Z){Aa(z.slice(-2,-1),Z-n-A*(i-1));z.slice(-1).show();G.show()}else{I.css("overflow","hidden");z.slice(-2,-1).width("");z.slice(-1).hide();G.hide()}F.css({top:Ba(X.find("tr")),left:n,width:Z-n,height:t})}function o(){var r=wb(),z=B(r);z.setHours(J("firstHour"));var G=ea(r,z)+1;r=function(){I.scrollTop(G)};r();setTimeout(r,0)}function q(){D=I.scrollTop()}function u(){I.scrollTop(D)}function C(r){r.click(L).mousedown(oa)}
function K(r){r.click(L).mousedown(c)}function L(r){if(!J("selectable")){var z=Math.min(i-1,Math.floor((r.pageX-F.offset().left)/A));z=P(B(g.visStart),z*fa+ha);var G=this.className.match(/fc-slot(\d+)/);if(G){G=parseInt(G[1])*J("slotMinutes");var O=Math.floor(G/60);z.setHours(O);z.setMinutes(G%60+na);ga("dayClick",this,z,false,r)}else ga("dayClick",this,z,true,r)}}function s(r,z,G){G&&xa.build();var O=B(g.visStart);if(V){G=Da(z,O)*fa+ha+1;r=Da(r,O)*fa+ha+1}else{G=Da(r,O);r=Da(z,O)}G=Math.max(0,G);
r=Math.min(i,r);G<r&&C(H(0,G,0,r-1))}function H(r,z,G,O){r=xa.rect(r,z,G,O,X);return T(r,X)}function ba(r,z){for(var G=B(g.visStart),O=P(B(G),1),Z=0;Z<i;Z++){var ra=new Date(Math.max(G,r)),Ea=new Date(Math.min(O,z));if(ra<Ea){var qa=Z*fa+ha;qa=xa.rect(0,qa,0,qa,k);ra=ea(G,ra);Ea=ea(G,Ea);qa.top=ra;qa.height=Ea-ra;K(T(qa,k))}P(G,1);P(O,1)}}function pa(r){return n+Sa.left(r)}function U(r){return n+Sa.right(r)}function Q(r){return(r-Math.max(ka,aa)+i)%i*fa+ha}function ea(r,z){r=B(r,true);if(z<ta(B(r),
na))return 0;if(z>=ta(B(r),Ga))return Ba(k);r=J("slotMinutes");z=z.getHours()*60+z.getMinutes()-na;var G=Math.floor(z/r),O=gb[G];if(O===$)O=gb[G]=I.find("tr:eq("+G+") td div")[0].offsetTop;return Math.max(0,Math.round(O-1+S*(z%r/r)))}function ja(r){var z=P(B(g.visStart),r.col*fa+ha);r=r.row;J("allDaySlot")&&r--;r>=0&&ta(z,na+r*J("slotMinutes"));return z}function R(r){return J("allDaySlot")&&!r.row}function W(){return{left:n,right:ca}}function p(){return X.find("tr.fc-all-day")}function x(r){var z=
B(r.start);if(r.allDay)return z;return ta(z,J("defaultEventMinutes"))}function Y(r,z){if(z)return B(r);return ta(B(r),J("slotMinutes"))}function l(r,z,G){if(G)J("allDaySlot")&&s(r,P(B(z),1),true);else v(r,z)}function v(r,z){var G=J("selectHelper");xa.build();if(G){var O=Da(r,g.visStart)*fa+ha;if(O>=0&&O<i){O=xa.rect(0,O,0,O,k);var Z=ea(r,r),ra=ea(r,z);if(ra>Z){O.top=Z;O.height=ra-Z;O.left+=2;O.width-=5;if(m.isFunction(G)){if(r=G(r,z)){O.position="absolute";O.zIndex=8;za=m(r).css(O).appendTo(k)}}else{za=
m(sa({title:"",start:r,end:z,className:[],editable:false},O,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));m.browser.msie&&za.find("span.fc-event-bg").hide();za.css("opacity",J("dragOpacity"))}if(za){K(za);k.append(za);Aa(za,O.width,true);Fa(za,O.height,true)}}}}else ba(r,z)}function E(){ia();if(za){za.remove();za=null}}function c(r){if(r.which==1&&J("selectable")){va(r);var z=this,G;ya.start(function(O,Z){E();if(O&&O.col==Z.col&&!R(O)){Z=ja(Z);O=ja(O);G=[Z,ta(B(Z),J("slotMinutes")),O,
ta(B(O),J("slotMinutes"))].sort(yb);v(G[0],G[3])}else G=null},r);m(document).one("mouseup",function(O){ya.stop();if(G){+G[0]==+G[1]&&ga("dayClick",z,G[0],false,O);la(G[0],G[3],false,O)}})}}function N(r,z){ya.start(function(G){ia();if(G)if(R(G))H(G.row,G.col,G.row,G.col);else{G=ja(G);var O=ta(B(G),J("defaultEventMinutes"));ba(G,O)}},z)}function M(r,z,G){var O=ya.stop();ia();O&&ga("drop",r,ja(O),R(O),z,G)}var g=this;g.renderAgenda=e;g.setWidth=j;g.setHeight=f;g.beforeHide=q;g.afterShow=u;g.defaultEventEnd=
x;g.timePosition=ea;g.dayOfWeekCol=Q;g.cellDate=ja;g.cellIsAllDay=R;g.allDayTR=p;g.allDayBounds=W;g.getHoverListener=function(){return ya};g.colContentLeft=pa;g.colContentRight=U;g.getDaySegmentContainer=function(){return vb};g.getSlotSegmentContainer=function(){return xb};g.getMinMinute=function(){return na};g.getMaxMinute=function(){return Ga};g.getBodyContent=function(){return k};g.getRowCnt=function(){return 1};g.getColCnt=function(){return i};g.getColWidth=function(){return A};g.getSlotHeight=
function(){return S};g.defaultSelectionEnd=Y;g.renderDayOverlay=s;g.renderSelection=l;g.clearSelection=E;g.dragStart=N;g.dragStop=M;nb.call(g,a,b,d);ob.call(g);pb.call(g);Ob.call(g);var J=g.opt,ga=g.trigger,ma=g.clearEvents,T=g.renderOverlay,ia=g.clearOverlays,la=g.reportSelection,va=g.unselect,oa=g.daySelectionMousedown,sa=g.slotSegHtml,da=b.formatDate,X,I,k,w,F,i,h=0,n,A,S,ca,t,D,y,ka,aa,V,fa,ha,na,Ga,xa,ya,Sa,gb={},za,vb,xb;Za(a.addClass("fc-agenda"));xa=new qb(function(r,z){function G(wa){return Math.max(qa,
Math.min(fb,wa))}var O,Z,ra;F.find("td").each(function(wa,Pb){O=m(Pb);Z=O.offset().left;if(wa)ra[1]=Z;ra=[Z];z[wa]=ra});ra[1]=Z+O.outerWidth();if(J("allDaySlot")){O=X.find("td");Z=O.offset().top;r[0]=[Z,Z+O.outerHeight()]}for(var Ea=k.offset().top,qa=I.offset().top,fb=qa+I.outerHeight(),La=0;La<h;La++)r.push([G(Ea+S*La),G(Ea+S*(La+1))])});ya=new rb(xa);Sa=new sb(function(r){return F.find("td:eq("+r+") div div")})}function Ob(){function a(k,w){U(k);var F,i=k.length,h=[],n=[];for(F=0;F<i;F++)k[F].allDay?
h.push(k[F]):n.push(k[F]);if(H("allDaySlot")){c(d(h),w);ja()}j(e(n),w)}function b(){Q();R().empty();W().empty()}function d(k){k=cb(db(k,m.map(k,Pa),s.visStart,s.visEnd));var w,F=k.length,i,h,n,A=[];for(w=0;w<F;w++){i=k[w];for(h=0;h<i.length;h++){n=i[h];n.row=0;n.level=w;A.push(n)}}return A}function e(k){var w=M(),F=Y(),i=x(),h=ta(B(s.visStart),F),n=m.map(k,f),A,S,ca,t,D,y,ka=[];for(A=0;A<w;A++){S=cb(db(k,n,h,ta(B(h),i-F)));Qb(S);for(ca=0;ca<S.length;ca++){t=S[ca];for(D=0;D<t.length;D++){y=t[D];y.col=
A;y.level=ca;ka.push(y)}}P(h,1,true)}return ka}function f(k){return k.end?B(k.end):ta(B(k.start),H("defaultEventMinutes"))}function j(k,w){var F,i=k.length,h,n,A,S,ca,t,D,y,ka,aa,V="",fa,ha,na={},Ga={},xa=W(),ya;F=M();if(fa=H("isRTL")){ha=-1;ya=F-1}else{ha=1;ya=0}for(F=0;F<i;F++){h=k[F];n=h.event;A="fc-event fc-event-vert ";if(h.isStart)A+="fc-corner-top ";if(h.isEnd)A+="fc-corner-bottom ";S=l(h.start,h.start);ca=l(h.start,h.end);t=h.col;D=h.level;y=h.forward||0;ka=v(t*ha+ya);aa=E(t*ha+ya)-ka;aa=
Math.min(aa-6,aa*0.95);t=D?aa/(D+y+1):y?(aa/(y+1)-6)*2:aa;D=ka+aa/(D+y+1)*D*ha+(fa?aa-t:0);h.top=S;h.left=D;h.outerWidth=t;h.outerHeight=ca-S;V+=o(n,h,A)}xa[0].innerHTML=V;fa=xa.children();for(F=0;F<i;F++){h=k[F];n=h.event;V=m(fa[F]);ha=ba("eventRender",n,n,V);if(ha===false)V.remove();else{if(ha&&ha!==true){V.remove();V=m(ha).css({position:"absolute",top:h.top,left:h.left}).appendTo(xa)}h.element=V;if(n._id===w)u(n,V,h);else V[0]._fci=F;ma(n,V)}}zb(xa,k,u);for(F=0;F<i;F++){h=k[F];if(V=h.element){n=
na[w=h.key=Ab(V[0])];h.vsides=n===$?(na[w]=Ua(V[0],true)):n;n=Ga[w];h.hsides=n===$?(Ga[w]=hb(V[0],true)):n;w=V.find("span.fc-event-title");if(w.length)h.titleTop=w[0].offsetTop}}for(F=0;F<i;F++){h=k[F];if(V=h.element){V[0].style.width=Math.max(0,h.outerWidth-h.hsides)+"px";na=Math.max(0,h.outerHeight-h.vsides);V[0].style.height=na+"px";n=h.event;if(h.titleTop!==$&&na-h.titleTop<10){V.find("span.fc-event-time").text(X(n.start,H("timeFormat"))+" - "+n.title);V.find("span.fc-event-title").remove()}ba("eventAfterRender",
n,n,V)}}}function o(k,w,F){var i="";if(k.color)i+="color:"+k.color+";";if(k.bgColor)i+="background-color:"+k.bgColor+";";if(k.borderColor)i+="border-color:"+k.borderColor+";";return"<div class='"+F+k.className.join(" ")+"' style='position:absolute;z-index:8;top:"+w.top+"px;left:"+w.left+"px'><a"+(k.url?" href='"+Ma(k.url)+"'":"")+(i?" style='"+i+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Ma(I(k.start,k.end,H("timeFormat")))+"</span><span class='fc-event-title'>"+Ma(k.title)+
"</span></a>"+((k.resizable||k.resizable===$)&&(k.editable||k.editable===$&&H("editable"))&&!H("disableResizing")&&m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":"")+"</div>"}function q(k,w,F){ea(k,w);if(k.editable||k.editable===$&&H("editable")){C(k,w,F.isStart);F.isEnd&&N(k,w,g())}}function u(k,w,F){ea(k,w);if(k.editable||k.editable===$&&H("editable")){var i=w.find("span.fc-event-time");K(k,w,i);F.isEnd&&L(k,w,i)}}function C(k,w,F){if(!H("disableDragging")&&w.draggable){var i,
h=true,n,A=H("isRTL")?-1:1,S=p(),ca=g(),t=J(),D=Y();w.draggable({zIndex:9,opacity:H("dragOpacity","month"),revertDuration:H("dragRevertDuration"),start:function(ka,aa){ba("eventDragStart",w,k,ka,aa);ia(k,w);i=Oa(w);S.start(function(V,fa,ha,na){w.draggable("option","revert",!V||!ha&&!na);sa();if(V){n=na*A;if(V.row){if(F&&h){Aa(w,ca-10);Fa(w,t*Math.round((k.end?(k.end-k.start)/Rb:H("defaultEventMinutes"))/H("slotMinutes")));w.draggable("option","grid",[ca,1]);h=false}}else{oa(P(B(k.start),n),P(Pa(k),
n));y()}}},ka,"drag")},stop:function(ka,aa){var V=S.stop();sa();ba("eventDragStop",w,k,ka,aa);if(V&&(!h||n)){w.find("a").removeAttr("href");V=0;h||(V=Math.round((w.offset().top-ga().offset().top)/t)*H("slotMinutes")+D-(k.start.getHours()*60+k.start.getMinutes()));la(this,k,n,V,h,ka,aa)}else{y();m.browser.msie&&w.css("filter","");T(k,w)}}});function y(){if(!h){Aa(w,i);w.height("");w.draggable("option","grid",null);h=true}}}}function K(k,w,F){if(!H("disableDragging")&&w.draggable){var i,h=false,n,A,
S,ca=H("isRTL")?-1:1,t=p(),D=M(),y=g(),ka=J();w.draggable({zIndex:9,scroll:false,grid:[y,ka],axis:D==1?"y":false,opacity:H("dragOpacity"),revertDuration:H("dragRevertDuration"),start:function(fa,ha){ba("eventDragStart",w,k,fa,ha);ia(k,w);m.browser.msie&&w.find("span.fc-event-bg").hide();i=w.position();A=S=0;t.start(function(na,Ga,xa,ya){w.draggable("option","revert",!na);sa();if(na){n=ya*ca;if(H("allDaySlot")&&!na.row){if(!h){h=true;F.hide();w.draggable("option","grid",null)}oa(P(B(k.start),n),P(Pa(k),
n))}else V()}},fa,"drag")},drag:function(fa,ha){A=Math.round((ha.position.top-i.top)/ka)*H("slotMinutes");if(A!=S){h||aa(A);S=A}},stop:function(fa,ha){var na=t.stop();sa();ba("eventDragStop",w,k,fa,ha);if(na&&(n||A||h))la(this,k,n,h?0:A,h,fa,ha);else{V();w.css(i);aa(0);m.browser.msie&&w.css("filter","").find("span.fc-event-bg").css("display","");T(k,w)}}});function aa(fa){var ha=ta(B(k.start),fa),na;if(k.end)na=ta(B(k.end),fa);F.text(I(ha,na,H("timeFormat")))}function V(){if(h){F.css("display","");
w.draggable("option","grid",[y,ka]);h=false}}}}function L(k,w,F){if(!H("disableResizing")&&w.resizable){var i,h,n=J();w.resizable({handles:{s:"div.ui-resizable-s"},grid:n,start:function(A,S){i=h=0;ia(k,w);m.browser.msie&&m.browser.version=="6.0"&&w.css("overflow","hidden");w.css("z-index",9);ba("eventResizeStart",this,k,A,S)},resize:function(A,S){i=Math.round((Math.max(n,Ba(w))-S.originalSize.height)/n);if(i!=h){F.text(I(k.start,!i&&!k.end?null:ta(pa(k),H("slotMinutes")*i),H("timeFormat")));h=i}},
stop:function(A,S){ba("eventResizeStop",this,k,A,S);if(i)va(this,k,0,H("slotMinutes")*i,A,S);else{w.css("z-index",8);T(k,w)}}})}}var s=this;s.renderEvents=a;s.clearEvents=b;s.slotSegHtml=o;s.bindDaySeg=q;tb.call(s);var H=s.opt,ba=s.trigger,pa=s.eventEnd,U=s.reportEvents,Q=s.reportEventClear,ea=s.eventElementHandlers,ja=s.setHeight,R=s.getDaySegmentContainer,W=s.getSlotSegmentContainer,p=s.getHoverListener,x=s.getMaxMinute,Y=s.getMinMinute,l=s.timePosition,v=s.colContentLeft,E=s.colContentRight,c=
s.renderDaySegs,N=s.resizableDayEvent,M=s.getColCnt,g=s.getColWidth,J=s.getSlotHeight,ga=s.getBodyContent,ma=s.reportEventElement,T=s.showEvents,ia=s.hideEvents,la=s.eventDrop,va=s.eventResize,oa=s.renderDayOverlay,sa=s.clearOverlays,da=s.calendar,X=da.formatDate,I=da.formatDates}function Qb(a){var b,d,e,f,j,o;for(b=a.length-1;b>0;b--){f=a[b];for(d=0;d<f.length;d++){j=f[d];for(e=0;e<a[b-1].length;e++){o=a[b-1][e];if(Bb(j,o))o.forward=Math.max(o.forward||0,(j.forward||0)+1)}}}}function nb(a,b,d){function e(l,
v){l=Y[l];if(typeof l=="object")return Ya(l,v||d);return l}function f(l,v){return b.trigger.apply(b,[l,v||Q].concat(Array.prototype.slice.call(arguments,2),[Q]))}function j(l){W={};var v,E=l.length,c;for(v=0;v<E;v++){c=l[v];if(W[c._id])W[c._id].push(c);else W[c._id]=[c]}}function o(l){return l.end?B(l.end):ea(l)}function q(l,v){p.push(v);if(x[l._id])x[l._id].push(v);else x[l._id]=[v]}function u(){p=[];x={}}function C(l,v){v.click(function(E){if(!v.hasClass("ui-draggable-dragging")&&!v.hasClass("ui-resizable-resizing"))return f("eventClick",
this,l,E)}).hover(function(E){f("eventMouseover",this,l,E)},function(E){f("eventMouseout",this,l,E)})}function K(l,v){s(l,v,"show")}function L(l,v){s(l,v,"hide")}function s(l,v,E){l=x[l._id];var c,N=l.length;for(c=0;c<N;c++)l[c][0]!=v[0]&&l[c][E]()}function H(l,v,E,c,N,M,g){var J=v.allDay,ga=v._id;pa(W[ga],E,c,N);f("eventDrop",l,v,E,c,N,function(){pa(W[ga],-E,-c,J);R(ga)},M,g);R(ga)}function ba(l,v,E,c,N,M){var g=v._id;U(W[g],E,c);f("eventResize",l,v,E,c,function(){U(W[g],-E,-c);R(g)},N,M);R(g)}function pa(l,
v,E,c){E=E||0;for(var N,M=l.length,g=0;g<M;g++){N=l[g];if(c!==$)N.allDay=c;ta(P(N.start,v,true),E);if(N.end)N.end=ta(P(N.end,v,true),E);ja(N,Y)}}function U(l,v,E){E=E||0;for(var c,N=l.length,M=0;M<N;M++){c=l[M];c.end=ta(P(o(c),v,true),E);ja(c,Y)}}var Q=this;Q.element=a;Q.calendar=b;Q.name=d;Q.opt=e;Q.trigger=f;Q.reportEvents=j;Q.eventEnd=o;Q.reportEventElement=q;Q.reportEventClear=u;Q.eventElementHandlers=C;Q.showEvents=K;Q.hideEvents=L;Q.eventDrop=H;Q.eventResize=ba;var ea=Q.defaultEventEnd,ja=b.normalizeEvent,
R=b.reportEventChange,W={},p=[],x={},Y=b.options}function tb(){function a(R,W){var p=e("isRTL"),x,Y=R.length,l,v,E,c,N,M="",g,J={},ga={},ma,T=[],ia=[];x=H();g=x.left;var la=x.right,va=C();K();var oa=Q();for(x=0;x<Y;x++){l=R[x];v=l.event;E="fc-event fc-event-hori ";if(p){if(l.isStart)E+="fc-corner-right ";if(l.isEnd)E+="fc-corner-left ";c=l.isEnd?ba(U(l.end.getDay()-1)):g;N=l.isStart?pa(U(l.start.getDay())):la}else{if(l.isStart)E+="fc-corner-left ";if(l.isEnd)E+="fc-corner-right ";c=l.isStart?ba(U(l.start.getDay())):
g;N=l.isEnd?pa(U(l.end.getDay()-1)):la}var sa="";if(v.color)sa="color:"+v.color+";";if(v.bgColor)sa+="background-color:"+v.bgColor+";";if(v.borderColor)sa+="border-color:"+v.borderColor+";";M+="<div class='"+E+v.className.join(" ")+"' style='position:absolute;z-index:8;left:"+c+"px'><a"+(v.url?" href='"+Ma(v.url)+"'":"")+(sa?" style='"+sa+"'":"")+">"+(!v.allDay&&l.isStart?"<span class='fc-event-time'>"+Ma(ja(v.start,v.end,e("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Ma(v.title)+
"</span></a>"+((v.resizable||v.resizable===$)&&(v.editable||v.editable===$&&e("editable"))&&!e("disableResizing")&&m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(p?"w":"e")+"'></div>":"")+"</div>";l.left=c;l.outerWidth=N-c}oa[0].innerHTML=M;M=oa.children();for(x=0;x<Y;x++){l=R[x];p=m(M[x]);v=l.event;g=f("eventRender",v,v,p);if(g===false)p.remove();else{if(g&&g!==true){p.remove();p=m(g).css({position:"absolute",left:l.left}).appendTo(oa)}l.element=p;if(v._id===W)ea(v,p,l);else p[0]._fci=
x;j(v,p)}}zb(oa,R,ea);for(x=0;x<Y;x++){l=R[x];if(p=l.element){v=J[W=l.key=Ab(p[0])];l.hsides=v===$?(J[W]=hb(p[0],true)):v}}for(x=0;x<Y;x++){l=R[x];if(p=l.element)p[0].style.width=Math.max(0,l.outerWidth-l.hsides)+"px"}for(x=0;x<Y;x++){l=R[x];if(p=l.element){v=ga[W=l.key];l.outerHeight=p[0].offsetHeight+(v===$?(ga[W]=Cb(p[0])):v)}}var da,X,I={0:0},k={0:0};for(ma=0;ma<va;ma++){for(X=J=0;X<7;X++){da=0;jQuery.each(R,function(w,F){if(F.row==ma&&F.start.getDay()==X){da=Math.max(da,F.level);I[F.level]=F.outerHeight||
0}});for(x=0;x<da;x++)k[x+1]=k[x]+I[x];jQuery.each(R,function(w,F){if(F.row==ma&&F.start.getDay()==X)F.top=k[F.level]});J=Math.max(J,k[da]+I[da])}T[ma]=s(ma).find("td:first div.fc-day-content > div");Fa(T[ma],J)}for(ma=0;ma<va;ma++)ia[ma]=T[ma][0].offsetTop;for(x=0;x<Y;x++){l=R[x];if(p=l.element){p[0].style.top=ia[l.row]+l.top+"px";v=l.event;f("eventAfterRender",v,v,p)}}}function b(R,W){if(!e("disableResizing")&&W.resizable){var p=L();W.resizable({handles:e("isRTL")?{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},
grid:p,minWidth:p/2,containment:d.element.parent().parent(),start:function(x,Y){W.css("z-index",9);q(R,W);f("eventResizeStart",this,R,x,Y)},stop:function(x,Y){f("eventResizeStop",this,R,x,Y);var l=Math.round((Oa(W)-Y.originalSize.width)/p);if(l)u(this,R,l,0,x,Y);else{W.css("z-index",8);o(R,W)}}})}}var d=this;d.renderDaySegs=a;d.resizableDayEvent=b;var e=d.opt,f=d.trigger,j=d.reportEventElement,o=d.showEvents,q=d.hideEvents,u=d.eventResize,C=d.getRowCnt,K=d.getColCnt,L=d.getColWidth,s=d.allDayTR,H=
d.allDayBounds,ba=d.colContentLeft,pa=d.colContentRight,U=d.dayOfWeekCol,Q=d.getDaySegmentContainer,ea=d.bindDaySeg,ja=d.calendar.formatDates}function pb(){function a(L,s,H){b();s||(s=q(L,H));u(L,s,H);d(L,s,H)}function b(L){if(K){K=false;C();o("unselect",null,L)}}function d(L,s,H,ba){K=true;o("select",null,L,s,H,ba)}function e(L){var s=f.cellDate,H=f.cellIsAllDay,ba=f.getHoverListener();if(L.which==1&&j("selectable")){b(L);var pa=this,U;ba.start(function(Q,ea){C();if(Q&&H(Q)){U=[s(ea),s(Q)].sort(yb);
u(U[0],U[1],true)}else U=null},L);m(document).one("mouseup",function(Q){ba.stop();if(U){+U[0]==+U[1]&&o("dayClick",pa,U[0],true,Q);d(U[0],U[1],true,Q)}})}}var f=this;f.select=a;f.unselect=b;f.reportSelection=d;f.daySelectionMousedown=e;var j=f.opt,o=f.trigger,q=f.defaultSelectionEnd,u=f.renderSelection,C=f.clearSelection,K=false;j("selectable")&&j("unselectAuto")&&m(document).mousedown(function(L){var s=j("unselectCancel");if(s)if(m(L.target).parents(s).length)return;b(L)})}function ob(){function a(j,
o){var q=f.shift();q||(q=m("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));q[0].parentNode!=o[0]&&q.appendTo(o);e.push(q.css(j).show());return q}function b(){for(var j;j=e.shift();)f.push(j.hide().unbind())}var d=this;d.renderOverlay=a;d.clearOverlays=b;var e=[],f=[]}function qb(a){var b=this,d,e;b.build=function(){d=[];e=[];a(d,e)};b.cell=function(f,j){var o=d.length,q=e.length,u,C=-1,K=-1;for(u=0;u<o;u++)if(j>=d[u][0]&&j<d[u][1]){C=u;break}for(u=0;u<q;u++)if(f>=e[u][0]&&f<
e[u][1]){K=u;break}return C>=0&&K>=0?{row:C,col:K}:null};b.rect=function(f,j,o,q,u){u=u.offset();return{top:d[f][0]-u.top,left:e[j][0]-u.left,width:e[q][1]-e[j][0],height:d[o][1]-d[f][0]}}}function rb(a){function b(q){q=a.cell(q.pageX,q.pageY);if(!q!=!o||q&&(q.row!=o.row||q.col!=o.col)){if(q){j||(j=q);f(q,j,q.row-j.row,q.col-j.col)}else f(q,j);o=q}}var d=this,e,f,j,o;d.start=function(q,u,C){f=q;j=o=null;a.build();b(u);e=C||"mousemove";m(document).bind(e,b)};d.stop=function(){m(document).unbind(e,
b);return o}}function sb(a){function b(o){return e[o]=e[o]||a(o)}var d=this,e={},f={},j={};d.left=function(o){return f[o]=f[o]===$?b(o).position().left:f[o]};d.right=function(o){return j[o]=j[o]===$?d.left(o)+Oa(b(o)):j[o]};d.clear=function(){e={};f={};j={}}}function Va(a,b,d){a.setFullYear(a.getFullYear()+b);d||Ja(a);return a}function Wa(a,b,d){if(+a){b=a.getMonth()+b;var e=B(a);e.setDate(1);e.setMonth(b);a.setMonth(b);for(d||Ja(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}
function P(a,b,d){if(+a){b=a.getDate()+b;var e=B(a);e.setHours(9);e.setDate(b);a.setDate(b);d||Ja(a);ib(a,e)}return a}function ib(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Sb)}function ta(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ja(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function B(a,b){if(b)return Ja(new Date(+a));return new Date(+a)}function wb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function ua(a,
b,d){for(b=b||1;!a.getDay()||d&&a.getDay()==1||!d&&a.getDay()==6;)P(a,b);return a}function Da(a,b){return Math.round((B(a,true)-B(b,true))/mb)}function lb(a,b,d,e){if(b!==$&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(d!==$&&d!=a.getMonth()){a.setDate(1);a.setMonth(d)}e!==$&&a.setDate(e)}function $a(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);if(b===$)b=true;return Db(a,
b)||(a?new Date(a):null)}return null}function Db(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var d=new Date(a[1],0,1);if(b||!a[14]){b=new Date(a[1],0,1,9,0);if(a[3]){d.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){d.setDate(a[5]);b.setDate(a[5])}ib(d,b);a[7]&&d.setHours(a[7]);a[8]&&d.setMinutes(a[8]);a[10]&&d.setSeconds(a[10]);a[12]&&d.setMilliseconds(Number("0."+a[12])*1E3);ib(d,
b)}else{d.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);d.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1;d=new Date(+d+b*60*1E3)}return d}function eb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}}function Ka(a,b,d){return Xa(a,
null,b,d)}function Xa(a,b,d,e){e=e||Qa;var f=a,j=b,o,q=d.length,u,C,K,L="";for(o=0;o<q;o++){u=d.charAt(o);if(u=="'")for(C=o+1;C<q;C++){if(d.charAt(C)=="'"){if(f){L+=C==o+1?"'":d.substring(o+1,C);o=C}break}}else if(u=="(")for(C=o+1;C<q;C++){if(d.charAt(C)==")"){o=Ka(f,d.substring(o+1,C),e);if(parseInt(o.replace(/\D/,"")))L+=o;o=C;break}}else if(u=="[")for(C=o+1;C<q;C++){if(d.charAt(C)=="]"){u=d.substring(o+1,C);o=Ka(f,u,e);if(o!=Ka(j,u,e))L+=o;o=C;break}}else if(u=="{"){f=b;j=a}else if(u=="}"){f=a;
j=b}else{for(C=q;C>o;C--)if(K=Tb[d.substring(o,C)]){if(f)L+=K(f,e);o=C-1;break}if(C==o)if(f)L+=u}}return L}function Pa(a){return a.end?Ub(a.end,a.allDay):P(B(a.start),1)}function Ub(a,b){a=B(a);return b||a.getHours()||a.getMinutes()?P(a,1):Ja(a)}function Vb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Bb(a,b){return a.end>b.start&&a.start<b.end}function db(a,b,d,e){var f=[],j,o=
a.length,q,u,C,K,L;for(j=0;j<o;j++){q=a[j];u=q.start;C=b[j];if(C>d&&u<e){if(u<d){u=B(d);K=false}else{u=u;K=true}if(C>e){C=B(e);L=false}else{C=C;L=true}f.push({event:q,start:u,end:C,isStart:K,isEnd:L,msLength:C-u})}}return f.sort(Vb)}function cb(a){var b=[],d,e=a.length,f,j,o,q;for(d=0;d<e;d++){f=a[d];for(j=0;;){o=false;if(b[j])for(q=0;q<b[j].length;q++)if(Bb(b[j][q],f)){o=true;break}if(o)j++;else break}if(b[j])b[j].push(f);else b[j]=[f]}return b}function zb(a,b,d){a.unbind("mouseover").mouseover(function(e){for(var f=
e.target,j;f!=this;){j=f;f=f.parentNode}if((f=j._fci)!==$){j._fci=$;j=b[f];d(j.event,j.element,j);m(e.target).trigger(e)}e.stopPropagation()})}function Aa(a,b,d){a.each(function(e,f){f.style.width=Math.max(0,b-hb(f,d))+"px"})}function Fa(a,b,d){a.each(function(e,f){f.style.height=Math.max(0,b-Ua(f,d))+"px"})}function hb(a,b){return(parseFloat(m.curCSS(a,"paddingLeft",true))||0)+(parseFloat(m.curCSS(a,"paddingRight",true))||0)+(parseFloat(m.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(m.curCSS(a,
"borderRightWidth",true))||0)+(b?Wb(a):0)}function Wb(a){return(parseFloat(m.curCSS(a,"marginLeft",true))||0)+(parseFloat(m.curCSS(a,"marginRight",true))||0)}function Ua(a,b){return(parseFloat(m.curCSS(a,"paddingTop",true))||0)+(parseFloat(m.curCSS(a,"paddingBottom",true))||0)+(parseFloat(m.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(m.curCSS(a,"borderBottomWidth",true))||0)+(b?Cb(a):0)}function Cb(a){return(parseFloat(m.curCSS(a,"marginTop",true))||0)+(parseFloat(m.curCSS(a,"marginBottom",true))||
0)}function Ta(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Ba(a){if(Ra)return a.innerHeight();return a.height()}function Oa(a){if(Ra)return a.innerWidth();return a.width()}function kb(){}function yb(a,b){return a-b}function Na(a){return(a<10?"0":"")+a}function Ya(a,b){if(a[b]!==$)return a[b];b=b.split(/(?=[A-Z])/);for(var d=b.length-1,e;d>=0;d--){e=a[b[d].toLowerCase()];if(e!==$)return e}return a[""]}function Ma(a){return a.replace(/&/g,"&amp;").replace(/</g,
"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ab(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function Za(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Qa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,
startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday",
"Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Xb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",
prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ha=m.fullCalendar={version:"1.4.9-gcalendar"},Ia=Ha.views={},Ra=false;if(m.ui&&m.browser.msie&&parseInt(m.browser.version,10)>=9){Ra=true;var Yb=m.ui.mouse.prototype._mouseMove;m.ui.mouse.prototype._mouseMove=function(a){a.button=1;Yb.apply(this,[a])}}m.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),d;this.each(function(){var f=
m.data(this,"fullCalendar");if(f&&m.isFunction(f[a])){f=f[a].apply(f,b);if(d===$)d=f;a=="destroy"&&m.removeData(this,"fullCalendar")}});if(d!==$)return d;return this}var e=a.eventSources||[];delete a.eventSources;if(a.events){e.push(a.events);delete a.events}a=m.extend(true,{},Qa,a.isRTL||a.isRTL===$&&Qa.isRTL?Xb:{},a);this.each(function(f,j){f=m(j);j=new Eb(f,a,e);f.data("fullCalendar",j);j.render()});return this};var Hb=1;Ia.month=Ib;Ia.basicWeek=Jb;Ia.basicDay=Kb;var bb;jb({weekMode:"fixed"});
Ia.agendaWeek=Mb;Ia.agendaDay=Nb;jb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ha.addDays=P;Ha.cloneDate=B;Ha.parseDate=$a;Ha.parseISO8601=Db;Ha.parseTime=eb;Ha.formatDate=Ka;Ha.formatDates=Xa;var Ca=["sun","mon","tue","wed","thu","fri","sat"],mb=864E5,Sb=36E5,Rb=6E4,Tb={s:function(a){return a.getSeconds()},ss:function(a){return Na(a.getSeconds())},
m:function(a){return a.getMinutes()},mm:function(a){return Na(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Na(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Na(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Na(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Na(a.getMonth()+1)},MMM:function(a,
b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ka(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st",
"nd","rd"][a%10-1]||"th"},w:function(a){return a.getWeek()}};if(Date.prototype.getWeek===$)Date.prototype.getWeek=function(){var a=new Date(this.getFullYear(),0,4,this.getHours()),b=(a.getDay()-1+7)%7,d=Math.round((this-a)/864E5);b=Math.floor((d+b)/7)+1;d=(this.getDay()-1+7)%7;if(this.getMonth()==11&&this.getDate()>=28){a=new Date(this.getFullYear()+1,0,4,this.getHours());b=(a.getDay()-1+7)%7;if(d<b)return 1;b=new Date(this.valueOf()-6048E5);return b.getWeek()+1}if(b==0&&d>3&&this.getMonth()==0){b=
new Date(this.valueOf()-6048E5);return b.getWeek()+1}return b}})(jQuery);

/*

 FullCalendar v1.4.7
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, required jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2009 Adam Shaw
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

 Date: Fri Sep 17 03:53:31 2010 +0200

*/
(function(p,K){function Ia(a,b){a._id=a._id||(a.id===K?"_fc"+Eb++:a.id+"");if(a.date){if(!a.start)a.start=a.date;delete a.date}a._start=q(a.start=ib(a.start));a.end=ib(a.end);if(a.end&&a.end<=a.start)a.end=null;a._end=a.end?q(a.end):null;if(a.allDay===K)a.allDay=b.allDayDefault;if(a.className){if(typeof a.className=="string")a.className=a.className.split(/\s+/)}else a.className=[]}function Wa(a,b,f,c){function g(m,e,j,r){N=m;L=e;ca=b.theme?"ui":"fc";O=b.weekends?0:1;sa=b.firstDay;if(ta=b.isRTL){la=
-1;R=L-1}else{la=1;R=0}var s=A.start.getMonth(),I=Ga(new Date),E,B=q(A.visStart);if(V){t();e=V.find("tr").length;if(N<e)V.find("tr:gt("+(N-1)+")").remove();else if(N>e){m="";for(e=e;e<N;e++){m+="<tr class='fc-week"+e+"'>";for(E=0;E<L;E++){m+="<td class='fc-"+za[B.getDay()]+" "+ca+"-state-default fc-new fc-day"+(e*L+E)+(E==R?" fc-leftmost":"")+"'>"+(r?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";C(B,1);O&&da(B)}m+="</tr>"}V.append(m)}fa(V.find("td.fc-new").removeClass("fc-new"));
B=q(A.visStart);V.find("td").each(function(){var Y=p(this);if(N>1)B.getMonth()==s?Y.removeClass("fc-other-month"):Y.addClass("fc-other-month");+B==+I?Y.removeClass("fc-not-today").addClass("fc-today").addClass(ca+"-state-highlight"):Y.addClass("fc-not-today").removeClass("fc-today").removeClass(ca+"-state-highlight");Y.find("div.fc-day-number").text(B.getDate());C(B,1);O&&da(B)});if(N==1){B=q(A.visStart);x.find("th").each(function(){p(this).text(oa(B,j,b));this.className=this.className.replace(/^fc-\w+(?= )/,
"fc-"+za[B.getDay()]);C(B,1);O&&da(B)});B=q(A.visStart);V.find("td").each(function(){this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+za[B.getDay()]);C(B,1);O&&da(B)})}}else{var J=p("<table/>").appendTo(a);m="<thead><tr>";for(e=0;e<L;e++){m+="<th class='fc-"+za[B.getDay()]+" "+ca+"-state-default"+(e==R?" fc-leftmost":"")+"'>"+oa(B,j,b)+"</th>";C(B,1);O&&da(B)}x=p(m+"</tr></thead>").appendTo(J);m="<tbody>";B=q(A.visStart);for(e=0;e<N;e++){m+="<tr class='fc-week"+e+"'>";for(E=0;E<L;E++){m+=
"<td class='fc-"+za[B.getDay()]+" "+ca+"-state-default fc-day"+(e*L+E)+(E==R?" fc-leftmost":"")+(N>1&&B.getMonth()!=s?" fc-other-month":"")+(+B==+I?" fc-today "+ca+"-state-highlight":" fc-not-today")+"'>"+(r?"<div class='fc-day-number'>"+B.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";C(B,1);O&&da(B)}m+="</tr>"}V=p(m+"</tbody>").appendTo(J);fa(V.find("td"));P=p("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function o(m){Fa=
m;m=V.find("tr td:first-child");var e=Fa-x.outerHeight(),j;if(b.weekMode=="variable")j=e=Math.floor(e/(N==1?2:6));else{j=Math.floor(e/N);e=e-j*(N-1)}if(Xa===K){var r=V.find("tr:first").find("td:first");r.outerHeight(j);Xa=j!=r.outerHeight()}if(Xa){m.slice(0,-1).height(j);m.slice(-1).height(e)}else{Sa(m.slice(0,-1),j);Sa(m.slice(-1),e)}}function k(m){pa=m;ia.clear();Ja(x.find("th").slice(0,-1),Aa=Math.floor(pa/L))}function y(m){A.reportEvents(wa=m);M(H(m))}function w(m){t();M(H(wa),m)}function t(){A._clearEvents();
P.empty()}function H(m){var e=q(A.visStart),j=C(q(e),L),r=p.map(m,Pa),s,I,E,B,J,Y,Ba=[];for(s=0;s<N;s++){I=Ya(A.sliceSegs(m,r,e,j));for(E=0;E<I.length;E++){B=I[E];for(J=0;J<B.length;J++){Y=B[J];Y.row=s;Y.level=E;Ba.push(Y)}}C(e,7);C(j,7)}return Ba}function M(m,e){jb(m,N,A,0,pa,function(j){return V.find("tr:eq("+j+")")},ia.left,ia.right,P,ua,e)}function ua(m,e,j){A.eventElementHandlers(m,e);if(m.editable||m.editable===K&&b.editable){G(m,e);j.isEnd&&A.resizableDayEvent(m,e,Aa)}}function G(m,e){if(!b.disableDragging&&
e.draggable){var j;e.draggable({zIndex:9,delay:50,opacity:A.option("dragOpacity"),revertDuration:b.dragRevertDuration,start:function(r,s){A.trigger("eventDragStart",e,m,r,s);A.hideEvents(m,e);$.start(function(I,E,B,J){e.draggable("option","revert",!I||!B&&!J);ga();if(I){j=B*7+J*la;ma(C(q(m.start),j),C(Pa(m),j))}else j=0},r,"drag")},stop:function(r,s){$.stop();ga();A.trigger("eventDragStop",e,m,r,s);if(j){e.find("a").removeAttr("href");A.eventDrop(this,m,j,0,m.allDay,r,s)}else{p.browser.msie&&e.css("filter",
"");A.showEvents(m,e)}}})}}function fa(m){m.click(D).mousedown(ja)}function D(m){if(!A.option("selectable")){var e=parseInt(this.className.match(/fc\-day(\d+)/)[1]);e=C(q(A.visStart),Math.floor(e/L)*7+e%L);A.trigger("dayClick",this,e,true,m)}}function Q(m,e,j,r){aa=true;A.trigger("select",A,m,e,j,r)}function ha(m){if(aa){ga();aa=false;A.trigger("unselect",A,m)}}function ma(m,e){for(var j=q(A.visStart),r=C(q(j),L),s=0;s<N;s++){var I=new Date(Math.max(j,m)),E=new Date(Math.min(r,e));if(I<E){var B;if(ta){B=
Ca(E,j)*la+R+1;I=Ca(I,j)*la+R+1}else{B=Ca(I,j);I=Ca(E,j)}fa(qa(s,B,s,I-1))}C(j,7);C(r,7)}}function qa(m,e,j,r){m=T.rect(m,e,j,r,a);return A.renderOverlay(m,a)}function ga(){A.clearOverlays()}function W(m){return C(q(A.visStart),m.row*7+m.col*la+R)}var ca,sa,O,ta,la,R,pa,Fa,N,L,Aa,x,V,wa=[],P,ia=new kb(function(m){return V.find("td:eq("+(m-Math.max(sa,O)+L)%L+") div div")}),A=p.extend(this,lb,f,{renderGrid:g,renderEvents:y,rerenderEvents:w,clearEvents:t,setHeight:o,setWidth:k,defaultEventEnd:function(m){return q(m.start)}});
A.name=c;A.init(a,b);mb(a.addClass("fc-grid"));var T=new nb(function(m,e){var j,r,s,I=V.find("tr:first td");if(ta)I=p(I.get().reverse());I.each(function(E,B){j=p(B);r=j.offset().left;if(E)s[1]=r;s=[r];e[E]=s});s[1]=r+j.outerWidth();V.find("tr").each(function(E,B){j=p(B);r=j.offset().top;if(E)s[1]=r;s=[r];m[E]=s});s[1]=r+j.outerHeight()}),$=new ob(T),aa=false,ja=pb(A,$,W,function(){return true},ma,ga,Q,ha);A.select=function(m,e,j){T.build();ha();e||(e=q(m));ma(m,C(q(e),1));Q(m,e,j)};A.unselect=ha;
qb(A,ha);A.dragStart=function(m,e){$.start(function(j){ga();j&&qa(j.row,j.col,j.row,j.col)},e)};A.dragStop=function(m,e,j){var r=$.stop();ga();if(r){r=W(r);A.trigger("drop",m,r,true,e,j)}}}function jb(a,b,f,c,g,o,k,y,w,t,H){var M=f.options,ua=M.isRTL,G,fa=a.length,D,Q,ha,ma,qa,ga="",W={},ca={},sa=[],O=[];for(G=0;G<fa;G++){D=a[G];Q=D.event;ha="fc-event fc-event-hori ";if(ua){if(D.isStart)ha+="fc-corner-right ";if(D.isEnd)ha+="fc-corner-left ";ma=D.isEnd?k(D.end.getDay()-1):c;qa=D.isStart?y(D.start.getDay()):
g}else{if(D.isStart)ha+="fc-corner-left ";if(D.isEnd)ha+="fc-corner-right ";ma=D.isStart?k(D.start.getDay()):c;qa=D.isEnd?y(D.end.getDay()-1):g}ga+="<div class='"+ha+Q.className.join(" ")+"' style='position:absolute;z-index:8;left:"+ma+"px'><a"+(Q.url?" href='"+Ka(Q.url)+"'":"")+">"+(!Q.allDay&&D.isStart?"<span class='fc-event-time'>"+Ka(Ha(Q.start,Q.end,f.option("timeFormat"),M))+"</span>":"")+"<span class='fc-event-title'>"+Ka(Q.title)+"</span></a>"+((Q.editable||Q.editable===K&&M.editable)&&!M.disableResizing&&
p.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(ua?"w":"e")+"'></div>":"")+"</div>";D.left=ma;D.outerWidth=qa-ma}w[0].innerHTML=ga;g=w.children();for(G=0;G<fa;G++){D=a[G];c=p(g[G]);Q=D.event;k=f.trigger("eventRender",Q,Q,c);if(k===false)c.remove();else{if(k&&k!==true){c.remove();c=p(k).css({position:"absolute",left:D.left}).appendTo(w)}D.element=c;if(Q._id===H)t(Q,c,D);else c[0]._fci=G;f.reportEventElement(Q,c)}}rb(w,a,t);for(G=0;G<fa;G++){D=a[G];if(c=D.element){t=W[w=D.key=sb(c[0])];
D.hsides=t===K?(W[w]=Za(c[0],true)):t}}for(G=0;G<fa;G++){D=a[G];if(c=D.element)c[0].style.width=D.outerWidth-D.hsides+"px"}for(G=0;G<fa;G++){D=a[G];if(c=D.element){t=ca[w=D.key];D.outerHeight=c[0].offsetHeight+(t===K?(ca[w]=tb(c[0])):t)}}for(W=G=0;W<b;W++){for(ca=w=t=0;G<fa&&(D=a[G]).row==W;){if(D.level!=w){ca+=t;t=0;w++}t=Math.max(t,D.outerHeight||0);D.top=ca;G++}sa[W]=o(W).find("td:first div.fc-day-content > div");sa[W].height(ca+t)}for(W=0;W<b;W++)O[W]=sa[W][0].offsetTop;for(G=0;G<fa;G++){D=a[G];
if(c=D.element){c[0].style.top=O[D.row]+D.top+"px";Q=D.event;f.trigger("eventAfterRender",Q,Q,c)}}}function ub(a,b,f,c){function g(d,i){m=d;na=b.theme?"ui":"fc";La=b.weekends?0:1;vb=b.firstDay;if(Ta=b.isRTL){Z=-1;va=m-1}else{Z=1;va=0}Da=wb(b.minTime);Ua=wb(b.maxTime);d=Ta?C(q(v.visEnd),-1):q(v.visStart);var h=q(d),n=Ga(new Date);if(A){G();A.find("tr:first th").slice(1,-1).each(function(){p(this).text(oa(h,i,b));this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+za[h.getDay()]);C(h,Z);La&&
da(h,Z)});h=q(d);ja.find("td").each(function(){this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+za[h.getDay()]);+h==+n?p(this).removeClass("fc-not-today").addClass("fc-today").addClass(na+"-state-highlight"):p(this).addClass("fc-not-today").removeClass("fc-today").removeClass(na+"-state-highlight");C(h,Z);La&&da(h,Z)})}else{var l,u,z=b.slotMinutes%15==0,F="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(b.allDaySlot?"":" fc-last")+
"'><th class='fc-leftmost "+na+"-state-default'>&nbsp;</th>";for(l=0;l<m;l++){F+="<th class='fc-"+za[h.getDay()]+" "+na+"-state-default'>"+oa(h,i,b)+"</th>";C(h,Z);La&&da(h,Z)}F+="<th class='"+na+"-state-default'>&nbsp;</th></tr>";if(b.allDaySlot)F+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+na+"-state-default'>"+b.allDayText+"</th><td colspan='"+m+"' class='"+na+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+na+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+
(m+2)+"' class='"+na+"-state-default fc-leftmost'><div/></th></tr>";F+="</table></div>";A=p(F).appendTo(a);w(A.find("td"));Y=p("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(A);h=xb();var U=ba(q(h),Ua);ba(h,Da);F="<table>";for(l=0;h<U;l++){u=h.getMinutes();F+="<tr class='"+(!l?"fc-first":!u?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+na+"-state-default'>"+(!z||!u?oa(h,b.axisFormat):"&nbsp;")+"</th><td class='fc-slot"+l+" "+na+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";
ba(h,b.slotMinutes);e++}F+="</table>";T=p("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append($=p("<div style='position:relative;overflow:hidden'>").append(aa=p(F))).appendTo(a);t(T.find("td"));Ba=p("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo($);h=q(d);F="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(l=0;l<m;l++){F+="<td class='fc-"+za[h.getDay()]+" "+na+"-state-default "+
(!l?"fc-leftmost ":"")+(+h==+n?na+"-state-highlight fc-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";C(h,Z);La&&da(h,Z)}F+="</tr></table></div>";ja=p(F).appendTo(a)}}function o(){var d=xb(),i=q(d);i.setHours(b.firstHour);var h=O(d,i)+1;d=function(){T.scrollTop(h)};d();setTimeout(d,0)}function k(d,i){E=d;$a={};T.outerHeight(d-A.outerHeight());s=T.find("tr:first div").innerHeight()+1;ja.css({top:A.find("tr").outerHeight(),height:d});d=T.find("table:first").innerHeight();
d<T.innerHeight()&&T.innerHeight(d);i&&o()}function y(d){I=d;Qa.clear();T.width(d);aa.width("");d=A.find("tr:first th");var i=ja.find("td"),h=T[0].clientWidth;aa.width(h);j=0;var n=A.find("tr:lt(2) th:first").add(T.find("tr:first th"));n.width("");n.each(function(){j=Math.max(j,p(this).outerWidth())});Ja(n,j);r=Math.floor((h-j)/m);Ja(i.slice(0,-1),r);Ja(d.slice(1,-2),r);if(T[0].scrollHeight!=T[0].clientHeight)Ja(d.slice(-2,-1),h-j-r*(m-1));else{d.slice(-1).hide();p("tr.fc-all-day th").slice(-1).hide()}ja.css({left:j,
width:h-j})}function w(d){d.click(H).mousedown(Fb)}function t(d){d.click(H).mousedown(ta)}function H(d){if(!v.option("selectable")){var i=Math.min(m-1,Math.floor((d.pageX-ja.offset().left)/r));i=C(q(v.visStart),i*Z+va);var h=this.className.match(/fc-slot(\d+)/);if(h){h=parseInt(h[1])*b.slotMinutes;var n=Math.floor(h/60);i.setHours(n);i.setMinutes(h%60+Da);v.trigger("dayClick",this,i,false,d)}else v.trigger("dayClick",this,i,true,d)}}function M(d,i){v.reportEvents(J=d);var h,n=d.length,l=[],u=[];for(h=
0;h<n;h++)d[h].allDay?l.push(d[h]):u.push(d[h]);Q(fa(l),i);ha(D(u),i)}function ua(d){G();M(J,d)}function G(){v._clearEvents();Y.empty();Ba.empty()}function fa(d){d=Ya(v.sliceSegs(d,p.map(d,Pa),v.visStart,v.visEnd));var i,h=d.length,n,l,u,z=[];for(i=0;i<h;i++){n=d[i];for(l=0;l<n.length;l++){u=n[l];u.row=0;u.level=i;z.push(u)}}return z}function D(d){var i=ba(q(v.visStart),Da),h=p.map(d,V),n,l,u,z,F,U,S=[];for(n=0;n<m;n++){l=Ya(v.sliceSegs(d,h,i,ba(q(i),Ua-Da)));Gb(l);for(u=0;u<l.length;u++){z=l[u];
for(F=0;F<z.length;F++){U=z[F];U.col=n;U.level=u;S.push(U)}}C(i,1,true)}return S}function Q(d,i){if(b.allDaySlot){jb(d,1,v,j,I,function(){return A.find("tr.fc-all-day")},function(h){return j+Qa.left(wa(h))},function(h){return j+Qa.right(wa(h))},Y,qa,i);k(E)}}function ha(d,i){var h,n=d.length,l,u,z,F,U,S,X,ea,ka,xa,ab="",Ma={},yb={};for(h=0;h<n;h++){l=d[h];u=l.event;z="fc-event fc-event-vert ";if(l.isStart)z+="fc-corner-top ";if(l.isEnd)z+="fc-corner-bottom ";F=O(l.start,l.start);U=O(l.start,l.end);
S=l.col;X=l.level;ea=l.forward||0;ka=j+Qa.left(S*Z+va);xa=j+Qa.right(S*Z+va)-ka;xa=Math.min(xa-6,xa*0.95);S=X?xa/(X+ea+1):ea?(xa/(ea+1)-6)*2:xa;X=ka+xa/(X+ea+1)*X*Z+(Ta?xa-S:0);l.top=F;l.left=X;l.outerWidth=S;l.outerHeight=U-F;ab+=ma(u,l,z)}Ba[0].innerHTML=ab;F=Ba.children();for(h=0;h<n;h++){l=d[h];u=l.event;z=p(F[h]);U=v.trigger("eventRender",u,u,z);if(U===false)z.remove();else{if(U&&U!==true){z.remove();z=p(U).css({position:"absolute",top:l.top,left:l.left}).appendTo(Ba)}l.element=z;if(u._id===
i)ga(u,z,l);else z[0]._fci=h;v.reportEventElement(u,z)}}rb(Ba,d,ga);for(h=0;h<n;h++){l=d[h];if(z=l.element){i=Ma[u=l.key=sb(z[0])];l.vsides=i===K?(Ma[u]=bb(z[0],true)):i;i=yb[u];l.hsides=i===K?(yb[u]=Za(z[0],true)):i;u=z.find("span.fc-event-title");if(u.length)l.titleTop=u[0].offsetTop}}for(h=0;h<n;h++){l=d[h];if(z=l.element){z[0].style.width=l.outerWidth-l.hsides+"px";z[0].style.height=(Ma=l.outerHeight-l.vsides)+"px";u=l.event;if(l.titleTop!==K&&Ma-l.titleTop<10){z.find("span.fc-event-time").text(oa(u.start,
v.option("timeFormat"))+" - "+u.title);z.find("span.fc-event-title").remove()}v.trigger("eventAfterRender",u,u,z)}}}function ma(d,i,h){return"<div class='"+h+d.className.join(" ")+"' style='position:absolute;z-index:8;top:"+i.top+"px;left:"+i.left+"px'><a"+(d.url?" href='"+Ka(d.url)+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Ka(Ha(d.start,d.end,v.option("timeFormat")))+"</span><span class='fc-event-title'>"+Ka(d.title)+"</span></a>"+((d.editable||d.editable===K&&b.editable)&&
!b.disableResizing&&p.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":"")+"</div>"}function qa(d,i,h){v.eventElementHandlers(d,i);if(d.editable||d.editable===K&&b.editable){W(d,i,h.isStart);h.isEnd&&v.resizableDayEvent(d,i,r)}}function ga(d,i,h){v.eventElementHandlers(d,i);if(d.editable||d.editable===K&&b.editable){var n=i.find("span.fc-event-time");ca(d,i,n);h.isEnd&&sa(d,i,n)}}function W(d,i,h){if(!b.disableDragging&&i.draggable){var n,l=true,u;i.draggable({zIndex:9,opacity:v.option("dragOpacity",
"month"),revertDuration:b.dragRevertDuration,start:function(F,U){v.trigger("eventDragStart",i,d,F,U);v.hideEvents(d,i);n=i.outerWidth();Ea.start(function(S,X,ea,ka){i.draggable("option","revert",!S||!ea&&!ka);x();if(S){u=ka*Z;if(S.row){if(h&&l){Sa(i.width(r-10),s*Math.round((d.end?(d.end-d.start)/Hb:b.defaultEventMinutes)/b.slotMinutes));i.draggable("option","grid",[r,1]);l=false}}else{N(C(q(d.start),u),C(Pa(d),u));z()}}},F,"drag")},stop:function(F,U){var S=Ea.stop();x();v.trigger("eventDragStop",
i,d,F,U);if(S&&(!l||u)){i.find("a").removeAttr("href");S=0;l||(S=Math.round((i.offset().top-$.offset().top)/s)*b.slotMinutes+Da-(d.start.getHours()*60+d.start.getMinutes()));v.eventDrop(this,d,u,S,l,F,U)}else{z();p.browser.msie&&i.css("filter","");v.showEvents(d,i)}}});function z(){if(!l){i.width(n).height("").draggable("option","grid",null);l=true}}}}function ca(d,i,h){if(!b.disableDragging&&i.draggable){var n,l=false,u,z,F;i.draggable({zIndex:9,scroll:false,grid:[r,s],axis:m==1?"y":false,opacity:v.option("dragOpacity"),
revertDuration:b.dragRevertDuration,start:function(X,ea){v.trigger("eventDragStart",i,d,X,ea);v.hideEvents(d,i);p.browser.msie&&i.find("span.fc-event-bg").hide();n=i.position();z=F=0;Ea.start(function(ka,xa,ab,Ma){i.draggable("option","revert",!ka);x();if(ka){u=Ma*Z;if(b.allDaySlot&&!ka.row){if(!l){l=true;h.hide();i.draggable("option","grid",null)}N(C(q(d.start),u),C(Pa(d),u))}else S()}},X,"drag")},drag:function(X,ea){z=Math.round((ea.position.top-n.top)/s)*b.slotMinutes;if(z!=F){l||U(z);F=z}},stop:function(X,
ea){var ka=Ea.stop();x();v.trigger("eventDragStop",i,d,X,ea);if(ka&&(u||z||l))v.eventDrop(this,d,u,l?0:z,l,X,ea);else{S();i.css(n);U(0);p.browser.msie&&i.css("filter","").find("span.fc-event-bg").css("display","");v.showEvents(d,i)}}});function U(X){var ea=ba(q(d.start),X),ka;if(d.end)ka=ba(q(d.end),X);h.text(Ha(ea,ka,v.option("timeFormat")))}function S(){if(l){h.css("display","");i.draggable("option","grid",[r,s]);l=false}}}}function sa(d,i,h){if(!b.disableResizing&&i.resizable){var n,l;i.resizable({handles:{s:"div.ui-resizable-s"},
grid:s,start:function(u,z){n=l=0;v.hideEvents(d,i);p.browser.msie&&p.browser.version=="6.0"&&i.css("overflow","hidden");i.css("z-index",9);v.trigger("eventResizeStart",this,d,u,z)},resize:function(u,z){n=Math.round((Math.max(s,i.outerHeight())-z.originalSize.height)/s);if(n!=l){h.text(Ha(d.start,!n&&!d.end?null:ba(v.eventEnd(d),b.slotMinutes*n),v.option("timeFormat")));l=n}},stop:function(u,z){v.trigger("eventResizeStop",this,d,u,z);if(n)v.eventResize(this,d,0,b.slotMinutes*n,u,z);else{i.css("z-index",
8);v.showEvents(d,i)}}})}}function O(d,i){d=q(d,true);if(i<ba(q(d),Da))return 0;if(i>=ba(q(d),Ua))return $.innerHeight();d=b.slotMinutes;i=i.getHours()*60+i.getMinutes()-Da;var h=Math.floor(i/d),n=$a[h];if(n===K)n=$a[h]=T.find("tr:eq("+h+") td div")[0].offsetTop;return Math.max(0,Math.round(n-1+s*(i%d/d)))}function ta(d){if(v.option("selectable")){R(d);var i=this,h;Ea.start(function(n,l){Fa();if(n&&n.col==l.col&&!ia(n)){l=P(l);n=P(n);h=[l,ba(q(l),b.slotMinutes),n,ba(q(n),b.slotMinutes)].sort(zb);
pa(h[0],h[3])}else h=null},d);p(document).one("mouseup",function(n){Ea.stop();if(h){+h[0]==+h[1]&&v.trigger("dayClick",i,h[0],false,n);la(h[0],h[3],false,n)}})}}function la(d,i,h,n){cb=true;v.trigger("select",v,d,i,h,n)}function R(d){if(cb){Fa();cb=false;v.trigger("unselect",v,d)}}function pa(d,i){var h=v.option("selectHelper");if(h){var n=Ca(d,v.visStart)*Z+va;if(n>=0&&n<m){n=Ra.rect(0,n,0,n,$);var l=O(d,d),u=O(d,i);if(u>l){n.top=l;n.height=u-l;n.left+=2;n.width-=5;if(p.isFunction(h)){if(d=h(d,i)){n.position=
"absolute";n.zIndex=8;ra=p(d).css(n).appendTo($)}}else{ra=p(ma({title:"",start:d,end:i,className:[],editable:false},n,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));p.browser.msie&&ra.find("span.fc-event-bg").hide();ra.css("opacity",v.option("dragOpacity"))}if(ra){t(ra);$.append(ra);Ja(ra,n.width,true);Sa(ra,n.height,true)}}}}else Aa(d,i)}function Fa(){x();if(ra){ra.remove();ra=null}}function N(d,i){var h;if(Ta){h=Ca(i,v.visStart)*Z+va+1;d=Ca(d,v.visStart)*Z+va+1}else{h=Ca(d,v.visStart);
d=Ca(i,v.visStart)}h=Math.max(0,h);d=Math.min(m,d);h<d&&w(L(0,h,0,d-1))}function L(d,i,h,n){d=Ra.rect(d,i,h,n,A);return v.renderOverlay(d,A)}function Aa(d,i){for(var h=q(v.visStart),n=C(q(h),1),l=0;l<m;l++){var u=new Date(Math.max(h,d)),z=new Date(Math.min(n,i));if(u<z){var F=l*Z+va;F=Ra.rect(0,F,0,F,$);u=O(h,u);z=O(h,z);F.top=u;F.height=z-u;t(v.renderOverlay(F,$))}C(h,1);C(n,1)}}function x(){v.clearOverlays()}function V(d){return d.end?q(d.end):ba(q(d.start),b.defaultEventMinutes)}function wa(d){return(d-
Math.max(vb,La)+m)%m*Z+va}function P(d){var i=C(q(v.visStart),d.col*Z+va);d=d.row;b.allDaySlot&&d--;d>=0&&ba(i,Da+d*b.slotMinutes);return i}function ia(d){return b.allDaySlot&&!d.row}var A,T,$,aa,ja,m,e=0,j,r,s,I,E,B,J=[],Y,Ba,na,vb,La,Ta,Z,va,Da,Ua,Qa=new kb(function(d){return ja.find("td:eq("+d+") div div")}),$a={},v=p.extend(this,lb,f,{renderAgenda:g,renderEvents:M,rerenderEvents:ua,clearEvents:G,setHeight:k,setWidth:y,beforeHide:function(){B=T.scrollTop()},afterShow:function(){T.scrollTop(B)},
defaultEventEnd:function(d){var i=q(d.start);if(d.allDay)return i;return ba(i,b.defaultEventMinutes)}});v.name=c;v.init(a,b);mb(a.addClass("fc-agenda"));var Ra=new nb(function(d,i){function h(X){return Math.max(F,Math.min(U,X))}var n,l,u;ja.find("td").each(function(X,ea){n=p(ea);l=n.offset().left;if(X)u[1]=l;u=[l];i[X]=u});u[1]=l+n.outerWidth();if(b.allDaySlot){n=A.find("td");l=n.offset().top;d[0]=[l,l+n.outerHeight()]}for(var z=$.offset().top,F=T.offset().top,U=F+T.outerHeight(),S=0;S<e;S++)d.push([h(z+
s*S),h(z+s*(S+1))])}),Ea=new ob(Ra),cb=false,Fb=pb(v,Ea,P,ia,N,x,la,R);v.select=function(d,i,h){Ra.build();R();if(h){if(b.allDaySlot){i||(i=q(d));N(d,C(q(i),1))}}else{i||(i=ba(q(d),b.slotMinutes));pa(d,i)}la(d,i,h)};v.unselect=R;qb(v,R);var ra;v.dragStart=function(d,i){Ea.start(function(h){x();if(h)if(ia(h))L(h.row,h.col,h.row,h.col);else{h=P(h);var n=ba(q(h),b.defaultEventMinutes);Aa(h,n)}},i)};v.dragStop=function(d,i,h){var n=Ea.stop();x();n&&v.trigger("drop",d,P(n),ia(n),i,h)}}function Gb(a){var b,
f,c,g,o,k;for(b=a.length-1;b>0;b--){g=a[b];for(f=0;f<g.length;f++){o=g[f];for(c=0;c<a[b-1].length;c++){k=a[b-1][c];if(Ab(o,k))k.forward=Math.max(k.forward||0,(o.forward||0)+1)}}}}function rb(a,b,f){a.unbind("mouseover").mouseover(function(c){for(var g=c.target,o;g!=this;){o=g;g=g.parentNode}if((g=o._fci)!==K){o._fci=K;o=b[g];f(o.event,o.element,o);p(c.target).trigger(c)}c.stopPropagation()})}function Ya(a){var b=[],f,c=a.length,g,o,k,y;for(f=0;f<c;f++){g=a[f];for(o=0;;){k=false;if(b[o])for(y=0;y<
b[o].length;y++)if(Ab(b[o][y],g)){k=true;break}if(k)o++;else break}if(b[o])b[o].push(g);else b[o]=[g]}return b}function Ib(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Ab(a,b){return a.end>b.start&&a.start<b.end}function pb(a,b,f,c,g,o,k,y){return function(w){if(a.option("selectable")){y(w);var t=this,H;b.start(function(M,ua){o();if(M&&c(M)){H=[f(ua),f(M)].sort(zb);g(H[0],C(q(H[1]),
1),true)}else H=null},w);p(document).one("mouseup",function(M){b.stop();if(H){+H[0]==+H[1]&&a.trigger("dayClick",t,H[0],true,M);k(H[0],H[1],true,M)}})}}}function qb(a,b){a.option("selectable")&&a.option("unselectAuto")&&p(document).mousedown(function(f){var c=a.option("unselectCancel");if(c)if(p(f.target).parents(c).length)return;b(f)})}function db(a,b,f){a.setFullYear(a.getFullYear()+b);f||Ga(a);return a}function eb(a,b,f){if(+a){b=a.getMonth()+b;var c=q(a);c.setDate(1);c.setMonth(b);a.setMonth(b);
for(f||Ga(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+(a<c?1:-1))}return a}function C(a,b,f){if(+a){b=a.getDate()+b;var c=q(a);c.setHours(9);c.setDate(b);a.setDate(b);f||Ga(a);fb(a,c)}return a}function fb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Jb)}function ba(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ga(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function q(a,b){if(b)return Ga(new Date(+a));return new Date(+a)}function xb(){var a=
0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function da(a,b,f){for(b=b||1;!a.getDay()||f&&a.getDay()==1||!f&&a.getDay()==6;)C(a,b);return a}function Ca(a,b){return Math.round((q(a,true)-q(b,true))/Bb)}function Cb(a,b,f,c){if(b!==K&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(f!==K&&f!=a.getMonth()){a.setDate(1);a.setMonth(f)}c!==K&&a.setDate(c)}function Ja(a,b,f){a.each(function(c,g){g.style.width=b-Za(g,f)+"px"})}function Sa(a,b,f){a.each(function(c,g){g.style.height=
b-bb(g,f)+"px"})}function Za(a,b){return(parseFloat(jQuery.curCSS(a,"paddingLeft",true))||0)+(parseFloat(jQuery.curCSS(a,"paddingRight",true))||0)+(parseFloat(jQuery.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(jQuery.curCSS(a,"borderRightWidth",true))||0)+(b?Kb(a):0)}function Kb(a){return(parseFloat(jQuery.curCSS(a,"marginLeft",true))||0)+(parseFloat(jQuery.curCSS(a,"marginRight",true))||0)}function bb(a,b){return(parseFloat(jQuery.curCSS(a,"paddingTop",true))||0)+(parseFloat(jQuery.curCSS(a,
"paddingBottom",true))||0)+(parseFloat(jQuery.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(jQuery.curCSS(a,"borderBottomWidth",true))||0)+(b?tb(a):0)}function tb(a){return(parseFloat(jQuery.curCSS(a,"marginTop",true))||0)+(parseFloat(jQuery.curCSS(a,"marginBottom",true))||0)}function gb(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function nb(a){var b=this,f,c;b.build=function(){f=[];c=[];a(f,c)};b.cell=function(g,o){var k=f.length,y=c.length,w,t=-1,H=
-1;for(w=0;w<k;w++)if(o>=f[w][0]&&o<f[w][1]){t=w;break}for(w=0;w<y;w++)if(g>=c[w][0]&&g<c[w][1]){H=w;break}return t>=0&&H>=0?{row:t,col:H}:null};b.rect=function(g,o,k,y,w){w=w.offset();return{top:f[g][0]-w.top,left:c[o][0]-w.left,width:c[y][1]-c[o][0],height:f[k][1]-f[g][0]}}}function ob(a){function b(y){y=a.cell(y.pageX,y.pageY);if(!y!=!k||y&&(y.row!=k.row||y.col!=k.col)){if(y){o||(o=y);g(y,o,y.row-o.row,y.col-o.col)}else g(y,o);k=y}}var f=this,c,g,o,k;f.start=function(y,w,t){g=y;o=k=null;a.build();
b(w);c=t||"mousemove";p(document).bind(c,b)};f.stop=function(){p(document).unbind(c,b);return k}}function Na(a){return(a<10?"0":"")+a}function hb(a,b){if(a[b]!==K)return a[b];b=b.split(/(?=[A-Z])/);for(var f=b.length-1,c;f>=0;f--){c=a[b[f].toLowerCase()];if(c!==K)return c}return a[""]}function Ka(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function kb(a){function b(k){return c[k]=c[k]||a(k)}var f=
this,c={},g={},o={};f.left=function(k){return g[k]=g[k]===K?b(k).position().left:g[k]};f.right=function(k){return o[k]=o[k]===K?f.left(k)+b(k).outerWidth():o[k]};f.clear=function(){c={};g={};o={}}}function sb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function zb(a,b){return a-b}function Pa(a){return a.end?Lb(a.end,a.allDay):C(q(a.start),1)}function Lb(a,b){a=q(a);return b||a.getHours()||a.getMinutes()?C(a,1):Ga(a)}function mb(a){a.attr("unselectable",
"on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var ya=p.fullCalendar={},Oa=ya.views={},Va={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,
monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",
week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Mb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Db=ya.setDefaults=function(a){p.extend(true,Va,a)};p.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,
1),f;this.each(function(){var o=p.data(this,"fullCalendar");if(o)if(o=o[a]){o=o.apply(this,b);if(f===K)f=o}});if(f!==K)return f;return this}var c=a.eventSources||[];delete a.eventSources;if(a.events){c.push(a.events);delete a.events}c.unshift([]);a=p.extend(true,{},Va,a.isRTL||a.isRTL===K&&Va.isRTL?Mb:{},a);var g=a.theme?"ui":"fc";this.each(function(){function o(e){if(e!=Aa){N++;t();var j=x,r;if(j){if(j.eventsChanged){M();j.eventDirty=j.eventsChanged=false}j.beforeHide&&j.beforeHide();gb(R,R.innerHeight());
j.element.hide()}else gb(R,1);R.css("overflow","hidden");if(V[e])(x=V[e]).element.show();else x=V[e]=ya.views[e](r=wa=p("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(R),a,e);if(aa){aa.find("div.fc-button-"+Aa).removeClass(g+"-state-active");aa.find("div.fc-button-"+e).addClass(g+"-state-active")}Aa=e;k();R.css("overflow","");j&&gb(R,1);!r&&x.afterShow&&x.afterShow();N--}}function k(e){if(y()){N++;t();pa===K&&ga();if(!x.start||e||L<x.start||L>=x.end){x.render(L,e||0);W(true);
!ia||!a.lazyFetching||x.visStart<ia||x.visEnd>A?Q():x.renderEvents(P)}else if(x.sizeDirty||x.eventsDirty||!a.lazyFetching){x.clearEvents();x.sizeDirty&&W();a.lazyFetching?x.renderEvents(P):Q()}la=ta.outerWidth();x.sizeDirty=false;x.eventsDirty=false;if(aa){aa.find("h2.fc-header-title").html(x.title);e=new Date;e>=x.start&&e<x.end?aa.find("div.fc-button-today").addClass(g+"-state-disabled"):aa.find("div.fc-button-today").removeClass(g+"-state-disabled")}N--;x.trigger("viewDisplay",O)}}function y(){return O.offsetWidth!==
0}function w(){return p("body")[0].offsetWidth!==0}function t(){x&&x.unselect()}function H(){M();if(y()){x.clearEvents();x.renderEvents(P);x.eventsDirty=false}}function M(){p.each(V,function(){this.eventsDirty=true})}function ua(){G();if(y()){ga();W();t();x.rerenderEvents();x.sizeDirty=false}}function G(){p.each(V,function(){this.sizeDirty=true})}function fa(e){P=[];ia=q(x.visStart);A=q(x.visEnd);for(var j=c.length,r=function(){--j||e&&e(P)},s=0;s<c.length;s++)D(c[s],r)}function D(e,j){var r=x.name,
s=q(L),I=function(J){if(r==x.name&&+s==+L&&p.inArray(e,c)!=-1){for(var Y=0;Y<J.length;Y++){Ia(J[Y],a);J[Y].source=e}P=P.concat(J);j&&j(J)}},E=function(J){I(J);ma()};if(typeof e=="string"){var B={};B[a.startParam]=Math.round(ia.getTime()/1E3);B[a.endParam]=Math.round(A.getTime()/1E3);B.browserTimezone=ia.getTimezoneOffset();if(a.cacheParam)B[a.cacheParam]=(new Date).getTime();ha();p.ajax({url:e,dataType:"json",data:B,cache:a.cacheParam||false,success:E})}else if(p.isFunction(e)){ha();e(q(ia),q(A),
E)}else e?I(e):alert("Error detected in fullcalender fetchEventSource()\nPlease check the last comma at the end of your feed list.")}function Q(){fa(function(e){x.renderEvents(e)})}function ha(){T++||x.trigger("loading",O,true)}function ma(){--T||x.trigger("loading",O,false)}function qa(e){if(e){var j=p("<tr/>");p.each(e.split(" "),function(r){r>0&&j.append("<td><span class='fc-header-space'/></td>");var s;p.each(this.split(","),function(I,E){if(E=="title"){j.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");
s&&s.addClass(g+"-corner-right");s=null}else{var B;if($[E])B=$[E];else if(Oa[E])B=function(){J.removeClass(g+"-state-hover");o(E)};if(B){s&&s.addClass(g+"-no-right");var J;I=a.theme?hb(a.buttonIcons,E):null;var Y=hb(a.buttonText,E);if(I)J=p("<div class='fc-button-"+E+" ui-state-default'><a><span class='ui-icon ui-icon-"+I+"'/></a></div>");else if(Y)J=p("<div class='fc-button-"+E+" "+g+"-state-default'><a><span>"+Y+"</span></a></div>");if(J){J.click(function(){J.hasClass(g+"-state-disabled")||B()}).mousedown(function(){J.not("."+
g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){J.removeClass(g+"-state-down")}).hover(function(){J.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-hover")},function(){J.removeClass(g+"-state-hover").removeClass(g+"-state-down")}).appendTo(p("<td/>").appendTo(j));s?s.addClass(g+"-no-right"):J.addClass(g+"-corner-left");s=J}}}});s&&s.addClass(g+"-corner-right")});return p("<table/>").append(j)}}function ga(){if(a.contentHeight)pa=
a.contentHeight;else if(a.height){pa=a.height-bb(R[0]);pa-=aa?aa.innerHeight():0}else pa=Math.round(R.innerWidth()/Math.max(a.aspectRatio,0.5))}function W(e){N++;x.setHeight(pa,e);if(wa){wa.css("position","relative");wa=null}x.setWidth(R.innerWidth(),e);N--}function ca(){if(!N)if(x.start){var e=++Fa;setTimeout(function(){if(e==Fa&&!N&&y())if(la!=(la=ta.outerWidth())){N++;ua();x.trigger("windowResize",O);N--}},200)}else sa()}function sa(){setTimeout(function(){!x.start&&w()&&k()},0)}var O=this,ta=
p(O).addClass("fc"),la,R=p("<div class='fc-content "+g+"-widget-content' style='position:relative'/>").prependTo(O),pa,Fa=0,N=0,L=new Date,Aa,x,V={},wa;a.isRTL&&ta.addClass("fc-rtl");a.theme&&ta.addClass("ui-widget");Cb(L,a.year,a.month,a.date);var P=[],ia,A,T=0,$={render:function(){ga();G();M();k()},changeView:o,getView:function(){return x},getDate:function(){return L},option:function(e,j){if(j===K)return a[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio"){a[e]=j;ua()}},destroy:function(){p(window).unbind("resize",
ca);aa&&aa.remove();R.remove();p.removeData(O,"fullCalendar")},prev:function(){k(-1)},next:function(){k(1)},prevYear:function(){db(L,-1);k()},nextYear:function(){db(L,1);k()},today:function(){L=new Date;k()},gotoDate:function(e,j,r){if(typeof e=="object")L=q(e);else Cb(L,e,j,r);k()},incrementDate:function(e,j,r){e!==K&&db(L,e);j!==K&&eb(L,j);r!==K&&C(L,r);k()},updateEvent:function(e){var j,r=P.length,s,I=e.start-e._start,E=e.end?e.end-(e._end||x.defaultEventEnd(e)):0;for(j=0;j<r;j++){s=P[j];if(s._id==
e._id&&s!=e){s.start=new Date(+s.start+I);s.end=e.end?s.end?new Date(+s.end+E):new Date(+x.defaultEventEnd(s)+E):null;s.title=e.title;s.url=e.url;s.allDay=e.allDay;s.className=e.className;s.editable=e.editable;s.resizable=e.resizable;Ia(s,a)}}Ia(e,a);H()},renderEvent:function(e,j){Ia(e,a);if(!e.source){if(j)(e.source=c[0]).push(e);P.push(e)}H()},removeEvents:function(e){if(e){if(!p.isFunction(e)){var j=e+"";e=function(s){return s._id==j}}P=p.grep(P,e,true);for(r=0;r<c.length;r++)if(typeof c[r]=="object")c[r]=
p.grep(c[r],e,true)}else{P=[];for(var r=0;r<c.length;r++)if(typeof c[r]=="object")c[r]=[]}H()},clientEvents:function(e){if(p.isFunction(e))return p.grep(P,e);else if(e){e+="";return p.grep(P,function(j){return j._id==e})}return P},rerenderEvents:H,addEventSource:function(e){c.push(e);D(e,H)},removeEventSource:function(e){c=p.grep(c,function(j){return e&&j!=e});P=p.grep(P,function(j){return e&&j.source!=e});H()},refetchEvents:function(){fa(H)},select:function(e,j,r){x.select(e,j,r===K?true:r)},unselect:function(){x.unselect()}};
p.data(this,"fullCalendar",$);var aa,ja=a.header;if(ja)aa=p("<table class='fc-header'/>").append(p("<tr/>").append(p("<td class='fc-header-left'/>").append(qa(ja.left))).append(p("<td class='fc-header-center'/>").append(qa(ja.center))).append(p("<td class='fc-header-right'/>").append(qa(ja.right)))).prependTo(ta);p(window).resize(ca);if(a.droppable){var m;p(document).bind("dragstart",function(e,j){var r=e.target,s=p(r);if(!s.parents(".fc").length){var I=a.dropAccept;if(p.isFunction(I)?I.call(r,s):
s.is(I)){m=r;x.dragStart(m,e,j)}}}).bind("dragstop",function(e,j){if(m){x.dragStop(m,e,j);m=null}})}o(a.defaultView);w()||sa()});return this};var Eb=0;Db({weekMode:"fixed"});Oa.month=function(a,b,f){return new Wa(a,b,{render:function(c,g){if(g){eb(c,g);c.setDate(1)}c=this.start=q(c,true);c.setDate(1);this.end=eb(q(c),1);var o=this.visStart=q(c);g=this.visEnd=q(this.end);var k=b.weekends?0:1;if(k){da(o);da(g,-1,true)}C(o,-((o.getDay()-Math.max(b.firstDay,k)+7)%7));C(g,(7-g.getDay()+Math.max(b.firstDay,
k))%7);o=Math.round((g-o)/(Bb*7));if(b.weekMode=="fixed"){C(g,(6-o)*7);o=6}this.title=oa(c,this.option("titleFormat"),b);this.renderGrid(o,b.weekends?7:5,this.option("columnFormat"),true)}},f)};Oa.basicWeek=function(a,b,f){return new Wa(a,b,{render:function(c,g){g&&C(c,g*7);c=this.visStart=q(this.start=C(q(c),-((c.getDay()-b.firstDay+7)%7)));g=this.visEnd=q(this.end=C(q(c),7));if(!b.weekends){da(c);da(g,-1,true)}this.title=Ha(c,C(q(g),-1),this.option("titleFormat"),b);this.renderGrid(1,b.weekends?
7:5,this.option("columnFormat"),false)}},f)};Oa.basicDay=function(a,b,f){return new Wa(a,b,{render:function(c,g){if(g){C(c,g);b.weekends||da(c,g<0?-1:1)}this.title=oa(c,this.option("titleFormat"),b);this.start=this.visStart=q(c,true);this.end=this.visEnd=C(q(this.start),1);this.renderGrid(1,1,this.option("columnFormat"),false)}},f)};var Xa;Db({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},
minTime:0,maxTime:24});Oa.agendaWeek=function(a,b,f){return new ub(a,b,{render:function(c,g){g&&C(c,g*7);c=this.visStart=q(this.start=C(q(c),-((c.getDay()-b.firstDay+7)%7)));g=this.visEnd=q(this.end=C(q(c),7));if(!b.weekends){da(c);da(g,-1,true)}this.title=Ha(c,C(q(g),-1),this.option("titleFormat"),b);this.renderAgenda(b.weekends?7:5,this.option("columnFormat"))}},f)};Oa.agendaDay=function(a,b,f){return new ub(a,b,{render:function(c,g){if(g){C(c,g);b.weekends||da(c,g<0?-1:1)}this.title=oa(c,this.option("titleFormat"),
b);this.start=this.visStart=q(c,true);this.end=this.visEnd=C(q(this.start),1);this.renderAgenda(1,this.option("columnFormat"))}},f)};var lb={init:function(a,b){this.element=a;this.options=b;this.eventsByID={};this.eventElements=[];this.eventElementsByID={};this.usedOverlays=[];this.unusedOverlays=[]},trigger:function(a,b){if(this.options[a])return this.options[a].apply(b||this,Array.prototype.slice.call(arguments,2).concat([this]))},eventEnd:function(a){return a.end?q(a.end):this.defaultEventEnd(a)},
reportEvents:function(a){var b,f=a.length,c,g=this.eventsByID={};for(b=0;b<f;b++){c=a[b];if(g[c._id])g[c._id].push(c);else g[c._id]=[c]}},reportEventElement:function(a,b){this.eventElements.push(b);var f=this.eventElementsByID;if(f[a._id])f[a._id].push(b);else f[a._id]=[b]},_clearEvents:function(){this.eventElements=[];this.eventElementsByID={}},showEvents:function(a,b){this._eee(a,b,"show")},hideEvents:function(a,b){this._eee(a,b,"hide")},_eee:function(a,b,f){a=this.eventElementsByID[a._id];var c,
g=a.length;for(c=0;c<g;c++)a[c][0]!=b[0]&&a[c][f]()},eventDrop:function(a,b,f,c,g,o,k){var y=this,w=b.allDay,t=b._id;y.moveEvents(y.eventsByID[t],f,c,g);y.trigger("eventDrop",a,b,f,c,g,function(){y.moveEvents(y.eventsByID[t],-f,-c,w);y.rerenderEvents()},o,k);y.eventsChanged=true;y.rerenderEvents(t)},eventResize:function(a,b,f,c,g,o){var k=this,y=b._id;k.elongateEvents(k.eventsByID[y],f,c);k.trigger("eventResize",a,b,f,c,function(){k.elongateEvents(k.eventsByID[y],-f,-c);k.rerenderEvents()},g,o);k.eventsChanged=
true;k.rerenderEvents(y)},moveEvents:function(a,b,f,c){f=f||0;for(var g,o=a.length,k=0;k<o;k++){g=a[k];if(c!==K)g.allDay=c;ba(C(g.start,b,true),f);if(g.end)g.end=ba(C(g.end,b,true),f);Ia(g,this.options)}},elongateEvents:function(a,b,f){f=f||0;for(var c,g=a.length,o=0;o<g;o++){c=a[o];c.end=ba(C(this.eventEnd(c),b,true),f);Ia(c,this.options)}},renderOverlay:function(a,b){var f=this.unusedOverlays.shift();f||(f=p("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=
b[0]&&f.appendTo(b);this.usedOverlays.push(f.css(a).show());return f},clearOverlays:function(){for(var a;a=this.usedOverlays.shift();)this.unusedOverlays.push(a.hide().unbind())},resizableDayEvent:function(a,b,f){var c=this;if(!c.options.disableResizing&&b.resizable)b.resizable({handles:c.options.isRTL?{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},grid:f,minWidth:f/2,containment:c.element.parent().parent(),start:function(g,o){b.css("z-index",9);c.hideEvents(a,b);c.trigger("eventResizeStart",this,
a,g,o)},stop:function(g,o){c.trigger("eventResizeStop",this,a,g,o);var k=Math.round((b.outerWidth()-o.originalSize.width)/f);if(k)c.eventResize(this,a,k,0,g,o);else{b.css("z-index",8);c.showEvents(a,b)}}})},eventElementHandlers:function(a,b){var f=this;b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return f.trigger("eventClick",this,a,c)}).hover(function(c){f.trigger("eventMouseover",this,a,c)},function(c){f.trigger("eventMouseout",this,a,c)})},option:function(a,
b){a=this.options[a];if(typeof a=="object")return hb(a,b||this.name);return a},sliceSegs:function(a,b,f,c){var g=[],o,k=a.length,y,w,t,H,M;for(o=0;o<k;o++){y=a[o];w=y.start;t=b[o];if(t>f&&w<c){if(w<f){w=q(f);H=false}else{w=w;H=true}if(t>c){t=q(c);M=false}else{t=t;M=true}g.push({event:y,start:w,end:t,isStart:H,isEnd:M,msLength:t-w})}}return g.sort(Ib)}},Bb=864E5,Jb=36E5,Hb=6E4;ya.addDays=C;ya.cloneDate=q;var ib=ya.parseDate=function(a){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*
1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);return Nb(a,true)||(a?new Date(a):null)}return null},Nb=ya.parseISO8601=function(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var f=new Date(a[1],0,1),c=new Date(a[1],0,1,9,0),g=0;if(a[3]){f.setMonth(a[3]-1);c.setMonth(a[3]-1)}if(a[5]){f.setDate(a[5]);c.setDate(a[5])}fb(f,c);a[7]&&f.setHours(a[7]);
a[8]&&f.setMinutes(a[8]);a[10]&&f.setSeconds(a[10]);a[12]&&f.setMilliseconds(Number("0."+a[12])*1E3);fb(f,c);if(!b){if(a[14]){g=Number(a[16])*60+Number(a[17]);g*=a[15]=="-"?1:-1}g-=f.getTimezoneOffset()}return new Date(+f+g*60*1E3)},wb=ya.parseTime=function(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):
0)}},oa=ya.formatDate=function(a,b,f){return Ha(a,null,b,f)},Ha=ya.formatDates=function(a,b,f,c){c=c||Va;var g=a,o=b,k,y=f.length,w,t,H,M="";for(k=0;k<y;k++){w=f.charAt(k);if(w=="'")for(t=k+1;t<y;t++){if(f.charAt(t)=="'"){if(g){M+=t==k+1?"'":f.substring(k+1,t);k=t}break}}else if(w=="(")for(t=k+1;t<y;t++){if(f.charAt(t)==")"){k=oa(g,f.substring(k+1,t),c);if(parseInt(k.replace(/\D/,"")))M+=k;k=t;break}}else if(w=="[")for(t=k+1;t<y;t++){if(f.charAt(t)=="]"){w=f.substring(k+1,t);k=oa(g,w,c);if(k!=oa(o,
w,c))M+=k;k=t;break}}else if(w=="{"){g=b;o=a}else if(w=="}"){g=a;o=b}else{for(t=y;t>k;t--)if(H=Ob[f.substring(k,t)]){if(g)M+=H(g,c);k=t-1;break}if(t==k)if(g)M+=w}}return M},Ob={s:function(a){return a.getSeconds()},ss:function(a){return Na(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Na(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Na(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Na(a.getHours())},d:function(a){return a.getDate()},
dd:function(a){return Na(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Na(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<
12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return oa(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}},za=["sun","mon","tue","wed","thu","fri","sat"]})(jQuery);

/*

 FullCalendar v1.4.8-IE9
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Wed Sep 29 02:35:51 2010 +0200

*/
(function(l,$){function ib(a){l.extend(true,Ta,a)}function Eb(a,b,e){function h(f){if(ja){H();ea();K();I(f)}else i()}function i(){ya=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");ja=l("<div class='fc-content "+ya+"-widget-content' style='position:relative'/>").prependTo(a);qa=new Fb(p,b);(ua=qa.render())&&a.prepend(ua);y(b.defaultView);l(window).resize(A);u()||s()}function s(){setTimeout(function(){!F.start&&u()&&I()},0)}function j(){l(window).unbind("resize",
A);qa.destroy();ja.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function m(){return W.offsetWidth!==0}function u(){return l("body")[0].offsetWidth!==0}function y(f){if(!F||f!=F.name){g++;Q();var q=F,J;if(q){if(q.eventsChanged){K();q.eventDirty=q.eventsChanged=false}(q.beforeHide||jb)();Ua(ja,Ea(ja));q.element.hide()}else Ua(ja,1);ja.css("overflow","hidden");if(F=ka[f])F.element.show();else F=ka[f]=new Ka[f](J=wa=l("<div class='fc-view fc-view-"+f+"' style='position:absolute'/>").appendTo(ja),
p);q&&qa.deactivateButton(q.name);qa.activateButton(f);I();ja.css("overflow","");q&&Ua(ja,1);J||(F.afterShow||jb)();g--}}function I(f){if(m()){g++;Q();na===$&&H();if(!F.start||f||n<F.start||n>=F.end){F.render(n,f||0);L(true);!b.lazyFetching||Z()?aa():F.renderEvents(da())}else if(F.sizeDirty||F.eventsDirty||!b.lazyFetching){F.clearEvents();F.sizeDirty&&L();!b.lazyFetching||Z()?aa():F.renderEvents(da())}ha=a.outerWidth();F.sizeDirty=false;F.eventsDirty=false;qa.updateTitle(F.title);f=new Date;f>=F.start&&
f<F.end?qa.disableButton("today"):qa.enableButton("today");g--;F.trigger("viewDisplay",W)}}function H(){na=b.contentHeight?b.contentHeight:b.height?b.height-Va(ja[0])-(ua?Ea(ua):0):Math.round(Qa(ja)/Math.max(b.aspectRatio,0.5))}function L(f){g++;F.setHeight(na,f);if(wa){wa.css("position","relative");wa=null}F.setWidth(Qa(ja),f);g--}function A(){if(!g)if(F.start){var f=++c;setTimeout(function(){if(f==c&&!g&&m())if(ha!=(ha=a.outerWidth())){g++;P();F.trigger("windowResize",W);g--}},200)}else s()}function P(){ea();
if(m()){H();L();Q();F.rerenderEvents();F.sizeDirty=false}}function ea(){l.each(ka,function(f,q){q.sizeDirty=true})}function U(){K();if(m()){F.clearEvents();F.renderEvents(da());F.eventsDirty=false}}function K(){l.each(ka,function(f,q){q.eventsDirty=true})}function aa(){X(function(f){F.renderEvents(f)})}function fa(f,q,J){F.select(f,q,J===$?true:J)}function Q(){F&&F.unselect()}function T(){I(-1)}function v(){I(1)}function D(){Wa(n,-1);I()}function E(){Wa(n,1);I()}function k(){n=new Date;I()}function o(f,
q,J){if(f instanceof Date)n=z(f);else kb(n,f,q,J);I()}function d(f,q,J){f!==$&&Wa(n,f);q!==$&&Xa(n,q);J!==$&&O(n,J);I()}function B(){return z(n)}function G(){return F}function M(f,q){if(q===$)return b[f];if(f=="height"||f=="contentHeight"||f=="aspectRatio"){b[f]=q;P()}}function t(f,q){if(b[f])return b[f].apply(q||W,Array.prototype.slice.call(arguments,2))}var p=this;p.options=b;p.render=h;p.destroy=j;p.changeView=y;p.select=fa;p.unselect=Q;p.rerenderEvents=U;p.prev=T;p.next=v;p.prevYear=D;p.nextYear=
E;p.today=k;p.gotoDate=o;p.incrementDate=d;p.formatDate=function(f,q){return Ma(f,q,b)};p.formatDates=function(f,q,J){return Ya(f,q,J,b)};p.getDate=B;p.getView=G;p.option=M;p.trigger=t;Gb.call(p,b,e);var X=p.fetchEvents,Z=p.isFetchNeeded,da=p.clientEvents,W=a[0],qa,ua,ja,ya,F,ka={},ha,na,wa,c=0,g=0,n=new Date;kb(n,b.year,b.month,b.date);var w;b.droppable&&l(document).bind("dragstart",function(f,q){var J=f.target,S=l(J);if(!S.parents(".fc").length){var R=b.dropAccept;if(l.isFunction(R)?R.call(J,S):
S.is(R)){w=J;F.dragStart(w,f,q)}}}).bind("dragstop",function(f,q){if(w){F.dragStop(w,f,q);w=null}})}function Fb(a,b){function e(){L=b.theme?"ui":"fc";var A=b.header;if(A)return H=l("<table class='fc-header'/>").append(l("<tr/>").append(l("<td class='fc-header-left'/>").append(i(A.left))).append(l("<td class='fc-header-center'/>").append(i(A.center))).append(l("<td class='fc-header-right'/>").append(i(A.right))))}function h(){H.remove()}function i(A){if(A){var P=l("<tr/>");l.each(A.split(" "),function(ea){ea>
0&&P.append("<td><span class='fc-header-space'/></td>");var U;l.each(this.split(","),function(K,aa){if(aa=="title"){P.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");U&&U.addClass(L+"-corner-right");U=null}else{var fa;if(a[aa])fa=a[aa];else if(Ka[aa])fa=function(){Q.removeClass(L+"-state-hover");a.changeView(aa)};if(fa){U&&U.addClass(L+"-no-right");var Q;K=b.theme?Za(b.buttonIcons,aa):null;var T=Za(b.buttonText,aa);if(K)Q=l("<div class='fc-button-"+aa+" ui-state-default'><a><span class='ui-icon ui-icon-"+
K+"'/></a></div>");else if(T)Q=l("<div class='fc-button-"+aa+" "+L+"-state-default'><a><span>"+T+"</span></a></div>");if(Q){Q.click(function(){Q.hasClass(L+"-state-disabled")||fa()}).mousedown(function(){Q.not("."+L+"-state-active").not("."+L+"-state-disabled").addClass(L+"-state-down")}).mouseup(function(){Q.removeClass(L+"-state-down")}).hover(function(){Q.not("."+L+"-state-active").not("."+L+"-state-disabled").addClass(L+"-state-hover")},function(){Q.removeClass(L+"-state-hover").removeClass(L+
"-state-down")}).appendTo(l("<td/>").appendTo(P));Q.disableSelection&&Q.closest("td").disableSelection();U?U.addClass(L+"-no-right"):Q.addClass(L+"-corner-left");U=Q}}}});U&&U.addClass(L+"-corner-right")});return l("<table/>").append(P)}}function s(A){H.find("h2.fc-header-title").html(A)}function j(A){H.find("div.fc-button-"+A).addClass(L+"-state-active")}function m(A){H.find("div.fc-button-"+A).removeClass(L+"-state-active")}function u(A){H.find("div.fc-button-"+A).addClass(L+"-state-disabled")}
function y(A){H.find("div.fc-button-"+A).removeClass(L+"-state-disabled")}var I=this;I.render=e;I.destroy=h;I.updateTitle=s;I.activateButton=j;I.deactivateButton=m;I.disableButton=u;I.enableButton=y;var H=l([]),L}function Gb(a,b){function e(d){b.indexOf(d)<0&&b.push(d)}function h(d){e(d);m(d,T)}function i(){E=b=[];b=[].concat(b);T()}function s(d){var B=[];b=l.grep(b,function(G){if(typeof G==="object"&&d!==G)B=B.concat(G);return G!=d});E=l.grep(E,function(G){return G.source!=d});b=B.concat(b);T()}
function j(d){var B=fa();E=[];v=z(B.visStart);D=z(B.visEnd);var G=b.length;B=function(){--G||d&&d(E)};for(var M=0;M<b.length;M++)m(b[M],B)}function m(d,B){fa();aa();var G=function(Z,da){if(l.inArray(da,b)!=-1){for(var W=0;W<Z.length;W++){U(Z[W]);Z[W].source=da}E=E.concat(Z);B&&B(Z)}},M=function(Z,da,W){if(W&&W.src&&o[W.src]){o[W.src]=0;G(Z,W.src)}else if(!W){G(Z,d);ea()}},t=function(Z){if(o[d]>1)return false;Z.src=d;P()},p=function(Z){if(Z.src)o[Z.src]=0;ea()};if(typeof d=="string"){o[d]=1+(o[d]||
0);var X={};X[a.startParam]=Math.round(v.getTime()/1E3);X[a.endParam]=Math.round(D.getTime()/1E3);X.browserTimezone=v.getTimezoneOffset();if(a.cacheParam)X[a.cacheParam]=(new Date).getTime();l.ajax({url:d,global:false,type:a.requestMethod||"GET",dataType:"json",data:X,cache:a.cacheParam||false,success:M,beforeSend:t,complete:p})}else if(l.isFunction(d)){P();d(z(v),z(D),M)}else d&&G(d,d)}function u(){j(T)}function y(){var d=fa();return!v||d.visStart<v||d.visEnd>D}function I(d){var B,G=E.length,M,t=
fa().defaultEventEnd,p=d.start-d._start,X=d.end?d.end-(d._end||t(d)):0;for(B=0;B<G;B++){M=E[B];if(M._id==d._id&&M!=d){M.start=new Date(+M.start+p);M.end=d.end?M.end?new Date(+M.end+X):new Date(+t(M)+X):null;M.title=d.title;M.url=d.url;M.allDay=d.allDay;M.className=d.className;M.editable=d.editable;M.resizable=d.resizable;M.color=d.color;M.bgColor=d.bgColor;M.borderColor=d.borderColor;U(M)}}U(d);T()}function H(d,B){U(d);if(!d.source){if(B)(d.source=b[0]).push(d);E.push(d)}T()}function L(d){if(d){if(!l.isFunction(d)){var B=
d+"";d=function(M){return M._id==B}}E=l.grep(E,d,true);for(G=0;G<b.length;G++)if(typeof b[G]=="object")b[G]=l.grep(b[G],d,true)}else{E=[];for(var G=0;G<b.length;G++)if(typeof b[G]=="object")b[G]=[]}T()}function A(d){if(l.isFunction(d))return l.grep(E,d);else if(d){d+="";return l.grep(E,function(B){return B._id==d})}return E}function P(){k++||Q("loading",null,true)}function ea(){--k||Q("loading",null,false)}function U(d){d._id=d._id||(d.id===$?"_fc"+Hb++:d.id+"");if(d.date){if(!d.start)d.start=d.date;
delete d.date}d._start=z(d.start=$a(d.start,a.ignoreTimezone));d.end=$a(d.end,a.ignoreTimezone);if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?z(d.end):null;if(d.allDay===$)d.allDay=a.allDayDefault;if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=[]}var K=this;K.fetchEvents=j;K.refetchEvents=u;K.isFetchNeeded=y;K.addEventSource=h;K.addEventSourceFast=e;K.clearEventSources=i;K.removeEventSource=s;K.updateEvent=I;K.renderEvent=H;K.removeEvents=
L;K.clientEvents=A;K.normalizeEvent=U;var aa=K.getDate,fa=K.getView,Q=K.trigger,T=K.rerenderEvents,v,D,E=[],k=0,o={};b.unshift([])}function Ib(a,b){function e(m,u){if(u){Xa(m,u);m.setDate(1)}m=z(m,true);m.setDate(1);u=Xa(z(m),1);var y=z(m),I=z(u),H=i("firstDay"),L=i("weekends")?0:1;if(L){va(y);va(I,-1,true)}O(y,-((y.getDay()-Math.max(H,L)+7)%7));O(I,(7-I.getDay()+Math.max(H,L))%7);H=Math.round((I-y)/(lb*7));if(i("weekMode")=="fixed"){O(I,(6-H)*7);H=6}h.title=j(m,i("titleFormat"));h.start=m;h.end=
u;h.visStart=y;h.visEnd=I;s(H,L?5:7,true)}var h=this;h.render=e;ab.call(h,a,b,"month");var i=h.opt,s=h.renderBasic,j=b.formatDate}function Jb(a,b){function e(m,u){u&&O(m,u*7);m=O(z(m),-((m.getDay()-i("firstDay")+7)%7));u=O(z(m),7);var y=z(m),I=z(u),H=i("weekends");if(!H){va(y);va(I,-1,true)}h.title=j(y,O(z(I),-1),i("titleFormat"));h.start=m;h.end=u;h.visStart=y;h.visEnd=I;s(1,H?7:5,false)}var h=this;h.render=e;ab.call(h,a,b,"basicWeek");var i=h.opt,s=h.renderBasic,j=b.formatDates}function Kb(a,b){function e(m,
u){if(u){O(m,u);i("weekends")||va(m,u<0?-1:1)}h.title=j(m,i("titleFormat"));h.start=h.visStart=z(m,true);h.end=h.visEnd=O(z(h.start),1);s(1,1,false)}var h=this;h.render=e;ab.call(h,a,b,"basicDay");var i=h.opt,s=h.renderBasic,j=b.formatDate}function ab(a,b,e){function h(c,g,n){da=c;W=g;if(M=D("isRTL")){t=-1;p=W-1}else{t=1;p=0}X=D("firstDay");Z=D("weekends")?0:1;var w=D("theme")?"ui":"fc",f=D("columnFormat"),q=v.start.getMonth(),J=La(new Date),S,R=z(v.visStart);if(F){k();g=F.find("tr").length;if(da<
g)F.find("tr:gt("+(da-1)+")").remove();else if(da>g){c="";for(g=g;g<da;g++){c+="<tr class='fc-week"+g+"'>";for(S=0;S<W;S++){c+="<td class='fc-"+Fa[R.getDay()]+" "+w+"-state-default fc-new fc-day"+(g*W+S)+(S==p?" fc-leftmost":"")+"'>"+(n?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";O(R,1);Z&&va(R)}c+="</tr>"}F.append(c)}j(F.find("td.fc-new").removeClass("fc-new"));R=z(v.visStart);F.find("td").each(function(){var ia=l(this);
if(da>1)R.getMonth()==q?ia.removeClass("fc-other-month"):ia.addClass("fc-other-month");if(+R==+J)ia.removeClass("fc-not-today fc-before-today").addClass(w+"-state-highlight fc-today");else+R<+J?ia.addClass("fc-not-today fc-before-today").removeClass(w+"-state-highlight fc-today"):ia.addClass("fc-not-today").removeClass(w+"-state-highlight fc-today fc-before-today");ia.find("div.fc-day-number").text(R.getDate());O(R,1);Z&&va(R)});if(da==1){R=z(v.visStart);ya.find("th").each(function(ia,ga){l(ga).text(G(R,
f));ga.className=ga.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[R.getDay()]);O(R,1);Z&&va(R)});R=z(v.visStart);F.find("td").each(function(ia,ga){ga.className=ga.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[R.getDay()]);O(R,1);Z&&va(R)})}}else{var ba=l("<table/>").appendTo(a);c="<thead><tr>";for(g=0;g<W;g++){c+="<th class='fc-"+Fa[R.getDay()]+" "+w+"-state-default"+(g==p?" fc-leftmost":"")+"'>"+G(R,f)+"</th>";O(R,1);Z&&va(R)}ya=l(c+"</tr></thead>").appendTo(ba);c="<tbody>";R=z(v.visStart);for(g=0;g<da;g++){c+=
"<tr class='fc-week"+g+"'>";for(S=0;S<W;S++){c+="<td class='fc-"+Fa[R.getDay()]+" "+w+"-state-default fc-day"+(g*W+S)+(S==p?" fc-leftmost":"")+(da>1&&R.getMonth()!=q?" fc-other-month":"")+(+R==+J?" fc-today "+w+"-state-highlight":+R<+J?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(n?"<div class='fc-day-number'>"+R.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";O(R,1);Z&&va(R)}c+="</tr>"}F=l(c+"</tbody>").appendTo(ba);j(F.find("td"));
ka=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function i(c){ja=c;c=F.find("tr td:first-child");var g=ja-ya.outerHeight(),n;if(D("weekMode")=="variable")n=g=Math.floor(g/(da==1?2:6));else{n=Math.floor(g/da);g=g-n*(da-1)}if(bb===$){var w=F.find("tr:first").find("td:first");Ia(w,n);bb=n!=w.outerHeight()}if(bb){c.slice(0,-1).height(n);c.slice(-1).height(g)}else{Ia(c.slice(0,-1),n);Ia(c.slice(-1),g)}}function s(c){ua=c;wa.clear();qa=Math.floor(ua/W);Aa(ya.find("th").slice(0,
-1),qa)}function j(c){c.click(m).mousedown(B)}function m(c){if(!D("selectable")){var g=parseInt(this.className.match(/fc\-day(\d+)/)[1]);g=O(z(v.visStart),Math.floor(g/W)*7+g%W);E("dayClick",this,g,true,c)}}function u(c,g,n){n&&ha.build();n=z(v.visStart);for(var w=O(z(n),W),f=0;f<da;f++){var q=new Date(Math.max(n,c)),J=new Date(Math.min(w,g));if(q<J){var S;if(M){S=Ga(J,n)*t+p+1;q=Ga(q,n)*t+p+1}else{S=Ga(q,n);q=Ga(J,n)}j(y(f,S,f,q-1))}O(n,7);O(w,7)}}function y(c,g,n,w){c=ha.rect(c,g,n,w,a);return o(c,
a)}function I(c){return z(c)}function H(c,g){u(c,O(z(g),1),true)}function L(){d()}function A(c,g){na.start(function(n){d();n&&y(n.row,n.col,n.row,n.col)},g)}function P(c,g,n){var w=na.stop();d();if(w){w=fa(w);E("drop",c,w,true,g,n)}}function ea(c){return z(c.start)}function U(c){return wa.left(c)}function K(c){return wa.right(c)}function aa(c){return(c-Math.max(X,Z)+W)%W}function fa(c){return O(z(v.visStart),c.row*7+c.col*t+p)}function Q(c){return F.find("tr:eq("+c+")")}function T(){return{left:0,
right:ua}}var v=this;v.renderBasic=h;v.setHeight=i;v.setWidth=s;v.renderDayOverlay=u;v.defaultSelectionEnd=I;v.renderSelection=H;v.clearSelection=L;v.dragStart=A;v.dragStop=P;v.defaultEventEnd=ea;v.getHoverListener=function(){return na};v.colContentLeft=U;v.colContentRight=K;v.dayOfWeekCol=aa;v.cellDate=fa;v.cellIsAllDay=function(){return true};v.allDayTR=Q;v.allDayBounds=T;v.getRowCnt=function(){return da};v.getColCnt=function(){return W};v.getColWidth=function(){return qa};v.getDaySegmentContainer=
function(){return ka};mb.call(v,a,b,e);nb.call(v);ob.call(v);Lb.call(v);var D=v.opt,E=v.trigger,k=v.clearEvents,o=v.renderOverlay,d=v.clearOverlays,B=v.daySelectionMousedown,G=b.formatDate,M,t,p,X,Z,da,W,qa,ua,ja,ya,F,ka,ha,na,wa;pb(a.addClass("fc-grid"));ha=new qb(function(c,g){var n,w,f,q=F.find("tr:first td");if(M)q=l(q.get().reverse());q.each(function(J,S){n=l(S);w=n.offset().left;if(J)f[1]=w;f=[w];g[J]=f});f[1]=w+n.outerWidth();F.find("tr").each(function(J,S){n=l(S);w=n.offset().top;if(J)f[1]=
w;f=[w];c[J]=f});f[1]=w+n.outerHeight()});na=new rb(ha);wa=new sb(function(c){return F.find("td:eq("+c+") div div")})}function Lb(){function a(E){y(D=E);T(h(E))}function b(E){e();T(h(D),E)}function e(){I();ea().empty()}function h(E){var k=fa(),o=Q(),d=z(j.visStart);o=O(z(d),o);var B=l.map(E,Ra),G,M,t,p,X,Z,da=[];for(G=0;G<k;G++){M=cb(db(E,B,d,o));for(t=0;t<M.length;t++){p=M[t];for(X=0;X<p.length;X++){Z=p[X];Z.row=G;Z.level=t;da.push(Z)}}O(d,7);O(o,7)}return da}function i(E,k,o){H(E,k);if(E.editable||
E.editable===$&&m("editable")){s(E,k);o.isEnd&&v(E,k)}}function s(E,k){if(!m("disableDragging")&&k.draggable){var o=U(),d;k.draggable({zIndex:9,delay:50,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(B,G){u("eventDragStart",k,E,B,G);A(E,k);o.start(function(M,t,p,X){k.draggable("option","revert",!M||!p&&!X);aa();if(M){d=p*7+X*(m("isRTL")?-1:1);K(O(z(E.start),d),O(Ra(E),d))}else d=0},B,"drag")},stop:function(B,G){o.stop();aa();u("eventDragStop",k,E,B,G);if(d){k.find("a").removeAttr("href");
P(this,E,d,0,E.allDay,B,G)}else{l.browser.msie&&k.css("filter","");L(E,k)}}})}}var j=this;j.renderEvents=a;j.rerenderEvents=b;j.clearEvents=e;j.bindDaySeg=i;tb.call(j);var m=j.opt,u=j.trigger,y=j.reportEvents,I=j.clearEventData,H=j.eventElementHandlers,L=j.showEvents,A=j.hideEvents,P=j.eventDrop,ea=j.getDaySegmentContainer,U=j.getHoverListener,K=j.renderDayOverlay,aa=j.clearOverlays,fa=j.getRowCnt,Q=j.getColCnt,T=j.renderDaySegs,v=j.resizableDayEvent,D=[]}function Mb(a,b){function e(m,u){u&&O(m,u*
7);m=O(z(m),-((m.getDay()-i("firstDay")+7)%7));u=O(z(m),7);var y=z(m),I=z(u),H=i("weekends");if(!H){va(y);va(I,-1,true)}h.title=j(y,O(z(I),-1),i("titleFormat"));h.start=m;h.end=u;h.visStart=y;h.visEnd=I;s(H?7:5)}var h=this;h.render=e;ub.call(h,a,b,"agendaWeek");var i=h.opt,s=h.renderAgenda,j=b.formatDates}function Nb(a,b){function e(m,u){if(u){O(m,u);i("weekends")||va(m,u<0?-1:1)}u=z(m,true);var y=O(z(u),1);h.title=j(m,i("titleFormat"));h.start=h.visStart=u;h.end=h.visEnd=y;s(1)}var h=this;h.render=
e;ub.call(h,a,b,"agendaDay");var i=h.opt,s=h.renderAgenda,j=b.formatDate}function ub(a,b,e){function h(r){g=r;ba=p("theme")?"ui":"fc";ga=p("weekends")?0:1;ia=p("firstDay");if(sa=p("isRTL")){ca=-1;V=g-1}else{ca=1;V=0}oa=eb(p("minTime"));la=eb(p("maxTime"));r=sa?O(z(t.visEnd),-1):z(t.visStart);var x=z(r),C=La(new Date),N=p("columnFormat");if(ka){Z();ka.find("tr:first th").slice(1,-1).each(function(Na,xa){l(xa).text(F(x,N));xa.className=xa.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[x.getDay()]);O(x,ca);
ga&&va(x,ca)});x=z(r);c.find("td").each(function(Na,xa){xa.className=xa.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[x.getDay()]);if(+x==+C)l(xa).removeClass("fc-not-today fc-before-today").addClass(ba+"-state-highlight fc-today");else+x<+C?l(xa).addClass("fc-not-today fc-before-today").removeClass(ba+"-state-highlight fc-today"):l(xa).addClass("fc-not-today").removeClass(ba+"-state-highlight fc-today fc-before-today");O(x,ca);ga&&va(x,ca)})}else{var Y,ra,Ha=p("slotMinutes")%15==0,pa="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+
(p("allDaySlot")?"":" fc-last")+"'><th class='fc-leftmost "+ba+"-state-default'>&nbsp;</th>";for(Y=0;Y<g;Y++){pa+="<th class='fc-"+Fa[x.getDay()]+" "+ba+"-state-default'>"+F(x,N)+"</th>";O(x,ca);ga&&va(x,ca)}pa+="<th class='"+ba+"-state-default'>&nbsp;</th></tr>";if(p("allDaySlot"))pa+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+ba+"-state-default'>"+p("allDayText")+"</th><td colspan='"+g+"' class='"+ba+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+
ba+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+(g+2)+"' class='"+ba+"-state-default fc-leftmost'><div/></th></tr>";pa+="</table></div>";ka=l(pa).appendTo(a);y(ka.find("td"));vb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ka);x=wb();var fb=ta(z(x),la);ta(x,oa);pa="<table>";for(Y=0;x<fb;Y++){ra=x.getMinutes();pa+="<tr class='"+(!Y?"fc-first":!ra?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+ba+"-state-default'>"+(!Ha||!ra?F(x,p("axisFormat")):
"&nbsp;")+"</th><td class='fc-slot"+Y+" "+ba+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";ta(x,p("slotMinutes"));n++}pa+="</table>";ha=l("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(na=l("<div style='position:relative;overflow:hidden'>").append(wa=l(pa))).appendTo(a);I(ha.find("td"));xb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(na);x=z(r);pa="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";
for(Y=0;Y<g;Y++){pa+="<td class='fc-"+Fa[x.getDay()]+" "+ba+"-state-default "+(!Y?"fc-leftmost ":"")+(+x==+C?ba+"-state-highlight fc-today":+x<+C?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";O(x,ca);ga&&va(x,ca)}pa+="</tr></table></div>";c=l(pa).appendTo(a)}}function i(r,x){if(r===$)r=S;S=r;Ba={};var C=r-Ea(ka);C=Math.min(C,Ea(wa));Ia(ha,C);Sa&&Ia(ha,r-Ea(ka)-1);q=Ea(ha.find("tr:first div"))+1;x&&j()}function s(r){J=r;Ca.clear();Aa(ha,
r);ha.css("overflow","auto").width(r);var x=ka.find("tr:first th"),C=ka.find("tr.fc-all-day th:last"),N=c.find("td"),Y=ha[0].clientWidth;Aa(wa,Y);Y=ha[0].clientWidth;wa.width(Y);w=0;var ra=ka.find("tr:lt(2) th:first").add(ha.find("tr:first th"));ra.width(1);ra.each(function(){w=Math.max(w,l(this).outerWidth())});Aa(ra,w);f=Math.floor((Y-w)/g);Aa(x.slice(1,-2),f);Aa(N.slice(0,-1),f);if(r!=Y){Aa(x.slice(-2,-1),Y-w-f*(g-1));x.slice(-1).show();C.show()}else{ha.css("overflow","hidden");x.slice(-2,-1).width("");
x.slice(-1).hide();C.hide()}c.css({top:Ea(ka.find("tr")),left:w,width:Y-w,height:S})}function j(){var r=wb(),x=z(r);x.setHours(p("firstHour"));var C=aa(r,x)+1;r=function(){ha.scrollTop(C)};r();setTimeout(r,0)}function m(){R=ha.scrollTop()}function u(){ha.scrollTop(R)}function y(r){r.click(H).mousedown(ja)}function I(r){r.click(H).mousedown(B)}function H(r){if(!p("selectable")){var x=Math.min(g-1,Math.floor((r.pageX-c.offset().left)/f));x=O(z(t.visStart),x*ca+V);var C=this.className.match(/fc-slot(\d+)/);
if(C){C=parseInt(C[1])*p("slotMinutes");var N=Math.floor(C/60);x.setHours(N);x.setMinutes(C%60+oa);X("dayClick",this,x,false,r)}else X("dayClick",this,x,true,r)}}function L(r,x,C){C&&ma.build();var N=z(t.visStart);if(sa){C=Ga(x,N)*ca+V+1;r=Ga(r,N)*ca+V+1}else{C=Ga(r,N);r=Ga(x,N)}C=Math.max(0,C);r=Math.min(g,r);C<r&&y(A(0,C,0,r-1))}function A(r,x,C,N){r=ma.rect(r,x,C,N,ka);return da(r,ka)}function P(r,x){for(var C=z(t.visStart),N=O(z(C),1),Y=0;Y<g;Y++){var ra=new Date(Math.max(C,r)),Ha=new Date(Math.min(N,
x));if(ra<Ha){var pa=Y*ca+V;pa=ma.rect(0,pa,0,pa,na);ra=aa(C,ra);Ha=aa(C,Ha);pa.top=ra;pa.height=Ha-ra;I(da(pa,na))}O(C,1);O(N,1)}}function ea(r){return w+Ca.left(r)}function U(r){return w+Ca.right(r)}function K(r){return(r-Math.max(ia,ga)+g)%g*ca+V}function aa(r,x){r=z(r,true);if(x<ta(z(r),oa))return 0;if(x>=ta(z(r),la))return Ea(na);r=p("slotMinutes");x=x.getHours()*60+x.getMinutes()-oa;var C=Math.floor(x/r),N=Ba[C];if(N===$)N=Ba[C]=ha.find("tr:eq("+C+") td div")[0].offsetTop;return Math.max(0,
Math.round(N-1+q*(x%r/r)))}function fa(r){var x=O(z(t.visStart),r.col*ca+V);r=r.row;p("allDaySlot")&&r--;r>=0&&ta(x,oa+r*p("slotMinutes"));return x}function Q(r){return p("allDaySlot")&&!r.row}function T(){return{left:w,right:J}}function v(){return ka.find("tr.fc-all-day")}function D(r){var x=z(r.start);if(r.allDay)return x;return ta(x,p("defaultEventMinutes"))}function E(r,x){if(x)return z(r);return ta(z(r),p("slotMinutes"))}function k(r,x,C){if(C)p("allDaySlot")&&L(r,O(z(x),1),true);else o(r,x)}
function o(r,x){var C=p("selectHelper");ma.build();if(C){var N=Ga(r,t.visStart)*ca+V;if(N>=0&&N<g){N=ma.rect(0,N,0,N,na);var Y=aa(r,r),ra=aa(r,x);if(ra>Y){N.top=Y;N.height=ra-Y;N.left+=2;N.width-=5;if(l.isFunction(C)){if(r=C(r,x)){N.position="absolute";N.zIndex=8;za=l(r).css(N).appendTo(na)}}else{za=l(ya({title:"",start:r,end:x,className:[],editable:false},N,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));l.browser.msie&&za.find("span.fc-event-bg").hide();za.css("opacity",p("dragOpacity"))}if(za){I(za);
na.append(za);Aa(za,N.width,true);Ia(za,N.height,true)}}}}else P(r,x)}function d(){W();if(za){za.remove();za=null}}function B(r){if(p("selectable")){ua(r);var x=this,C;Da.start(function(N,Y){d();if(N&&N.col==Y.col&&!Q(N)){Y=fa(Y);N=fa(N);C=[Y,ta(z(Y),p("slotMinutes")),N,ta(z(N),p("slotMinutes"))].sort(yb);o(C[0],C[3])}else C=null},r);l(document).one("mouseup",function(N){Da.stop();if(C){+C[0]==+C[1]&&X("dayClick",x,C[0],false,N);qa(C[0],C[3],false,N)}})}}function G(r,x){Da.start(function(C){W();if(C)if(Q(C))A(C.row,
C.col,C.row,C.col);else{C=fa(C);var N=ta(z(C),p("defaultEventMinutes"));P(C,N)}},x)}function M(r,x,C){var N=Da.stop();W();N&&X("drop",r,fa(N),Q(N),x,C)}var t=this;t.renderAgenda=h;t.setWidth=s;t.setHeight=i;t.beforeHide=m;t.afterShow=u;t.defaultEventEnd=D;t.timePosition=aa;t.dayOfWeekCol=K;t.cellDate=fa;t.cellIsAllDay=Q;t.allDayTR=v;t.allDayBounds=T;t.getHoverListener=function(){return Da};t.colContentLeft=ea;t.colContentRight=U;t.getDaySegmentContainer=function(){return vb};t.getSlotSegmentContainer=
function(){return xb};t.getMinMinute=function(){return oa};t.getMaxMinute=function(){return la};t.getBodyContent=function(){return na};t.getRowCnt=function(){return 1};t.getColCnt=function(){return g};t.getColWidth=function(){return f};t.getSlotHeight=function(){return q};t.defaultSelectionEnd=E;t.renderDayOverlay=L;t.renderSelection=k;t.clearSelection=d;t.dragStart=G;t.dragStop=M;mb.call(t,a,b,e);nb.call(t);ob.call(t);Ob.call(t);var p=t.opt,X=t.trigger,Z=t.clearEvents,da=t.renderOverlay,W=t.clearOverlays,
qa=t.reportSelection,ua=t.unselect,ja=t.daySelectionMousedown,ya=t.slotSegHtml,F=b.formatDate,ka,ha,na,wa,c,g,n=0,w,f,q,J,S,R,ba,ia,ga,sa,ca,V,oa,la,ma,Da,Ca,Ba={},za,vb,xb;pb(a.addClass("fc-agenda"));ma=new qb(function(r,x){function C(xa){return Math.max(pa,Math.min(fb,xa))}var N,Y,ra;c.find("td").each(function(xa,Pb){N=l(Pb);Y=N.offset().left;if(xa)ra[1]=Y;ra=[Y];x[xa]=ra});ra[1]=Y+N.outerWidth();if(p("allDaySlot")){N=ka.find("td");Y=N.offset().top;r[0]=[Y,Y+N.outerHeight()]}for(var Ha=na.offset().top,
pa=ha.offset().top,fb=pa+ha.outerHeight(),Na=0;Na<n;Na++)r.push([C(Ha+q*Na),C(Ha+q*(Na+1))])});Da=new rb(ma);Ca=new sb(function(r){return c.find("td:eq("+r+") div div")})}function Ob(){function a(c,g){K(wa=c);var n,w=c.length,f=[],q=[];for(n=0;n<w;n++)c[n].allDay?f.push(c[n]):q.push(c[n]);if(P("allDaySlot")){G(h(f),g);Q()}j(i(q),g)}function b(c){e();a(wa,c)}function e(){aa();T().empty();v().empty()}function h(c){c=cb(db(c,l.map(c,Ra),A.visStart,A.visEnd));var g,n=c.length,w,f,q,J=[];for(g=0;g<n;g++){w=
c[g];for(f=0;f<w.length;f++){q=w[f];q.row=0;q.level=g;J.push(q)}}return J}function i(c){var g=t(),n=k(),w=E(),f=ta(z(A.visStart),n),q=l.map(c,s),J,S,R,ba,ia,ga,sa=[];for(J=0;J<g;J++){S=cb(db(c,q,f,ta(z(f),w-n)));Qb(S);for(R=0;R<S.length;R++){ba=S[R];for(ia=0;ia<ba.length;ia++){ga=ba[ia];ga.col=J;ga.level=R;sa.push(ga)}}O(f,1,true)}return sa}function s(c){return c.end?z(c.end):ta(z(c.start),P("defaultEventMinutes"))}function j(c,g){var n,w=c.length,f,q,J,S,R,ba,ia,ga,sa,ca,V="",oa,la,ma={},Da={},Ca=
v(),Ba;n=t();if(oa=P("isRTL")){la=-1;Ba=n-1}else{la=1;Ba=0}for(n=0;n<w;n++){f=c[n];q=f.event;J="fc-event fc-event-vert ";if(f.isStart)J+="fc-corner-top ";if(f.isEnd)J+="fc-corner-bottom ";S=o(f.start,f.start);R=o(f.start,f.end);ba=f.col;ia=f.level;ga=f.forward||0;sa=d(ba*la+Ba);ca=B(ba*la+Ba)-sa;ca=Math.min(ca-6,ca*0.95);ba=ia?ca/(ia+ga+1):ga?(ca/(ga+1)-6)*2:ca;ia=sa+ca/(ia+ga+1)*ia*la+(oa?ca-ba:0);f.top=S;f.left=ia;f.outerWidth=ba;f.outerHeight=R-S;V+=m(q,f,J)}Ca[0].innerHTML=V;oa=Ca.children();
for(n=0;n<w;n++){f=c[n];q=f.event;V=l(oa[n]);la=ea("eventRender",q,q,V);if(la===false)V.remove();else{if(la&&la!==true){V.remove();V=l(la).css({position:"absolute",top:f.top,left:f.left}).appendTo(Ca)}f.element=V;if(q._id===g)y(q,V,f);else V[0]._fci=n;da(q,V)}}zb(Ca,c,y);for(n=0;n<w;n++){f=c[n];if(V=f.element){q=ma[g=f.key=Ab(V[0])];f.vsides=q===$?(ma[g]=Va(V[0],true)):q;q=Da[g];f.hsides=q===$?(Da[g]=gb(V[0],true)):q;g=V.find("span.fc-event-title");if(g.length)f.titleTop=g[0].offsetTop}}for(n=0;n<
w;n++){f=c[n];if(V=f.element){V[0].style.width=f.outerWidth-f.hsides+"px";V[0].style.height=(ma=f.outerHeight-f.vsides)+"px";q=f.event;if(f.titleTop!==$&&ma-f.titleTop<10){V.find("span.fc-event-time").text(ha(q.start,P("timeFormat"))+" - "+q.title);V.find("span.fc-event-title").remove()}ea("eventAfterRender",q,q,V)}}}function m(c,g,n){var w="";if(c.color)w+="color:"+c.color+";";if(c.bgColor)w+="background-color:"+c.bgColor+";";if(c.borderColor)w+="border-color:"+c.borderColor+";";return"<div class='"+
n+c.className.join(" ")+"' style='position:absolute;z-index:8;top:"+g.top+"px;left:"+g.left+"px'><a"+(c.url?" href='"+Oa(c.url)+"'":"")+(w?" style='"+w+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Oa(na(c.start,c.end,P("timeFormat")))+"</span><span class='fc-event-title'>"+Oa(c.title)+"</span></a>"+((c.resizable||c.resizable===$)&&(c.editable||c.editable===$&&P("editable"))&&!P("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":
"")+"</div>"}function u(c,g,n){fa(c,g);if(c.editable||c.editable===$&&P("editable")){I(c,g,n.isStart);n.isEnd&&M(c,g,p())}}function y(c,g,n){fa(c,g);if(c.editable||c.editable===$&&P("editable")){var w=g.find("span.fc-event-time");H(c,g,w);n.isEnd&&L(c,g,w)}}function I(c,g,n){if(!P("disableDragging")&&g.draggable){var w,f=true,q,J=P("isRTL")?-1:1,S=D(),R=p(),ba=X(),ia=k();g.draggable({zIndex:9,opacity:P("dragOpacity","month"),revertDuration:P("dragRevertDuration"),start:function(sa,ca){ea("eventDragStart",
g,c,sa,ca);qa(c,g);w=Qa(g);S.start(function(V,oa,la,ma){g.draggable("option","revert",!V||!la&&!ma);F();if(V){q=ma*J;if(V.row){if(n&&f){Aa(g,R-10);Ia(g,ba*Math.round((c.end?(c.end-c.start)/Rb:P("defaultEventMinutes"))/P("slotMinutes")));g.draggable("option","grid",[R,1]);f=false}}else{ya(O(z(c.start),q),O(Ra(c),q));ga()}}},sa,"drag")},stop:function(sa,ca){var V=S.stop();F();ea("eventDragStop",g,c,sa,ca);if(V&&(!f||q)){g.find("a").removeAttr("href");V=0;f||(V=Math.round((g.offset().top-Z().offset().top)/
ba)*P("slotMinutes")+ia-(c.start.getHours()*60+c.start.getMinutes()));ua(this,c,q,V,f,sa,ca)}else{ga();l.browser.msie&&g.css("filter","");W(c,g)}}});function ga(){if(!f){Aa(g,w);g.height("");g.draggable("option","grid",null);f=true}}}}function H(c,g,n){if(!P("disableDragging")&&g.draggable){var w,f=false,q,J,S,R=P("isRTL")?-1:1,ba=D(),ia=t(),ga=p(),sa=X();g.draggable({zIndex:9,scroll:false,grid:[ga,sa],axis:ia==1?"y":false,opacity:P("dragOpacity"),revertDuration:P("dragRevertDuration"),start:function(oa,
la){ea("eventDragStart",g,c,oa,la);qa(c,g);l.browser.msie&&g.find("span.fc-event-bg").hide();w=g.position();J=S=0;ba.start(function(ma,Da,Ca,Ba){g.draggable("option","revert",!ma);F();if(ma){q=Ba*R;if(P("allDaySlot")&&!ma.row){if(!f){f=true;n.hide();g.draggable("option","grid",null)}ya(O(z(c.start),q),O(Ra(c),q))}else V()}},oa,"drag")},drag:function(oa,la){J=Math.round((la.position.top-w.top)/sa)*P("slotMinutes");if(J!=S){f||ca(J);S=J}},stop:function(oa,la){var ma=ba.stop();F();ea("eventDragStop",
g,c,oa,la);if(ma&&(q||J||f))ua(this,c,q,f?0:J,f,oa,la);else{V();g.css(w);ca(0);l.browser.msie&&g.css("filter","").find("span.fc-event-bg").css("display","");W(c,g)}}});function ca(oa){var la=ta(z(c.start),oa),ma;if(c.end)ma=ta(z(c.end),oa);n.text(na(la,ma,P("timeFormat")))}function V(){if(f){n.css("display","");g.draggable("option","grid",[ga,sa]);f=false}}}}function L(c,g,n){if(!P("disableResizing")&&g.resizable){var w,f,q=X();g.resizable({handles:{s:"div.ui-resizable-s"},grid:q,start:function(J,
S){w=f=0;qa(c,g);l.browser.msie&&l.browser.version=="6.0"&&g.css("overflow","hidden");g.css("z-index",9);ea("eventResizeStart",this,c,J,S)},resize:function(J,S){w=Math.round((Math.max(q,Ea(g))-S.originalSize.height)/q);if(w!=f){n.text(na(c.start,!w&&!c.end?null:ta(U(c),P("slotMinutes")*w),P("timeFormat")));f=w}},stop:function(J,S){ea("eventResizeStop",this,c,J,S);if(w)ja(this,c,0,P("slotMinutes")*w,J,S);else{g.css("z-index",8);W(c,g)}}})}}var A=this;A.renderEvents=a;A.rerenderEvents=b;A.clearEvents=
e;A.slotSegHtml=m;A.bindDaySeg=u;tb.call(A);var P=A.opt,ea=A.trigger,U=A.eventEnd,K=A.reportEvents,aa=A.clearEventData,fa=A.eventElementHandlers,Q=A.setHeight,T=A.getDaySegmentContainer,v=A.getSlotSegmentContainer,D=A.getHoverListener,E=A.getMaxMinute,k=A.getMinMinute,o=A.timePosition,d=A.colContentLeft,B=A.colContentRight,G=A.renderDaySegs,M=A.resizableDayEvent,t=A.getColCnt,p=A.getColWidth,X=A.getSlotHeight,Z=A.getBodyContent,da=A.reportEventElement,W=A.showEvents,qa=A.hideEvents,ua=A.eventDrop,
ja=A.eventResize,ya=A.renderDayOverlay,F=A.clearOverlays,ka=A.calendar,ha=ka.formatDate,na=ka.formatDates,wa=[]}function Qb(a){var b,e,h,i,s,j;for(b=a.length-1;b>0;b--){i=a[b];for(e=0;e<i.length;e++){s=i[e];for(h=0;h<a[b-1].length;h++){j=a[b-1][h];if(Bb(s,j))j.forward=Math.max(j.forward||0,(s.forward||0)+1)}}}}function mb(a,b,e){function h(k,o){k=E[k];if(typeof k=="object")return Za(k,o||e);return k}function i(k,o){return b.trigger.apply(b,[k,o||K].concat(Array.prototype.slice.call(arguments,2),[K]))}
function s(k){T={};var o,d=k.length,B;for(o=0;o<d;o++){B=k[o];if(T[B._id])T[B._id].push(B);else T[B._id]=[B]}}function j(){v=[];D={}}function m(k){return k.end?z(k.end):aa(k)}function u(k,o){v.push(o);if(D[k._id])D[k._id].push(o);else D[k._id]=[o]}function y(k,o){o.click(function(d){if(!o.hasClass("ui-draggable-dragging")&&!o.hasClass("ui-resizable-resizing"))return i("eventClick",this,k,d)}).hover(function(d){i("eventMouseover",this,k,d)},function(d){i("eventMouseout",this,k,d)})}function I(k,o){L(k,
o,"show")}function H(k,o){L(k,o,"hide")}function L(k,o,d){k=D[k._id];var B,G=k.length;for(B=0;B<G;B++)k[B][0]!=o[0]&&k[B][d]()}function A(k,o,d,B,G,M,t){var p=o.allDay,X=o._id;ea(T[X],d,B,G);i("eventDrop",k,o,d,B,G,function(){ea(T[X],-d,-B,p);Q()},M,t);K.eventsChanged=true;Q(X)}function P(k,o,d,B,G,M){var t=o._id;U(T[t],d,B);i("eventResize",k,o,d,B,function(){U(T[t],-d,-B);Q()},G,M);K.eventsChanged=true;Q(t)}function ea(k,o,d,B){d=d||0;for(var G,M=k.length,t=0;t<M;t++){G=k[t];if(B!==$)G.allDay=B;
ta(O(G.start,o,true),d);if(G.end)G.end=ta(O(G.end,o,true),d);fa(G,E)}}function U(k,o,d){d=d||0;for(var B,G=k.length,M=0;M<G;M++){B=k[M];B.end=ta(O(m(B),o,true),d);fa(B,E)}}var K=this;K.element=a;K.calendar=b;K.name=e;K.opt=h;K.trigger=i;K.reportEvents=s;K.clearEventData=j;K.eventEnd=m;K.reportEventElement=u;K.eventElementHandlers=y;K.showEvents=I;K.hideEvents=H;K.eventDrop=A;K.eventResize=P;var aa=K.defaultEventEnd,fa=b.normalizeEvent,Q=b.rerenderEvents,T={},v=[],D={},E=b.options}function tb(){function a(Q,
T){var v=h("isRTL"),D,E=Q.length,k,o,d,B,G,M="",t,p={},X={},Z=[],da=[];D=A();t=D.left;var W=D.right,qa=y();I();var ua=K();for(D=0;D<E;D++){k=Q[D];o=k.event;d="fc-event fc-event-hori ";if(v){if(k.isStart)d+="fc-corner-right ";if(k.isEnd)d+="fc-corner-left ";B=k.isEnd?P(U(k.end.getDay()-1)):t;G=k.isStart?ea(U(k.start.getDay())):W}else{if(k.isStart)d+="fc-corner-left ";if(k.isEnd)d+="fc-corner-right ";B=k.isStart?P(U(k.start.getDay())):t;G=k.isEnd?ea(U(k.end.getDay()-1)):W}var ja="";if(o.color)ja="color:"+
o.color+";";if(o.bgColor)ja+="background-color:"+o.bgColor+";";if(o.borderColor)ja+="border-color:"+o.borderColor+";";M+="<div class='"+d+o.className.join(" ")+"' style='position:absolute;z-index:8;left:"+B+"px'><a"+(o.url?" href='"+Oa(o.url)+"'":"")+(ja?" style='"+ja+"'":"")+">"+(!o.allDay&&k.isStart?"<span class='fc-event-time'>"+Oa(fa(o.start,o.end,h("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Oa(o.title)+"</span></a>"+((o.resizable||o.resizable===$)&&(o.editable||o.editable===
$&&h("editable"))&&!h("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(v?"w":"e")+"'></div>":"")+"</div>";k.left=B;k.outerWidth=G-B}ua[0].innerHTML=M;M=ua.children();for(D=0;D<E;D++){k=Q[D];v=l(M[D]);o=k.event;t=i("eventRender",o,o,v);if(t===false)v.remove();else{if(t&&t!==true){v.remove();v=l(t).css({position:"absolute",left:k.left}).appendTo(ua)}k.element=v;if(o._id===T)aa(o,v,k);else v[0]._fci=D;s(o,v)}}zb(ua,Q,aa);for(D=0;D<E;D++){k=Q[D];if(v=k.element){o=p[T=
k.key=Ab(v[0])];k.hsides=o===$?(p[T]=gb(v[0],true)):o}}for(D=0;D<E;D++){k=Q[D];if(v=k.element)v[0].style.width=k.outerWidth-k.hsides+"px"}for(D=0;D<E;D++){k=Q[D];if(v=k.element){o=X[T=k.key];k.outerHeight=v[0].offsetHeight+(o===$?(X[T]=Cb(v[0])):o)}}for(p=D=0;p<qa;p++){for(X=T=o=0;D<E&&(k=Q[D]).row==p;){if(k.level!=T){X+=o;o=0;T++}o=Math.max(o,k.outerHeight||0);k.top=X;D++}Z[p]=L(p).find("td:first div.fc-day-content > div");Sa&&Ia(Z[p],X+o);Z[p].height(X+o)}for(p=0;p<qa;p++)da[p]=Z[p][0].offsetTop;
for(D=0;D<E;D++){k=Q[D];if(v=k.element){v[0].style.top=da[k.row]+k.top+"px";o=k.event;i("eventAfterRender",o,o,v)}}}function b(Q,T){if(!h("disableResizing")&&T.resizable){var v=H();T.resizable({handles:h("isRTL")?{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},grid:v,minWidth:v/2,containment:e.element.parent().parent(),start:function(D,E){T.css("z-index",9);m(Q,T);i("eventResizeStart",this,Q,D,E)},stop:function(D,E){i("eventResizeStop",this,Q,D,E);var k=Math.round((Qa(T)-E.originalSize.width)/v);
if(k)u(this,Q,k,0,D,E);else{T.css("z-index",8);j(Q,T)}}})}}var e=this;e.renderDaySegs=a;e.resizableDayEvent=b;var h=e.opt,i=e.trigger,s=e.reportEventElement,j=e.showEvents,m=e.hideEvents,u=e.eventResize,y=e.getRowCnt,I=e.getColCnt,H=e.getColWidth,L=e.allDayTR,A=e.allDayBounds,P=e.colContentLeft,ea=e.colContentRight,U=e.dayOfWeekCol,K=e.getDaySegmentContainer,aa=e.bindDaySeg,fa=e.calendar.formatDates}function ob(){function a(H,L,A){b();L||(L=m(H,A));u(H,L,A);e(H,L,A)}function b(H){if(I){I=false;y();
j("unselect",null,H)}}function e(H,L,A,P){I=true;j("select",null,H,L,A,P)}function h(H){var L=i.cellDate,A=i.cellIsAllDay,P=i.getHoverListener();if(s("selectable")){b(H);var ea=this,U;P.start(function(K,aa){y();if(K&&A(K)){U=[L(aa),L(K)].sort(yb);u(U[0],U[1],true)}else U=null},H);l(document).one("mouseup",function(K){P.stop();if(U){+U[0]==+U[1]&&j("dayClick",ea,U[0],true,K);e(U[0],U[1],true,K)}})}}var i=this;i.select=a;i.unselect=b;i.reportSelection=e;i.daySelectionMousedown=h;var s=i.opt,j=i.trigger,
m=i.defaultSelectionEnd,u=i.renderSelection,y=i.clearSelection,I=false;s("selectable")&&s("unselectAuto")&&l(document).mousedown(function(H){var L=s("unselectCancel");if(L)if(l(H.target).parents(L).length)return;b(H)})}function nb(){function a(s,j){var m=i.shift();m||(m=l("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));m[0].parentNode!=j[0]&&m.appendTo(j);h.push(m.css(s).show());return m}function b(){for(var s;s=h.shift();)i.push(s.hide().unbind())}var e=this;e.renderOverlay=
a;e.clearOverlays=b;var h=[],i=[]}function qb(a){var b=this,e,h;b.build=function(){e=[];h=[];a(e,h)};b.cell=function(i,s){var j=e.length,m=h.length,u,y=-1,I=-1;for(u=0;u<j;u++)if(s>=e[u][0]&&s<e[u][1]){y=u;break}for(u=0;u<m;u++)if(i>=h[u][0]&&i<h[u][1]){I=u;break}return y>=0&&I>=0?{row:y,col:I}:null};b.rect=function(i,s,j,m,u){u=u.offset();return{top:e[i][0]-u.top,left:h[s][0]-u.left,width:h[m][1]-h[s][0],height:e[j][1]-e[i][0]}}}function rb(a){function b(m){m=a.cell(m.pageX,m.pageY);if(!m!=!j||m&&
(m.row!=j.row||m.col!=j.col)){if(m){s||(s=m);i(m,s,m.row-s.row,m.col-s.col)}else i(m,s);j=m}}var e=this,h,i,s,j;e.start=function(m,u,y){i=m;s=j=null;a.build();b(u);h=y||"mousemove";l(document).bind(h,b)};e.stop=function(){l(document).unbind(h,b);return j}}function sb(a){function b(j){return h[j]=h[j]||a(j)}var e=this,h={},i={},s={};e.left=function(j){return i[j]=i[j]===$?b(j).position().left:i[j]};e.right=function(j){return s[j]=s[j]===$?e.left(j)+Qa(b(j)):s[j]};e.clear=function(){h={};i={};s={}}}
function Wa(a,b,e){a.setFullYear(a.getFullYear()+b);e||La(a);return a}function Xa(a,b,e){if(+a){b=a.getMonth()+b;var h=z(a);h.setDate(1);h.setMonth(b);a.setMonth(b);for(e||La(a);a.getMonth()!=h.getMonth();)a.setDate(a.getDate()+(a<h?1:-1))}return a}function O(a,b,e){if(+a){b=a.getDate()+b;var h=z(a);h.setHours(9);h.setDate(b);a.setDate(b);e||La(a);hb(a,h)}return a}function hb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Sb)}function ta(a,b){a.setMinutes(a.getMinutes()+b);return a}
function La(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function z(a,b){if(b)return La(new Date(+a));return new Date(+a)}function wb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function va(a,b,e){for(b=b||1;!a.getDay()||e&&a.getDay()==1||!e&&a.getDay()==6;)O(a,b);return a}function Ga(a,b){return Math.round((z(a,true)-z(b,true))/lb)}function kb(a,b,e,h){if(b!==$&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(e!==$&&e!=a.getMonth()){a.setDate(1);
a.setMonth(e)}h!==$&&a.setDate(h)}function $a(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);if(b===$)b=true;return Db(a,b)||(a?new Date(a):null)}return null}function Db(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var e=new Date(a[1],0,1);if(b){b=new Date(a[1],0,1,9,0);
if(a[3]){e.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){e.setDate(a[5]);b.setDate(a[5])}hb(e,b);a[7]&&e.setHours(a[7]);a[8]&&e.setMinutes(a[8]);a[10]&&e.setSeconds(a[10]);a[12]&&e.setMilliseconds(Number("0."+a[12])*1E3);hb(e,b)}else{b=0;e.setUTCFullYear(a[1]);a[3]&&e.setUTCMonth(a[3]-1);a[5]&&e.setUTCDate(a[5]);a[7]&&e.setUTCHours(a[7]);a[8]&&e.setUTCMinutes(a[8]);a[10]&&e.setUTCSeconds(a[10]);a[12]&&e.setUTCMilliseconds(Number("0."+a[12])*1E3);if(a[14]){b=Number(a[16])*60+Number(a[17]);b*=a[15]==
"-"?1:-1}e=new Date(+e+b*60*1E3)}return e}function eb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}}function Ma(a,b,e){return Ya(a,null,b,e)}function Ya(a,b,e,h){h=h||Ta;var i=a,s=b,j,m=e.length,u,y,I,H="";for(j=0;j<m;j++){u=e.charAt(j);if(u=="'")for(y=j+1;y<m;y++){if(e.charAt(y)=="'"){if(i){H+=
y==j+1?"'":e.substring(j+1,y);j=y}break}}else if(u=="(")for(y=j+1;y<m;y++){if(e.charAt(y)==")"){j=Ma(i,e.substring(j+1,y),h);if(parseInt(j.replace(/\D/,"")))H+=j;j=y;break}}else if(u=="[")for(y=j+1;y<m;y++){if(e.charAt(y)=="]"){u=e.substring(j+1,y);j=Ma(i,u,h);if(j!=Ma(s,u,h))H+=j;j=y;break}}else if(u=="{"){i=b;s=a}else if(u=="}"){i=a;s=b}else{for(y=m;y>j;y--)if(I=Tb[e.substring(j,y)]){if(i)H+=I(i,h);j=y-1;break}if(y==j)if(i)H+=u}}return H}function Ra(a){return a.end?Ub(a.end,a.allDay):O(z(a.start),
1)}function Ub(a,b){a=z(a);return b||a.getHours()||a.getMinutes()?O(a,1):La(a)}function Vb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Bb(a,b){return a.end>b.start&&a.start<b.end}function db(a,b,e,h){var i=[],s,j=a.length,m,u,y,I,H;for(s=0;s<j;s++){m=a[s];u=m.start;y=b[s];if(y>e&&u<h){if(u<e){u=z(e);I=false}else{u=u;I=true}if(y>h){y=z(h);H=false}else{y=y;H=true}i.push({event:m,
start:u,end:y,isStart:I,isEnd:H,msLength:y-u})}}return i.sort(Vb)}function cb(a){var b=[],e,h=a.length,i,s,j,m;for(e=0;e<h;e++){i=a[e];for(s=0;;){j=false;if(b[s])for(m=0;m<b[s].length;m++)if(Bb(b[s][m],i)){j=true;break}if(j)s++;else break}if(b[s])b[s].push(i);else b[s]=[i]}return b}function zb(a,b,e){a.unbind("mouseover").mouseover(function(h){for(var i=h.target,s;i!=this;){s=i;i=i.parentNode}if((i=s._fci)!==$){s._fci=$;s=b[i];e(s.event,s.element,s);l(h.target).trigger(h)}h.stopPropagation()})}function Aa(a,
b,e){a.each(function(h,i){i.style.width=b-gb(i,e)+"px"})}function Ia(a,b,e){a.each(function(h,i){i.style.height=b-Va(i,e)+"px"})}function gb(a,b){return(parseFloat(l.curCSS(a,"paddingLeft",true))||0)+(parseFloat(l.curCSS(a,"paddingRight",true))||0)+(parseFloat(l.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(l.curCSS(a,"borderRightWidth",true))||0)+(b?Wb(a):0)}function Wb(a){return(parseFloat(l.curCSS(a,"marginLeft",true))||0)+(parseFloat(l.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(l.curCSS(a,
"paddingTop",true))||0)+(parseFloat(l.curCSS(a,"paddingBottom",true))||0)+(parseFloat(l.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(l.curCSS(a,"borderBottomWidth",true))||0)+(b?Cb(a):0)}function Cb(a){return(parseFloat(l.curCSS(a,"marginTop",true))||0)+(parseFloat(l.curCSS(a,"marginBottom",true))||0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Ea(a){if(Sa)return a.innerHeight();return a.height()}function Qa(a){if(Sa)return a.innerWidth();
return a.width()}function jb(){}function yb(a,b){return a-b}function Pa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==$)return a[b];b=b.split(/(?=[A-Z])/);for(var e=b.length-1,h;e>=0;e--){h=a[b[e].toLowerCase()];if(h!==$)return h}return a[""]}function Oa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ab(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,
"")}function pb(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Sa=false;if(l.ui&&l.browser.msie&&parseInt(l.browser.version,10)>=9){Sa=true;var Xb=l.ui.mouse.prototype._mouseMove;l.ui.mouse.prototype._mouseMove=function(a){a.button=1;Xb.apply(this,[a])}}var Ta={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",
endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday",
"Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Yb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",
nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ja=l.fullCalendar={},Ka=Ja.views={};l.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),e;this.each(function(){var i=l.data(this,"fullCalendar");if(i&&l.isFunction(i[a])){i=i[a].apply(i,b);if(e===$)e=i;a=="destroy"&&l.removeData(this,"fullCalendar")}});if(e!==$)return e;return this}var h=a.eventSources||[];delete a.eventSources;if(a.events){h.push(a.events);
delete a.events}a=l.extend(true,{},Ta,a.isRTL||a.isRTL===$&&Ta.isRTL?Yb:{},a);this.each(function(i,s){i=l(s);s=new Eb(i,a,h);i.data("fullCalendar",s);s.render()});return this};var Hb=1;Ka.month=Ib;Ka.basicWeek=Jb;Ka.basicDay=Kb;var bb;ib({weekMode:"fixed"});Ka.agendaWeek=Mb;Ka.agendaDay=Nb;ib({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ja.addDays=O;
Ja.cloneDate=z;Ja.parseDate=$a;Ja.parseISO8601=Db;Ja.parseTime=eb;Ja.formatDate=Ma;Ja.formatDates=Ya;var Fa=["sun","mon","tue","wed","thu","fri","sat"],lb=864E5,Sb=36E5,Rb=6E4,Tb={s:function(a){return a.getSeconds()},ss:function(a){return Pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Pa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Pa(a.getHours())},
d:function(a){return a.getDate()},dd:function(a){return Pa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Pa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?
"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ma(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}}})(jQuery);

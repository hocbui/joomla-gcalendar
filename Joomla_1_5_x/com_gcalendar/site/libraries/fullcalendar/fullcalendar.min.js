/*

 FullCalendar v1.4.8-IE9
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Tue Sep 28 21:56:34 2010 +0200

*/
(function(l,Y){function ib(a){l.extend(true,Sa,a)}function Eb(a,b,e){function h(f){if(ja){G();ga();K();H(f)}else i()}function i(){ya=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");ja=l("<div class='fc-content "+ya+"-widget-content' style='position:relative'/>").prependTo(a);ma=new Fb(o,b);(ua=ma.render())&&a.prepend(ua);y(b.defaultView);l(window).resize(A);u()||t()}function t(){setTimeout(function(){!F.start&&u()&&H()},0)}function j(){l(window).unbind("resize",
A);ma.destroy();ja.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function m(){return $.offsetWidth!==0}function u(){return l("body")[0].offsetWidth!==0}function y(f){if(!F||f!=F.name){g++;Q();var p=F,I;if(p){if(p.eventsChanged){K();p.eventDirty=p.eventsChanged=false}(p.beforeHide||jb)();Ua(ja,Ha(ja));p.element.hide()}else Ua(ja,1);ja.css("overflow","hidden");if(F=ka[f])F.element.show();else F=ka[f]=new Ja[f](I=wa=l("<div class='fc-view fc-view-"+f+"' style='position:absolute'/>").appendTo(ja),
o);p&&ma.deactivateButton(p.name);ma.activateButton(f);H();ja.css("overflow","");p&&Ua(ja,1);I||(F.afterShow||jb)();g--}}function H(f){if(m()){g++;Q();oa===Y&&G();if(!F.start||f||n<F.start||n>=F.end){F.render(n,f||0);L(true);!b.lazyFetching||ea()?aa():F.renderEvents(X())}else if(F.sizeDirty||F.eventsDirty||!b.lazyFetching){F.clearEvents();F.sizeDirty&&L();!b.lazyFetching||ea()?aa():F.renderEvents(X())}ha=a.outerWidth();F.sizeDirty=false;F.eventsDirty=false;ma.updateTitle(F.title);f=new Date;f>=F.start&&
f<F.end?ma.disableButton("today"):ma.enableButton("today");g--;F.trigger("viewDisplay",$)}}function G(){oa=b.contentHeight?b.contentHeight:b.height?b.height-Va(ja[0])-(ua?Ha(ua):0):Math.round(Qa(ja)/Math.max(b.aspectRatio,0.5))}function L(f){g++;F.setHeight(oa,f);if(wa){wa.css("position","relative");wa=null}F.setWidth(Qa(ja),f);g--}function A(){if(!g)if(F.start){var f=++c;setTimeout(function(){if(f==c&&!g&&m())if(ha!=(ha=a.outerWidth())){g++;P();F.trigger("windowResize",$);g--}},200)}else t()}function P(){ga();
if(m()){G();L();Q();F.rerenderEvents();F.sizeDirty=false}}function ga(){l.each(ka,function(f,p){p.sizeDirty=true})}function U(){K();if(m()){F.clearEvents();F.renderEvents(X());F.eventsDirty=false}}function K(){l.each(ka,function(f,p){p.eventsDirty=true})}function aa(){Z(function(f){F.renderEvents(f)})}function da(f,p,I){F.select(f,p,I===Y?true:I)}function Q(){F&&F.unselect()}function T(){H(-1)}function v(){H(1)}function D(){Wa(n,-1);H()}function E(){Wa(n,1);H()}function k(){n=new Date;H()}function r(f,
p,I){if(f instanceof Date)n=z(f);else kb(n,f,p,I);H()}function d(f,p,I){f!==Y&&Wa(n,f);p!==Y&&Xa(n,p);I!==Y&&O(n,I);H()}function B(){return z(n)}function J(){return F}function N(f,p){if(p===Y)return b[f];if(f=="height"||f=="contentHeight"||f=="aspectRatio"){b[f]=p;P()}}function s(f,p){if(b[f])return b[f].apply(p||$,Array.prototype.slice.call(arguments,2))}var o=this;o.options=b;o.render=h;o.destroy=j;o.changeView=y;o.select=da;o.unselect=Q;o.rerenderEvents=U;o.prev=T;o.next=v;o.prevYear=D;o.nextYear=
E;o.today=k;o.gotoDate=r;o.incrementDate=d;o.formatDate=function(f,p){return Ma(f,p,b)};o.formatDates=function(f,p,I){return Ya(f,p,I,b)};o.getDate=B;o.getView=J;o.option=N;o.trigger=s;Gb.call(o,b,e);var Z=o.fetchEvents,ea=o.isFetchNeeded,X=o.clientEvents,$=a[0],ma,ua,ja,ya,F,ka={},ha,oa,wa,c=0,g=0,n=new Date;kb(n,b.year,b.month,b.date);var w;b.droppable&&l(document).bind("dragstart",function(f,p){var I=f.target,S=l(I);if(!S.parents(".fc").length){var R=b.dropAccept;if(l.isFunction(R)?R.call(I,S):
S.is(R)){w=I;F.dragStart(w,f,p)}}}).bind("dragstop",function(f,p){if(w){F.dragStop(w,f,p);w=null}})}function Fb(a,b){function e(){L=b.theme?"ui":"fc";var A=b.header;if(A)return G=l("<table class='fc-header'/>").append(l("<tr/>").append(l("<td class='fc-header-left'/>").append(i(A.left))).append(l("<td class='fc-header-center'/>").append(i(A.center))).append(l("<td class='fc-header-right'/>").append(i(A.right))))}function h(){G.remove()}function i(A){if(A){var P=l("<tr/>");l.each(A.split(" "),function(ga){ga>
0&&P.append("<td><span class='fc-header-space'/></td>");var U;l.each(this.split(","),function(K,aa){if(aa=="title"){P.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");U&&U.addClass(L+"-corner-right");U=null}else{var da;if(a[aa])da=a[aa];else if(Ja[aa])da=function(){Q.removeClass(L+"-state-hover");a.changeView(aa)};if(da){U&&U.addClass(L+"-no-right");var Q;K=b.theme?Za(b.buttonIcons,aa):null;var T=Za(b.buttonText,aa);if(K)Q=l("<div class='fc-button-"+aa+" ui-state-default'><a><span class='ui-icon ui-icon-"+
K+"'/></a></div>");else if(T)Q=l("<div class='fc-button-"+aa+" "+L+"-state-default'><a><span>"+T+"</span></a></div>");if(Q){Q.click(function(){Q.hasClass(L+"-state-disabled")||da()}).mousedown(function(){Q.not("."+L+"-state-active").not("."+L+"-state-disabled").addClass(L+"-state-down")}).mouseup(function(){Q.removeClass(L+"-state-down")}).hover(function(){Q.not("."+L+"-state-active").not("."+L+"-state-disabled").addClass(L+"-state-hover")},function(){Q.removeClass(L+"-state-hover").removeClass(L+
"-state-down")}).appendTo(l("<td/>").appendTo(P));Q.disableSelection&&Q.closest("td").disableSelection();U?U.addClass(L+"-no-right"):Q.addClass(L+"-corner-left");U=Q}}}});U&&U.addClass(L+"-corner-right")});return l("<table/>").append(P)}}function t(A){G.find("h2.fc-header-title").html(A)}function j(A){G.find("div.fc-button-"+A).addClass(L+"-state-active")}function m(A){G.find("div.fc-button-"+A).removeClass(L+"-state-active")}function u(A){G.find("div.fc-button-"+A).addClass(L+"-state-disabled")}
function y(A){G.find("div.fc-button-"+A).removeClass(L+"-state-disabled")}var H=this;H.render=e;H.destroy=h;H.updateTitle=t;H.activateButton=j;H.deactivateButton=m;H.disableButton=u;H.enableButton=y;var G=l([]),L}function Gb(a,b){function e(d){b.indexOf(d)<0&&b.push(d)}function h(d){e(d);m(d,T)}function i(){E=b=[];b=[].concat(b);T()}function t(d){var B=[];b=l.grep(b,function(J){if(typeof J==="object"&&d!==J)B=B.concat(J);return J!=d});E=l.grep(E,function(J){return J.source!=d});b=B.concat(b);T()}
function j(d){var B=da();E=[];v=z(B.visStart);D=z(B.visEnd);var J=b.length;B=function(){--J||d&&d(E)};for(var N=0;N<b.length;N++)m(b[N],B)}function m(d,B){var J=da(),N=aa(),s=function(X){if(J==da()&&+N==+aa()&&l.inArray(d,b)!=-1){for(var $=0;$<X.length;$++){U(X[$]);X[$].source=d}E=E.concat(X);B&&B(X)}},o=function(X,$,ma){if(r[ma.src]>0){r[ma.src]=0;s(X)}ga()},Z=function(X){X.src=d};if(typeof d=="string"){r[d]=1;P();var ea={};ea[a.startParam]=Math.round(v.getTime()/1E3);ea[a.endParam]=Math.round(D.getTime()/
1E3);ea.browserTimezone=v.getTimezoneOffset();if(a.cacheParam)ea[a.cacheParam]=(new Date).getTime();l.ajax({url:d,global:false,type:a.requestMethod||"GET",dataType:"json",data:ea,cache:a.cacheParam||false,success:o,beforeSend:Z})}else if(l.isFunction(d)){P();d(z(v),z(D),o)}else d&&s(d)}function u(){j(T)}function y(){var d=da();return!v||d.visStart<v||d.visEnd>D}function H(d){var B,J=E.length,N,s=da().defaultEventEnd,o=d.start-d._start,Z=d.end?d.end-(d._end||s(d)):0;for(B=0;B<J;B++){N=E[B];if(N._id==
d._id&&N!=d){N.start=new Date(+N.start+o);N.end=d.end?N.end?new Date(+N.end+Z):new Date(+s(N)+Z):null;N.title=d.title;N.url=d.url;N.allDay=d.allDay;N.className=d.className;N.editable=d.editable;N.resizable=d.resizable;N.color=d.color;N.bgColor=d.bgColor;N.borderColor=d.borderColor;U(N)}}U(d);T()}function G(d,B){U(d);if(!d.source){if(B)(d.source=b[0]).push(d);E.push(d)}T()}function L(d){if(d){if(!l.isFunction(d)){var B=d+"";d=function(N){return N._id==B}}E=l.grep(E,d,true);for(J=0;J<b.length;J++)if(typeof b[J]==
"object")b[J]=l.grep(b[J],d,true)}else{E=[];for(var J=0;J<b.length;J++)if(typeof b[J]=="object")b[J]=[]}T()}function A(d){if(l.isFunction(d))return l.grep(E,d);else if(d){d+="";return l.grep(E,function(B){return B._id==d})}return E}function P(){k++||Q("loading",null,true)}function ga(){--k||Q("loading",null,false)}function U(d){d._id=d._id||(d.id===Y?"_fc"+Hb++:d.id+"");if(d.date){if(!d.start)d.start=d.date;delete d.date}d._start=z(d.start=$a(d.start,a.ignoreTimezone));d.end=$a(d.end,a.ignoreTimezone);
if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?z(d.end):null;if(d.allDay===Y)d.allDay=a.allDayDefault;if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=[]}var K=this;K.fetchEvents=j;K.refetchEvents=u;K.isFetchNeeded=y;K.addEventSource=h;K.addEventSourceFast=e;K.clearEventSources=i;K.removeEventSource=t;K.updateEvent=H;K.renderEvent=G;K.removeEvents=L;K.clientEvents=A;K.normalizeEvent=U;var aa=K.getDate,da=K.getView,Q=K.trigger,T=K.rerenderEvents,
v,D,E=[],k=0,r={};b.unshift([])}function Ib(a,b){function e(m,u){if(u){Xa(m,u);m.setDate(1)}m=z(m,true);m.setDate(1);u=Xa(z(m),1);var y=z(m),H=z(u),G=i("firstDay"),L=i("weekends")?0:1;if(L){va(y);va(H,-1,true)}O(y,-((y.getDay()-Math.max(G,L)+7)%7));O(H,(7-H.getDay()+Math.max(G,L))%7);G=Math.round((H-y)/(lb*7));if(i("weekMode")=="fixed"){O(H,(6-G)*7);G=6}h.title=j(m,i("titleFormat"));h.start=m;h.end=u;h.visStart=y;h.visEnd=H;t(G,L?5:7,true)}var h=this;h.render=e;ab.call(h,a,b,"month");var i=h.opt,
t=h.renderBasic,j=b.formatDate}function Jb(a,b){function e(m,u){u&&O(m,u*7);m=O(z(m),-((m.getDay()-i("firstDay")+7)%7));u=O(z(m),7);var y=z(m),H=z(u),G=i("weekends");if(!G){va(y);va(H,-1,true)}h.title=j(y,O(z(H),-1),i("titleFormat"));h.start=m;h.end=u;h.visStart=y;h.visEnd=H;t(1,G?7:5,false)}var h=this;h.render=e;ab.call(h,a,b,"basicWeek");var i=h.opt,t=h.renderBasic,j=b.formatDates}function Kb(a,b){function e(m,u){if(u){O(m,u);i("weekends")||va(m,u<0?-1:1)}h.title=j(m,i("titleFormat"));h.start=h.visStart=
z(m,true);h.end=h.visEnd=O(z(h.start),1);t(1,1,false)}var h=this;h.render=e;ab.call(h,a,b,"basicDay");var i=h.opt,t=h.renderBasic,j=b.formatDate}function ab(a,b,e){function h(c,g,n){X=c;$=g;if(N=D("isRTL")){s=-1;o=$-1}else{s=1;o=0}Z=D("firstDay");ea=D("weekends")?0:1;var w=D("theme")?"ui":"fc",f=D("columnFormat"),p=v.start.getMonth(),I=Ka(new Date),S,R=z(v.visStart);if(F){k();g=F.find("tr").length;if(X<g)F.find("tr:gt("+(X-1)+")").remove();else if(X>g){c="";for(g=g;g<X;g++){c+="<tr class='fc-week"+
g+"'>";for(S=0;S<$;S++){c+="<td class='fc-"+Ea[R.getDay()]+" "+w+"-state-default fc-new fc-day"+(g*$+S)+(S==o?" fc-leftmost":"")+"'>"+(n?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";O(R,1);ea&&va(R)}c+="</tr>"}F.append(c)}j(F.find("td.fc-new").removeClass("fc-new"));R=z(v.visStart);F.find("td").each(function(){var ia=l(this);if(X>1)R.getMonth()==p?ia.removeClass("fc-other-month"):ia.addClass("fc-other-month");if(+R==+I)ia.removeClass("fc-not-today fc-before-today").addClass(w+
"-state-highlight fc-today");else+R<+I?ia.addClass("fc-not-today fc-before-today").removeClass(w+"-state-highlight fc-today"):ia.addClass("fc-not-today").removeClass(w+"-state-highlight fc-today fc-before-today");ia.find("div.fc-day-number").text(R.getDate());O(R,1);ea&&va(R)});if(X==1){R=z(v.visStart);ya.find("th").each(function(ia,fa){l(fa).text(J(R,f));fa.className=fa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[R.getDay()]);O(R,1);ea&&va(R)});R=z(v.visStart);F.find("td").each(function(ia,fa){fa.className=
fa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[R.getDay()]);O(R,1);ea&&va(R)})}}else{var ba=l("<table/>").appendTo(a);c="<thead><tr>";for(g=0;g<$;g++){c+="<th class='fc-"+Ea[R.getDay()]+" "+w+"-state-default"+(g==o?" fc-leftmost":"")+"'>"+J(R,f)+"</th>";O(R,1);ea&&va(R)}ya=l(c+"</tr></thead>").appendTo(ba);c="<tbody>";R=z(v.visStart);for(g=0;g<X;g++){c+="<tr class='fc-week"+g+"'>";for(S=0;S<$;S++){c+="<td class='fc-"+Ea[R.getDay()]+" "+w+"-state-default fc-day"+(g*$+S)+(S==o?" fc-leftmost":"")+(X>1&&
R.getMonth()!=p?" fc-other-month":"")+(+R==+I?" fc-today "+w+"-state-highlight":+R<+I?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(n?"<div class='fc-day-number'>"+R.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";O(R,1);ea&&va(R)}c+="</tr>"}F=l(c+"</tbody>").appendTo(ba);j(F.find("td"));ka=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function i(c){ja=c;c=F.find("tr td:first-child");var g=ja-ya.outerHeight(),
n;if(D("weekMode")=="variable")n=g=Math.floor(g/(X==1?2:6));else{n=Math.floor(g/X);g=g-n*(X-1)}if(bb===Y){var w=F.find("tr:first").find("td:first");La(w,n);bb=n!=w.outerHeight()}if(bb){c.slice(0,-1).height(n);c.slice(-1).height(g)}else{La(c.slice(0,-1),n);La(c.slice(-1),g)}}function t(c){ua=c;wa.clear();ma=Math.floor(ua/$);Aa(ya.find("th").slice(0,-1),ma)}function j(c){c.click(m).mousedown(B)}function m(c){if(!D("selectable")){var g=parseInt(this.className.match(/fc\-day(\d+)/)[1]);g=O(z(v.visStart),
Math.floor(g/$)*7+g%$);E("dayClick",this,g,true,c)}}function u(c,g,n){n&&ha.build();n=z(v.visStart);for(var w=O(z(n),$),f=0;f<X;f++){var p=new Date(Math.max(n,c)),I=new Date(Math.min(w,g));if(p<I){var S;if(N){S=Fa(I,n)*s+o+1;p=Fa(p,n)*s+o+1}else{S=Fa(p,n);p=Fa(I,n)}j(y(f,S,f,p-1))}O(n,7);O(w,7)}}function y(c,g,n,w){c=ha.rect(c,g,n,w,a);return r(c,a)}function H(c){return z(c)}function G(c,g){u(c,O(z(g),1),true)}function L(){d()}function A(c,g){oa.start(function(n){d();n&&y(n.row,n.col,n.row,n.col)},
g)}function P(c,g,n){var w=oa.stop();d();if(w){w=da(w);E("drop",c,w,true,g,n)}}function ga(c){return z(c.start)}function U(c){return wa.left(c)}function K(c){return wa.right(c)}function aa(c){return(c-Math.max(Z,ea)+$)%$}function da(c){return O(z(v.visStart),c.row*7+c.col*s+o)}function Q(c){return F.find("tr:eq("+c+")")}function T(){return{left:0,right:ua}}var v=this;v.renderBasic=h;v.setHeight=i;v.setWidth=t;v.renderDayOverlay=u;v.defaultSelectionEnd=H;v.renderSelection=G;v.clearSelection=L;v.dragStart=
A;v.dragStop=P;v.defaultEventEnd=ga;v.getHoverListener=function(){return oa};v.colContentLeft=U;v.colContentRight=K;v.dayOfWeekCol=aa;v.cellDate=da;v.cellIsAllDay=function(){return true};v.allDayTR=Q;v.allDayBounds=T;v.getRowCnt=function(){return X};v.getColCnt=function(){return $};v.getColWidth=function(){return ma};v.getDaySegmentContainer=function(){return ka};mb.call(v,a,b,e);nb.call(v);ob.call(v);Lb.call(v);var D=v.opt,E=v.trigger,k=v.clearEvents,r=v.renderOverlay,d=v.clearOverlays,B=v.daySelectionMousedown,
J=b.formatDate,N,s,o,Z,ea,X,$,ma,ua,ja,ya,F,ka,ha,oa,wa;pb(a.addClass("fc-grid"));ha=new qb(function(c,g){var n,w,f,p=F.find("tr:first td");if(N)p=l(p.get().reverse());p.each(function(I,S){n=l(S);w=n.offset().left;if(I)f[1]=w;f=[w];g[I]=f});f[1]=w+n.outerWidth();F.find("tr").each(function(I,S){n=l(S);w=n.offset().top;if(I)f[1]=w;f=[w];c[I]=f});f[1]=w+n.outerHeight()});oa=new rb(ha);wa=new sb(function(c){return F.find("td:eq("+c+") div div")})}function Lb(){function a(E){y(D=E);T(h(E))}function b(E){e();
T(h(D),E)}function e(){H();ga().empty()}function h(E){var k=da(),r=Q(),d=z(j.visStart);r=O(z(d),r);var B=l.map(E,Ra),J,N,s,o,Z,ea,X=[];for(J=0;J<k;J++){N=cb(db(E,B,d,r));for(s=0;s<N.length;s++){o=N[s];for(Z=0;Z<o.length;Z++){ea=o[Z];ea.row=J;ea.level=s;X.push(ea)}}O(d,7);O(r,7)}return X}function i(E,k,r){G(E,k);if(E.editable||E.editable===Y&&m("editable")){t(E,k);r.isEnd&&v(E,k)}}function t(E,k){if(!m("disableDragging")&&k.draggable){var r=U(),d;k.draggable({zIndex:9,delay:50,opacity:m("dragOpacity"),
revertDuration:m("dragRevertDuration"),start:function(B,J){u("eventDragStart",k,E,B,J);A(E,k);r.start(function(N,s,o,Z){k.draggable("option","revert",!N||!o&&!Z);aa();if(N){d=o*7+Z*(m("isRTL")?-1:1);K(O(z(E.start),d),O(Ra(E),d))}else d=0},B,"drag")},stop:function(B,J){r.stop();aa();u("eventDragStop",k,E,B,J);if(d){k.find("a").removeAttr("href");P(this,E,d,0,E.allDay,B,J)}else{l.browser.msie&&k.css("filter","");L(E,k)}}})}}var j=this;j.renderEvents=a;j.rerenderEvents=b;j.clearEvents=e;j.bindDaySeg=
i;tb.call(j);var m=j.opt,u=j.trigger,y=j.reportEvents,H=j.clearEventData,G=j.eventElementHandlers,L=j.showEvents,A=j.hideEvents,P=j.eventDrop,ga=j.getDaySegmentContainer,U=j.getHoverListener,K=j.renderDayOverlay,aa=j.clearOverlays,da=j.getRowCnt,Q=j.getColCnt,T=j.renderDaySegs,v=j.resizableDayEvent,D=[]}function Mb(a,b){function e(m,u){u&&O(m,u*7);m=O(z(m),-((m.getDay()-i("firstDay")+7)%7));u=O(z(m),7);var y=z(m),H=z(u),G=i("weekends");if(!G){va(y);va(H,-1,true)}h.title=j(y,O(z(H),-1),i("titleFormat"));
h.start=m;h.end=u;h.visStart=y;h.visEnd=H;t(G?7:5)}var h=this;h.render=e;ub.call(h,a,b,"agendaWeek");var i=h.opt,t=h.renderAgenda,j=b.formatDates}function Nb(a,b){function e(m,u){if(u){O(m,u);i("weekends")||va(m,u<0?-1:1)}u=z(m,true);var y=O(z(u),1);h.title=j(m,i("titleFormat"));h.start=h.visStart=u;h.end=h.visEnd=y;t(1)}var h=this;h.render=e;ub.call(h,a,b,"agendaDay");var i=h.opt,t=h.renderAgenda,j=b.formatDate}function ub(a,b,e){function h(q){g=q;ba=o("theme")?"ui":"fc";fa=o("weekends")?0:1;ia=
o("firstDay");if(sa=o("isRTL")){ca=-1;V=g-1}else{ca=1;V=0}pa=eb(o("minTime"));la=eb(o("maxTime"));q=sa?O(z(s.visEnd),-1):z(s.visStart);var x=z(q),C=Ka(new Date),M=o("columnFormat");if(ka){ea();ka.find("tr:first th").slice(1,-1).each(function(Na,xa){l(xa).text(F(x,M));xa.className=xa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[x.getDay()]);O(x,ca);fa&&va(x,ca)});x=z(q);c.find("td").each(function(Na,xa){xa.className=xa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[x.getDay()]);if(+x==+C)l(xa).removeClass("fc-not-today fc-before-today").addClass(ba+
"-state-highlight fc-today");else+x<+C?l(xa).addClass("fc-not-today fc-before-today").removeClass(ba+"-state-highlight fc-today"):l(xa).addClass("fc-not-today").removeClass(ba+"-state-highlight fc-today fc-before-today");O(x,ca);fa&&va(x,ca)})}else{var W,ra,Ga=o("slotMinutes")%15==0,qa="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(o("allDaySlot")?"":" fc-last")+"'><th class='fc-leftmost "+ba+"-state-default'>&nbsp;</th>";for(W=0;W<
g;W++){qa+="<th class='fc-"+Ea[x.getDay()]+" "+ba+"-state-default'>"+F(x,M)+"</th>";O(x,ca);fa&&va(x,ca)}qa+="<th class='"+ba+"-state-default'>&nbsp;</th></tr>";if(o("allDaySlot"))qa+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+ba+"-state-default'>"+o("allDayText")+"</th><td colspan='"+g+"' class='"+ba+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+ba+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+
(g+2)+"' class='"+ba+"-state-default fc-leftmost'><div/></th></tr>";qa+="</table></div>";ka=l(qa).appendTo(a);y(ka.find("td"));vb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ka);x=wb();var fb=ta(z(x),la);ta(x,pa);qa="<table>";for(W=0;x<fb;W++){ra=x.getMinutes();qa+="<tr class='"+(!W?"fc-first":!ra?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+ba+"-state-default'>"+(!Ga||!ra?F(x,o("axisFormat")):"&nbsp;")+"</th><td class='fc-slot"+W+" "+ba+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";
ta(x,o("slotMinutes"));n++}qa+="</table>";ha=l("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(oa=l("<div style='position:relative;overflow:hidden'>").append(wa=l(qa))).appendTo(a);H(ha.find("td"));xb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(oa);x=z(q);qa="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(W=0;W<g;W++){qa+="<td class='fc-"+Ea[x.getDay()]+
" "+ba+"-state-default "+(!W?"fc-leftmost ":"")+(+x==+C?ba+"-state-highlight fc-today":+x<+C?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";O(x,ca);fa&&va(x,ca)}qa+="</tr></table></div>";c=l(qa).appendTo(a)}}function i(q,x){if(q===Y)q=S;S=q;Ba={};var C=q-Ha(ka);C=Math.min(C,Ha(wa));La(ha,C);Ta&&La(ha,q-Ha(ka)-1);p=Ha(ha.find("tr:first div"))+1;x&&j()}function t(q){I=q;Ca.clear();Aa(ha,q);ha.width(q).css("overflow","auto");var x=ka.find("tr:first th"),
C=ka.find("tr.fc-all-day th:last"),M=c.find("td"),W=ha[0].clientWidth;Aa(wa,W);W=ha[0].clientWidth;wa.width(W);w=0;var ra=ka.find("tr:lt(2) th:first").add(ha.find("tr:first th"));ra.width(1);ra.each(function(){w=Math.max(w,l(this).outerWidth())});Aa(ra,w);f=Math.floor((W-w)/g);Aa(x.slice(1,-2),f);Aa(M.slice(0,-1),f);if(q!=W){Aa(x.slice(-2,-1),W-w-f*(g-1));x.slice(-1).show();C.show()}else{ha.css("overflow","hidden");x.slice(-2,-1).width("");x.slice(-1).hide();C.hide()}c.css({top:ka.find("tr").height(),
left:w,width:W-w,height:S})}function j(){var q=wb(),x=z(q);x.setHours(o("firstHour"));var C=aa(q,x)+1;q=function(){ha.scrollTop(C)};q();setTimeout(q,0)}function m(){R=ha.scrollTop()}function u(){ha.scrollTop(R)}function y(q){q.click(G).mousedown(ja)}function H(q){q.click(G).mousedown(B)}function G(q){if(!o("selectable")){var x=Math.min(g-1,Math.floor((q.pageX-c.offset().left)/f));x=O(z(s.visStart),x*ca+V);var C=this.className.match(/fc-slot(\d+)/);if(C){C=parseInt(C[1])*o("slotMinutes");var M=Math.floor(C/
60);x.setHours(M);x.setMinutes(C%60+pa);Z("dayClick",this,x,false,q)}else Z("dayClick",this,x,true,q)}}function L(q,x,C){C&&na.build();var M=z(s.visStart);if(sa){C=Fa(x,M)*ca+V+1;q=Fa(q,M)*ca+V+1}else{C=Fa(q,M);q=Fa(x,M)}C=Math.max(0,C);q=Math.min(g,q);C<q&&y(A(0,C,0,q-1))}function A(q,x,C,M){q=na.rect(q,x,C,M,ka);return X(q,ka)}function P(q,x){for(var C=z(s.visStart),M=O(z(C),1),W=0;W<g;W++){var ra=new Date(Math.max(C,q)),Ga=new Date(Math.min(M,x));if(ra<Ga){var qa=W*ca+V;qa=na.rect(0,qa,0,qa,oa);
ra=aa(C,ra);Ga=aa(C,Ga);qa.top=ra;qa.height=Ga-ra;H(X(qa,oa))}O(C,1);O(M,1)}}function ga(q){return w+Ca.left(q)}function U(q){return w+Ca.right(q)}function K(q){return(q-Math.max(ia,fa)+g)%g*ca+V}function aa(q,x){q=z(q,true);if(x<ta(z(q),pa))return 0;if(x>=ta(z(q),la))return Ha(oa);q=o("slotMinutes");x=x.getHours()*60+x.getMinutes()-pa;var C=Math.floor(x/q),M=Ba[C];if(M===Y)M=Ba[C]=ha.find("tr:eq("+C+") td div")[0].offsetTop;return Math.max(0,Math.round(M-1+p*(x%q/q)))}function da(q){var x=O(z(s.visStart),
q.col*ca+V);q=q.row;o("allDaySlot")&&q--;q>=0&&ta(x,pa+q*o("slotMinutes"));return x}function Q(q){return o("allDaySlot")&&!q.row}function T(){return{left:w,right:I}}function v(){return ka.find("tr.fc-all-day")}function D(q){var x=z(q.start);if(q.allDay)return x;return ta(x,o("defaultEventMinutes"))}function E(q,x){if(x)return z(q);return ta(z(q),o("slotMinutes"))}function k(q,x,C){if(C)o("allDaySlot")&&L(q,O(z(x),1),true);else r(q,x)}function r(q,x){var C=o("selectHelper");na.build();if(C){var M=
Fa(q,s.visStart)*ca+V;if(M>=0&&M<g){M=na.rect(0,M,0,M,oa);var W=aa(q,q),ra=aa(q,x);if(ra>W){M.top=W;M.height=ra-W;M.left+=2;M.width-=5;if(l.isFunction(C)){if(q=C(q,x)){M.position="absolute";M.zIndex=8;za=l(q).css(M).appendTo(oa)}}else{za=l(ya({title:"",start:q,end:x,className:[],editable:false},M,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));l.browser.msie&&za.find("span.fc-event-bg").hide();za.css("opacity",o("dragOpacity"))}if(za){H(za);oa.append(za);Aa(za,M.width,true);La(za,M.height,
true)}}}}else P(q,x)}function d(){$();if(za){za.remove();za=null}}function B(q){if(o("selectable")){ua(q);var x=this,C;Da.start(function(M,W){d();if(M&&M.col==W.col&&!Q(M)){W=da(W);M=da(M);C=[W,ta(z(W),o("slotMinutes")),M,ta(z(M),o("slotMinutes"))].sort(yb);r(C[0],C[3])}else C=null},q);l(document).one("mouseup",function(M){Da.stop();if(C){+C[0]==+C[1]&&Z("dayClick",x,C[0],false,M);ma(C[0],C[3],false,M)}})}}function J(q,x){Da.start(function(C){$();if(C)if(Q(C))A(C.row,C.col,C.row,C.col);else{C=da(C);
var M=ta(z(C),o("defaultEventMinutes"));P(C,M)}},x)}function N(q,x,C){var M=Da.stop();$();M&&Z("drop",q,da(M),Q(M),x,C)}var s=this;s.renderAgenda=h;s.setWidth=t;s.setHeight=i;s.beforeHide=m;s.afterShow=u;s.defaultEventEnd=D;s.timePosition=aa;s.dayOfWeekCol=K;s.cellDate=da;s.cellIsAllDay=Q;s.allDayTR=v;s.allDayBounds=T;s.getHoverListener=function(){return Da};s.colContentLeft=ga;s.colContentRight=U;s.getDaySegmentContainer=function(){return vb};s.getSlotSegmentContainer=function(){return xb};s.getMinMinute=
function(){return pa};s.getMaxMinute=function(){return la};s.getBodyContent=function(){return oa};s.getRowCnt=function(){return 1};s.getColCnt=function(){return g};s.getColWidth=function(){return f};s.getSlotHeight=function(){return p};s.defaultSelectionEnd=E;s.renderDayOverlay=L;s.renderSelection=k;s.clearSelection=d;s.dragStart=J;s.dragStop=N;mb.call(s,a,b,e);nb.call(s);ob.call(s);Ob.call(s);var o=s.opt,Z=s.trigger,ea=s.clearEvents,X=s.renderOverlay,$=s.clearOverlays,ma=s.reportSelection,ua=s.unselect,
ja=s.daySelectionMousedown,ya=s.slotSegHtml,F=b.formatDate,ka,ha,oa,wa,c,g,n=0,w,f,p,I,S,R,ba,ia,fa,sa,ca,V,pa,la,na,Da,Ca,Ba={},za,vb,xb;pb(a.addClass("fc-agenda"));na=new qb(function(q,x){function C(xa){return Math.max(qa,Math.min(fb,xa))}var M,W,ra;c.find("td").each(function(xa,Pb){M=l(Pb);W=M.offset().left;if(xa)ra[1]=W;ra=[W];x[xa]=ra});ra[1]=W+M.outerWidth();if(o("allDaySlot")){M=ka.find("td");W=M.offset().top;q[0]=[W,W+M.outerHeight()]}for(var Ga=oa.offset().top,qa=ha.offset().top,fb=qa+ha.outerHeight(),
Na=0;Na<n;Na++)q.push([C(Ga+p*Na),C(Ga+p*(Na+1))])});Da=new rb(na);Ca=new sb(function(q){return c.find("td:eq("+q+") div div")})}function Ob(){function a(c,g){K(wa=c);var n,w=c.length,f=[],p=[];for(n=0;n<w;n++)c[n].allDay?f.push(c[n]):p.push(c[n]);if(P("allDaySlot")){J(h(f),g);Q()}j(i(p),g)}function b(c){e();a(wa,c)}function e(){aa();T().empty();v().empty()}function h(c){c=cb(db(c,l.map(c,Ra),A.visStart,A.visEnd));var g,n=c.length,w,f,p,I=[];for(g=0;g<n;g++){w=c[g];for(f=0;f<w.length;f++){p=w[f];
p.row=0;p.level=g;I.push(p)}}return I}function i(c){var g=s(),n=k(),w=E(),f=ta(z(A.visStart),n),p=l.map(c,t),I,S,R,ba,ia,fa,sa=[];for(I=0;I<g;I++){S=cb(db(c,p,f,ta(z(f),w-n)));Qb(S);for(R=0;R<S.length;R++){ba=S[R];for(ia=0;ia<ba.length;ia++){fa=ba[ia];fa.col=I;fa.level=R;sa.push(fa)}}O(f,1,true)}return sa}function t(c){return c.end?z(c.end):ta(z(c.start),P("defaultEventMinutes"))}function j(c,g){var n,w=c.length,f,p,I,S,R,ba,ia,fa,sa,ca,V="",pa,la,na={},Da={},Ca=v(),Ba;n=s();if(pa=P("isRTL")){la=
-1;Ba=n-1}else{la=1;Ba=0}for(n=0;n<w;n++){f=c[n];p=f.event;I="fc-event fc-event-vert ";if(f.isStart)I+="fc-corner-top ";if(f.isEnd)I+="fc-corner-bottom ";S=r(f.start,f.start);R=r(f.start,f.end);ba=f.col;ia=f.level;fa=f.forward||0;sa=d(ba*la+Ba);ca=B(ba*la+Ba)-sa;ca=Math.min(ca-6,ca*0.95);ba=ia?ca/(ia+fa+1):fa?(ca/(fa+1)-6)*2:ca;ia=sa+ca/(ia+fa+1)*ia*la+(pa?ca-ba:0);f.top=S;f.left=ia;f.outerWidth=ba;f.outerHeight=R-S;V+=m(p,f,I)}Ca[0].innerHTML=V;pa=Ca.children();for(n=0;n<w;n++){f=c[n];p=f.event;
V=l(pa[n]);la=ga("eventRender",p,p,V);if(la===false)V.remove();else{if(la&&la!==true){V.remove();V=l(la).css({position:"absolute",top:f.top,left:f.left}).appendTo(Ca)}f.element=V;if(p._id===g)y(p,V,f);else V[0]._fci=n;X(p,V)}}zb(Ca,c,y);for(n=0;n<w;n++){f=c[n];if(V=f.element){p=na[g=f.key=Ab(V[0])];f.vsides=p===Y?(na[g]=Va(V[0],true)):p;p=Da[g];f.hsides=p===Y?(Da[g]=gb(V[0],true)):p;g=V.find("span.fc-event-title");if(g.length)f.titleTop=g[0].offsetTop}}for(n=0;n<w;n++){f=c[n];if(V=f.element){V[0].style.width=
f.outerWidth-f.hsides+"px";V[0].style.height=(na=f.outerHeight-f.vsides)+"px";p=f.event;if(f.titleTop!==Y&&na-f.titleTop<10){V.find("span.fc-event-time").text(ha(p.start,P("timeFormat"))+" - "+p.title);V.find("span.fc-event-title").remove()}ga("eventAfterRender",p,p,V)}}}function m(c,g,n){var w="";if(c.color)w+="color:"+c.color+";";if(c.bgColor)w+="background-color:"+c.bgColor+";";if(c.borderColor)w+="border-color:"+c.borderColor+";";return"<div class='"+n+c.className.join(" ")+"' style='position:absolute;z-index:8;top:"+
g.top+"px;left:"+g.left+"px'><a"+(c.url?" href='"+Oa(c.url)+"'":"")+(w?" style='"+w+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Oa(oa(c.start,c.end,P("timeFormat")))+"</span><span class='fc-event-title'>"+Oa(c.title)+"</span></a>"+((c.resizable||c.resizable===Y)&&(c.editable||c.editable===Y&&P("editable"))&&!P("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":"")+"</div>"}function u(c,g,n){da(c,g);if(c.editable||c.editable===
Y&&P("editable")){H(c,g,n.isStart);n.isEnd&&N(c,g,o())}}function y(c,g,n){da(c,g);if(c.editable||c.editable===Y&&P("editable")){var w=g.find("span.fc-event-time");G(c,g,w);n.isEnd&&L(c,g,w)}}function H(c,g,n){if(!P("disableDragging")&&g.draggable){var w,f=true,p,I=P("isRTL")?-1:1,S=D(),R=o(),ba=Z(),ia=k();g.draggable({zIndex:9,opacity:P("dragOpacity","month"),revertDuration:P("dragRevertDuration"),start:function(sa,ca){ga("eventDragStart",g,c,sa,ca);ma(c,g);w=Qa(g);S.start(function(V,pa,la,na){g.draggable("option",
"revert",!V||!la&&!na);F();if(V){p=na*I;if(V.row){if(n&&f){Aa(g,R-10);La(g,ba*Math.round((c.end?(c.end-c.start)/Rb:P("defaultEventMinutes"))/P("slotMinutes")));g.draggable("option","grid",[R,1]);f=false}}else{ya(O(z(c.start),p),O(Ra(c),p));fa()}}},sa,"drag")},stop:function(sa,ca){var V=S.stop();F();ga("eventDragStop",g,c,sa,ca);if(V&&(!f||p)){g.find("a").removeAttr("href");V=0;f||(V=Math.round((g.offset().top-ea().offset().top)/ba)*P("slotMinutes")+ia-(c.start.getHours()*60+c.start.getMinutes()));
ua(this,c,p,V,f,sa,ca)}else{fa();l.browser.msie&&g.css("filter","");$(c,g)}}});function fa(){if(!f){Aa(g,w);g.height("");g.draggable("option","grid",null);f=true}}}}function G(c,g,n){if(!P("disableDragging")&&g.draggable){var w,f=false,p,I,S,R=P("isRTL")?-1:1,ba=D(),ia=s(),fa=o(),sa=Z();g.draggable({zIndex:9,scroll:false,grid:[fa,sa],axis:ia==1?"y":false,opacity:P("dragOpacity"),revertDuration:P("dragRevertDuration"),start:function(pa,la){ga("eventDragStart",g,c,pa,la);ma(c,g);l.browser.msie&&g.find("span.fc-event-bg").hide();
w=g.position();I=S=0;ba.start(function(na,Da,Ca,Ba){g.draggable("option","revert",!na);F();if(na){p=Ba*R;if(P("allDaySlot")&&!na.row){if(!f){f=true;n.hide();g.draggable("option","grid",null)}ya(O(z(c.start),p),O(Ra(c),p))}else V()}},pa,"drag")},drag:function(pa,la){I=Math.round((la.position.top-w.top)/sa)*P("slotMinutes");if(I!=S){f||ca(I);S=I}},stop:function(pa,la){var na=ba.stop();F();ga("eventDragStop",g,c,pa,la);if(na&&(p||I||f))ua(this,c,p,f?0:I,f,pa,la);else{V();g.css(w);ca(0);l.browser.msie&&
g.css("filter","").find("span.fc-event-bg").css("display","");$(c,g)}}});function ca(pa){var la=ta(z(c.start),pa),na;if(c.end)na=ta(z(c.end),pa);n.text(oa(la,na,P("timeFormat")))}function V(){if(f){n.css("display","");g.draggable("option","grid",[fa,sa]);f=false}}}}function L(c,g,n){if(!P("disableResizing")&&g.resizable){var w,f,p=Z();g.resizable({handles:{s:"div.ui-resizable-s"},grid:p,start:function(I,S){w=f=0;ma(c,g);l.browser.msie&&l.browser.version=="6.0"&&g.css("overflow","hidden");g.css("z-index",
9);ga("eventResizeStart",this,c,I,S)},resize:function(I,S){w=Math.round((Math.max(p,Ha(g))-S.originalSize.height)/p);if(w!=f){n.text(oa(c.start,!w&&!c.end?null:ta(U(c),P("slotMinutes")*w),P("timeFormat")));f=w}},stop:function(I,S){ga("eventResizeStop",this,c,I,S);if(w)ja(this,c,0,P("slotMinutes")*w,I,S);else{g.css("z-index",8);$(c,g)}}})}}var A=this;A.renderEvents=a;A.rerenderEvents=b;A.clearEvents=e;A.slotSegHtml=m;A.bindDaySeg=u;tb.call(A);var P=A.opt,ga=A.trigger,U=A.eventEnd,K=A.reportEvents,
aa=A.clearEventData,da=A.eventElementHandlers,Q=A.setHeight,T=A.getDaySegmentContainer,v=A.getSlotSegmentContainer,D=A.getHoverListener,E=A.getMaxMinute,k=A.getMinMinute,r=A.timePosition,d=A.colContentLeft,B=A.colContentRight,J=A.renderDaySegs,N=A.resizableDayEvent,s=A.getColCnt,o=A.getColWidth,Z=A.getSlotHeight,ea=A.getBodyContent,X=A.reportEventElement,$=A.showEvents,ma=A.hideEvents,ua=A.eventDrop,ja=A.eventResize,ya=A.renderDayOverlay,F=A.clearOverlays,ka=A.calendar,ha=ka.formatDate,oa=ka.formatDates,
wa=[]}function Qb(a){var b,e,h,i,t,j;for(b=a.length-1;b>0;b--){i=a[b];for(e=0;e<i.length;e++){t=i[e];for(h=0;h<a[b-1].length;h++){j=a[b-1][h];if(Bb(t,j))j.forward=Math.max(j.forward||0,(t.forward||0)+1)}}}}function mb(a,b,e){function h(k,r){k=E[k];if(typeof k=="object")return Za(k,r||e);return k}function i(k,r){return b.trigger.apply(b,[k,r||K].concat(Array.prototype.slice.call(arguments,2),[K]))}function t(k){T={};var r,d=k.length,B;for(r=0;r<d;r++){B=k[r];if(T[B._id])T[B._id].push(B);else T[B._id]=
[B]}}function j(){v=[];D={}}function m(k){return k.end?z(k.end):aa(k)}function u(k,r){v.push(r);if(D[k._id])D[k._id].push(r);else D[k._id]=[r]}function y(k,r){r.click(function(d){if(!r.hasClass("ui-draggable-dragging")&&!r.hasClass("ui-resizable-resizing"))return i("eventClick",this,k,d)}).hover(function(d){i("eventMouseover",this,k,d)},function(d){i("eventMouseout",this,k,d)})}function H(k,r){L(k,r,"show")}function G(k,r){L(k,r,"hide")}function L(k,r,d){k=D[k._id];var B,J=k.length;for(B=0;B<J;B++)k[B][0]!=
r[0]&&k[B][d]()}function A(k,r,d,B,J,N,s){var o=r.allDay,Z=r._id;ga(T[Z],d,B,J);i("eventDrop",k,r,d,B,J,function(){ga(T[Z],-d,-B,o);Q()},N,s);K.eventsChanged=true;Q(Z)}function P(k,r,d,B,J,N){var s=r._id;U(T[s],d,B);i("eventResize",k,r,d,B,function(){U(T[s],-d,-B);Q()},J,N);K.eventsChanged=true;Q(s)}function ga(k,r,d,B){d=d||0;for(var J,N=k.length,s=0;s<N;s++){J=k[s];if(B!==Y)J.allDay=B;ta(O(J.start,r,true),d);if(J.end)J.end=ta(O(J.end,r,true),d);da(J,E)}}function U(k,r,d){d=d||0;for(var B,J=k.length,
N=0;N<J;N++){B=k[N];B.end=ta(O(m(B),r,true),d);da(B,E)}}var K=this;K.element=a;K.calendar=b;K.name=e;K.opt=h;K.trigger=i;K.reportEvents=t;K.clearEventData=j;K.eventEnd=m;K.reportEventElement=u;K.eventElementHandlers=y;K.showEvents=H;K.hideEvents=G;K.eventDrop=A;K.eventResize=P;var aa=K.defaultEventEnd,da=b.normalizeEvent,Q=b.rerenderEvents,T={},v=[],D={},E=b.options}function tb(){function a(Q,T){var v=h("isRTL"),D,E=Q.length,k,r,d,B,J,N="",s,o={},Z={},ea=[],X=[];D=A();s=D.left;var $=D.right,ma=y();
H();var ua=K();for(D=0;D<E;D++){k=Q[D];r=k.event;d="fc-event fc-event-hori ";if(v){if(k.isStart)d+="fc-corner-right ";if(k.isEnd)d+="fc-corner-left ";B=k.isEnd?P(U(k.end.getDay()-1)):s;J=k.isStart?ga(U(k.start.getDay())):$}else{if(k.isStart)d+="fc-corner-left ";if(k.isEnd)d+="fc-corner-right ";B=k.isStart?P(U(k.start.getDay())):s;J=k.isEnd?ga(U(k.end.getDay()-1)):$}var ja="";if(r.color)ja="color:"+r.color+";";if(r.bgColor)ja+="background-color:"+r.bgColor+";";if(r.borderColor)ja+="border-color:"+
r.borderColor+";";N+="<div class='"+d+r.className.join(" ")+"' style='position:absolute;z-index:8;left:"+B+"px'><a"+(r.url?" href='"+Oa(r.url)+"'":"")+(ja?" style='"+ja+"'":"")+">"+(!r.allDay&&k.isStart?"<span class='fc-event-time'>"+Oa(da(r.start,r.end,h("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Oa(r.title)+"</span></a>"+((r.resizable||r.resizable===Y)&&(r.editable||r.editable===Y&&h("editable"))&&!h("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+
(v?"w":"e")+"'></div>":"")+"</div>";k.left=B;k.outerWidth=J-B}ua[0].innerHTML=N;N=ua.children();for(D=0;D<E;D++){k=Q[D];v=l(N[D]);r=k.event;s=i("eventRender",r,r,v);if(s===false)v.remove();else{if(s&&s!==true){v.remove();v=l(s).css({position:"absolute",left:k.left}).appendTo(ua)}k.element=v;if(r._id===T)aa(r,v,k);else v[0]._fci=D;t(r,v)}}zb(ua,Q,aa);for(D=0;D<E;D++){k=Q[D];if(v=k.element){r=o[T=k.key=Ab(v[0])];k.hsides=r===Y?(o[T]=gb(v[0],true)):r}}for(D=0;D<E;D++){k=Q[D];if(v=k.element)v[0].style.width=
k.outerWidth-k.hsides+"px"}for(D=0;D<E;D++){k=Q[D];if(v=k.element){r=Z[T=k.key];k.outerHeight=v[0].offsetHeight+(r===Y?(Z[T]=Cb(v[0])):r)}}for(o=D=0;o<ma;o++){for(Z=T=r=0;D<E&&(k=Q[D]).row==o;){if(k.level!=T){Z+=r;r=0;T++}r=Math.max(r,k.outerHeight||0);k.top=Z;D++}ea[o]=L(o).find("td:first div.fc-day-content > div");ea[o].height(Z+r)}for(o=0;o<ma;o++)X[o]=ea[o][0].offsetTop;for(D=0;D<E;D++){k=Q[D];if(v=k.element){v[0].style.top=X[k.row]+k.top+"px";r=k.event;i("eventAfterRender",r,r,v)}}}function b(Q,
T){if(!h("disableResizing")&&T.resizable){var v=G();T.resizable({handles:h("isRTL")?{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},grid:v,minWidth:v/2,containment:e.element.parent().parent(),start:function(D,E){T.css("z-index",9);m(Q,T);i("eventResizeStart",this,Q,D,E)},stop:function(D,E){i("eventResizeStop",this,Q,D,E);var k=Math.round((Qa(T)-E.originalSize.width)/v);if(k)u(this,Q,k,0,D,E);else{T.css("z-index",8);j(Q,T)}}})}}var e=this;e.renderDaySegs=a;e.resizableDayEvent=b;var h=e.opt,i=e.trigger,
t=e.reportEventElement,j=e.showEvents,m=e.hideEvents,u=e.eventResize,y=e.getRowCnt,H=e.getColCnt,G=e.getColWidth,L=e.allDayTR,A=e.allDayBounds,P=e.colContentLeft,ga=e.colContentRight,U=e.dayOfWeekCol,K=e.getDaySegmentContainer,aa=e.bindDaySeg,da=e.calendar.formatDates}function ob(){function a(G,L,A){b();L||(L=m(G,A));u(G,L,A);e(G,L,A)}function b(G){if(H){H=false;y();j("unselect",null,G)}}function e(G,L,A,P){H=true;j("select",null,G,L,A,P)}function h(G){var L=i.cellDate,A=i.cellIsAllDay,P=i.getHoverListener();
if(t("selectable")){b(G);var ga=this,U;P.start(function(K,aa){y();if(K&&A(K)){U=[L(aa),L(K)].sort(yb);u(U[0],U[1],true)}else U=null},G);l(document).one("mouseup",function(K){P.stop();if(U){+U[0]==+U[1]&&j("dayClick",ga,U[0],true,K);e(U[0],U[1],true,K)}})}}var i=this;i.select=a;i.unselect=b;i.reportSelection=e;i.daySelectionMousedown=h;var t=i.opt,j=i.trigger,m=i.defaultSelectionEnd,u=i.renderSelection,y=i.clearSelection,H=false;t("selectable")&&t("unselectAuto")&&l(document).mousedown(function(G){var L=
t("unselectCancel");if(L)if(l(G.target).parents(L).length)return;b(G)})}function nb(){function a(t,j){var m=i.shift();m||(m=l("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));m[0].parentNode!=j[0]&&m.appendTo(j);h.push(m.css(t).show());return m}function b(){for(var t;t=h.shift();)i.push(t.hide().unbind())}var e=this;e.renderOverlay=a;e.clearOverlays=b;var h=[],i=[]}function qb(a){var b=this,e,h;b.build=function(){e=[];h=[];a(e,h)};b.cell=function(i,t){var j=e.length,m=h.length,
u,y=-1,H=-1;for(u=0;u<j;u++)if(t>=e[u][0]&&t<e[u][1]){y=u;break}for(u=0;u<m;u++)if(i>=h[u][0]&&i<h[u][1]){H=u;break}return y>=0&&H>=0?{row:y,col:H}:null};b.rect=function(i,t,j,m,u){u=u.offset();return{top:e[i][0]-u.top,left:h[t][0]-u.left,width:h[m][1]-h[t][0],height:e[j][1]-e[i][0]}}}function rb(a){function b(m){m=a.cell(m.pageX,m.pageY);if(!m!=!j||m&&(m.row!=j.row||m.col!=j.col)){if(m){t||(t=m);i(m,t,m.row-t.row,m.col-t.col)}else i(m,t);j=m}}var e=this,h,i,t,j;e.start=function(m,u,y){i=m;t=j=null;
a.build();b(u);h=y||"mousemove";l(document).bind(h,b)};e.stop=function(){l(document).unbind(h,b);return j}}function sb(a){function b(j){return h[j]=h[j]||a(j)}var e=this,h={},i={},t={};e.left=function(j){return i[j]=i[j]===Y?b(j).position().left:i[j]};e.right=function(j){return t[j]=t[j]===Y?e.left(j)+Qa(b(j)):t[j]};e.clear=function(){h={};i={};t={}}}function Wa(a,b,e){a.setFullYear(a.getFullYear()+b);e||Ka(a);return a}function Xa(a,b,e){if(+a){b=a.getMonth()+b;var h=z(a);h.setDate(1);h.setMonth(b);
a.setMonth(b);for(e||Ka(a);a.getMonth()!=h.getMonth();)a.setDate(a.getDate()+(a<h?1:-1))}return a}function O(a,b,e){if(+a){b=a.getDate()+b;var h=z(a);h.setHours(9);h.setDate(b);a.setDate(b);e||Ka(a);hb(a,h)}return a}function hb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Sb)}function ta(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ka(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function z(a,b){if(b)return Ka(new Date(+a));return new Date(+a)}
function wb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function va(a,b,e){for(b=b||1;!a.getDay()||e&&a.getDay()==1||!e&&a.getDay()==6;)O(a,b);return a}function Fa(a,b){return Math.round((z(a,true)-z(b,true))/lb)}function kb(a,b,e,h){if(b!==Y&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(e!==Y&&e!=a.getMonth()){a.setDate(1);a.setMonth(e)}h!==Y&&a.setDate(h)}function $a(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a==
"string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);if(b===Y)b=true;return Db(a,b)||(a?new Date(a):null)}return null}function Db(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var e=new Date(a[1],0,1);if(b){b=new Date(a[1],0,1,9,0);if(a[3]){e.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){e.setDate(a[5]);b.setDate(a[5])}hb(e,b);a[7]&&e.setHours(a[7]);a[8]&&e.setMinutes(a[8]);
a[10]&&e.setSeconds(a[10]);a[12]&&e.setMilliseconds(Number("0."+a[12])*1E3);hb(e,b)}else{b=0;e.setUTCFullYear(a[1]);a[3]&&e.setUTCMonth(a[3]-1);a[5]&&e.setUTCDate(a[5]);a[7]&&e.setUTCHours(a[7]);a[8]&&e.setUTCMinutes(a[8]);a[10]&&e.setUTCSeconds(a[10]);a[12]&&e.setUTCMilliseconds(Number("0."+a[12])*1E3);if(a[14]){b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1}e=new Date(+e+b*60*1E3)}return e}function eb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();
if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}}function Ma(a,b,e){return Ya(a,null,b,e)}function Ya(a,b,e,h){h=h||Sa;var i=a,t=b,j,m=e.length,u,y,H,G="";for(j=0;j<m;j++){u=e.charAt(j);if(u=="'")for(y=j+1;y<m;y++){if(e.charAt(y)=="'"){if(i){G+=y==j+1?"'":e.substring(j+1,y);j=y}break}}else if(u=="(")for(y=j+1;y<m;y++){if(e.charAt(y)==")"){j=Ma(i,e.substring(j+1,y),h);if(parseInt(j.replace(/\D/,
"")))G+=j;j=y;break}}else if(u=="[")for(y=j+1;y<m;y++){if(e.charAt(y)=="]"){u=e.substring(j+1,y);j=Ma(i,u,h);if(j!=Ma(t,u,h))G+=j;j=y;break}}else if(u=="{"){i=b;t=a}else if(u=="}"){i=a;t=b}else{for(y=m;y>j;y--)if(H=Tb[e.substring(j,y)]){if(i)G+=H(i,h);j=y-1;break}if(y==j)if(i)G+=u}}return G}function Ra(a){return a.end?Ub(a.end,a.allDay):O(z(a.start),1)}function Ub(a,b){a=z(a);return b||a.getHours()||a.getMinutes()?O(a,1):Ka(a)}function Vb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&
b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Bb(a,b){return a.end>b.start&&a.start<b.end}function db(a,b,e,h){var i=[],t,j=a.length,m,u,y,H,G;for(t=0;t<j;t++){m=a[t];u=m.start;y=b[t];if(y>e&&u<h){if(u<e){u=z(e);H=false}else{u=u;H=true}if(y>h){y=z(h);G=false}else{y=y;G=true}i.push({event:m,start:u,end:y,isStart:H,isEnd:G,msLength:y-u})}}return i.sort(Vb)}function cb(a){var b=[],e,h=a.length,i,t,j,m;for(e=0;e<h;e++){i=a[e];for(t=0;;){j=false;if(b[t])for(m=
0;m<b[t].length;m++)if(Bb(b[t][m],i)){j=true;break}if(j)t++;else break}if(b[t])b[t].push(i);else b[t]=[i]}return b}function zb(a,b,e){a.unbind("mouseover").mouseover(function(h){for(var i=h.target,t;i!=this;){t=i;i=i.parentNode}if((i=t._fci)!==Y){t._fci=Y;t=b[i];e(t.event,t.element,t);l(h.target).trigger(h)}h.stopPropagation()})}function Aa(a,b,e){a.each(function(h,i){i.style.width=b-gb(i,e)+"px"})}function La(a,b,e){a.each(function(h,i){i.style.height=b-Va(i,e)+"px"})}function gb(a,b){return(parseFloat(l.curCSS(a,
"paddingLeft",true))||0)+(parseFloat(l.curCSS(a,"paddingRight",true))||0)+(parseFloat(l.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(l.curCSS(a,"borderRightWidth",true))||0)+(b?Wb(a):0)}function Wb(a){return(parseFloat(l.curCSS(a,"marginLeft",true))||0)+(parseFloat(l.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(l.curCSS(a,"paddingTop",true))||0)+(parseFloat(l.curCSS(a,"paddingBottom",true))||0)+(parseFloat(l.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(l.curCSS(a,
"borderBottomWidth",true))||0)+(b?Cb(a):0)}function Cb(a){return(parseFloat(l.curCSS(a,"marginTop",true))||0)+(parseFloat(l.curCSS(a,"marginBottom",true))||0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Ha(a){if(Ta)return a.innerHeight();return a.height()}function Qa(a){if(Ta)return a.innerWidth();return a.width()}function jb(){}function yb(a,b){return a-b}function Pa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==Y)return a[b];b=
b.split(/(?=[A-Z])/);for(var e=b.length-1,h;e>=0;e--){h=a[b[e].toLowerCase()];if(h!==Y)return h}return a[""]}function Oa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ab(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function pb(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}
var Ta=false;if(l.ui&&l.browser.msie&&parseInt(l.browser.version,10)>=9){Ta=true;var Xb=l.ui.mouse.prototype._mouseMove;l.ui.mouse.prototype._mouseMove=function(a){a.button=1;Xb.apply(this,[a])}}var Sa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},
columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",
prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Yb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ia=l.fullCalendar={},
Ja=Ia.views={};l.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),e;this.each(function(){var i=l.data(this,"fullCalendar");if(i&&l.isFunction(i[a])){i=i[a].apply(i,b);if(e===Y)e=i;a=="destroy"&&l.removeData(this,"fullCalendar")}});if(e!==Y)return e;return this}var h=a.eventSources||[];delete a.eventSources;if(a.events){h.push(a.events);delete a.events}a=l.extend(true,{},Sa,a.isRTL||a.isRTL===Y&&Sa.isRTL?Yb:{},a);this.each(function(i,t){i=l(t);t=new Eb(i,
a,h);i.data("fullCalendar",t);t.render()});return this};var Hb=1;Ja.month=Ib;Ja.basicWeek=Jb;Ja.basicDay=Kb;var bb;ib({weekMode:"fixed"});Ja.agendaWeek=Mb;Ja.agendaDay=Nb;ib({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ia.addDays=O;Ia.cloneDate=z;Ia.parseDate=$a;Ia.parseISO8601=Db;Ia.parseTime=eb;Ia.formatDate=Ma;Ia.formatDates=Ya;var Ea=["sun","mon",
"tue","wed","thu","fri","sat"],lb=864E5,Sb=36E5,Rb=6E4,Tb={s:function(a){return a.getSeconds()},ss:function(a){return Pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Pa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Pa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Pa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},
dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Pa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<
12?"AM":"PM"},u:function(a){return Ma(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}}})(jQuery);

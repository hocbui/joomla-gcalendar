/*

 FullCalendar v1.4.8-IE9
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sat Oct 16 17:10:03 2010 -0700

*/
(function(m,aa){function jb(a){m.extend(true,Sa,a)}function Eb(a,b,g){function h(e){if(na){E();ja();S();F(e)}else i()}function i(){va=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");na=m("<div class='fc-content "+va+"-widget-content' style='position:relative'/>").prependTo(a);ha=new Fb(r,b);(xa=ha.render())&&a.prepend(xa);y(b.defaultView);m(window).resize(A);u()||t()}function t(){setTimeout(function(){!B.start&&u()&&F()},0)}function j(){m(window).unbind("resize",
A);ha.destroy();na.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function n(){return ba.offsetWidth!==0}function u(){return m("body")[0].offsetWidth!==0}function y(e){if(!B||e!=B.name){f++;L();var s=B,G;if(s){if(s.eventsChanged){S();s.eventDirty=s.eventsChanged=false}(s.beforeHide||kb)();Ua(na,Ea(na));s.element.hide()}else Ua(na,1);na.css("overflow","hidden");if(B=ea[e])B.element.show();else B=ea[e]=new Ka[e](G=ua=m("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(na),
r);s&&ha.deactivateButton(s.name);ha.activateButton(e);F();na.css("overflow","");s&&Ua(na,1);G||(B.afterShow||kb)();f--}}function F(e){if(n()){f++;L();ka===aa&&E();if(!B.start||e||p<B.start||p>=B.end){B.render(p,e||0);I(true);!b.lazyFetching||V()?Y():B.renderEvents(fa())}else if(B.sizeDirty||B.eventsDirty||!b.lazyFetching){B.clearEvents();B.sizeDirty&&I();!b.lazyFetching||V()?Y():B.renderEvents(fa())}ga=a.outerWidth();B.sizeDirty=false;B.eventsDirty=false;ha.updateTitle(B.title);e=new Date;e>=B.start&&
e<B.end?ha.disableButton("today"):ha.enableButton("today");f--;B.trigger("viewDisplay",ba)}}function E(){ka=b.contentHeight?b.contentHeight:b.height?b.height-Va(na[0])-(xa?Ea(xa):0):Math.round(Qa(na)/Math.max(b.aspectRatio,0.5))}function I(e){f++;B.setHeight(ka,e);if(ua){ua.css("position","relative");ua=null}B.setWidth(Qa(na),e);f--}function A(){if(!f)if(B.start){var e=++c;setTimeout(function(){if(e==c&&!f&&n())if(ga!=(ga=a.outerWidth())){f++;P();B.trigger("windowResize",ba);f--}},200)}else t()}function P(){ja();
if(n()){E();I();L();B.rerenderEvents();B.sizeDirty=false}}function ja(){m.each(ea,function(e,s){s.sizeDirty=true})}function U(){S();if(n()){B.clearEvents();B.renderEvents(fa());B.eventsDirty=false}}function S(){m.each(ea,function(e,s){s.eventsDirty=true})}function Y(){Z(function(e){B.renderEvents(e)})}function W(e,s,G){B.select(e,s,G===aa?true:G)}function L(){B&&B.unselect()}function $(){F(-1)}function v(){F(1)}function D(){Wa(p,-1);F()}function M(){Wa(p,1);F()}function l(){p=new Date;F()}function o(e,
s,G){if(e instanceof Date)p=z(e);else lb(p,e,s,G);F()}function K(e,s,G){e!==aa&&Wa(p,e);s!==aa&&Xa(p,s);G!==aa&&N(p,G);F()}function d(){return z(p)}function H(){return B}function O(e,s){if(s===aa)return b[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio"){b[e]=s;P()}}function k(e,s){if(b[e])return b[e].apply(s||ba,Array.prototype.slice.call(arguments,2))}var r=this;r.options=b;r.render=h;r.destroy=j;r.changeView=y;r.select=W;r.unselect=L;r.rerenderEvents=U;r.prev=$;r.next=v;r.prevYear=D;r.nextYear=
M;r.today=l;r.gotoDate=o;r.incrementDate=K;r.formatDate=function(e,s){return Ma(e,s,b)};r.formatDates=function(e,s,G){return Ya(e,s,G,b)};r.getDate=d;r.getView=H;r.option=O;r.trigger=k;Gb.call(r,b,g);var Z=r.fetchEvents,V=r.isFetchNeeded,fa=r.clientEvents,ba=a[0],ha,xa,na,va,B,ea={},ga,ka,ua,c=0,f=0,p=new Date;lb(p,b.year,b.month,b.date);var w;b.droppable&&m(document).bind("dragstart",function(e,s){var G=e.target,R=m(G);if(!R.parents(".fc").length){var Q=b.dropAccept;if(m.isFunction(Q)?Q.call(G,R):
R.is(Q)){w=G;B.dragStart(w,e,s)}}}).bind("dragstop",function(e,s){if(w){B.dragStop(w,e,s);w=null}})}function Fb(a,b){function g(){I=b.theme?"ui":"fc";var A=b.header;if(A)return E=m("<table class='fc-header'/>").append(m("<tr/>").append(m("<td class='fc-header-left'/>").append(i(A.left))).append(m("<td class='fc-header-center'/>").append(i(A.center))).append(m("<td class='fc-header-right'/>").append(i(A.right))))}function h(){E.remove()}function i(A){if(A){var P=m("<tr/>");m.each(A.split(" "),function(ja){ja>
0&&P.append("<td><span class='fc-header-space'/></td>");var U;m.each(this.split(","),function(S,Y){if(Y=="title"){P.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");U&&U.addClass(I+"-corner-right");U=null}else{var W;if(a[Y])W=a[Y];else if(Ka[Y])W=function(){L.removeClass(I+"-state-hover");a.changeView(Y)};if(W){U&&U.addClass(I+"-no-right");var L;S=b.theme?Za(b.buttonIcons,Y):null;var $=Za(b.buttonText,Y);if(S)L=m("<div class='fc-button-"+Y+" ui-state-default'><a><span class='ui-icon ui-icon-"+
S+"'/></a></div>");else if($)L=m("<div class='fc-button-"+Y+" "+I+"-state-default'><a><span>"+$+"</span></a></div>");if(L){L.click(function(){L.hasClass(I+"-state-disabled")||W()}).mousedown(function(){L.not("."+I+"-state-active").not("."+I+"-state-disabled").addClass(I+"-state-down")}).mouseup(function(){L.removeClass(I+"-state-down")}).hover(function(){L.not("."+I+"-state-active").not("."+I+"-state-disabled").addClass(I+"-state-hover")},function(){L.removeClass(I+"-state-hover").removeClass(I+"-state-down")}).appendTo(m("<td/>").appendTo(P));
U?U.addClass(I+"-no-right"):L.addClass(I+"-corner-left");$a(L.closest("td"));U=L}}}});U&&U.addClass(I+"-corner-right")});return m("<table/>").append(P)}}function t(A){E.find("h2.fc-header-title").html(A)}function j(A){E.find("div.fc-button-"+A).addClass(I+"-state-active")}function n(A){E.find("div.fc-button-"+A).removeClass(I+"-state-active")}function u(A){E.find("div.fc-button-"+A).addClass(I+"-state-disabled")}function y(A){E.find("div.fc-button-"+A).removeClass(I+"-state-disabled")}var F=this;
F.render=g;F.destroy=h;F.updateTitle=t;F.activateButton=j;F.deactivateButton=n;F.disableButton=u;F.enableButton=y;var E=m([]),I}function Gb(a,b){function g(d){b.indexOf(d)<0&&b.push(d)}function h(d){g(d);y(d,v)}function i(){o=b=[];b=[].concat(b);v()}function t(d){var H=[];b=m.grep(b,function(O){if(typeof O==="object"&&d!==O)H=H.concat(O);return O!=d});o=m.grep(o,function(O){return O.source!=d});b=H.concat(b);v()}function j(d){o=[];n(b,d)}function n(d,H){function O(fa,ba){var ha=L();if(Z!=ha)Z.eventsDirty=
true;if(k==D&&M<=ha.visStart&&l>=ha.visEnd){if(m.inArray(fa,b)!=-1){for(ha=0;ha<ba.length;ha++){Y(ba[ha]);ba[ha].source=fa}o=o.concat(ba)}--r||H&&H(o)}}var k=++D,r=d.length,Z=L();M=z(Z.visStart);l=z(Z.visEnd);for(var V=0;V<d.length;V++)u(d[V],O)}function u(d,H){function O(Z){H(d,Z)}function k(Z){O(Z);S()}if(typeof d=="string"){var r={};r[a.startParam]=Math.round(M.getTime()/1E3);r[a.endParam]=Math.round(l.getTime()/1E3);r.browserTimezone=M.getTimezoneOffset();if(a.cacheParam)r[a.cacheParam]=(new Date).getTime();
U();m.ajax({url:d,global:false,type:a.requestMethod||"GET",dataType:"json",data:r,cache:a.cacheParam||false,success:k})}else if(m.isFunction(d)){U();d(z(M),z(l),k)}else d&&O(d)}function y(d,H){n([d],H)}function F(){j(v)}function E(){var d=L();return!M||d.visStart<M||d.visEnd>l}function I(d){var H,O=o.length,k,r=L().defaultEventEnd,Z=d.start-d._start,V=d.end?d.end-(d._end||r(d)):0;for(H=0;H<O;H++){k=o[H];if(k._id==d._id&&k!=d){k.start=new Date(+k.start+Z);k.end=d.end?k.end?new Date(+k.end+V):new Date(+r(k)+
V):null;k.title=d.title;k.url=d.url;k.allDay=d.allDay;k.className=d.className;k.editable=d.editable;k.resizable=d.resizable;k.color=d.color;k.bgColor=d.bgColor;k.borderColor=d.borderColor;Y(k)}}Y(d);v()}function A(d,H){Y(d);if(!d.source){if(H)(d.source=b[0]).push(d);o.push(d)}v()}function P(d){if(d){if(!m.isFunction(d)){var H=d+"";d=function(k){return k._id==H}}o=m.grep(o,d,true);for(O=0;O<b.length;O++)if(typeof b[O]=="object")b[O]=m.grep(b[O],d,true)}else{o=[];for(var O=0;O<b.length;O++)if(typeof b[O]==
"object")b[O]=[]}v()}function ja(d){if(m.isFunction(d))return m.grep(o,d);else if(d){d+="";return m.grep(o,function(H){return H._id==d})}return o}function U(){K++||$("loading",null,true)}function S(){--K||$("loading",null,false)}function Y(d){d._id=d._id||(d.id===aa?"_fc"+Hb++:d.id+"");if(d.date){if(!d.start)d.start=d.date;delete d.date}d._start=z(d.start=ab(d.start,a.ignoreTimezone));d.end=ab(d.end,a.ignoreTimezone);if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?z(d.end):null;if(d.allDay===aa)d.allDay=
a.allDayDefault;if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=[]}var W=this;W.fetchEvents=j;W.refetchEvents=F;W.isFetchNeeded=E;W.addEventSource=h;W.addEventSourceFast=g;W.clearEventSources=i;W.removeEventSource=t;W.updateEvent=I;W.renderEvent=A;W.removeEvents=P;W.clientEvents=ja;W.normalizeEvent=Y;var L=W.getView,$=W.trigger,v=W.rerenderEvents,D=0,M,l,o=[],K=0;b.unshift([])}function Ib(a,b){function g(n,u){if(u){Xa(n,u);n.setDate(1)}n=z(n,true);
n.setDate(1);u=Xa(z(n),1);var y=z(n),F=z(u),E=i("firstDay"),I=i("weekends")?0:1;if(I){wa(y);wa(F,-1,true)}N(y,-((y.getDay()-Math.max(E,I)+7)%7));N(F,(7-F.getDay()+Math.max(E,I))%7);E=Math.round((F-y)/(mb*7));if(i("weekMode")=="fixed"){N(F,(6-E)*7);E=6}h.title=j(n,i("titleFormat"));h.start=n;h.end=u;h.visStart=y;h.visEnd=F;t(E,I?5:7,true)}var h=this;h.render=g;bb.call(h,a,b,"month");var i=h.opt,t=h.renderBasic,j=b.formatDate}function Jb(a,b){function g(n,u){u&&N(n,u*7);n=N(z(n),-((n.getDay()-i("firstDay")+
7)%7));u=N(z(n),7);var y=z(n),F=z(u),E=i("weekends");if(!E){wa(y);wa(F,-1,true)}h.title=j(y,N(z(F),-1),i("titleFormat"));h.start=n;h.end=u;h.visStart=y;h.visEnd=F;t(1,E?7:5,false)}var h=this;h.render=g;bb.call(h,a,b,"basicWeek");var i=h.opt,t=h.renderBasic,j=b.formatDates}function Kb(a,b){function g(n,u){if(u){N(n,u);i("weekends")||wa(n,u<0?-1:1)}h.title=j(n,i("titleFormat"));h.start=h.visStart=z(n,true);h.end=h.visEnd=N(z(h.start),1);t(1,1,false)}var h=this;h.render=g;bb.call(h,a,b,"basicDay");var i=
h.opt,t=h.renderBasic,j=b.formatDate}function bb(a,b,g){function h(c,f,p){fa=c;ba=f;if(O=D("isRTL")){k=-1;r=ba-1}else{k=1;r=0}Z=D("firstDay");V=D("weekends")?0:1;var w=D("theme")?"ui":"fc",e=D("columnFormat"),s=v.start.getMonth(),G=La(new Date),R,Q=z(v.visStart);if(B){l();f=B.find("tr").length;if(fa<f)B.find("tr:gt("+(fa-1)+")").remove();else if(fa>f){c="";for(f=f;f<fa;f++){c+="<tr class='fc-week"+f+"'>";for(R=0;R<ba;R++){c+="<td class='fc-"+Fa[Q.getDay()]+" "+w+"-state-default fc-new fc-day"+(f*
ba+R)+(R==r?" fc-leftmost":"")+"'>"+(p?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";N(Q,1);V&&wa(Q)}c+="</tr>"}B.append(c)}j(B.find("td.fc-new").removeClass("fc-new"));Q=z(v.visStart);B.find("td").each(function(){var la=m(this);if(fa>1)Q.getMonth()==s?la.removeClass("fc-other-month"):la.addClass("fc-other-month");if(+Q==+G)la.removeClass("fc-not-today fc-before-today").addClass(w+"-state-highlight fc-today");else+Q<+G?
la.addClass("fc-not-today fc-before-today").removeClass(w+"-state-highlight fc-today"):la.addClass("fc-not-today").removeClass(w+"-state-highlight fc-today fc-before-today");la.find("div.fc-day-number").text(Q.getDate());N(Q,1);V&&wa(Q)});if(fa==1){Q=z(v.visStart);va.find("th").each(function(la,ia){m(ia).text(H(Q,e));ia.className=ia.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[Q.getDay()]);N(Q,1);V&&wa(Q)});Q=z(v.visStart);B.find("td").each(function(la,ia){ia.className=ia.className.replace(/^fc-\w+(?= )/,
"fc-"+Fa[Q.getDay()]);N(Q,1);V&&wa(Q)})}}else{var ca=m("<table/>").appendTo(a);c="<thead><tr>";for(f=0;f<ba;f++){c+="<th class='fc-"+Fa[Q.getDay()]+" "+w+"-state-default"+(f==r?" fc-leftmost":"")+"'>"+H(Q,e)+"</th>";N(Q,1);V&&wa(Q)}va=m(c+"</tr></thead>").appendTo(ca);c="<tbody>";Q=z(v.visStart);for(f=0;f<fa;f++){c+="<tr class='fc-week"+f+"'>";for(R=0;R<ba;R++){c+="<td class='fc-"+Fa[Q.getDay()]+" "+w+"-state-default fc-day"+(f*ba+R)+(R==r?" fc-leftmost":"")+(fa>1&&Q.getMonth()!=s?" fc-other-month":
"")+(+Q==+G?" fc-today "+w+"-state-highlight":+Q<+G?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(p?"<div class='fc-day-number'>"+Q.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";N(Q,1);V&&wa(Q)}c+="</tr>"}B=m(c+"</tbody>").appendTo(ca);j(B.find("td"));ea=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function i(c){na=c;c=B.find("tr td:first-child");var f=na-va.outerHeight(),p;if(D("weekMode")=="variable")p=
f=Math.floor(f/(fa==1?2:6));else{p=Math.floor(f/fa);f=f-p*(fa-1)}if(cb===aa){var w=B.find("tr:first").find("td:first");Ia(w,p);cb=p!=w.outerHeight()}if(cb){c.slice(0,-1).height(p);c.slice(-1).height(f)}else{Ia(c.slice(0,-1),p);Ia(c.slice(-1),f)}}function t(c){xa=c;ua.clear();ha=Math.floor(xa/ba);Aa(va.find("th").slice(0,-1),ha)}function j(c){c.click(n).mousedown(d)}function n(c){if(!D("selectable")){var f=parseInt(this.className.match(/fc\-day(\d+)/)[1]);f=N(z(v.visStart),Math.floor(f/ba)*7+f%ba);
M("dayClick",this,f,true,c)}}function u(c,f,p){p&&ga.build();p=z(v.visStart);for(var w=N(z(p),ba),e=0;e<fa;e++){var s=new Date(Math.max(p,c)),G=new Date(Math.min(w,f));if(s<G){var R;if(O){R=Ga(G,p)*k+r+1;s=Ga(s,p)*k+r+1}else{R=Ga(s,p);s=Ga(G,p)}j(y(e,R,e,s-1))}N(p,7);N(w,7)}}function y(c,f,p,w){c=ga.rect(c,f,p,w,a);return o(c,a)}function F(c){return z(c)}function E(c,f){u(c,N(z(f),1),true)}function I(){K()}function A(c,f){ka.start(function(p){K();p&&y(p.row,p.col,p.row,p.col)},f)}function P(c,f,p){var w=
ka.stop();K();if(w){w=W(w);M("drop",c,w,true,f,p)}}function ja(c){return z(c.start)}function U(c){return ua.left(c)}function S(c){return ua.right(c)}function Y(c){return(c-Math.max(Z,V)+ba)%ba}function W(c){return N(z(v.visStart),c.row*7+c.col*k+r)}function L(c){return B.find("tr:eq("+c+")")}function $(){return{left:0,right:xa}}var v=this;v.renderBasic=h;v.setHeight=i;v.setWidth=t;v.renderDayOverlay=u;v.defaultSelectionEnd=F;v.renderSelection=E;v.clearSelection=I;v.dragStart=A;v.dragStop=P;v.defaultEventEnd=
ja;v.getHoverListener=function(){return ka};v.colContentLeft=U;v.colContentRight=S;v.dayOfWeekCol=Y;v.cellDate=W;v.cellIsAllDay=function(){return true};v.allDayTR=L;v.allDayBounds=$;v.getRowCnt=function(){return fa};v.getColCnt=function(){return ba};v.getColWidth=function(){return ha};v.getDaySegmentContainer=function(){return ea};nb.call(v,a,b,g);ob.call(v);pb.call(v);Lb.call(v);var D=v.opt,M=v.trigger,l=v.clearEvents,o=v.renderOverlay,K=v.clearOverlays,d=v.daySelectionMousedown,H=b.formatDate,O,
k,r,Z,V,fa,ba,ha,xa,na,va,B,ea,ga,ka,ua;$a(a.addClass("fc-grid"));ga=new qb(function(c,f){var p,w,e,s=B.find("tr:first td");if(O)s=m(s.get().reverse());s.each(function(G,R){p=m(R);w=p.offset().left;if(G)e[1]=w;e=[w];f[G]=e});e[1]=w+p.outerWidth();B.find("tr").each(function(G,R){p=m(R);w=p.offset().top;if(G)e[1]=w;e=[w];c[G]=e});e[1]=w+p.outerHeight()});ka=new rb(ga);ua=new sb(function(c){return B.find("td:eq("+c+") div div")})}function Lb(){function a(M){y(D=M);$(h(M))}function b(M){g();$(h(D),M)}
function g(){F();ja().empty()}function h(M){var l=W(),o=L(),K=z(j.visStart);o=N(z(K),o);var d=m.map(M,Ra),H,O,k,r,Z,V,fa=[];for(H=0;H<l;H++){O=db(eb(M,d,K,o));for(k=0;k<O.length;k++){r=O[k];for(Z=0;Z<r.length;Z++){V=r[Z];V.row=H;V.level=k;fa.push(V)}}N(K,7);N(o,7)}return fa}function i(M,l,o){E(M,l);if(M.editable||M.editable===aa&&n("editable")){t(M,l);o.isEnd&&v(M,l)}}function t(M,l){if(!n("disableDragging")&&l.draggable){var o=U(),K;l.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),
start:function(d,H){u("eventDragStart",l,M,d,H);A(M,l);o.start(function(O,k,r,Z){l.draggable("option","revert",!O||!r&&!Z);Y();if(O){K=r*7+Z*(n("isRTL")?-1:1);S(N(z(M.start),K),N(Ra(M),K))}else K=0},d,"drag")},stop:function(d,H){o.stop();Y();u("eventDragStop",l,M,d,H);if(K){l.find("a").removeAttr("href");P(this,M,K,0,M.allDay,d,H)}else{m.browser.msie&&l.css("filter","");I(M,l)}}})}}var j=this;j.renderEvents=a;j.rerenderEvents=b;j.clearEvents=g;j.bindDaySeg=i;tb.call(j);var n=j.opt,u=j.trigger,y=j.reportEvents,
F=j.clearEventData,E=j.eventElementHandlers,I=j.showEvents,A=j.hideEvents,P=j.eventDrop,ja=j.getDaySegmentContainer,U=j.getHoverListener,S=j.renderDayOverlay,Y=j.clearOverlays,W=j.getRowCnt,L=j.getColCnt,$=j.renderDaySegs,v=j.resizableDayEvent,D=[]}function Mb(a,b){function g(n,u){u&&N(n,u*7);n=N(z(n),-((n.getDay()-i("firstDay")+7)%7));u=N(z(n),7);var y=z(n),F=z(u),E=i("weekends");if(!E){wa(y);wa(F,-1,true)}h.title=j(y,N(z(F),-1),i("titleFormat"));h.start=n;h.end=u;h.visStart=y;h.visEnd=F;t(E?7:5)}
var h=this;h.render=g;ub.call(h,a,b,"agendaWeek");var i=h.opt,t=h.renderAgenda,j=b.formatDates}function Nb(a,b){function g(n,u){if(u){N(n,u);i("weekends")||wa(n,u<0?-1:1)}u=z(n,true);var y=N(z(u),1);h.title=j(n,i("titleFormat"));h.start=h.visStart=u;h.end=h.visEnd=y;t(1)}var h=this;h.render=g;ub.call(h,a,b,"agendaDay");var i=h.opt,t=h.renderAgenda,j=b.formatDate}function ub(a,b,g){function h(q){f=q;ca=r("theme")?"ui":"fc";ia=r("weekends")?0:1;la=r("firstDay");if(sa=r("isRTL")){da=-1;T=f-1}else{da=
1;T=0}pa=fb(r("minTime"));ma=fb(r("maxTime"));q=sa?N(z(k.visEnd),-1):z(k.visStart);var x=z(q),C=La(new Date),J=r("columnFormat");if(ea){V();r("weekNumbers")&&ea.find("tr:first th:first").text(B(k.visStart,"w"));ea.find("tr:first th").slice(1,-1).each(function(Na,ya){m(ya).text(B(x,J));ya.className=ya.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[x.getDay()]);N(x,da);ia&&wa(x,da)});x=z(q);c.find("td").each(function(Na,ya){ya.className=ya.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[x.getDay()]);if(+x==+C)m(ya).removeClass("fc-not-today fc-before-today").addClass(ca+
"-state-highlight fc-today");else+x<+C?m(ya).addClass("fc-not-today fc-before-today").removeClass(ca+"-state-highlight fc-today"):m(ya).addClass("fc-not-today").removeClass(ca+"-state-highlight fc-today fc-before-today");N(x,da);ia&&wa(x,da)})}else{var X,ra,Ha=r("slotMinutes")%15==0,qa="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(r("allDaySlot")?"":" fc-last")+"'><th class='fc-leftmost "+ca+"-state-default'>"+(r("weekNumbers")?B(k.visStart,
"w"):"&nbsp;")+"</th>";for(X=0;X<f;X++){qa+="<th class='fc-"+Fa[x.getDay()]+" "+ca+"-state-default'>"+B(x,J)+"</th>";N(x,da);ia&&wa(x,da)}qa+="<th class='"+ca+"-state-default'>&nbsp;</th></tr>";if(r("allDaySlot"))qa+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+ca+"-state-default'>"+r("allDayText")+"</th><td colspan='"+f+"' class='"+ca+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+ca+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+
(f+2)+"' class='"+ca+"-state-default fc-leftmost'><div/></th></tr>";qa+="</table></div>";ea=m(qa).appendTo(a);y(ea.find("td"));vb=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ea);x=wb();var gb=ta(z(x),ma);ta(x,pa);qa="<table>";for(X=0;x<gb;X++){ra=x.getMinutes();qa+="<tr class='"+(!X?"fc-first":!ra?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+ca+"-state-default'>"+(!Ha||!ra?B(x,r("axisFormat")):"&nbsp;")+"</th><td class='fc-slot"+X+" "+ca+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";
ta(x,r("slotMinutes"));p++}qa+="</table>";ga=m("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(ka=m("<div style='position:relative;overflow:hidden'>").append(ua=m(qa))).appendTo(a);F(ga.find("td"));xb=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ka);x=z(q);qa="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(X=0;X<f;X++){qa+="<td class='fc-"+Fa[x.getDay()]+
" "+ca+"-state-default "+(!X?"fc-leftmost ":"")+(+x==+C?ca+"-state-highlight fc-today":+x<+C?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";N(x,da);ia&&wa(x,da)}qa+="</tr></table></div>";c=m(qa).appendTo(a)}}function i(q,x){if(q===aa)q=R;R=q;Ba={};var C=q-Ea(ea);C=Math.min(C,Ea(ua));Ia(ga,C);Ta&&Ia(ga,q-Ea(ea)-1);s=Ea(ga.find("tr:first div"))+1;x&&j()}function t(q){G=q;Ca.clear();Aa(ga,q);ga.css("overflow","auto").width(q);var x=ea.find("tr:first th"),
C=ea.find("tr.fc-all-day th:last"),J=c.find("td"),X=ga[0].clientWidth;Aa(ua,X);X=ga[0].clientWidth;ua.width(X);w=0;var ra=ea.find("tr:lt(2) th:first").add(ga.find("tr:first th"));ra.width(1);ra.each(function(){w=Math.max(w,m(this).outerWidth())});Aa(ra,w);e=Math.floor((X-w)/f);Aa(x.slice(1,-2),e);Aa(J.slice(0,-1),e);if(q!=X){Aa(x.slice(-2,-1),X-w-e*(f-1));x.slice(-1).show();C.show()}else{ga.css("overflow","hidden");x.slice(-2,-1).width("");x.slice(-1).hide();C.hide()}c.css({top:Ea(ea.find("tr")),
left:w,width:X-w,height:R})}function j(){var q=wb(),x=z(q);x.setHours(r("firstHour"));var C=Y(q,x)+1;q=function(){ga.scrollTop(C)};q();setTimeout(q,0)}function n(){Q=ga.scrollTop()}function u(){ga.scrollTop(Q)}function y(q){q.click(E).mousedown(na)}function F(q){q.click(E).mousedown(d)}function E(q){if(!r("selectable")){var x=Math.min(f-1,Math.floor((q.pageX-c.offset().left)/e));x=N(z(k.visStart),x*da+T);var C=this.className.match(/fc-slot(\d+)/);if(C){C=parseInt(C[1])*r("slotMinutes");var J=Math.floor(C/
60);x.setHours(J);x.setMinutes(C%60+pa);Z("dayClick",this,x,false,q)}else Z("dayClick",this,x,true,q)}}function I(q,x,C){C&&oa.build();var J=z(k.visStart);if(sa){C=Ga(x,J)*da+T+1;q=Ga(q,J)*da+T+1}else{C=Ga(q,J);q=Ga(x,J)}C=Math.max(0,C);q=Math.min(f,q);C<q&&y(A(0,C,0,q-1))}function A(q,x,C,J){q=oa.rect(q,x,C,J,ea);return fa(q,ea)}function P(q,x){for(var C=z(k.visStart),J=N(z(C),1),X=0;X<f;X++){var ra=new Date(Math.max(C,q)),Ha=new Date(Math.min(J,x));if(ra<Ha){var qa=X*da+T;qa=oa.rect(0,qa,0,qa,ka);
ra=Y(C,ra);Ha=Y(C,Ha);qa.top=ra;qa.height=Ha-ra;F(fa(qa,ka))}N(C,1);N(J,1)}}function ja(q){return w+Ca.left(q)}function U(q){return w+Ca.right(q)}function S(q){return(q-Math.max(la,ia)+f)%f*da+T}function Y(q,x){q=z(q,true);if(x<ta(z(q),pa))return 0;if(x>=ta(z(q),ma))return Ea(ka);q=r("slotMinutes");x=x.getHours()*60+x.getMinutes()-pa;var C=Math.floor(x/q),J=Ba[C];if(J===aa)J=Ba[C]=ga.find("tr:eq("+C+") td div")[0].offsetTop;return Math.max(0,Math.round(J-1+s*(x%q/q)))}function W(q){var x=N(z(k.visStart),
q.col*da+T);q=q.row;r("allDaySlot")&&q--;q>=0&&ta(x,pa+q*r("slotMinutes"));return x}function L(q){return r("allDaySlot")&&!q.row}function $(){return{left:w,right:G}}function v(){return ea.find("tr.fc-all-day")}function D(q){var x=z(q.start);if(q.allDay)return x;return ta(x,r("defaultEventMinutes"))}function M(q,x){if(x)return z(q);return ta(z(q),r("slotMinutes"))}function l(q,x,C){if(C)r("allDaySlot")&&I(q,N(z(x),1),true);else o(q,x)}function o(q,x){var C=r("selectHelper");oa.build();if(C){var J=
Ga(q,k.visStart)*da+T;if(J>=0&&J<f){J=oa.rect(0,J,0,J,ka);var X=Y(q,q),ra=Y(q,x);if(ra>X){J.top=X;J.height=ra-X;J.left+=2;J.width-=5;if(m.isFunction(C)){if(q=C(q,x)){J.position="absolute";J.zIndex=8;za=m(q).css(J).appendTo(ka)}}else{za=m(va({title:"",start:q,end:x,className:[],editable:false},J,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));m.browser.msie&&za.find("span.fc-event-bg").hide();za.css("opacity",r("dragOpacity"))}if(za){F(za);ka.append(za);Aa(za,J.width,true);Ia(za,J.height,
true)}}}}else P(q,x)}function K(){ba();if(za){za.remove();za=null}}function d(q){if(q.which==1&&r("selectable")){xa(q);var x=this,C;Da.start(function(J,X){K();if(J&&J.col==X.col&&!L(J)){X=W(X);J=W(J);C=[X,ta(z(X),r("slotMinutes")),J,ta(z(J),r("slotMinutes"))].sort(yb);o(C[0],C[3])}else C=null},q);m(document).one("mouseup",function(J){Da.stop();if(C){+C[0]==+C[1]&&Z("dayClick",x,C[0],false,J);ha(C[0],C[3],false,J)}})}}function H(q,x){Da.start(function(C){ba();if(C)if(L(C))A(C.row,C.col,C.row,C.col);
else{C=W(C);var J=ta(z(C),r("defaultEventMinutes"));P(C,J)}},x)}function O(q,x,C){var J=Da.stop();ba();J&&Z("drop",q,W(J),L(J),x,C)}var k=this;k.renderAgenda=h;k.setWidth=t;k.setHeight=i;k.beforeHide=n;k.afterShow=u;k.defaultEventEnd=D;k.timePosition=Y;k.dayOfWeekCol=S;k.cellDate=W;k.cellIsAllDay=L;k.allDayTR=v;k.allDayBounds=$;k.getHoverListener=function(){return Da};k.colContentLeft=ja;k.colContentRight=U;k.getDaySegmentContainer=function(){return vb};k.getSlotSegmentContainer=function(){return xb};
k.getMinMinute=function(){return pa};k.getMaxMinute=function(){return ma};k.getBodyContent=function(){return ka};k.getRowCnt=function(){return 1};k.getColCnt=function(){return f};k.getColWidth=function(){return e};k.getSlotHeight=function(){return s};k.defaultSelectionEnd=M;k.renderDayOverlay=I;k.renderSelection=l;k.clearSelection=K;k.dragStart=H;k.dragStop=O;nb.call(k,a,b,g);ob.call(k);pb.call(k);Ob.call(k);var r=k.opt,Z=k.trigger,V=k.clearEvents,fa=k.renderOverlay,ba=k.clearOverlays,ha=k.reportSelection,
xa=k.unselect,na=k.daySelectionMousedown,va=k.slotSegHtml,B=b.formatDate,ea,ga,ka,ua,c,f,p=0,w,e,s,G,R,Q,ca,la,ia,sa,da,T,pa,ma,oa,Da,Ca,Ba={},za,vb,xb;$a(a.addClass("fc-agenda"));oa=new qb(function(q,x){function C(ya){return Math.max(qa,Math.min(gb,ya))}var J,X,ra;c.find("td").each(function(ya,Pb){J=m(Pb);X=J.offset().left;if(ya)ra[1]=X;ra=[X];x[ya]=ra});ra[1]=X+J.outerWidth();if(r("allDaySlot")){J=ea.find("td");X=J.offset().top;q[0]=[X,X+J.outerHeight()]}for(var Ha=ka.offset().top,qa=ga.offset().top,
gb=qa+ga.outerHeight(),Na=0;Na<p;Na++)q.push([C(Ha+s*Na),C(Ha+s*(Na+1))])});Da=new rb(oa);Ca=new sb(function(q){return c.find("td:eq("+q+") div div")})}function Ob(){function a(c,f){S(ua=c);var p,w=c.length,e=[],s=[];for(p=0;p<w;p++)c[p].allDay?e.push(c[p]):s.push(c[p]);if(P("allDaySlot")){H(h(e),f);L()}j(i(s),f)}function b(c){g();a(ua,c)}function g(){Y();$().empty();v().empty()}function h(c){c=db(eb(c,m.map(c,Ra),A.visStart,A.visEnd));var f,p=c.length,w,e,s,G=[];for(f=0;f<p;f++){w=c[f];for(e=0;e<
w.length;e++){s=w[e];s.row=0;s.level=f;G.push(s)}}return G}function i(c){var f=k(),p=l(),w=M(),e=ta(z(A.visStart),p),s=m.map(c,t),G,R,Q,ca,la,ia,sa=[];for(G=0;G<f;G++){R=db(eb(c,s,e,ta(z(e),w-p)));Qb(R);for(Q=0;Q<R.length;Q++){ca=R[Q];for(la=0;la<ca.length;la++){ia=ca[la];ia.col=G;ia.level=Q;sa.push(ia)}}N(e,1,true)}return sa}function t(c){return c.end?z(c.end):ta(z(c.start),P("defaultEventMinutes"))}function j(c,f){var p,w=c.length,e,s,G,R,Q,ca,la,ia,sa,da,T="",pa,ma,oa={},Da={},Ca=v(),Ba;p=k();
if(pa=P("isRTL")){ma=-1;Ba=p-1}else{ma=1;Ba=0}for(p=0;p<w;p++){e=c[p];s=e.event;G="fc-event fc-event-vert ";if(e.isStart)G+="fc-corner-top ";if(e.isEnd)G+="fc-corner-bottom ";R=o(e.start,e.start);Q=o(e.start,e.end);ca=e.col;la=e.level;ia=e.forward||0;sa=K(ca*ma+Ba);da=d(ca*ma+Ba)-sa;da=Math.min(da-6,da*0.95);ca=la?da/(la+ia+1):ia?(da/(ia+1)-6)*2:da;la=sa+da/(la+ia+1)*la*ma+(pa?da-ca:0);e.top=R;e.left=la;e.outerWidth=ca;e.outerHeight=Q-R;T+=n(s,e,G)}Ca[0].innerHTML=T;pa=Ca.children();for(p=0;p<w;p++){e=
c[p];s=e.event;T=m(pa[p]);ma=ja("eventRender",s,s,T);if(ma===false)T.remove();else{if(ma&&ma!==true){T.remove();T=m(ma).css({position:"absolute",top:e.top,left:e.left}).appendTo(Ca)}e.element=T;if(s._id===f)y(s,T,e);else T[0]._fci=p;fa(s,T)}}zb(Ca,c,y);for(p=0;p<w;p++){e=c[p];if(T=e.element){s=oa[f=e.key=Ab(T[0])];e.vsides=s===aa?(oa[f]=Va(T[0],true)):s;s=Da[f];e.hsides=s===aa?(Da[f]=hb(T[0],true)):s;f=T.find("span.fc-event-title");if(f.length)e.titleTop=f[0].offsetTop}}for(p=0;p<w;p++){e=c[p];if(T=
e.element){T[0].style.width=Math.max(0,e.outerWidth-e.hsides)+"px";oa=Math.max(0,e.outerHeight-e.vsides);T[0].style.height=oa+"px";s=e.event;if(e.titleTop!==aa&&oa-e.titleTop<10){T.find("span.fc-event-time").text(ga(s.start,P("timeFormat"))+" - "+s.title);T.find("span.fc-event-title").remove()}ja("eventAfterRender",s,s,T)}}}function n(c,f,p){var w="";if(c.color)w+="color:"+c.color+";";if(c.bgColor)w+="background-color:"+c.bgColor+";";if(c.borderColor)w+="border-color:"+c.borderColor+";";return"<div class='"+
p+c.className.join(" ")+"' style='position:absolute;z-index:8;top:"+f.top+"px;left:"+f.left+"px'><a"+(c.url?" href='"+Oa(c.url)+"'":"")+(w?" style='"+w+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Oa(ka(c.start,c.end,P("timeFormat")))+"</span><span class='fc-event-title'>"+Oa(c.title)+"</span></a>"+((c.resizable||c.resizable===aa)&&(c.editable||c.editable===aa&&P("editable"))&&!P("disableResizing")&&m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":
"")+"</div>"}function u(c,f,p){W(c,f);if(c.editable||c.editable===aa&&P("editable")){F(c,f,p.isStart);p.isEnd&&O(c,f,r())}}function y(c,f,p){W(c,f);if(c.editable||c.editable===aa&&P("editable")){var w=f.find("span.fc-event-time");E(c,f,w);p.isEnd&&I(c,f,w)}}function F(c,f,p){if(!P("disableDragging")&&f.draggable){var w,e=true,s,G=P("isRTL")?-1:1,R=D(),Q=r(),ca=Z(),la=l();f.draggable({zIndex:9,opacity:P("dragOpacity","month"),revertDuration:P("dragRevertDuration"),start:function(sa,da){ja("eventDragStart",
f,c,sa,da);ha(c,f);w=Qa(f);R.start(function(T,pa,ma,oa){f.draggable("option","revert",!T||!ma&&!oa);B();if(T){s=oa*G;if(T.row){if(p&&e){Aa(f,Q-10);Ia(f,ca*Math.round((c.end?(c.end-c.start)/Rb:P("defaultEventMinutes"))/P("slotMinutes")));f.draggable("option","grid",[Q,1]);e=false}}else{va(N(z(c.start),s),N(Ra(c),s));ia()}}},sa,"drag")},stop:function(sa,da){var T=R.stop();B();ja("eventDragStop",f,c,sa,da);if(T&&(!e||s)){f.find("a").removeAttr("href");T=0;e||(T=Math.round((f.offset().top-V().offset().top)/
ca)*P("slotMinutes")+la-(c.start.getHours()*60+c.start.getMinutes()));xa(this,c,s,T,e,sa,da)}else{ia();m.browser.msie&&f.css("filter","");ba(c,f)}}});function ia(){if(!e){Aa(f,w);f.height("");f.draggable("option","grid",null);e=true}}}}function E(c,f,p){if(!P("disableDragging")&&f.draggable){var w,e=false,s,G,R,Q=P("isRTL")?-1:1,ca=D(),la=k(),ia=r(),sa=Z();f.draggable({zIndex:9,scroll:false,grid:[ia,sa],axis:la==1?"y":false,opacity:P("dragOpacity"),revertDuration:P("dragRevertDuration"),start:function(pa,
ma){ja("eventDragStart",f,c,pa,ma);ha(c,f);m.browser.msie&&f.find("span.fc-event-bg").hide();w=f.position();G=R=0;ca.start(function(oa,Da,Ca,Ba){f.draggable("option","revert",!oa);B();if(oa){s=Ba*Q;if(P("allDaySlot")&&!oa.row){if(!e){e=true;p.hide();f.draggable("option","grid",null)}va(N(z(c.start),s),N(Ra(c),s))}else T()}},pa,"drag")},drag:function(pa,ma){G=Math.round((ma.position.top-w.top)/sa)*P("slotMinutes");if(G!=R){e||da(G);R=G}},stop:function(pa,ma){var oa=ca.stop();B();ja("eventDragStop",
f,c,pa,ma);if(oa&&(s||G||e))xa(this,c,s,e?0:G,e,pa,ma);else{T();f.css(w);da(0);m.browser.msie&&f.css("filter","").find("span.fc-event-bg").css("display","");ba(c,f)}}});function da(pa){var ma=ta(z(c.start),pa),oa;if(c.end)oa=ta(z(c.end),pa);p.text(ka(ma,oa,P("timeFormat")))}function T(){if(e){p.css("display","");f.draggable("option","grid",[ia,sa]);e=false}}}}function I(c,f,p){if(!P("disableResizing")&&f.resizable){var w,e,s=Z();f.resizable({handles:{s:"div.ui-resizable-s"},grid:s,start:function(G,
R){w=e=0;ha(c,f);m.browser.msie&&m.browser.version=="6.0"&&f.css("overflow","hidden");f.css("z-index",9);ja("eventResizeStart",this,c,G,R)},resize:function(G,R){w=Math.round((Math.max(s,Ea(f))-R.originalSize.height)/s);if(w!=e){p.text(ka(c.start,!w&&!c.end?null:ta(U(c),P("slotMinutes")*w),P("timeFormat")));e=w}},stop:function(G,R){ja("eventResizeStop",this,c,G,R);if(w)na(this,c,0,P("slotMinutes")*w,G,R);else{f.css("z-index",8);ba(c,f)}}})}}var A=this;A.renderEvents=a;A.rerenderEvents=b;A.clearEvents=
g;A.slotSegHtml=n;A.bindDaySeg=u;tb.call(A);var P=A.opt,ja=A.trigger,U=A.eventEnd,S=A.reportEvents,Y=A.clearEventData,W=A.eventElementHandlers,L=A.setHeight,$=A.getDaySegmentContainer,v=A.getSlotSegmentContainer,D=A.getHoverListener,M=A.getMaxMinute,l=A.getMinMinute,o=A.timePosition,K=A.colContentLeft,d=A.colContentRight,H=A.renderDaySegs,O=A.resizableDayEvent,k=A.getColCnt,r=A.getColWidth,Z=A.getSlotHeight,V=A.getBodyContent,fa=A.reportEventElement,ba=A.showEvents,ha=A.hideEvents,xa=A.eventDrop,
na=A.eventResize,va=A.renderDayOverlay,B=A.clearOverlays,ea=A.calendar,ga=ea.formatDate,ka=ea.formatDates,ua=[]}function Qb(a){var b,g,h,i,t,j;for(b=a.length-1;b>0;b--){i=a[b];for(g=0;g<i.length;g++){t=i[g];for(h=0;h<a[b-1].length;h++){j=a[b-1][h];if(Bb(t,j))j.forward=Math.max(j.forward||0,(t.forward||0)+1)}}}}function nb(a,b,g){function h(l,o){l=M[l];if(typeof l=="object")return Za(l,o||g);return l}function i(l,o){return b.trigger.apply(b,[l,o||S].concat(Array.prototype.slice.call(arguments,2),[S]))}
function t(l){$={};var o,K=l.length,d;for(o=0;o<K;o++){d=l[o];if($[d._id])$[d._id].push(d);else $[d._id]=[d]}}function j(){v=[];D={}}function n(l){return l.end?z(l.end):Y(l)}function u(l,o){v.push(o);if(D[l._id])D[l._id].push(o);else D[l._id]=[o]}function y(l,o){o.click(function(K){if(!o.hasClass("ui-draggable-dragging")&&!o.hasClass("ui-resizable-resizing"))return i("eventClick",this,l,K)}).hover(function(K){i("eventMouseover",this,l,K)},function(K){i("eventMouseout",this,l,K)})}function F(l,o){I(l,
o,"show")}function E(l,o){I(l,o,"hide")}function I(l,o,K){l=D[l._id];var d,H=l.length;for(d=0;d<H;d++)l[d][0]!=o[0]&&l[d][K]()}function A(l,o,K,d,H,O,k){var r=o.allDay,Z=o._id;ja($[Z],K,d,H);i("eventDrop",l,o,K,d,H,function(){ja($[Z],-K,-d,r);L()},O,k);S.eventsChanged=true;L(Z)}function P(l,o,K,d,H,O){var k=o._id;U($[k],K,d);i("eventResize",l,o,K,d,function(){U($[k],-K,-d);L()},H,O);S.eventsChanged=true;L(k)}function ja(l,o,K,d){K=K||0;for(var H,O=l.length,k=0;k<O;k++){H=l[k];if(d!==aa)H.allDay=d;
ta(N(H.start,o,true),K);if(H.end)H.end=ta(N(H.end,o,true),K);W(H,M)}}function U(l,o,K){K=K||0;for(var d,H=l.length,O=0;O<H;O++){d=l[O];d.end=ta(N(n(d),o,true),K);W(d,M)}}var S=this;S.element=a;S.calendar=b;S.name=g;S.opt=h;S.trigger=i;S.reportEvents=t;S.clearEventData=j;S.eventEnd=n;S.reportEventElement=u;S.eventElementHandlers=y;S.showEvents=F;S.hideEvents=E;S.eventDrop=A;S.eventResize=P;var Y=S.defaultEventEnd,W=b.normalizeEvent,L=b.rerenderEvents,$={},v=[],D={},M=b.options}function tb(){function a(L,
$){var v=h("isRTL"),D,M=L.length,l,o,K,d,H,O="",k,r={},Z={},V,fa=[],ba=[];D=A();k=D.left;var ha=D.right,xa=y();F();var na=S();for(D=0;D<M;D++){l=L[D];o=l.event;K="fc-event fc-event-hori ";if(v){if(l.isStart)K+="fc-corner-right ";if(l.isEnd)K+="fc-corner-left ";d=l.isEnd?P(U(l.end.getDay()-1)):k;H=l.isStart?ja(U(l.start.getDay())):ha}else{if(l.isStart)K+="fc-corner-left ";if(l.isEnd)K+="fc-corner-right ";d=l.isStart?P(U(l.start.getDay())):k;H=l.isEnd?ja(U(l.end.getDay()-1)):ha}var va="";if(o.color)va=
"color:"+o.color+";";if(o.bgColor)va+="background-color:"+o.bgColor+";";if(o.borderColor)va+="border-color:"+o.borderColor+";";O+="<div class='"+K+o.className.join(" ")+"' style='position:absolute;z-index:8;left:"+d+"px'><a"+(o.url?" href='"+Oa(o.url)+"'":"")+(va?" style='"+va+"'":"")+">"+(!o.allDay&&l.isStart?"<span class='fc-event-time'>"+Oa(W(o.start,o.end,h("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Oa(o.title)+"</span></a>"+((o.resizable||o.resizable===aa)&&(o.editable||o.editable===
aa&&h("editable"))&&!h("disableResizing")&&m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(v?"w":"e")+"'></div>":"")+"</div>";l.left=d;l.outerWidth=H-d}na[0].innerHTML=O;O=na.children();for(D=0;D<M;D++){l=L[D];v=m(O[D]);o=l.event;k=i("eventRender",o,o,v);if(k===false)v.remove();else{if(k&&k!==true){v.remove();v=m(k).css({position:"absolute",left:l.left}).appendTo(na)}l.element=v;if(o._id===$)Y(o,v,l);else v[0]._fci=D;t(o,v)}}zb(na,L,Y);for(D=0;D<M;D++){l=L[D];if(v=l.element){o=r[$=
l.key=Ab(v[0])];l.hsides=o===aa?(r[$]=hb(v[0],true)):o}}for(D=0;D<M;D++){l=L[D];if(v=l.element)v[0].style.width=Math.max(0,l.outerWidth-l.hsides)+"px"}for(D=0;D<M;D++){l=L[D];if(v=l.element){o=Z[$=l.key];l.outerHeight=v[0].offsetHeight+(o===aa?(Z[$]=Cb(v[0])):o)}}var B,ea,ga={0:0},ka={0:0};for(V=0;V<xa;V++){for(ea=r=0;ea<7;ea++){B=0;jQuery.each(L,function(ua,c){if(c.row==V&&c.start.getDay()==ea){B=Math.max(B,c.level);ga[c.level]=c.outerHeight||0}});for(D=0;D<B;D++)ka[D+1]=ka[D]+ga[D];jQuery.each(L,
function(ua,c){if(c.row==V&&c.start.getDay()==ea)c.top=ka[c.level]});r=Math.max(r,ka[B]+ga[B])}fa[V]=I(V).find("td:first div.fc-day-content > div");Ia(fa[V],r)}for(V=0;V<xa;V++)ba[V]=fa[V][0].offsetTop;for(D=0;D<M;D++){l=L[D];if(v=l.element){v[0].style.top=ba[l.row]+l.top+"px";o=l.event;i("eventAfterRender",o,o,v)}}}function b(L,$){if(!h("disableResizing")&&$.resizable){var v=E();$.resizable({handles:h("isRTL")?{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},grid:v,minWidth:v/2,containment:g.element.parent().parent(),
start:function(D,M){$.css("z-index",9);n(L,$);i("eventResizeStart",this,L,D,M)},stop:function(D,M){i("eventResizeStop",this,L,D,M);var l=Math.round((Qa($)-M.originalSize.width)/v);if(l)u(this,L,l,0,D,M);else{$.css("z-index",8);j(L,$)}}})}}var g=this;g.renderDaySegs=a;g.resizableDayEvent=b;var h=g.opt,i=g.trigger,t=g.reportEventElement,j=g.showEvents,n=g.hideEvents,u=g.eventResize,y=g.getRowCnt,F=g.getColCnt,E=g.getColWidth,I=g.allDayTR,A=g.allDayBounds,P=g.colContentLeft,ja=g.colContentRight,U=g.dayOfWeekCol,
S=g.getDaySegmentContainer,Y=g.bindDaySeg,W=g.calendar.formatDates}function pb(){function a(E,I,A){b();I||(I=n(E,A));u(E,I,A);g(E,I,A)}function b(E){if(F){F=false;y();j("unselect",null,E)}}function g(E,I,A,P){F=true;j("select",null,E,I,A,P)}function h(E){var I=i.cellDate,A=i.cellIsAllDay,P=i.getHoverListener();if(E.which==1&&t("selectable")){b(E);var ja=this,U;P.start(function(S,Y){y();if(S&&A(S)){U=[I(Y),I(S)].sort(yb);u(U[0],U[1],true)}else U=null},E);m(document).one("mouseup",function(S){P.stop();
if(U){+U[0]==+U[1]&&j("dayClick",ja,U[0],true,S);g(U[0],U[1],true,S)}})}}var i=this;i.select=a;i.unselect=b;i.reportSelection=g;i.daySelectionMousedown=h;var t=i.opt,j=i.trigger,n=i.defaultSelectionEnd,u=i.renderSelection,y=i.clearSelection,F=false;t("selectable")&&t("unselectAuto")&&m(document).mousedown(function(E){var I=t("unselectCancel");if(I)if(m(E.target).parents(I).length)return;b(E)})}function ob(){function a(t,j){var n=i.shift();n||(n=m("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));
n[0].parentNode!=j[0]&&n.appendTo(j);h.push(n.css(t).show());return n}function b(){for(var t;t=h.shift();)i.push(t.hide().unbind())}var g=this;g.renderOverlay=a;g.clearOverlays=b;var h=[],i=[]}function qb(a){var b=this,g,h;b.build=function(){g=[];h=[];a(g,h)};b.cell=function(i,t){var j=g.length,n=h.length,u,y=-1,F=-1;for(u=0;u<j;u++)if(t>=g[u][0]&&t<g[u][1]){y=u;break}for(u=0;u<n;u++)if(i>=h[u][0]&&i<h[u][1]){F=u;break}return y>=0&&F>=0?{row:y,col:F}:null};b.rect=function(i,t,j,n,u){u=u.offset();
return{top:g[i][0]-u.top,left:h[t][0]-u.left,width:h[n][1]-h[t][0],height:g[j][1]-g[i][0]}}}function rb(a){function b(n){n=a.cell(n.pageX,n.pageY);if(!n!=!j||n&&(n.row!=j.row||n.col!=j.col)){if(n){t||(t=n);i(n,t,n.row-t.row,n.col-t.col)}else i(n,t);j=n}}var g=this,h,i,t,j;g.start=function(n,u,y){i=n;t=j=null;a.build();b(u);h=y||"mousemove";m(document).bind(h,b)};g.stop=function(){m(document).unbind(h,b);return j}}function sb(a){function b(j){return h[j]=h[j]||a(j)}var g=this,h={},i={},t={};g.left=
function(j){return i[j]=i[j]===aa?b(j).position().left:i[j]};g.right=function(j){return t[j]=t[j]===aa?g.left(j)+Qa(b(j)):t[j]};g.clear=function(){h={};i={};t={}}}function Wa(a,b,g){a.setFullYear(a.getFullYear()+b);g||La(a);return a}function Xa(a,b,g){if(+a){b=a.getMonth()+b;var h=z(a);h.setDate(1);h.setMonth(b);a.setMonth(b);for(g||La(a);a.getMonth()!=h.getMonth();)a.setDate(a.getDate()+(a<h?1:-1))}return a}function N(a,b,g){if(+a){b=a.getDate()+b;var h=z(a);h.setHours(9);h.setDate(b);a.setDate(b);
g||La(a);ib(a,h)}return a}function ib(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Sb)}function ta(a,b){a.setMinutes(a.getMinutes()+b);return a}function La(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function z(a,b){if(b)return La(new Date(+a));return new Date(+a)}function wb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function wa(a,b,g){for(b=b||1;!a.getDay()||g&&a.getDay()==1||!g&&a.getDay()==6;)N(a,b);return a}function Ga(a,
b){return Math.round((z(a,true)-z(b,true))/mb)}function lb(a,b,g,h){if(b!==aa&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(g!==aa&&g!=a.getMonth()){a.setDate(1);a.setMonth(g)}h!==aa&&a.setDate(h)}function ab(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);if(b===aa)b=true;return Db(a,b)||(a?new Date(a):null)}return null}function Db(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);
if(!a)return null;var g=new Date(a[1],0,1);if(b||!a[14]){b=new Date(a[1],0,1,9,0);if(a[3]){g.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){g.setDate(a[5]);b.setDate(a[5])}ib(g,b);a[7]&&g.setHours(a[7]);a[8]&&g.setMinutes(a[8]);a[10]&&g.setSeconds(a[10]);a[12]&&g.setMilliseconds(Number("0."+a[12])*1E3);ib(g,b)}else{g.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);g.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1;g=new Date(+g+b*60*
1E3)}return g}function fb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}}function Ma(a,b,g){return Ya(a,null,b,g)}function Ya(a,b,g,h){h=h||Sa;var i=a,t=b,j,n=g.length,u,y,F,E="";for(j=0;j<n;j++){u=g.charAt(j);if(u=="'")for(y=j+1;y<n;y++){if(g.charAt(y)=="'"){if(i){E+=y==j+1?"'":g.substring(j+
1,y);j=y}break}}else if(u=="(")for(y=j+1;y<n;y++){if(g.charAt(y)==")"){j=Ma(i,g.substring(j+1,y),h);if(parseInt(j.replace(/\D/,"")))E+=j;j=y;break}}else if(u=="[")for(y=j+1;y<n;y++){if(g.charAt(y)=="]"){u=g.substring(j+1,y);j=Ma(i,u,h);if(j!=Ma(t,u,h))E+=j;j=y;break}}else if(u=="{"){i=b;t=a}else if(u=="}"){i=a;t=b}else{for(y=n;y>j;y--)if(F=Tb[g.substring(j,y)]){if(i)E+=F(i,h);j=y-1;break}if(y==j)if(i)E+=u}}return E}function Ra(a){return a.end?Ub(a.end,a.allDay):N(z(a.start),1)}function Ub(a,b){a=
z(a);return b||a.getHours()||a.getMinutes()?N(a,1):La(a)}function Vb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Bb(a,b){return a.end>b.start&&a.start<b.end}function eb(a,b,g,h){var i=[],t,j=a.length,n,u,y,F,E;for(t=0;t<j;t++){n=a[t];u=n.start;y=b[t];if(y>g&&u<h){if(u<g){u=z(g);F=false}else{u=u;F=true}if(y>h){y=z(h);E=false}else{y=y;E=true}i.push({event:n,start:u,end:y,isStart:F,
isEnd:E,msLength:y-u})}}return i.sort(Vb)}function db(a){var b=[],g,h=a.length,i,t,j,n;for(g=0;g<h;g++){i=a[g];for(t=0;;){j=false;if(b[t])for(n=0;n<b[t].length;n++)if(Bb(b[t][n],i)){j=true;break}if(j)t++;else break}if(b[t])b[t].push(i);else b[t]=[i]}return b}function zb(a,b,g){a.unbind("mouseover").mouseover(function(h){for(var i=h.target,t;i!=this;){t=i;i=i.parentNode}if((i=t._fci)!==aa){t._fci=aa;t=b[i];g(t.event,t.element,t);m(h.target).trigger(h)}h.stopPropagation()})}function Aa(a,b,g){a.each(function(h,
i){i.style.width=Math.max(0,b-hb(i,g))+"px"})}function Ia(a,b,g){a.each(function(h,i){i.style.height=Math.max(0,b-Va(i,g))+"px"})}function hb(a,b){return(parseFloat(m.curCSS(a,"paddingLeft",true))||0)+(parseFloat(m.curCSS(a,"paddingRight",true))||0)+(parseFloat(m.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(m.curCSS(a,"borderRightWidth",true))||0)+(b?Wb(a):0)}function Wb(a){return(parseFloat(m.curCSS(a,"marginLeft",true))||0)+(parseFloat(m.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(m.curCSS(a,
"paddingTop",true))||0)+(parseFloat(m.curCSS(a,"paddingBottom",true))||0)+(parseFloat(m.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(m.curCSS(a,"borderBottomWidth",true))||0)+(b?Cb(a):0)}function Cb(a){return(parseFloat(m.curCSS(a,"marginTop",true))||0)+(parseFloat(m.curCSS(a,"marginBottom",true))||0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Ea(a){if(Ta)return a.innerHeight();return a.height()}function Qa(a){if(Ta)return a.innerWidth();
return a.width()}function kb(){}function yb(a,b){return a-b}function Pa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==aa)return a[b];b=b.split(/(?=[A-Z])/);for(var g=b.length-1,h;g>=0;g--){h=a[b[g].toLowerCase()];if(h!==aa)return h}return a[""]}function Oa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ab(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,
"")}function $a(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Sa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},
isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",
today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Xb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ja=m.fullCalendar={version:"1.4.8-IE9"},Ka=Ja.views={},Ta=false;if(m.ui&&m.browser.msie&&
parseInt(m.browser.version,10)>=9){Ta=true;var Yb=m.ui.mouse.prototype._mouseMove;m.ui.mouse.prototype._mouseMove=function(a){a.button=1;Yb.apply(this,[a])}}m.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),g;this.each(function(){var i=m.data(this,"fullCalendar");if(i&&m.isFunction(i[a])){i=i[a].apply(i,b);if(g===aa)g=i;a=="destroy"&&m.removeData(this,"fullCalendar")}});if(g!==aa)return g;return this}var h=a.eventSources||[];delete a.eventSources;if(a.events){h.push(a.events);
delete a.events}a=m.extend(true,{},Sa,a.isRTL||a.isRTL===aa&&Sa.isRTL?Xb:{},a);this.each(function(i,t){i=m(t);t=new Eb(i,a,h);i.data("fullCalendar",t);t.render()});return this};var Hb=1;Ka.month=Ib;Ka.basicWeek=Jb;Ka.basicDay=Kb;var cb;jb({weekMode:"fixed"});Ka.agendaWeek=Mb;Ka.agendaDay=Nb;jb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ja.addDays=
N;Ja.cloneDate=z;Ja.parseDate=ab;Ja.parseISO8601=Db;Ja.parseTime=fb;Ja.formatDate=Ma;Ja.formatDates=Ya;var Fa=["sun","mon","tue","wed","thu","fri","sat"],mb=864E5,Sb=36E5,Rb=6E4,Tb={s:function(a){return a.getSeconds()},ss:function(a){return Pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Pa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Pa(a.getHours())},
d:function(a){return a.getDate()},dd:function(a){return Pa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Pa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?
"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ma(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"},w:function(a,b){return a.getWeek(b).toString()}};if(Date.prototype.getWeek===aa)Date.prototype.getWeek=function(){var a=new Date(this.getFullYear(),0,4),b=(a.getDay()-1+7)%7;return Math.ceil(((this-a)/864E5+
(b+1))/7)||53}})(jQuery);

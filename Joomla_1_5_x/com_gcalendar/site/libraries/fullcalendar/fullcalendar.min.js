/*

 FullCalendar v1.4.7
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, required jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2009 Adam Shaw
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html

 Date: Fri Sep 17 05:13:43 2010 +0200

*/
(function(p,K){function Ia(a,b){a._id=a._id||(a.id===K?"_fc"+Eb++:a.id+"");if(a.date){if(!a.start)a.start=a.date;delete a.date}a._start=q(a.start=ib(a.start));a.end=ib(a.end);if(a.end&&a.end<=a.start)a.end=null;a._end=a.end?q(a.end):null;if(a.allDay===K)a.allDay=b.allDayDefault;if(a.className){if(typeof a.className=="string")a.className=a.className.split(/\s+/)}else a.className=[]}function Wa(a,b,f,c){function g(m,e,j,s){N=m;L=e;Z=b.theme?"ui":"fc";O=b.weekends?0:1;ta=b.firstDay;if(ua=b.isRTL){ma=
-1;R=L-1}else{ma=1;R=0}var r=new Date,J=B.start.getMonth(),H=Ga(r),F,x=q(B.visStart);if(V){t();e=V.find("tr").length;if(N<e)V.find("tr:gt("+(N-1)+")").remove();else if(N>e){m="";for(e=e;e<N;e++){m+="<tr class='fc-week"+e+"'>";for(F=0;F<L;F++){m+="<td class='fc-"+Aa[x.getDay()]+" "+Z+"-state-default fc-new fc-day"+(e*L+F)+(F==R?" fc-leftmost":"")+"'>"+(s?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";C(x,1);O&&da(x)}m+="</tr>"}V.append(m)}fa(V.find("td.fc-new").removeClass("fc-new"));
x=q(B.visStart);V.find("td").each(function(){var ga=p(this);if(N>1)x.getMonth()==J?ga.removeClass("fc-other-month"):ga.addClass("fc-other-month");if(+x==+H)ga.removeClass("fc-not-today").removeClass("fc-before-today").addClass("fc-today").addClass(Z+"-state-highlight");else+x<+r?ga.addClass("fc-before-today").addClass("fc-not-today").removeClass(Z+"-state-highlight"):ga.addClass("fc-not-today").removeClass("fc-before-today").removeClass("fc-today").removeClass(Z+"-state-highlight");ga.find("div.fc-day-number").text(x.getDate());
C(x,1);O&&da(x)});if(N==1){x=q(B.visStart);y.find("th").each(function(){p(this).text(pa(x,j,b));this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+Aa[x.getDay()]);C(x,1);O&&da(x)});x=q(B.visStart);V.find("td").each(function(){this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+Aa[x.getDay()]);C(x,1);O&&da(x)})}}else{var ca=p("<table/>").appendTo(a);m="<thead><tr>";for(e=0;e<L;e++){m+="<th class='fc-"+Aa[x.getDay()]+" "+Z+"-state-default"+(e==R?" fc-leftmost":"")+"'>"+pa(x,j,b)+"</th>";
C(x,1);O&&da(x)}y=p(m+"</tr></thead>").appendTo(ca);m="<tbody>";x=q(B.visStart);for(e=0;e<N;e++){m+="<tr class='fc-week"+e+"'>";for(F=0;F<L;F++){m+="<td class='fc-"+Aa[x.getDay()]+" "+Z+"-state-default fc-day"+(e*L+F)+(F==R?" fc-leftmost":"")+(N>1&&x.getMonth()!=J?" fc-other-month":"")+(+x==+H?" fc-today "+Z+"-state-highlight":+x<+r?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(s?"<div class='fc-day-number'>"+x.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";
C(x,1);O&&da(x)}m+="</tr>"}V=p(m+"</tbody>").appendTo(ca);fa(V.find("td"));P=p("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function o(m){Fa=m;m=V.find("tr td:first-child");var e=Fa-y.outerHeight(),j;if(b.weekMode=="variable")j=e=Math.floor(e/(N==1?2:6));else{j=Math.floor(e/N);e=e-j*(N-1)}if(Xa===K){var s=V.find("tr:first").find("td:first");s.outerHeight(j);Xa=j!=s.outerHeight()}if(Xa){m.slice(0,-1).outerHeight(j);m.slice(-1).outerHeight(e)}else{Sa(m.slice(0,-1),j);Sa(m.slice(-1),
e)}}function k(m){qa=m;ja.clear();Ja(y.find("th").slice(0,-1),Ba=Math.floor(qa/L))}function z(m){B.reportEvents(xa=m);M(I(m))}function w(m){t();M(I(xa),m)}function t(){B._clearEvents();P.empty()}function I(m){var e=q(B.visStart),j=C(q(e),L),s=p.map(m,Pa),r,J,H,F,x,ca,ga=[];for(r=0;r<N;r++){J=Ya(B.sliceSegs(m,s,e,j));for(H=0;H<J.length;H++){F=J[H];for(x=0;x<F.length;x++){ca=F[x];ca.row=r;ca.level=H;ga.push(ca)}}C(e,7);C(j,7)}return ga}function M(m,e){jb(m,N,B,0,qa,function(j){return V.find("tr:eq("+
j+")")},ja.left,ja.right,P,va,e)}function va(m,e,j){B.eventElementHandlers(m,e);if(m.editable||m.editable===K&&b.editable){G(m,e);j.isEnd&&B.resizableDayEvent(m,e,Ba)}}function G(m,e){if(!b.disableDragging&&e.draggable){var j;e.draggable({zIndex:9,delay:50,opacity:B.option("dragOpacity"),revertDuration:b.dragRevertDuration,start:function(s,r){B.trigger("eventDragStart",e,m,s,r);B.hideEvents(m,e);$.start(function(J,H,F,x){e.draggable("option","revert",!J||!F&&!x);ha();if(J){j=F*7+x*ma;na(C(q(m.start),
j),C(Pa(m),j))}else j=0},s,"drag")},stop:function(s,r){$.stop();ha();B.trigger("eventDragStop",e,m,s,r);if(j){e.find("a").removeAttr("href");B.eventDrop(this,m,j,0,m.allDay,s,r)}else{p.browser.msie&&e.css("filter","");B.showEvents(m,e)}}})}}function fa(m){m.click(D).mousedown(ka)}function D(m){if(!B.option("selectable")){var e=parseInt(this.className.match(/fc\-day(\d+)/)[1]);e=C(q(B.visStart),Math.floor(e/L)*7+e%L);B.trigger("dayClick",this,e,true,m)}}function Q(m,e,j,s){aa=true;B.trigger("select",
B,m,e,j,s)}function ia(m){if(aa){ha();aa=false;B.trigger("unselect",B,m)}}function na(m,e){for(var j=q(B.visStart),s=C(q(j),L),r=0;r<N;r++){var J=new Date(Math.max(j,m)),H=new Date(Math.min(s,e));if(J<H){var F;if(ua){F=Ca(H,j)*ma+R+1;J=Ca(J,j)*ma+R+1}else{F=Ca(J,j);J=Ca(H,j)}fa(ra(r,F,r,J-1))}C(j,7);C(s,7)}}function ra(m,e,j,s){m=T.rect(m,e,j,s,a);return B.renderOverlay(m,a)}function ha(){B.clearOverlays()}function W(m){return C(q(B.visStart),m.row*7+m.col*ma+R)}var Z,ta,O,ua,ma,R,qa,Fa,N,L,Ba,y,
V,xa=[],P,ja=new kb(function(m){return V.find("td:eq("+(m-Math.max(ta,O)+L)%L+") div div")}),B=p.extend(this,lb,f,{renderGrid:g,renderEvents:z,rerenderEvents:w,clearEvents:t,setHeight:o,setWidth:k,defaultEventEnd:function(m){return q(m.start)}});B.name=c;B.init(a,b);mb(a.addClass("fc-grid"));var T=new nb(function(m,e){var j,s,r,J=V.find("tr:first td");if(ua)J=p(J.get().reverse());J.each(function(H,F){j=p(F);s=j.offset().left;if(H)r[1]=s;r=[s];e[H]=r});r[1]=s+j.outerWidth();V.find("tr").each(function(H,
F){j=p(F);s=j.offset().top;if(H)r[1]=s;r=[s];m[H]=r});r[1]=s+j.outerHeight()}),$=new ob(T),aa=false,ka=pb(B,$,W,function(){return true},na,ha,Q,ia);B.select=function(m,e,j){T.build();ia();e||(e=q(m));na(m,C(q(e),1));Q(m,e,j)};B.unselect=ia;qb(B,ia);B.dragStart=function(m,e){$.start(function(j){ha();j&&ra(j.row,j.col,j.row,j.col)},e)};B.dragStop=function(m,e,j){var s=$.stop();ha();if(s){s=W(s);B.trigger("drop",m,s,true,e,j)}}}function jb(a,b,f,c,g,o,k,z,w,t,I){var M=f.options,va=M.isRTL,G,fa=a.length,
D,Q,ia,na,ra,ha="",W={},Z={},ta=[],O=[];for(G=0;G<fa;G++){D=a[G];Q=D.event;ia="fc-event fc-event-hori ";if(va){if(D.isStart)ia+="fc-corner-right ";if(D.isEnd)ia+="fc-corner-left ";na=D.isEnd?k(D.end.getDay()-1):c;ra=D.isStart?z(D.start.getDay()):g}else{if(D.isStart)ia+="fc-corner-left ";if(D.isEnd)ia+="fc-corner-right ";na=D.isStart?k(D.start.getDay()):c;ra=D.isEnd?z(D.end.getDay()-1):g}ha+="<div class='"+ia+Q.className.join(" ")+"' style='position:absolute;z-index:8;left:"+na+"px'><a"+(Q.url?" href='"+
Ka(Q.url)+"'":"")+">"+(!Q.allDay&&D.isStart?"<span class='fc-event-time'>"+Ka(Ha(Q.start,Q.end,f.option("timeFormat"),M))+"</span>":"")+"<span class='fc-event-title'>"+Ka(Q.title)+"</span></a>"+((Q.editable||Q.editable===K&&M.editable)&&!M.disableResizing&&p.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(va?"w":"e")+"'></div>":"")+"</div>";D.left=na;D.outerWidth=ra-na}w[0].innerHTML=ha;g=w.children();for(G=0;G<fa;G++){D=a[G];c=p(g[G]);Q=D.event;k=f.trigger("eventRender",Q,Q,c);if(k===
false)c.remove();else{if(k&&k!==true){c.remove();c=p(k).css({position:"absolute",left:D.left}).appendTo(w)}D.element=c;if(Q._id===I)t(Q,c,D);else c[0]._fci=G;f.reportEventElement(Q,c)}}rb(w,a,t);for(G=0;G<fa;G++){D=a[G];if(c=D.element){t=W[w=D.key=sb(c[0])];D.hsides=t===K?(W[w]=Za(c[0],true)):t}}for(G=0;G<fa;G++){D=a[G];if(c=D.element)c[0].style.width=D.outerWidth-D.hsides+"px"}for(G=0;G<fa;G++){D=a[G];if(c=D.element){t=Z[w=D.key];D.outerHeight=c[0].offsetHeight+(t===K?(Z[w]=tb(c[0])):t)}}for(W=G=
0;W<b;W++){for(Z=w=t=0;G<fa&&(D=a[G]).row==W;){if(D.level!=w){Z+=t;t=0;w++}t=Math.max(t,D.outerHeight||0);D.top=Z;G++}ta[W]=o(W).find("td:first div.fc-day-content > div");ta[W].outerHeight(Z+t)}for(W=0;W<b;W++)O[W]=ta[W][0].offsetTop;for(G=0;G<fa;G++){D=a[G];if(c=D.element){c[0].style.top=O[D.row]+D.top+"px";Q=D.event;f.trigger("eventAfterRender",Q,Q,c)}}}function ub(a,b,f,c){function g(d,i){m=d;oa=b.theme?"ui":"fc";La=b.weekends?0:1;vb=b.firstDay;if(Ta=b.isRTL){Y=-1;wa=m-1}else{Y=1;wa=0}Da=wb(b.minTime);
Ua=wb(b.maxTime);d=Ta?C(q(v.visEnd),-1):q(v.visStart);var h=q(d),n=Ga(new Date);if(B){G();B.find("tr:first th").slice(1,-1).each(function(){p(this).text(pa(h,i,b));this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+Aa[h.getDay()]);C(h,Y);La&&da(h,Y)});h=q(d);ka.find("td").each(function(){this.className=this.className.replace(/^fc-\w+(?= )/,"fc-"+Aa[h.getDay()]);+h==+n?p(this).removeClass("fc-not-today").addClass("fc-today").addClass(oa+"-state-highlight"):p(this).addClass("fc-not-today").removeClass("fc-today").removeClass(oa+
"-state-highlight");C(h,Y);La&&da(h,Y)})}else{var l,u,A=b.slotMinutes%15==0,E="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(b.allDaySlot?"":" fc-last")+"'><th class='fc-leftmost "+oa+"-state-default'>&nbsp;</th>";for(l=0;l<m;l++){E+="<th class='fc-"+Aa[h.getDay()]+" "+oa+"-state-default'>"+pa(h,i,b)+"</th>";C(h,Y);La&&da(h,Y)}E+="<th class='"+oa+"-state-default'>&nbsp;</th></tr>";if(b.allDaySlot)E+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+
oa+"-state-default'>"+b.allDayText+"</th><td colspan='"+m+"' class='"+oa+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+oa+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+(m+2)+"' class='"+oa+"-state-default fc-leftmost'><div/></th></tr>";E+="</table></div>";B=p(E).appendTo(a);w(B.find("td"));ca=p("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(B);h=xb();var U=ba(q(h),Ua);ba(h,Da);E=
"<table>";for(l=0;h<U;l++){u=h.getMinutes();E+="<tr class='"+(!l?"fc-first":!u?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+oa+"-state-default'>"+(!A||!u?pa(h,b.axisFormat):"&nbsp;")+"</th><td class='fc-slot"+l+" "+oa+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";ba(h,b.slotMinutes);e++}E+="</table>";T=p("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append($=p("<div style='position:relative;overflow:hidden'>").append(aa=p(E))).appendTo(a);
t(T.find("td"));ga=p("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo($);h=q(d);E="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(l=0;l<m;l++){E+="<td class='fc-"+Aa[h.getDay()]+" "+oa+"-state-default "+(!l?"fc-leftmost ":"")+(+h==+n?oa+"-state-highlight fc-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";C(h,Y);La&&da(h,Y)}E+="</tr></table></div>";ka=p(E).appendTo(a)}}
function o(){var d=xb(),i=q(d);i.setHours(b.firstHour);var h=O(d,i)+1;d=function(){T.scrollTop(h)};d();setTimeout(d,0)}function k(d,i){H=d;$a={};T.outerHeight(d-B.outerHeight());r=T.find("tr:first div").innerHeight()+1;ka.css({top:B.find("tr").outerHeight(),height:d});d=T.find("table:first").innerHeight();d<T.innerHeight()&&T.innerHeight(d);i&&o()}function z(d){J=d;Qa.clear();T.outerWidth(d);aa.width("");d=B.find("tr:first th");var i=ka.find("td"),h=T[0].clientWidth;aa.outerWidth(h);j=0;var n=B.find("tr:lt(2) th:first").add(T.find("tr:first th"));
n.width("");n.each(function(){j=Math.max(j,p(this).outerWidth())});Ja(n,j);s=Math.floor((h-j)/m);Ja(i.slice(0,-1),s);Ja(d.slice(1,-2),s);if(T[0].scrollHeight!=T[0].clientHeight)Ja(d.slice(-2,-1),h-j-s*(m-1));else{d.slice(-1).hide();p("tr.fc-all-day th").slice(-1).hide()}ka.css({left:j,width:h-j})}function w(d){d.click(I).mousedown(Fb)}function t(d){d.click(I).mousedown(ua)}function I(d){if(!v.option("selectable")){var i=Math.min(m-1,Math.floor((d.pageX-ka.offset().left)/s));i=C(q(v.visStart),i*Y+
wa);var h=this.className.match(/fc-slot(\d+)/);if(h){h=parseInt(h[1])*b.slotMinutes;var n=Math.floor(h/60);i.setHours(n);i.setMinutes(h%60+Da);v.trigger("dayClick",this,i,false,d)}else v.trigger("dayClick",this,i,true,d)}}function M(d,i){v.reportEvents(x=d);var h,n=d.length,l=[],u=[];for(h=0;h<n;h++)d[h].allDay?l.push(d[h]):u.push(d[h]);Q(fa(l),i);ia(D(u),i)}function va(d){G();M(x,d)}function G(){v._clearEvents();ca.empty();ga.empty()}function fa(d){d=Ya(v.sliceSegs(d,p.map(d,Pa),v.visStart,v.visEnd));
var i,h=d.length,n,l,u,A=[];for(i=0;i<h;i++){n=d[i];for(l=0;l<n.length;l++){u=n[l];u.row=0;u.level=i;A.push(u)}}return A}function D(d){var i=ba(q(v.visStart),Da),h=p.map(d,V),n,l,u,A,E,U,S=[];for(n=0;n<m;n++){l=Ya(v.sliceSegs(d,h,i,ba(q(i),Ua-Da)));Gb(l);for(u=0;u<l.length;u++){A=l[u];for(E=0;E<A.length;E++){U=A[E];U.col=n;U.level=u;S.push(U)}}C(i,1,true)}return S}function Q(d,i){if(b.allDaySlot){jb(d,1,v,j,J,function(){return B.find("tr.fc-all-day")},function(h){return j+Qa.left(xa(h))},function(h){return j+
Qa.right(xa(h))},ca,ra,i);k(H)}}function ia(d,i){var h,n=d.length,l,u,A,E,U,S,X,ea,la,ya,ab="",Ma={},yb={};for(h=0;h<n;h++){l=d[h];u=l.event;A="fc-event fc-event-vert ";if(l.isStart)A+="fc-corner-top ";if(l.isEnd)A+="fc-corner-bottom ";E=O(l.start,l.start);U=O(l.start,l.end);S=l.col;X=l.level;ea=l.forward||0;la=j+Qa.left(S*Y+wa);ya=j+Qa.right(S*Y+wa)-la;ya=Math.min(ya-6,ya*0.95);S=X?ya/(X+ea+1):ea?(ya/(ea+1)-6)*2:ya;X=la+ya/(X+ea+1)*X*Y+(Ta?ya-S:0);l.top=E;l.left=X;l.outerWidth=S;l.outerHeight=U-
E;ab+=na(u,l,A)}ga[0].innerHTML=ab;E=ga.children();for(h=0;h<n;h++){l=d[h];u=l.event;A=p(E[h]);U=v.trigger("eventRender",u,u,A);if(U===false)A.remove();else{if(U&&U!==true){A.remove();A=p(U).css({position:"absolute",top:l.top,left:l.left}).appendTo(ga)}l.element=A;if(u._id===i)ha(u,A,l);else A[0]._fci=h;v.reportEventElement(u,A)}}rb(ga,d,ha);for(h=0;h<n;h++){l=d[h];if(A=l.element){i=Ma[u=l.key=sb(A[0])];l.vsides=i===K?(Ma[u]=bb(A[0],true)):i;i=yb[u];l.hsides=i===K?(yb[u]=Za(A[0],true)):i;u=A.find("span.fc-event-title");
if(u.length)l.titleTop=u[0].offsetTop}}for(h=0;h<n;h++){l=d[h];if(A=l.element){A[0].style.width=l.outerWidth-l.hsides+"px";A[0].style.height=(Ma=l.outerHeight-l.vsides)+"px";u=l.event;if(l.titleTop!==K&&Ma-l.titleTop<10){A.find("span.fc-event-time").text(pa(u.start,v.option("timeFormat"))+" - "+u.title);A.find("span.fc-event-title").remove()}v.trigger("eventAfterRender",u,u,A)}}}function na(d,i,h){return"<div class='"+h+d.className.join(" ")+"' style='position:absolute;z-index:8;top:"+i.top+"px;left:"+
i.left+"px'><a"+(d.url?" href='"+Ka(d.url)+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Ka(Ha(d.start,d.end,v.option("timeFormat")))+"</span><span class='fc-event-title'>"+Ka(d.title)+"</span></a>"+((d.editable||d.editable===K&&b.editable)&&!b.disableResizing&&p.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":"")+"</div>"}function ra(d,i,h){v.eventElementHandlers(d,i);if(d.editable||d.editable===K&&b.editable){W(d,i,h.isStart);h.isEnd&&v.resizableDayEvent(d,
i,s)}}function ha(d,i,h){v.eventElementHandlers(d,i);if(d.editable||d.editable===K&&b.editable){var n=i.find("span.fc-event-time");Z(d,i,n);h.isEnd&&ta(d,i,n)}}function W(d,i,h){if(!b.disableDragging&&i.draggable){var n,l=true,u;i.draggable({zIndex:9,opacity:v.option("dragOpacity","month"),revertDuration:b.dragRevertDuration,start:function(E,U){v.trigger("eventDragStart",i,d,E,U);v.hideEvents(d,i);n=i.outerWidth();Ea.start(function(S,X,ea,la){i.draggable("option","revert",!S||!ea&&!la);y();if(S){u=
la*Y;if(S.row){if(h&&l){Sa(i.outerWidth(s-10),r*Math.round((d.end?(d.end-d.start)/Hb:b.defaultEventMinutes)/b.slotMinutes));i.draggable("option","grid",[s,1]);l=false}}else{N(C(q(d.start),u),C(Pa(d),u));A()}}},E,"drag")},stop:function(E,U){var S=Ea.stop();y();v.trigger("eventDragStop",i,d,E,U);if(S&&(!l||u)){i.find("a").removeAttr("href");S=0;l||(S=Math.round((i.offset().top-$.offset().top)/r)*b.slotMinutes+Da-(d.start.getHours()*60+d.start.getMinutes()));v.eventDrop(this,d,u,S,l,E,U)}else{A();p.browser.msie&&
i.css("filter","");v.showEvents(d,i)}}});function A(){if(!l){i.outerWidth(n).height("").draggable("option","grid",null);l=true}}}}function Z(d,i,h){if(!b.disableDragging&&i.draggable){var n,l=false,u,A,E;i.draggable({zIndex:9,scroll:false,grid:[s,r],axis:m==1?"y":false,opacity:v.option("dragOpacity"),revertDuration:b.dragRevertDuration,start:function(X,ea){v.trigger("eventDragStart",i,d,X,ea);v.hideEvents(d,i);p.browser.msie&&i.find("span.fc-event-bg").hide();n=i.position();A=E=0;Ea.start(function(la,
ya,ab,Ma){i.draggable("option","revert",!la);y();if(la){u=Ma*Y;if(b.allDaySlot&&!la.row){if(!l){l=true;h.hide();i.draggable("option","grid",null)}N(C(q(d.start),u),C(Pa(d),u))}else S()}},X,"drag")},drag:function(X,ea){A=Math.round((ea.position.top-n.top)/r)*b.slotMinutes;if(A!=E){l||U(A);E=A}},stop:function(X,ea){var la=Ea.stop();y();v.trigger("eventDragStop",i,d,X,ea);if(la&&(u||A||l))v.eventDrop(this,d,u,l?0:A,l,X,ea);else{S();i.css(n);U(0);p.browser.msie&&i.css("filter","").find("span.fc-event-bg").css("display",
"");v.showEvents(d,i)}}});function U(X){var ea=ba(q(d.start),X),la;if(d.end)la=ba(q(d.end),X);h.text(Ha(ea,la,v.option("timeFormat")))}function S(){if(l){h.css("display","");i.draggable("option","grid",[s,r]);l=false}}}}function ta(d,i,h){if(!b.disableResizing&&i.resizable){var n,l;i.resizable({handles:{s:"div.ui-resizable-s"},grid:r,start:function(u,A){n=l=0;v.hideEvents(d,i);p.browser.msie&&p.browser.version=="6.0"&&i.css("overflow","hidden");i.css("z-index",9);v.trigger("eventResizeStart",this,
d,u,A)},resize:function(u,A){n=Math.round((Math.max(r,i.outerHeight())-A.originalSize.height)/r);if(n!=l){h.text(Ha(d.start,!n&&!d.end?null:ba(v.eventEnd(d),b.slotMinutes*n),v.option("timeFormat")));l=n}},stop:function(u,A){v.trigger("eventResizeStop",this,d,u,A);if(n)v.eventResize(this,d,0,b.slotMinutes*n,u,A);else{i.css("z-index",8);v.showEvents(d,i)}}})}}function O(d,i){d=q(d,true);if(i<ba(q(d),Da))return 0;if(i>=ba(q(d),Ua))return $.innerHeight();d=b.slotMinutes;i=i.getHours()*60+i.getMinutes()-
Da;var h=Math.floor(i/d),n=$a[h];if(n===K)n=$a[h]=T.find("tr:eq("+h+") td div")[0].offsetTop;return Math.max(0,Math.round(n-1+r*(i%d/d)))}function ua(d){if(v.option("selectable")){R(d);var i=this,h;Ea.start(function(n,l){Fa();if(n&&n.col==l.col&&!ja(n)){l=P(l);n=P(n);h=[l,ba(q(l),b.slotMinutes),n,ba(q(n),b.slotMinutes)].sort(zb);qa(h[0],h[3])}else h=null},d);p(document).one("mouseup",function(n){Ea.stop();if(h){+h[0]==+h[1]&&v.trigger("dayClick",i,h[0],false,n);ma(h[0],h[3],false,n)}})}}function ma(d,
i,h,n){cb=true;v.trigger("select",v,d,i,h,n)}function R(d){if(cb){Fa();cb=false;v.trigger("unselect",v,d)}}function qa(d,i){var h=v.option("selectHelper");if(h){var n=Ca(d,v.visStart)*Y+wa;if(n>=0&&n<m){n=Ra.rect(0,n,0,n,$);var l=O(d,d),u=O(d,i);if(u>l){n.top=l;n.height=u-l;n.left+=2;n.width-=5;if(p.isFunction(h)){if(d=h(d,i)){n.position="absolute";n.zIndex=8;sa=p(d).css(n).appendTo($)}}else{sa=p(na({title:"",start:d,end:i,className:[],editable:false},n,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));
p.browser.msie&&sa.find("span.fc-event-bg").hide();sa.css("opacity",v.option("dragOpacity"))}if(sa){t(sa);$.append(sa);Ja(sa,n.width,true);Sa(sa,n.height,true)}}}}else Ba(d,i)}function Fa(){y();if(sa){sa.remove();sa=null}}function N(d,i){var h;if(Ta){h=Ca(i,v.visStart)*Y+wa+1;d=Ca(d,v.visStart)*Y+wa+1}else{h=Ca(d,v.visStart);d=Ca(i,v.visStart)}h=Math.max(0,h);d=Math.min(m,d);h<d&&w(L(0,h,0,d-1))}function L(d,i,h,n){d=Ra.rect(d,i,h,n,B);return v.renderOverlay(d,B)}function Ba(d,i){for(var h=q(v.visStart),
n=C(q(h),1),l=0;l<m;l++){var u=new Date(Math.max(h,d)),A=new Date(Math.min(n,i));if(u<A){var E=l*Y+wa;E=Ra.rect(0,E,0,E,$);u=O(h,u);A=O(h,A);E.top=u;E.height=A-u;t(v.renderOverlay(E,$))}C(h,1);C(n,1)}}function y(){v.clearOverlays()}function V(d){return d.end?q(d.end):ba(q(d.start),b.defaultEventMinutes)}function xa(d){return(d-Math.max(vb,La)+m)%m*Y+wa}function P(d){var i=C(q(v.visStart),d.col*Y+wa);d=d.row;b.allDaySlot&&d--;d>=0&&ba(i,Da+d*b.slotMinutes);return i}function ja(d){return b.allDaySlot&&
!d.row}var B,T,$,aa,ka,m,e=0,j,s,r,J,H,F,x=[],ca,ga,oa,vb,La,Ta,Y,wa,Da,Ua,Qa=new kb(function(d){return ka.find("td:eq("+d+") div div")}),$a={},v=p.extend(this,lb,f,{renderAgenda:g,renderEvents:M,rerenderEvents:va,clearEvents:G,setHeight:k,setWidth:z,beforeHide:function(){F=T.scrollTop()},afterShow:function(){T.scrollTop(F)},defaultEventEnd:function(d){var i=q(d.start);if(d.allDay)return i;return ba(i,b.defaultEventMinutes)}});v.name=c;v.init(a,b);mb(a.addClass("fc-agenda"));var Ra=new nb(function(d,
i){function h(X){return Math.max(E,Math.min(U,X))}var n,l,u;ka.find("td").each(function(X,ea){n=p(ea);l=n.offset().left;if(X)u[1]=l;u=[l];i[X]=u});u[1]=l+n.outerWidth();if(b.allDaySlot){n=B.find("td");l=n.offset().top;d[0]=[l,l+n.outerHeight()]}for(var A=$.offset().top,E=T.offset().top,U=E+T.outerHeight(),S=0;S<e;S++)d.push([h(A+r*S),h(A+r*(S+1))])}),Ea=new ob(Ra),cb=false,Fb=pb(v,Ea,P,ja,N,y,ma,R);v.select=function(d,i,h){Ra.build();R();if(h){if(b.allDaySlot){i||(i=q(d));N(d,C(q(i),1))}}else{i||
(i=ba(q(d),b.slotMinutes));qa(d,i)}ma(d,i,h)};v.unselect=R;qb(v,R);var sa;v.dragStart=function(d,i){Ea.start(function(h){y();if(h)if(ja(h))L(h.row,h.col,h.row,h.col);else{h=P(h);var n=ba(q(h),b.defaultEventMinutes);Ba(h,n)}},i)};v.dragStop=function(d,i,h){var n=Ea.stop();y();n&&v.trigger("drop",d,P(n),ja(n),i,h)}}function Gb(a){var b,f,c,g,o,k;for(b=a.length-1;b>0;b--){g=a[b];for(f=0;f<g.length;f++){o=g[f];for(c=0;c<a[b-1].length;c++){k=a[b-1][c];if(Ab(o,k))k.forward=Math.max(k.forward||0,(o.forward||
0)+1)}}}}function rb(a,b,f){a.unbind("mouseover").mouseover(function(c){for(var g=c.target,o;g!=this;){o=g;g=g.parentNode}if((g=o._fci)!==K){o._fci=K;o=b[g];f(o.event,o.element,o);p(c.target).trigger(c)}c.stopPropagation()})}function Ya(a){var b=[],f,c=a.length,g,o,k,z;for(f=0;f<c;f++){g=a[f];for(o=0;;){k=false;if(b[o])for(z=0;z<b[o].length;z++)if(Ab(b[o][z],g)){k=true;break}if(k)o++;else break}if(b[o])b[o].push(g);else b[o]=[g]}return b}function Ib(a,b){if(a.event.allDay&&!b.event.allDay)return-1;
if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Ab(a,b){return a.end>b.start&&a.start<b.end}function pb(a,b,f,c,g,o,k,z){return function(w){if(a.option("selectable")){z(w);var t=this,I;b.start(function(M,va){o();if(M&&c(M)){I=[f(va),f(M)].sort(zb);g(I[0],C(q(I[1]),1),true)}else I=null},w);p(document).one("mouseup",function(M){b.stop();if(I){+I[0]==+I[1]&&a.trigger("dayClick",t,I[0],true,M);k(I[0],I[1],true,M)}})}}}function qb(a,
b){a.option("selectable")&&a.option("unselectAuto")&&p(document).mousedown(function(f){var c=a.option("unselectCancel");if(c)if(p(f.target).parents(c).length)return;b(f)})}function db(a,b,f){a.setFullYear(a.getFullYear()+b);f||Ga(a);return a}function eb(a,b,f){if(+a){b=a.getMonth()+b;var c=q(a);c.setDate(1);c.setMonth(b);a.setMonth(b);for(f||Ga(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+(a<c?1:-1))}return a}function C(a,b,f){if(+a){b=a.getDate()+b;var c=q(a);c.setHours(9);c.setDate(b);a.setDate(b);
f||Ga(a);fb(a,c)}return a}function fb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Jb)}function ba(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ga(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function q(a,b){if(b)return Ga(new Date(+a));return new Date(+a)}function xb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function da(a,b,f){for(b=b||1;!a.getDay()||f&&a.getDay()==1||!f&&a.getDay()==6;)C(a,b);return a}function Ca(a,
b){return Math.round((q(a,true)-q(b,true))/Bb)}function Cb(a,b,f,c){if(b!==K&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(f!==K&&f!=a.getMonth()){a.setDate(1);a.setMonth(f)}c!==K&&a.setDate(c)}function Ja(a,b,f){a.each(function(c,g){g.style.width=b-Za(g,f)+"px"})}function Sa(a,b,f){a.each(function(c,g){g.style.height=b-bb(g,f)+"px"})}function Za(a,b){return(parseFloat(jQuery.curCSS(a,"paddingLeft",true))||0)+(parseFloat(jQuery.curCSS(a,"paddingRight",true))||0)+(parseFloat(jQuery.curCSS(a,
"borderLeftWidth",true))||0)+(parseFloat(jQuery.curCSS(a,"borderRightWidth",true))||0)+(b?Kb(a):0)}function Kb(a){return(parseFloat(jQuery.curCSS(a,"marginLeft",true))||0)+(parseFloat(jQuery.curCSS(a,"marginRight",true))||0)}function bb(a,b){return(parseFloat(jQuery.curCSS(a,"paddingTop",true))||0)+(parseFloat(jQuery.curCSS(a,"paddingBottom",true))||0)+(parseFloat(jQuery.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(jQuery.curCSS(a,"borderBottomWidth",true))||0)+(b?tb(a):0)}function tb(a){return(parseFloat(jQuery.curCSS(a,
"marginTop",true))||0)+(parseFloat(jQuery.curCSS(a,"marginBottom",true))||0)}function gb(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function nb(a){var b=this,f,c;b.build=function(){f=[];c=[];a(f,c)};b.cell=function(g,o){var k=f.length,z=c.length,w,t=-1,I=-1;for(w=0;w<k;w++)if(o>=f[w][0]&&o<f[w][1]){t=w;break}for(w=0;w<z;w++)if(g>=c[w][0]&&g<c[w][1]){I=w;break}return t>=0&&I>=0?{row:t,col:I}:null};b.rect=function(g,o,k,z,w){w=w.offset();return{top:f[g][0]-
w.top,left:c[o][0]-w.left,width:c[z][1]-c[o][0],height:f[k][1]-f[g][0]}}}function ob(a){function b(z){z=a.cell(z.pageX,z.pageY);if(!z!=!k||z&&(z.row!=k.row||z.col!=k.col)){if(z){o||(o=z);g(z,o,z.row-o.row,z.col-o.col)}else g(z,o);k=z}}var f=this,c,g,o,k;f.start=function(z,w,t){g=z;o=k=null;a.build();b(w);c=t||"mousemove";p(document).bind(c,b)};f.stop=function(){p(document).unbind(c,b);return k}}function Na(a){return(a<10?"0":"")+a}function hb(a,b){if(a[b]!==K)return a[b];b=b.split(/(?=[A-Z])/);for(var f=
b.length-1,c;f>=0;f--){c=a[b[f].toLowerCase()];if(c!==K)return c}return a[""]}function Ka(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function kb(a){function b(k){return c[k]=c[k]||a(k)}var f=this,c={},g={},o={};f.left=function(k){return g[k]=g[k]===K?b(k).position().left:g[k]};f.right=function(k){return o[k]=o[k]===K?f.left(k)+b(k).outerWidth():o[k]};f.clear=function(){c={};g={};o={}}}function sb(a){return a.id+
"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function zb(a,b){return a-b}function Pa(a){return a.end?Lb(a.end,a.allDay):C(q(a.start),1)}function Lb(a,b){a=q(a);return b||a.getHours()||a.getMinutes()?C(a,1):Ga(a)}function mb(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var za=p.fullCalendar={},Oa=za.views={},Va={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},
weekends:true,allDayDefault:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],
dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Mb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",
next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Db=za.setDefaults=function(a){p.extend(true,Va,a)};p.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),f;this.each(function(){var o=p.data(this,"fullCalendar");if(o)if(o=o[a]){o=o.apply(this,b);if(f===K)f=o}});if(f!==K)return f;return this}var c=a.eventSources||[];delete a.eventSources;if(a.events){c.push(a.events);
delete a.events}c.unshift([]);a=p.extend(true,{},Va,a.isRTL||a.isRTL===K&&Va.isRTL?Mb:{},a);var g=a.theme?"ui":"fc";this.each(function(){function o(e){if(e!=Ba){N++;t();var j=y,s;if(j){if(j.eventsChanged){M();j.eventDirty=j.eventsChanged=false}j.beforeHide&&j.beforeHide();gb(R,R.innerHeight());j.element.hide()}else gb(R,1);R.css("overflow","hidden");if(V[e])(y=V[e]).element.show();else y=V[e]=za.views[e](s=xa=p("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(R),a,e);if(aa){aa.find("div.fc-button-"+
Ba).removeClass(g+"-state-active");aa.find("div.fc-button-"+e).addClass(g+"-state-active")}Ba=e;k();R.css("overflow","");j&&gb(R,1);!s&&y.afterShow&&y.afterShow();N--}}function k(e){if(z()){N++;t();qa===K&&ha();if(!y.start||e||L<y.start||L>=y.end){y.render(L,e||0);W(true);!ja||!a.lazyFetching||y.visStart<ja||y.visEnd>B?Q():y.renderEvents(P)}else if(y.sizeDirty||y.eventsDirty||!a.lazyFetching){y.clearEvents();y.sizeDirty&&W();a.lazyFetching?y.renderEvents(P):Q()}ma=ua.outerWidth();y.sizeDirty=false;
y.eventsDirty=false;if(aa){aa.find("h2.fc-header-title").html(y.title);e=new Date;e>=y.start&&e<y.end?aa.find("div.fc-button-today").addClass(g+"-state-disabled"):aa.find("div.fc-button-today").removeClass(g+"-state-disabled")}N--;y.trigger("viewDisplay",O)}}function z(){return O.offsetWidth!==0}function w(){return p("body")[0].offsetWidth!==0}function t(){y&&y.unselect()}function I(){M();if(z()){y.clearEvents();y.renderEvents(P);y.eventsDirty=false}}function M(){p.each(V,function(){this.eventsDirty=
true})}function va(){G();if(z()){ha();W();t();y.rerenderEvents();y.sizeDirty=false}}function G(){p.each(V,function(){this.sizeDirty=true})}function fa(e){P=[];ja=q(y.visStart);B=q(y.visEnd);for(var j=c.length,s=function(){--j||e&&e(P)},r=0;r<c.length;r++)D(c[r],s)}function D(e,j){var s=y.name,r=q(L),J=function(x){if(s==y.name&&+r==+L&&p.inArray(e,c)!=-1){for(var ca=0;ca<x.length;ca++){Ia(x[ca],a);x[ca].source=e}P=P.concat(x);j&&j(x)}},H=function(x){J(x);na()};if(typeof e=="string"){var F={};F[a.startParam]=
Math.round(ja.getTime()/1E3);F[a.endParam]=Math.round(B.getTime()/1E3);F.browserTimezone=ja.getTimezoneOffset();if(a.cacheParam)F[a.cacheParam]=(new Date).getTime();ia();p.ajax({url:e,dataType:"json",data:F,cache:a.cacheParam||false,success:H})}else if(p.isFunction(e)){ia();e(q(ja),q(B),H)}else e?J(e):alert("Error detected in fullcalender fetchEventSource()\nPlease check the last comma at the end of your feed list.")}function Q(){fa(function(e){y.renderEvents(e)})}function ia(){T++||y.trigger("loading",
O,true)}function na(){--T||y.trigger("loading",O,false)}function ra(e){if(e){var j=p("<tr/>");p.each(e.split(" "),function(s){s>0&&j.append("<td><span class='fc-header-space'/></td>");var r;p.each(this.split(","),function(J,H){if(H=="title"){j.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");r&&r.addClass(g+"-corner-right");r=null}else{var F;if($[H])F=$[H];else if(Oa[H])F=function(){x.removeClass(g+"-state-hover");o(H)};if(F){r&&r.addClass(g+"-no-right");var x;J=a.theme?hb(a.buttonIcons,
H):null;var ca=hb(a.buttonText,H);if(J)x=p("<div class='fc-button-"+H+" ui-state-default'><a><span class='ui-icon ui-icon-"+J+"'/></a></div>");else if(ca)x=p("<div class='fc-button-"+H+" "+g+"-state-default'><a><span>"+ca+"</span></a></div>");if(x){x.click(function(){x.hasClass(g+"-state-disabled")||F()}).mousedown(function(){x.not("."+g+"-state-active").not("."+g+"-state-disabled").addClass(g+"-state-down")}).mouseup(function(){x.removeClass(g+"-state-down")}).hover(function(){x.not("."+g+"-state-active").not("."+
g+"-state-disabled").addClass(g+"-state-hover")},function(){x.removeClass(g+"-state-hover").removeClass(g+"-state-down")}).appendTo(p("<td/>").appendTo(j));r?r.addClass(g+"-no-right"):x.addClass(g+"-corner-left");r=x}}}});r&&r.addClass(g+"-corner-right")});return p("<table/>").append(j)}}function ha(){if(a.contentHeight)qa=a.contentHeight;else if(a.height){qa=a.height-bb(R[0]);qa-=aa?aa.innerHeight():0}else qa=Math.round(R.innerWidth()/Math.max(a.aspectRatio,0.5))}function W(e){N++;y.setHeight(qa,
e);if(xa){xa.css("position","relative");xa=null}y.setWidth(R.innerWidth(),e);N--}function Z(){if(!N)if(y.start){var e=++Fa;setTimeout(function(){if(e==Fa&&!N&&z())if(ma!=(ma=ua.outerWidth())){N++;va();y.trigger("windowResize",O);N--}},200)}else ta()}function ta(){setTimeout(function(){!y.start&&w()&&k()},0)}var O=this,ua=p(O).addClass("fc"),ma,R=p("<div class='fc-content "+g+"-widget-content' style='position:relative'/>").prependTo(O),qa,Fa=0,N=0,L=new Date,Ba,y,V={},xa;a.isRTL&&ua.addClass("fc-rtl");
a.theme&&ua.addClass("ui-widget");Cb(L,a.year,a.month,a.date);var P=[],ja,B,T=0,$={render:function(){ha();G();M();k()},changeView:o,getView:function(){return y},getDate:function(){return L},option:function(e,j){if(j===K)return a[e];if(e=="height"||e=="contentHeight"||e=="aspectRatio"){a[e]=j;va()}},destroy:function(){p(window).unbind("resize",Z);aa&&aa.remove();R.remove();p.removeData(O,"fullCalendar")},prev:function(){k(-1)},next:function(){k(1)},prevYear:function(){db(L,-1);k()},nextYear:function(){db(L,
1);k()},today:function(){L=new Date;k()},gotoDate:function(e,j,s){if(typeof e=="object")L=q(e);else Cb(L,e,j,s);k()},incrementDate:function(e,j,s){e!==K&&db(L,e);j!==K&&eb(L,j);s!==K&&C(L,s);k()},updateEvent:function(e){var j,s=P.length,r,J=e.start-e._start,H=e.end?e.end-(e._end||y.defaultEventEnd(e)):0;for(j=0;j<s;j++){r=P[j];if(r._id==e._id&&r!=e){r.start=new Date(+r.start+J);r.end=e.end?r.end?new Date(+r.end+H):new Date(+y.defaultEventEnd(r)+H):null;r.title=e.title;r.url=e.url;r.allDay=e.allDay;
r.className=e.className;r.editable=e.editable;r.resizable=e.resizable;Ia(r,a)}}Ia(e,a);I()},renderEvent:function(e,j){Ia(e,a);if(!e.source){if(j)(e.source=c[0]).push(e);P.push(e)}I()},removeEvents:function(e){if(e){if(!p.isFunction(e)){var j=e+"";e=function(r){return r._id==j}}P=p.grep(P,e,true);for(s=0;s<c.length;s++)if(typeof c[s]=="object")c[s]=p.grep(c[s],e,true)}else{P=[];for(var s=0;s<c.length;s++)if(typeof c[s]=="object")c[s]=[]}I()},clientEvents:function(e){if(p.isFunction(e))return p.grep(P,
e);else if(e){e+="";return p.grep(P,function(j){return j._id==e})}return P},rerenderEvents:I,addEventSource:function(e){c.push(e);D(e,I)},removeEventSource:function(e){c=p.grep(c,function(j){return e&&j!=e});P=p.grep(P,function(j){return e&&j.source!=e});I()},refetchEvents:function(){fa(I)},select:function(e,j,s){y.select(e,j,s===K?true:s)},unselect:function(){y.unselect()}};p.data(this,"fullCalendar",$);var aa,ka=a.header;if(ka)aa=p("<table class='fc-header'/>").append(p("<tr/>").append(p("<td class='fc-header-left'/>").append(ra(ka.left))).append(p("<td class='fc-header-center'/>").append(ra(ka.center))).append(p("<td class='fc-header-right'/>").append(ra(ka.right)))).prependTo(ua);
p(window).resize(Z);if(a.droppable){var m;p(document).bind("dragstart",function(e,j){var s=e.target,r=p(s);if(!r.parents(".fc").length){var J=a.dropAccept;if(p.isFunction(J)?J.call(s,r):r.is(J)){m=s;y.dragStart(m,e,j)}}}).bind("dragstop",function(e,j){if(m){y.dragStop(m,e,j);m=null}})}o(a.defaultView);w()||ta()});return this};var Eb=0;Db({weekMode:"fixed"});Oa.month=function(a,b,f){return new Wa(a,b,{render:function(c,g){if(g){eb(c,g);c.setDate(1)}c=this.start=q(c,true);c.setDate(1);this.end=eb(q(c),
1);var o=this.visStart=q(c);g=this.visEnd=q(this.end);var k=b.weekends?0:1;if(k){da(o);da(g,-1,true)}C(o,-((o.getDay()-Math.max(b.firstDay,k)+7)%7));C(g,(7-g.getDay()+Math.max(b.firstDay,k))%7);o=Math.round((g-o)/(Bb*7));if(b.weekMode=="fixed"){C(g,(6-o)*7);o=6}this.title=pa(c,this.option("titleFormat"),b);this.renderGrid(o,b.weekends?7:5,this.option("columnFormat"),true)}},f)};Oa.basicWeek=function(a,b,f){return new Wa(a,b,{render:function(c,g){g&&C(c,g*7);c=this.visStart=q(this.start=C(q(c),-((c.getDay()-
b.firstDay+7)%7)));g=this.visEnd=q(this.end=C(q(c),7));if(!b.weekends){da(c);da(g,-1,true)}this.title=Ha(c,C(q(g),-1),this.option("titleFormat"),b);this.renderGrid(1,b.weekends?7:5,this.option("columnFormat"),false)}},f)};Oa.basicDay=function(a,b,f){return new Wa(a,b,{render:function(c,g){if(g){C(c,g);b.weekends||da(c,g<0?-1:1)}this.title=pa(c,this.option("titleFormat"),b);this.start=this.visStart=q(c,true);this.end=this.visEnd=C(q(this.start),1);this.renderGrid(1,1,this.option("columnFormat"),false)}},
f)};var Xa;Db({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Oa.agendaWeek=function(a,b,f){return new ub(a,b,{render:function(c,g){g&&C(c,g*7);c=this.visStart=q(this.start=C(q(c),-((c.getDay()-b.firstDay+7)%7)));g=this.visEnd=q(this.end=C(q(c),7));if(!b.weekends){da(c);da(g,-1,true)}this.title=Ha(c,C(q(g),-1),this.option("titleFormat"),b);this.renderAgenda(b.weekends?
7:5,this.option("columnFormat"))}},f)};Oa.agendaDay=function(a,b,f){return new ub(a,b,{render:function(c,g){if(g){C(c,g);b.weekends||da(c,g<0?-1:1)}this.title=pa(c,this.option("titleFormat"),b);this.start=this.visStart=q(c,true);this.end=this.visEnd=C(q(this.start),1);this.renderAgenda(1,this.option("columnFormat"))}},f)};var lb={init:function(a,b){this.element=a;this.options=b;this.eventsByID={};this.eventElements=[];this.eventElementsByID={};this.usedOverlays=[];this.unusedOverlays=[]},trigger:function(a,
b){if(this.options[a])return this.options[a].apply(b||this,Array.prototype.slice.call(arguments,2).concat([this]))},eventEnd:function(a){return a.end?q(a.end):this.defaultEventEnd(a)},reportEvents:function(a){var b,f=a.length,c,g=this.eventsByID={};for(b=0;b<f;b++){c=a[b];if(g[c._id])g[c._id].push(c);else g[c._id]=[c]}},reportEventElement:function(a,b){this.eventElements.push(b);var f=this.eventElementsByID;if(f[a._id])f[a._id].push(b);else f[a._id]=[b]},_clearEvents:function(){this.eventElements=
[];this.eventElementsByID={}},showEvents:function(a,b){this._eee(a,b,"show")},hideEvents:function(a,b){this._eee(a,b,"hide")},_eee:function(a,b,f){a=this.eventElementsByID[a._id];var c,g=a.length;for(c=0;c<g;c++)a[c][0]!=b[0]&&a[c][f]()},eventDrop:function(a,b,f,c,g,o,k){var z=this,w=b.allDay,t=b._id;z.moveEvents(z.eventsByID[t],f,c,g);z.trigger("eventDrop",a,b,f,c,g,function(){z.moveEvents(z.eventsByID[t],-f,-c,w);z.rerenderEvents()},o,k);z.eventsChanged=true;z.rerenderEvents(t)},eventResize:function(a,
b,f,c,g,o){var k=this,z=b._id;k.elongateEvents(k.eventsByID[z],f,c);k.trigger("eventResize",a,b,f,c,function(){k.elongateEvents(k.eventsByID[z],-f,-c);k.rerenderEvents()},g,o);k.eventsChanged=true;k.rerenderEvents(z)},moveEvents:function(a,b,f,c){f=f||0;for(var g,o=a.length,k=0;k<o;k++){g=a[k];if(c!==K)g.allDay=c;ba(C(g.start,b,true),f);if(g.end)g.end=ba(C(g.end,b,true),f);Ia(g,this.options)}},elongateEvents:function(a,b,f){f=f||0;for(var c,g=a.length,o=0;o<g;o++){c=a[o];c.end=ba(C(this.eventEnd(c),
b,true),f);Ia(c,this.options)}},renderOverlay:function(a,b){var f=this.unusedOverlays.shift();f||(f=p("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));f[0].parentNode!=b[0]&&f.appendTo(b);this.usedOverlays.push(f.css(a).show());return f},clearOverlays:function(){for(var a;a=this.usedOverlays.shift();)this.unusedOverlays.push(a.hide().unbind())},resizableDayEvent:function(a,b,f){var c=this;if(!c.options.disableResizing&&b.resizable)b.resizable({handles:c.options.isRTL?{w:"div.ui-resizable-w"}:
{e:"div.ui-resizable-e"},grid:f,minWidth:f/2,containment:c.element.parent().parent(),start:function(g,o){b.css("z-index",9);c.hideEvents(a,b);c.trigger("eventResizeStart",this,a,g,o)},stop:function(g,o){c.trigger("eventResizeStop",this,a,g,o);var k=Math.round((b.outerWidth()-o.originalSize.width)/f);if(k)c.eventResize(this,a,k,0,g,o);else{b.css("z-index",8);c.showEvents(a,b)}}})},eventElementHandlers:function(a,b){var f=this;b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return f.trigger("eventClick",
this,a,c)}).hover(function(c){f.trigger("eventMouseover",this,a,c)},function(c){f.trigger("eventMouseout",this,a,c)})},option:function(a,b){a=this.options[a];if(typeof a=="object")return hb(a,b||this.name);return a},sliceSegs:function(a,b,f,c){var g=[],o,k=a.length,z,w,t,I,M;for(o=0;o<k;o++){z=a[o];w=z.start;t=b[o];if(t>f&&w<c){if(w<f){w=q(f);I=false}else{w=w;I=true}if(t>c){t=q(c);M=false}else{t=t;M=true}g.push({event:z,start:w,end:t,isStart:I,isEnd:M,msLength:t-w})}}return g.sort(Ib)}},Bb=864E5,
Jb=36E5,Hb=6E4;za.addDays=C;za.cloneDate=q;var ib=za.parseDate=function(a){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);return Nb(a,true)||(a?new Date(a):null)}return null},Nb=za.parseISO8601=function(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var f=new Date(a[1],0,1),c=
new Date(a[1],0,1,9,0),g=0;if(a[3]){f.setMonth(a[3]-1);c.setMonth(a[3]-1)}if(a[5]){f.setDate(a[5]);c.setDate(a[5])}fb(f,c);a[7]&&f.setHours(a[7]);a[8]&&f.setMinutes(a[8]);a[10]&&f.setSeconds(a[10]);a[12]&&f.setMilliseconds(Number("0."+a[12])*1E3);fb(f,c);if(!b){if(a[14]){g=Number(a[16])*60+Number(a[17]);g*=a[15]=="-"?1:-1}g-=f.getTimezoneOffset()}return new Date(+f+g*60*1E3)},wb=za.parseTime=function(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();
if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}},pa=za.formatDate=function(a,b,f){return Ha(a,null,b,f)},Ha=za.formatDates=function(a,b,f,c){c=c||Va;var g=a,o=b,k,z=f.length,w,t,I,M="";for(k=0;k<z;k++){w=f.charAt(k);if(w=="'")for(t=k+1;t<z;t++){if(f.charAt(t)=="'"){if(g){M+=t==k+1?"'":f.substring(k+1,t);k=t}break}}else if(w=="(")for(t=k+1;t<z;t++){if(f.charAt(t)==")"){k=pa(g,f.substring(k+
1,t),c);if(parseInt(k.replace(/\D/,"")))M+=k;k=t;break}}else if(w=="[")for(t=k+1;t<z;t++){if(f.charAt(t)=="]"){w=f.substring(k+1,t);k=pa(g,w,c);if(k!=pa(o,w,c))M+=k;k=t;break}}else if(w=="{"){g=b;o=a}else if(w=="}"){g=a;o=b}else{for(t=z;t>k;t--)if(I=Ob[f.substring(k,t)]){if(g)M+=I(g,c);k=t-1;break}if(t==k)if(g)M+=w}}return M},Ob={s:function(a){return a.getSeconds()},ss:function(a){return Na(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Na(a.getMinutes())},h:function(a){return a.getHours()%
12||12},hh:function(a){return Na(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Na(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Na(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Na(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+
"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return pa(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}},Aa=["sun","mon","tue","wed","thu","fri","sat"]})(jQuery);

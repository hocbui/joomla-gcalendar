/*

 FullCalendar v1.4.9-gcalendar
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Mon Nov 22 08:05:05 2010 +0100

*/
(function(l,ja){function lb(a){l.extend(true,Qa,a)}function Gb(a,b,f){function e(q){if(C){t();s();ka();O(q)}else g()}function g(){Z=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");C=l("<div class='fc-content "+Z+"-widget-content' style='position:relative'/>").prependTo(a);K=new Hb(ha,b);(A=K.render())&&a.prepend(A);z(b.defaultView);l(window).resize(qa);u()||k()}function k(){setTimeout(function(){!m.start&&u()&&O()},0)}function n(){l(window).unbind("resize",
qa);K.destroy();C.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function o(){return F.offsetWidth!==0}function u(){return l("body")[0].offsetWidth!==0}function z(q){if(!m||q!=m.name){i++;w();var D=m,N;if(D){(D.beforeHide||mb)();Ua(C,Da(C));D.element.hide()}else Ua(C,1);C.css("overflow","hidden");if(m=h[q])m.element.show();else m=h[q]=new Ha[q](N=S=l("<div class='fc-view fc-view-"+q+"' style='position:absolute'/>").appendTo(C),ha);D&&K.deactivateButton(D.name);K.activateButton(q);O();C.css("overflow",
"");D&&Ua(C,1);N||(m.afterShow||mb)();i--}}function O(q){if(o()){i++;w();E===ja&&t();var D=false;if(!m.start||q||r<m.start||r>=m.end){m.render(r,q||0);da(true);D=true}else if(m.sizeDirty){m.clearEvents();da();D=true}else if(m.eventsDirty){m.clearEvents();D=true}m.sizeDirty=false;m.eventsDirty=false;ca(D);j=a.outerWidth();K.updateTitle(m.title);q=new Date;q>=m.start&&q<m.end?K.disableButton("today"):K.enableButton("today");i--;m.trigger("viewDisplay",F)}}function P(){s();if(o()){t();da();w();m.clearEvents();
m.renderEvents(L);m.sizeDirty=false}}function s(){l.each(h,function(q,D){D.sizeDirty=true})}function t(){E=b.contentHeight?b.contentHeight:b.height?b.height-Va(C[0])-(A?Da(A):0):Math.round(Ra(C)/Math.max(b.aspectRatio,0.5))}function da(q){i++;m.setHeight(E,q);if(S){S.css("position","relative");S=null}m.setWidth(Ra(C),q);i--}function qa(){if(!i)if(m.start){var q=++c;setTimeout(function(){if(q==c&&!i&&o())if(j!=(j=a.outerWidth())){i++;P();m.trigger("windowResize",F);i--}},200)}else k()}function ca(q){if(!b.lazyFetching||
x(m.visStart,m.visEnd))X();else q&&ba()}function X(){J(m.visStart,m.visEnd)}function la(q){L=q;ba()}function oa(q){ba(q)}function ba(q){ka();if(o()){m.clearEvents();m.renderEvents(L,q);m.eventsDirty=false}}function ka(){l.each(h,function(q,D){D.eventsDirty=true})}function fa(q,D,N){m.select(q,D,N===ja?true:N)}function w(){m&&m.unselect()}function ia(){O(-1)}function M(){O(1)}function Y(){Wa(r,-1);O()}function G(){Wa(r,1);O()}function d(){r=new Date;O()}function T(q,D,N){if(q instanceof Date)r=y(q);
else nb(r,q,D,N);O()}function Q(q,D,N){q!==ja&&Wa(r,q);D!==ja&&Xa(r,D);N!==ja&&U(r,N);O()}function R(){return y(r)}function B(){return m}function V(q,D){if(D===ja)return b[q];if(q=="height"||q=="contentHeight"||q=="aspectRatio"){b[q]=D;P()}}function ra(q,D){if(b[q])return b[q].apply(D||F,Array.prototype.slice.call(arguments,2))}var ha=this;ha.options=b;ha.render=e;ha.destroy=n;ha.refetchEvents=X;ha.reportEvents=la;ha.reportEventChange=oa;ha.changeView=z;ha.select=fa;ha.unselect=w;ha.prev=ia;ha.next=
M;ha.prevYear=Y;ha.nextYear=G;ha.today=d;ha.gotoDate=T;ha.incrementDate=Q;ha.formatDate=function(q,D){return Ka(q,D,b)};ha.formatDates=function(q,D,N){return Ya(q,D,N,b)};ha.getDate=R;ha.getView=B;ha.option=V;ha.trigger=ra;Ib.call(ha,b,f);var x=ha.isFetchNeeded,J=ha.fetchEvents,F=a[0],K,A,C,Z,m,h={},j,E,S,c=0,i=0,r=new Date,L=[],aa;nb(r,b.year,b.month,b.date);b.droppable&&l(document).bind("dragstart",function(q,D){var N=q.target,H=l(N);if(!H.parents(".fc").length){var ma=b.dropAccept;if(l.isFunction(ma)?
ma.call(N,H):H.is(ma)){aa=N;m.dragStart(aa,q,D)}}}).bind("dragstop",function(q,D){if(aa){m.dragStop(aa,q,D);aa=null}})}function Hb(a,b){function f(){s=b.theme?"ui":"fc";var t=b.header;if(t)return P=l("<table class='fc-header'/>").append(l("<tr/>").append(l("<td class='fc-header-left'/>").append(g(t.left))).append(l("<td class='fc-header-center'/>").append(g(t.center))).append(l("<td class='fc-header-right'/>").append(g(t.right))))}function e(){P.remove()}function g(t){if(t){var da=l("<tr/>");l.each(t.split(" "),
function(qa){qa>0&&da.append("<td><span class='fc-header-space'/></td>");var ca;l.each(this.split(","),function(X,la){if(la=="title"){da.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");ca&&ca.addClass(s+"-corner-right");ca=null}else{var oa;if(a[la])oa=a[la];else if(Ha[la])oa=function(){ba.removeClass(s+"-state-hover");a.changeView(la)};if(oa){ca&&ca.addClass(s+"-no-right");var ba;X=b.theme?Za(b.buttonIcons,la):null;var ka=Za(b.buttonText,la);if(X)ba=l("<div class='fc-button-"+la+" ui-state-default'><a><span class='ui-icon ui-icon-"+
X+"'/></a></div>");else if(ka)ba=l("<div class='fc-button-"+la+" "+s+"-state-default'><a><span>"+ka+"</span></a></div>");if(ba){ba.click(function(){ba.hasClass(s+"-state-disabled")||oa()}).mousedown(function(){ba.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-down")}).mouseup(function(){ba.removeClass(s+"-state-down")}).hover(function(){ba.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-hover")},function(){ba.removeClass(s+"-state-hover").removeClass(s+
"-state-down")}).appendTo(l("<td/>").appendTo(da));ca?ca.addClass(s+"-no-right"):ba.addClass(s+"-corner-left");$a(ba.closest("td"));ca=ba}}}});ca&&ca.addClass(s+"-corner-right")});return l("<table/>").append(da)}}function k(t){P.find("h2.fc-header-title").html(t)}function n(t){P.find("div.fc-button-"+t).addClass(s+"-state-active")}function o(t){P.find("div.fc-button-"+t).removeClass(s+"-state-active")}function u(t){P.find("div.fc-button-"+t).addClass(s+"-state-disabled")}function z(t){P.find("div.fc-button-"+
t).removeClass(s+"-state-disabled")}var O=this;O.render=f;O.destroy=e;O.updateTitle=k;O.activateButton=n;O.deactivateButton=o;O.disableButton=u;O.enableButton=z;var P=l([]),s}function Ib(a,b){function f(d,T){return!ka||d<ka||T>fa}function e(d,T){ka=d;fa=T;G=[];d=++w;ia=T=b.length;for(var Q=0;Q<T;Q++)g(b[Q],d)}function g(d,T){k(d,function(Q){if(T==w){for(var R=0;R<Q.length;R++){ca(Q[R]);Q[R].source=d}G=G.concat(Q);ia--;ia||ba(G)}})}function k(d,T){if(typeof d=="string"){var Q={};Q[a.startParam]=Math.round(ka.getTime()/
1E3);Q[a.endParam]=Math.round(fa.getTime()/1E3);Q.browserTimezone=ka.getTimezoneOffset();if(a.cacheParam)Q[a.cacheParam]=(new Date).getTime();da();l.ajax({global:false,type:a.requestMethod||"GET",url:d,dataType:"json",data:Q,cache:a.cacheParam||false,success:function(R){qa();T(R)}})}else if(l.isFunction(d)){da();d(y(ka),y(fa),function(R){qa();T(R)})}else d&&T(d)}function n(d){b.push(d);ia++;g(d,w)}function o(d){var T=[];b=l.grep(b,function(Q){if(typeof Q==="object"&&d!==Q)T=T.concat(Q);return Q!=
d});G=l.grep(G,function(Q){return Q.source!=d});b=T.concat(b);ba(G)}function u(d){if(b.indexOf(d)<0){b.push(d);ia++}}function z(){G=b=[];b=[].concat(b);ba(G)}function O(d){var T,Q=G.length,R,B=oa().defaultEventEnd,V=d.start-d._start,ra=d.end?d.end-(d._end||B(d)):0;for(T=0;T<Q;T++){R=G[T];if(R._id==d._id&&R!=d){R.start=new Date(+R.start+V);R.end=d.end?R.end?new Date(+R.end+ra):new Date(+B(R)+ra):null;R.title=d.title;R.url=d.url;R.allDay=d.allDay;R.className=d.className;R.editable=d.editable;R.resizable=
d.resizable;R.color=d.color;R.bgColor=d.bgColor;R.borderColor=d.borderColor;ca(R)}}ca(d);ba(G)}function P(d,T){ca(d);if(!d.source){if(T){Y.push(d);d.source=Y}G.push(d)}ba(G)}function s(d){if(d){if(!l.isFunction(d)){var T=d+"";d=function(R){return R._id==T}}G=l.grep(G,d,true);for(Q=0;Q<b.length;Q++)if(typeof b[Q]=="object")b[Q]=l.grep(b[Q],d,true)}else{G=[];for(var Q=0;Q<b.length;Q++)if(typeof b[Q]=="object")b[Q]=[]}ba(G)}function t(d){if(l.isFunction(d))return l.grep(G,d);else if(d){d+="";return l.grep(G,
function(T){return T._id==d})}return G}function da(){M++||la("loading",null,true)}function qa(){--M||la("loading",null,false)}function ca(d){d._id=d._id||(d.id===ja?"_fc"+Jb++:d.id+"");if(d.date){if(!d.start)d.start=d.date;delete d.date}d._start=y(d.start=ab(d.start,a.ignoreTimezone));d.end=ab(d.end,a.ignoreTimezone);if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?y(d.end):null;if(d.allDay===ja)d.allDay=a.allDayDefault;if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=
[]}var X=this;X.isFetchNeeded=f;X.fetchEvents=e;X.addEventSource=n;X.addEventSourceFast=u;X.clearEventSources=z;X.removeEventSource=o;X.updateEvent=O;X.renderEvent=P;X.removeEvents=s;X.clientEvents=t;X.normalizeEvent=ca;var la=X.trigger,oa=X.getView,ba=X.reportEvents,ka,fa,w=0,ia=0,M=0,Y=[],G=[];b.push(Y)}function Kb(a,b){function f(o,u){if(u){Xa(o,u);o.setDate(1)}o=y(o,true);o.setDate(1);u=Xa(y(o),1);var z=y(o),O=y(u),P=g("firstDay"),s=g("weekends")?0:1;if(s){va(z);va(O,-1,true)}U(z,-((z.getDay()-
Math.max(P,s)+7)%7));U(O,(7-O.getDay()+Math.max(P,s))%7);P=Math.round((O-z)/(ob*7));if(g("weekMode")=="fixed"){U(O,(6-P)*7);P=6}e.title=n(o,g("titleFormat"));e.start=o;e.end=u;e.visStart=z;e.visEnd=O;k(P,s?5:7,true)}var e=this;e.render=f;bb.call(e,a,b,"month");var g=e.opt,k=e.renderBasic,n=b.formatDate}function Lb(a,b){function f(o,u){u&&U(o,u*7);o=U(y(o),-((o.getDay()-g("firstDay")+7)%7));u=U(y(o),7);var z=y(o),O=y(u),P=g("weekends");if(!P){va(z);va(O,-1,true)}e.title=n(z,U(y(O),-1),g("titleFormat"));
e.start=o;e.end=u;e.visStart=z;e.visEnd=O;k(1,P?7:5,false)}var e=this;e.render=f;bb.call(e,a,b,"basicWeek");var g=e.opt,k=e.renderBasic,n=b.formatDates}function Mb(a,b){function f(o,u){if(u){U(o,u);g("weekends")||va(o,u<0?-1:1)}e.title=n(o,g("titleFormat"));e.start=e.visStart=y(o,true);e.end=e.visEnd=U(y(e.start),1);k(1,1,false)}var e=this;e.render=f;bb.call(e,a,b,"basicDay");var g=e.opt,k=e.renderBasic,n=b.formatDate}function bb(a,b,f){function e(c,i,r){J=c;F=i;ra=0+ia("weekNumbers");if(R=ia("isRTL")){B=
-1;V=F-1;ra&&V++}else{B=1;V=0;ra&&V--}ha=ia("firstDay");x=ia("weekends")?0:1;var L=ia("theme")?"ui":"fc",aa=ia("columnFormat"),q=w.start.getMonth(),D=Ia(new Date),N,H=y(w.visStart);if(m){Y();i=m.find("tr").length;if(J<i)m.find("tr:gt("+(J-1)+")").remove();else if(J>i){c="";for(i=i;i<J;i++){c+="<tr class='fc-week"+i+"'>";if(ra){N=y(H);U(N,1);c+="<th class='fc-axis "+L+"-state-default fc-leftmost fc-weeknumber'>"+N.getWeek()+"</th>"}for(N=0;N<F;N++){c+="<td class='fc-"+Ea[H.getDay()]+" "+L+"-state-default fc-new fc-day"+
(i*F+N)+(N==V?" fc-leftmost":"")+"'>"+(r?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";U(H,1);x&&va(H)}c+="</tr>"}m.append(c)}n(m.find("td.fc-new").removeClass("fc-new"));H=y(w.visStart);m.find("td").each(function(){var $=l(this);ra&&H.getDay()==1&&$.closest("tr").find("th").text(H.getWeek());if(J>1)H.getMonth()==q?$.removeClass("fc-other-month"):$.addClass("fc-other-month");if(+H==+D)$.removeClass("fc-not-today fc-before-today").addClass(L+
"-state-highlight fc-today");else+H<+D?$.addClass("fc-not-today fc-before-today").removeClass(L+"-state-highlight fc-today"):$.addClass("fc-not-today").removeClass(L+"-state-highlight fc-today fc-before-today");$.find("div.fc-day-number").text(H.getDate());U(H,1);x&&va(H)});if(J==1){H=y(w.visStart);Z.find("th").not(".fc-axis").each(function($,pa){l(pa).text(Q(H,aa));pa.className=pa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[H.getDay()]);U(H,1);x&&va(H)});H=y(w.visStart);m.find("td").each(function($,
pa){pa.className=pa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[H.getDay()]);U(H,1);x&&va(H)})}}else{var ma=l("<table/>").appendTo(a);c="<thead><tr>";if(ra)c+="<th width='25px' class='fc-axis fc-leftmost "+L+"-state-default'>&nbsp;</th>";for(i=0;i<F;i++){c+="<th class='fc-"+Ea[H.getDay()]+" "+L+"-state-default"+(i==V?" fc-leftmost":"")+"'>"+Q(H,aa)+"</th>";U(H,1);x&&va(H)}Z=l(c+"</tr></thead>").appendTo(ma);c="<tbody>";H=y(w.visStart);for(i=0;i<J;i++){c+="<tr class='fc-week"+i+"'>";if(ra){N=y(H);U(N,
1);c+="<th class='fc-axis "+L+"-state-default fc-leftmost fc-weeknumber'>"+N.getWeek()+"</th>"}for(N=0;N<F;N++){c+="<td class='fc-"+Ea[H.getDay()]+" "+L+"-state-default fc-new fc-day"+(i*F+N)+(N==V?" fc-leftmost":"")+(J>1&&H.getMonth()!=q?" fc-other-month":"")+(+H==+D?" fc-today "+L+"-state-highlight":+H<+D?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(r?"<div class='fc-day-number'>"+H.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";
U(H,1);x&&va(H)}c+="</tr>"}m=l(c+"</tbody>").appendTo(ma);n(m.find("td.fc-new").removeClass("fc-new"));h=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function g(c){C=c;c=m.find("tr td:first-child");var i=C-Z.outerHeight(),r;if(ra)c=m.find("tr th:first-child");if(ia("weekMode")=="variable")r=i=Math.floor(i/(J==1?2:6));else{r=Math.floor(i/J);i=i-r*(J-1)}if(cb===ja){var L=m.find("tr:first").find("td:first");Ja(L,r);cb=r!=L.outerHeight()}if(cb){c.slice(0,-1).height(r);c.slice(-1).height(i)}else{Ja(c.slice(0,
-1),r);Ja(c.slice(-1),i)}}function k(c){A=c;S.clear();if(ra){K=Math.floor((A-25)/F);za(Z.find("th").slice(1,-1),K)}else{K=Math.floor(A/F);za(Z.find("th").slice(0,-1),K)}}function n(c){c.click(o).mousedown(T)}function o(c){if(!ia("selectable")){var i=parseInt(this.className.match(/fc\-day(\d+)/)[1],10);i=U(y(w.visStart),Math.floor(i/F)*7+i%F);M("dayClick",this,i,true,c)}}function u(c,i,r){r&&j.build();r=y(w.visStart);for(var L=U(y(r),F),aa=0;aa<J;aa++){var q=new Date(Math.max(r,c)),D=new Date(Math.min(L,
i));if(q<D){var N;if(R){N=Aa(D,r)*B+V+1;q=Aa(q,r)*B+V+1}else{N=Aa(q,r);q=Aa(D,r)}n(z(aa,N,aa,q-1))}U(r,7);U(L,7)}}function z(c,i,r,L){c=j.rect(c,i,r,L,a);return G(c,a)}function O(c){return y(c)}function P(c,i){u(c,U(y(i),1),true)}function s(){d()}function t(c,i){E.start(function(r){d();r&&z(r.row,r.col,r.row,r.col)},i)}function da(c,i,r){var L=E.stop();d();if(L){L=ba(L);M("drop",c,L,true,i,r)}}function qa(c){return y(c.start)}function ca(c){return S.left(c)}function X(c){return S.right(c)}function la(c){return(c-
Math.max(ha,x)+F)%F}function oa(c){return{row:Math.floor(Aa(c,w.visStart)/7),col:la(c.getDay())*B+V}}function ba(c){return U(y(w.visStart),c.row*7+c.col*B+V+ra)}function ka(c){return m.find("tr:eq("+c+")")}function fa(){return{left:0,right:A}}var w=this;w.renderBasic=e;w.setHeight=g;w.setWidth=k;w.renderDayOverlay=u;w.defaultSelectionEnd=O;w.renderSelection=P;w.clearSelection=s;w.dragStart=t;w.dragStop=da;w.defaultEventEnd=qa;w.getHoverListener=function(){return E};w.colContentLeft=ca;w.colContentRight=
X;w.dayOfWeekCol=la;w.dateCell=oa;w.cellDate=ba;w.cellIsAllDay=function(){return true};w.allDayTR=ka;w.allDayBounds=fa;w.getRowCnt=function(){return J};w.getColCnt=function(){return F};w.getColWidth=function(){return K};w.getDaySegmentContainer=function(){return h};pb.call(w,a,b,f);qb.call(w);rb.call(w);Nb.call(w);var ia=w.opt,M=w.trigger,Y=w.clearEvents,G=w.renderOverlay,d=w.clearOverlays,T=w.daySelectionMousedown,Q=b.formatDate,R,B,V,ra,ha,x,J,F,K,A,C,Z,m,h,j,E,S;$a(a.addClass("fc-grid"));j=new sb(function(c,
i){var r,L,aa,q=m.find("tr:first td");if(R)q=l(q.get().reverse());q.each(function(D,N){r=l(N);L=r.offset().left;if(D)aa[1]=L;aa=[L];i[D]=aa});aa[1]=L+r.outerWidth();m.find("tr").each(function(D,N){r=l(N);L=r.offset().top;if(D)aa[1]=L;aa=[L];c[D]=aa});aa[1]=L+r.outerHeight()});E=new tb(j);S=new ub(function(c){return m.find("td:eq("+c+") div div")})}function Nb(){function a(fa,w){u(fa);ba(f(fa),w)}function b(){z();da().empty()}function f(fa){var w=la(),ia=oa(),M=y(k.visStart);ia=U(y(M),ia);var Y=l.map(fa,
Pa),G,d,T,Q,R,B,V=[];for(G=0;G<w;G++){d=db(eb(fa,Y,M,ia));for(T=0;T<d.length;T++){Q=d[T];for(R=0;R<Q.length;R++){B=Q[R];B.row=G;B.level=T;V.push(B)}}U(M,7);U(ia,7)}return V}function e(fa,w,ia){O(fa,w);if(fa.editable||fa.editable===ja&&n("editable")){g(fa,w);ia.isEnd&&ka(fa,w,ia)}}function g(fa,w){if(!n("disableDragging")&&w.draggable){var ia=qa(),M;w.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(Y,G){o("eventDragStart",w,fa,Y,G);s(fa,w);
ia.start(function(d,T,Q,R){w.draggable("option","revert",!d||!Q&&!R);X();if(d){M=Q*7+R*(n("isRTL")?-1:1);ca(U(y(fa.start),M),U(Pa(fa),M))}else M=0},Y,"drag")},stop:function(Y,G){ia.stop();X();o("eventDragStop",w,fa,Y,G);if(M){w.find("a").removeAttr("href");t(this,fa,M,0,fa.allDay,Y,G)}else{l.browser.msie&&w.css("filter","");P(fa,w)}}})}}var k=this;k.renderEvents=a;k.compileDaySegs=f;k.clearEvents=b;k.bindDaySeg=e;vb.call(k);var n=k.opt,o=k.trigger,u=k.reportEvents,z=k.reportEventClear,O=k.eventElementHandlers,
P=k.showEvents,s=k.hideEvents,t=k.eventDrop,da=k.getDaySegmentContainer,qa=k.getHoverListener,ca=k.renderDayOverlay,X=k.clearOverlays,la=k.getRowCnt,oa=k.getColCnt,ba=k.renderDaySegs,ka=k.resizableDayEvent}function Ob(a,b){function f(o,u){u&&U(o,u*7);o=U(y(o),-((o.getDay()-g("firstDay")+7)%7));u=U(y(o),7);var z=y(o),O=y(u),P=g("weekends");if(!P){va(z);va(O,-1,true)}e.title=n(z,U(y(O),-1),g("titleFormat"));e.start=o;e.end=u;e.visStart=z;e.visEnd=O;k(P?7:5)}var e=this;e.render=f;wb.call(e,a,b,"agendaWeek");
var g=e.opt,k=e.renderAgenda,n=b.formatDates}function Pb(a,b){function f(o,u){if(u){U(o,u);g("weekends")||va(o,u<0?-1:1)}u=y(o,true);var z=U(y(u),1);e.title=n(o,g("titleFormat"));e.start=e.visStart=u;e.end=e.visEnd=z;k(1)}var e=this;e.render=f;wb.call(e,a,b,"agendaDay");var g=e.opt,k=e.renderAgenda,n=b.formatDate}function wb(a,b,f){function e(p){c=p;H=V("theme")?"ui":"fc";$=V("weekends")?0:1;ma=V("firstDay");if(pa=V("isRTL")){ga=-1;na=c-1}else{ga=1;na=0}Ba=fb(V("minTime"));Ca=fb(V("maxTime"));p=pa?
U(y(B.visEnd),-1):y(B.visStart);var v=y(p),I=Ia(new Date),W=V("columnFormat");if(m){ha();V("weekNumbers")&&m.find("tr:first th:first").text(Z(B.visStart,"w"));m.find("tr:first th").slice(1,-1).each(function(La,wa){l(wa).text(Z(v,W));wa.className=wa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[v.getDay()]);U(v,ga);$&&va(v,ga)});v=y(p);S.find("td").each(function(La,wa){wa.className=wa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[v.getDay()]);if(+v==+I)l(wa).removeClass("fc-not-today fc-before-today").addClass(H+
"-state-highlight fc-today");else+v<+I?l(wa).addClass("fc-not-today fc-before-today").removeClass(H+"-state-highlight fc-today"):l(wa).addClass("fc-not-today").removeClass(H+"-state-highlight fc-today fc-before-today");U(v,ga);$&&va(v,ga)})}else{var ea,ta,Fa=V("slotMinutes")%15==0,sa="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(V("allDaySlot")?"":" fc-last")+"'><th class='fc-leftmost "+H+"-state-default'>"+(V("weekNumbers")?Z(B.visStart,
"w"):"&nbsp;")+"</th>";for(ea=0;ea<c;ea++){sa+="<th class='fc-"+Ea[v.getDay()]+" "+H+"-state-default'>"+Z(v,W)+"</th>";U(v,ga);$&&va(v,ga)}sa+="<th class='"+H+"-state-default'>&nbsp;</th></tr>";if(V("allDaySlot"))sa+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+H+"-state-default'>"+V("allDayText")+"</th><td colspan='"+c+"' class='"+H+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+H+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+
(c+2)+"' class='"+H+"-state-default fc-leftmost'><div/></th></tr>";sa+="</table></div>";m=l(sa).appendTo(a);z(m.find("td"));xb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(m);v=yb();var gb=ua(y(v),Ca);ua(v,Ba);sa="<table>";for(ea=0;v<gb;ea++){ta=v.getMinutes();sa+="<tr class='"+(!ea?"fc-first":!ta?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+H+"-state-default'>"+(!Fa||!ta?Z(v,V("axisFormat")):"&nbsp;")+"</th><td class='fc-slot"+ea+" "+H+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";
ua(v,V("slotMinutes"));i++}sa+="</table>";h=l("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(j=l("<div style='position:relative;overflow:hidden'>").append(E=l(sa))).appendTo(a);O(h.find("td"));zb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(j);v=y(p);sa="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(ea=0;ea<c;ea++){sa+="<td class='fc-"+Ea[v.getDay()]+
" "+H+"-state-default "+(!ea?"fc-leftmost ":"")+(+v==+I?H+"-state-highlight fc-today":+v<+I?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";U(v,ga);$&&va(v,ga)}sa+="</tr></table></div>";S=l(sa).appendTo(a)}}function g(p,v){if(p===ja)p=D;D=p;hb={};var I=p-Da(m);I=Math.min(I,Da(E));Ja(h,I);Sa&&Ja(h,p-Da(m)-1);aa=Da(h.find("tr:first div"))+1;v&&n()}function k(p){q=p;Ta.clear();za(h,p);h.css("overflow","auto").width(p);var v=m.find("tr:first th"),
I=m.find("tr.fc-all-day th:last"),W=S.find("td"),ea=h[0].clientWidth;za(E,ea);ea=h[0].clientWidth;E.width(ea);r=0;var ta=m.find("tr:lt(2) th:first").add(h.find("tr:first th"));ta.width(1);ta.each(function(){r=Math.max(r,l(this).outerWidth())});za(ta,r);L=Math.floor((ea-r)/c);za(v.slice(1,-2),L);za(W.slice(0,-1),L);if(p!=ea){za(v.slice(-2,-1),ea-r-L*(c-1));v.slice(-1).show();I.show()}else{h.css("overflow","hidden");v.slice(-2,-1).width("");v.slice(-1).hide();I.hide()}S.css({top:Da(m.find("tr")),left:r,
width:ea-r,height:D})}function n(){var p=yb(),v=y(p);v.setHours(V("firstHour"));var I=oa(p,v)+1;p=function(){h.scrollTop(I)};p();setTimeout(p,0)}function o(){N=h.scrollTop()}function u(){h.scrollTop(N)}function z(p){p.click(P).mousedown(A)}function O(p){p.click(P).mousedown(T)}function P(p){if(!V("selectable")){var v=Math.min(c-1,Math.floor((p.pageX-S.offset().left)/L));v=U(y(B.visStart),v*ga+na);var I=this.className.match(/fc-slot(\d+)/);if(I){I=parseInt(I[1],10)*V("slotMinutes");var W=Math.floor(I/
60);v.setHours(W);v.setMinutes(I%60+Ba);ra("dayClick",this,v,false,p)}else ra("dayClick",this,v,true,p)}}function s(p,v,I){I&&xa.build();var W=y(B.visStart);if(pa){I=Aa(v,W)*ga+na+1;p=Aa(p,W)*ga+na+1}else{I=Aa(p,W);p=Aa(v,W)}I=Math.max(0,I);p=Math.min(c,p);I<p&&z(t(0,I,0,p-1))}function t(p,v,I,W){p=xa.rect(p,v,I,W,m);return x(p,m)}function da(p,v){for(var I=y(B.visStart),W=U(y(I),1),ea=0;ea<c;ea++){var ta=new Date(Math.max(I,p)),Fa=new Date(Math.min(W,v));if(ta<Fa){var sa=ea*ga+na;sa=xa.rect(0,sa,
0,sa,j);ta=oa(I,ta);Fa=oa(I,Fa);sa.top=ta;sa.height=Fa-ta;O(x(sa,j))}U(I,1);U(W,1)}}function qa(p){return r+Ta.left(p)}function ca(p){return r+Ta.right(p)}function X(p){return(p-Math.max(ma,$)+c)%c*ga+na}function la(p){return{row:Math.floor(Aa(p,B.visStart)/7),col:X(p.getDay())}}function oa(p,v){p=y(p,true);if(v<ua(y(p),Ba))return 0;if(v>=ua(y(p),Ca))return Da(j);p=V("slotMinutes");v=v.getHours()*60+v.getMinutes()-Ba;var I=Math.floor(v/p),W=hb[I];if(W===ja)W=hb[I]=h.find("tr:eq("+I+") td div")[0].offsetTop;
return Math.max(0,Math.round(W-1+aa*(v%p/p)))}function ba(p){var v=U(y(B.visStart),p.col*ga+na);p=p.row;V("allDaySlot")&&p--;p>=0&&ua(v,Ba+p*V("slotMinutes"));return v}function ka(p){return V("allDaySlot")&&!p.row}function fa(){return{left:r,right:q}}function w(){return m.find("tr.fc-all-day")}function ia(p){var v=y(p.start);if(p.allDay)return v;return ua(v,V("defaultEventMinutes"))}function M(p,v){if(v)return y(p);return ua(y(p),V("slotMinutes"))}function Y(p,v,I){if(I)V("allDaySlot")&&s(p,U(y(v),
1),true);else G(p,v)}function G(p,v){var I=V("selectHelper");xa.build();if(I){var W=Aa(p,B.visStart)*ga+na;if(W>=0&&W<c){W=xa.rect(0,W,0,W,j);var ea=oa(p,p),ta=oa(p,v);if(ta>ea){W.top=ea;W.height=ta-ea;W.left+=2;W.width-=5;if(l.isFunction(I)){if(p=I(p,v)){W.position="absolute";W.zIndex=8;ya=l(p).css(W).appendTo(j)}}else{ya=l(C({title:"",start:p,end:v,className:[],editable:false},W,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));l.browser.msie&&ya.find("span.fc-event-bg").hide();ya.css("opacity",
V("dragOpacity"))}if(ya){O(ya);j.append(ya);za(ya,W.width,true);Ja(ya,W.height,true)}}}}else da(p,v)}function d(){J();if(ya){ya.remove();ya=null}}function T(p){if(p.which==1&&V("selectable")){K(p);var v=this,I;Ma.start(function(W,ea){d();if(W&&W.col==ea.col&&!ka(W)){ea=ba(ea);W=ba(W);I=[ea,ua(y(ea),V("slotMinutes")),W,ua(y(W),V("slotMinutes"))].sort(ib);G(I[0],I[3])}else I=null},p);l(document).one("mouseup",function(W){Ma.stop();if(I){+I[0]==+I[1]&&ra("dayClick",v,I[0],false,W);F(I[0],I[3],false,
W)}})}}function Q(p,v){Ma.start(function(I){J();if(I)if(ka(I))t(I.row,I.col,I.row,I.col);else{I=ba(I);var W=ua(y(I),V("defaultEventMinutes"));da(I,W)}},v)}function R(p,v,I){var W=Ma.stop();J();W&&ra("drop",p,ba(W),ka(W),v,I)}var B=this;B.renderAgenda=e;B.setWidth=k;B.setHeight=g;B.beforeHide=o;B.afterShow=u;B.defaultEventEnd=ia;B.timePosition=oa;B.dayOfWeekCol=X;B.dateCell=la;B.cellDate=ba;B.cellIsAllDay=ka;B.allDayTR=w;B.allDayBounds=fa;B.getHoverListener=function(){return Ma};B.colContentLeft=qa;
B.colContentRight=ca;B.getDaySegmentContainer=function(){return xb};B.getSlotSegmentContainer=function(){return zb};B.getMinMinute=function(){return Ba};B.getMaxMinute=function(){return Ca};B.getBodyContent=function(){return j};B.getRowCnt=function(){return 1};B.getColCnt=function(){return c};B.getColWidth=function(){return L};B.getSlotHeight=function(){return aa};B.defaultSelectionEnd=M;B.renderDayOverlay=s;B.renderSelection=Y;B.clearSelection=d;B.dragStart=Q;B.dragStop=R;pb.call(B,a,b,f);qb.call(B);
rb.call(B);Qb.call(B);var V=B.opt,ra=B.trigger,ha=B.clearEvents,x=B.renderOverlay,J=B.clearOverlays,F=B.reportSelection,K=B.unselect,A=B.daySelectionMousedown,C=B.slotSegHtml,Z=b.formatDate,m,h,j,E,S,c,i=0,r,L,aa,q,D,N,H,ma,$,pa,ga,na,Ba,Ca,xa,Ma,Ta,hb={},ya,xb,zb;$a(a.addClass("fc-agenda"));xa=new sb(function(p,v){function I(wa){return Math.max(sa,Math.min(gb,wa))}var W,ea,ta;S.find("td").each(function(wa,Rb){W=l(Rb);ea=W.offset().left;if(wa)ta[1]=ea;ta=[ea];v[wa]=ta});ta[1]=ea+W.outerWidth();if(V("allDaySlot")){W=
m.find("td");ea=W.offset().top;p[0]=[ea,ea+W.outerHeight()]}for(var Fa=j.offset().top,sa=h.offset().top,gb=sa+h.outerHeight(),La=0;La<i;La++)p.push([I(Fa+aa*La),I(Fa+aa*(La+1))])});Ma=new tb(xa);Ta=new ub(function(p){return S.find("td:eq("+p+") div div")})}function Qb(){function a(h,j){ca(h);var E,S=h.length,c=[],i=[];for(E=0;E<S;E++)h[E].allDay?c.push(h[E]):i.push(h[E]);if(t("allDaySlot")){d(f(c),j);oa()}k(e(i),j)}function b(){X();ba().empty();ka().empty()}function f(h){h=db(eb(h,l.map(h,Pa),s.visStart,
s.visEnd));var j,E=h.length,S,c,i,r=[];for(j=0;j<E;j++){S=h[j];for(c=0;c<S.length;c++){i=S[c];i.row=0;i.level=j;r.push(i)}}return r}function e(h){var j=Q(),E=ia(),S=w(),c=ua(y(s.visStart),E),i=l.map(h,g),r,L,aa,q,D,N,H=[];for(r=0;r<j;r++){L=db(eb(h,i,c,ua(y(c),S-E)));Sb(L);for(aa=0;aa<L.length;aa++){q=L[aa];for(D=0;D<q.length;D++){N=q[D];N.col=r;N.level=aa;H.push(N)}}U(c,1,true)}return H}function g(h){return h.end?y(h.end):ua(y(h.start),t("defaultEventMinutes"))}function k(h,j){var E,S=h.length,c,
i,r,L,aa,q,D,N,H,ma,$="",pa,ga,na={},Ba={},Ca=ka(),xa;E=Q();if(pa=t("isRTL")){ga=-1;xa=E-1}else{ga=1;xa=0}for(E=0;E<S;E++){c=h[E];i=c.event;r="fc-event fc-event-vert ";if(c.isStart)r+="fc-corner-top ";if(c.isEnd)r+="fc-corner-bottom ";L=M(c.start,c.start);aa=M(c.start,c.end);q=c.col;D=c.level;N=c.forward||0;H=Y(q*ga+xa);ma=G(q*ga+xa)-H;ma=Math.min(ma-6,ma*0.95);q=D?ma/(D+N+1):N?(ma/(N+1)-6)*2:ma;D=H+ma/(D+N+1)*D*ga+(pa?ma-q:0);c.top=L;c.left=D;c.outerWidth=q;c.outerHeight=aa-L;$+=n(i,c,r)}Ca[0].innerHTML=
$;pa=Ca.children();for(E=0;E<S;E++){c=h[E];i=c.event;$=l(pa[E]);ga=da("eventRender",i,i,$);if(ga===false)$.remove();else{if(ga&&ga!==true){$.remove();$=l(ga).css({position:"absolute",top:c.top,left:c.left}).appendTo(Ca)}c.element=$;if(i._id===j)u(i,$,c);else $[0]._fci=E;ra(i,$)}}Ab(Ca,h,u);for(E=0;E<S;E++){c=h[E];if($=c.element){i=na[j=c.key=Bb($[0])];c.vsides=i===ja?(na[j]=Va($[0],true)):i;i=Ba[j];c.hsides=i===ja?(Ba[j]=jb($[0],true)):i;j=$.find("span.fc-event-title");if(j.length)c.titleTop=j[0].offsetTop}}for(E=
0;E<S;E++){c=h[E];if($=c.element){$[0].style.width=Math.max(0,c.outerWidth-c.hsides)+"px";na=Math.max(0,c.outerHeight-c.vsides);$[0].style.height=na+"px";i=c.event;if(c.titleTop!==ja&&na-c.titleTop<10){$.find("span.fc-event-time").text(Z(i.start,t("timeFormat"))+" - "+i.title);$.find("span.fc-event-title").remove()}da("eventAfterRender",i,i,$)}}}function n(h,j,E){var S="";if(h.color)S+="color:"+h.color+";";if(h.bgColor)S+="background-color:"+h.bgColor+";";if(h.borderColor)S+="border-color:"+h.borderColor+
";";return"<div class='"+E+h.className.join(" ")+"' style='position:absolute;z-index:8;top:"+j.top+"px;left:"+j.left+"px'><a"+(h.url?" href='"+Na(h.url)+"'":"")+(S?" style='"+S+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Na(m(h.start,h.end,t("timeFormat")))+"</span><span class='fc-event-title'>"+Na(h.title)+"</span></a>"+((h.resizable||h.resizable===ja)&&(h.editable||h.editable===ja&&t("editable"))&&!t("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":
"")+"</div>"}function o(h,j,E){la(h,j);if(h.editable||h.editable===ja&&t("editable")){z(h,j,E.isStart);E.isEnd&&T(h,j,E)}}function u(h,j,E){la(h,j);if(h.editable||h.editable===ja&&t("editable")){var S=j.find("span.fc-event-time");O(h,j,S);E.isEnd&&P(h,j,S)}}function z(h,j,E){if(!t("disableDragging")&&j.draggable){var S,c=true,i,r=t("isRTL")?-1:1,L=fa(),aa=R(),q=B(),D=ia();j.draggable({zIndex:9,opacity:t("dragOpacity","month"),revertDuration:t("dragRevertDuration"),start:function(H,ma){da("eventDragStart",
j,h,H,ma);x(h,j);S=Ra(j);L.start(function($,pa,ga,na){j.draggable("option","revert",!$||!ga&&!na);A();if($){i=na*r;if($.row){if(E&&c){za(j,aa-10);Ja(j,q*Math.round((h.end?(h.end-h.start)/Tb:t("defaultEventMinutes"))/t("slotMinutes")));j.draggable("option","grid",[aa,1]);c=false}}else{K(U(y(h.start),i),U(Pa(h),i));N()}}},H,"drag")},stop:function(H,ma){var $=L.stop();A();da("eventDragStop",j,h,H,ma);if($&&(!c||i)){j.find("a").removeAttr("href");$=0;c||($=Math.round((j.offset().top-V().offset().top)/
q)*t("slotMinutes")+D-(h.start.getHours()*60+h.start.getMinutes()));J(this,h,i,$,c,H,ma)}else{N();l.browser.msie&&j.css("filter","");ha(h,j)}}});function N(){if(!c){za(j,S);j.height("");j.draggable("option","grid",null);c=true}}}}function O(h,j,E){if(!t("disableDragging")&&j.draggable){var S,c=false,i,r,L,aa=t("isRTL")?-1:1,q=fa(),D=Q(),N=R(),H=B();j.draggable({zIndex:9,scroll:false,grid:[N,H],axis:D==1?"y":false,opacity:t("dragOpacity"),revertDuration:t("dragRevertDuration"),start:function(pa,ga){da("eventDragStart",
j,h,pa,ga);x(h,j);l.browser.msie&&j.find("span.fc-event-bg").hide();S=j.position();r=L=0;q.start(function(na,Ba,Ca,xa){j.draggable("option","revert",!na);A();if(na){i=xa*aa;if(t("allDaySlot")&&!na.row){if(!c){c=true;E.hide();j.draggable("option","grid",null)}K(U(y(h.start),i),U(Pa(h),i))}else $()}},pa,"drag")},drag:function(pa,ga){r=Math.round((ga.position.top-S.top)/H)*t("slotMinutes");if(r!=L){c||ma(r);L=r}},stop:function(pa,ga){var na=q.stop();A();da("eventDragStop",j,h,pa,ga);if(na&&(i||r||c))J(this,
h,i,c?0:r,c,pa,ga);else{$();j.css(S);ma(0);l.browser.msie&&j.css("filter","").find("span.fc-event-bg").css("display","");ha(h,j)}}});function ma(pa){var ga=ua(y(h.start),pa),na;if(h.end)na=ua(y(h.end),pa);E.text(m(ga,na,t("timeFormat")))}function $(){if(c){E.css("display","");j.draggable("option","grid",[N,H]);c=false}}}}function P(h,j,E){if(!t("disableResizing")&&j.resizable){var S,c,i=B();j.resizable({handles:{s:"div.ui-resizable-s"},grid:i,start:function(r,L){S=c=0;x(h,j);l.browser.msie&&l.browser.version==
"6.0"&&j.css("overflow","hidden");j.css("z-index",9);da("eventResizeStart",this,h,r,L)},resize:function(r,L){S=Math.round((Math.max(i,Da(j))-L.originalSize.height)/i);if(S!=c){E.text(m(h.start,!S&&!h.end?null:ua(qa(h),t("slotMinutes")*S),t("timeFormat")));c=S}},stop:function(r,L){da("eventResizeStop",this,h,r,L);if(S)F(this,h,0,t("slotMinutes")*S,r,L);else{j.css("z-index",8);ha(h,j)}}})}}var s=this;s.renderEvents=a;s.compileDaySegs=f;s.clearEvents=b;s.slotSegHtml=n;s.bindDaySeg=o;vb.call(s);var t=
s.opt,da=s.trigger,qa=s.eventEnd,ca=s.reportEvents,X=s.reportEventClear,la=s.eventElementHandlers,oa=s.setHeight,ba=s.getDaySegmentContainer,ka=s.getSlotSegmentContainer,fa=s.getHoverListener,w=s.getMaxMinute,ia=s.getMinMinute,M=s.timePosition,Y=s.colContentLeft,G=s.colContentRight,d=s.renderDaySegs,T=s.resizableDayEvent,Q=s.getColCnt,R=s.getColWidth,B=s.getSlotHeight,V=s.getBodyContent,ra=s.reportEventElement,ha=s.showEvents,x=s.hideEvents,J=s.eventDrop,F=s.eventResize,K=s.renderDayOverlay,A=s.clearOverlays,
C=s.calendar,Z=C.formatDate,m=C.formatDates}function Sb(a){var b,f,e,g,k,n;for(b=a.length-1;b>0;b--){g=a[b];for(f=0;f<g.length;f++){k=g[f];for(e=0;e<a[b-1].length;e++){n=a[b-1][e];if(Cb(k,n))n.forward=Math.max(n.forward||0,(k.forward||0)+1)}}}}function pb(a,b,f){function e(M,Y){M=ia[M];if(typeof M=="object")return Za(M,Y||f);return M}function g(M,Y){return b.trigger.apply(b,[M,Y||X].concat(Array.prototype.slice.call(arguments,2),[X]))}function k(M){ka={};var Y,G=M.length,d;for(Y=0;Y<G;Y++){d=M[Y];
if(ka[d._id])ka[d._id].push(d);else ka[d._id]=[d]}}function n(M){return M.end?y(M.end):la(M)}function o(M,Y){fa.push(Y);if(w[M._id])w[M._id].push(Y);else w[M._id]=[Y]}function u(){fa=[];w={}}function z(M,Y){Y.click(function(G){if(!Y.hasClass("ui-draggable-dragging")&&!Y.hasClass("ui-resizable-resizing"))return g("eventClick",this,M,G)}).hover(function(G){g("eventMouseover",this,M,G)},function(G){g("eventMouseout",this,M,G)})}function O(M,Y){s(M,Y,"show")}function P(M,Y){s(M,Y,"hide")}function s(M,
Y,G){M=w[M._id];var d,T=M.length;for(d=0;d<T;d++)if(!Y||M[d][0]!=Y[0])M[d][G]()}function t(M,Y,G,d,T,Q,R){var B=Y.allDay,V=Y._id;qa(ka[V],G,d,T);g("eventDrop",M,Y,G,d,T,function(){qa(ka[V],-G,-d,B);ba(V)},Q,R);ba(V)}function da(M,Y,G,d,T,Q){var R=Y._id;ca(ka[R],G,d);g("eventResize",M,Y,G,d,function(){ca(ka[R],-G,-d);ba(R)},T,Q);ba(R)}function qa(M,Y,G,d){G=G||0;for(var T,Q=M.length,R=0;R<Q;R++){T=M[R];if(d!==ja)T.allDay=d;ua(U(T.start,Y,true),G);if(T.end)T.end=ua(U(T.end,Y,true),G);oa(T,ia)}}function ca(M,
Y,G){G=G||0;for(var d,T=M.length,Q=0;Q<T;Q++){d=M[Q];d.end=ua(U(n(d),Y,true),G);oa(d,ia)}}var X=this;X.element=a;X.calendar=b;X.name=f;X.opt=e;X.trigger=g;X.reportEvents=k;X.eventEnd=n;X.reportEventElement=o;X.reportEventClear=u;X.eventElementHandlers=z;X.showEvents=O;X.hideEvents=P;X.eventDrop=t;X.eventResize=da;var la=X.defaultEventEnd,oa=b.normalizeEvent,ba=b.reportEventChange,ka={},fa=[],w={},ia=b.options}function vb(){function a(x,J){var F=Q(),K=ka(),A=fa(),C=0,Z,m,h=x.length,j,E;F[0].innerHTML=
f(x);e(x,F.children());g(x);k(x,F,J);n(x);o(x);u(x);J=z();for(F=0;F<K;F++){Z=[];for(m=0;m<A;m++)Z[m]=0;for(;C<h&&(j=x[C]).row==F;){m=Db(Z.slice(j.startCol,j.endCol));j.top=m;m+=j.outerHeight;for(E=j.startCol;E<j.endCol;E++)Z[E]=m;C++}J[F].height(Db(Z))}P(x,O(J))}function b(x,J,F){var K=l("<div/>"),A=Q(),C=x.length,Z;K[0].innerHTML=f(x);K=K.children();A.append(K);e(x,K);n(x);o(x);u(x);P(x,O(z()));K=[];for(A=0;A<C;A++)if(Z=x[A].element){x[A].row===J&&Z.css("top",F);K.push(Z[0])}return l(K)}function f(x){var J=
da("isRTL"),F,K=x.length,A,C,Z;F=ia();var m=F.left,h=F.right,j=[],E,S,c="";for(F=0;F<K;F++){A=x[F];C=A.event;Z="fc-event fc-event-hori ";if(J){if(A.isStart)Z+="fc-corner-right ";if(A.isEnd)Z+="fc-corner-left ";j[0]=G(A.end.getDay()-1);j[1]=G(A.start.getDay());E=A.isEnd?M(j[0]):m;S=A.isStart?Y(j[1]):h}else{if(A.isStart)Z+="fc-corner-left ";if(A.isEnd)Z+="fc-corner-right ";j[0]=G(A.start.getDay());j[1]=G(A.end.getDay()-1);E=A.isStart?M(j[0]):m;S=A.isEnd?Y(j[1]):h}var i="";if(C.color)i="color:"+C.color+
";";if(C.bgColor)i+="background-color:"+C.bgColor+";";if(C.borderColor)i+="border-color:"+C.borderColor+";";c+="<div class='"+Z+C.className.join(" ")+"' style='position:absolute;z-index:8;left:"+E+"px'><a"+(C.url?" href='"+Na(C.url)+"'":"")+(i?" style='"+i+"'":"")+">"+(!C.allDay&&A.isStart?"<span class='fc-event-time'>"+Na(B(C.start,C.end,da("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Na(C.title)+"</span></a>"+(A.isEnd&&(C.editable||C.editable===ja&&da("editable"))&&!da("disableResizing")?
"<div class='ui-resizable-handle ui-resizable-"+(J?"w":"e")+"'></div>":"")+"</div>";A.left=E;A.outerWidth=S-E;j.sort(ib);A.startCol=j[0];A.endCol=j[1]+1}return c}function e(x,J){var F,K=x.length,A,C,Z;for(F=0;F<K;F++){A=x[F];C=A.event;Z=l(J[F]);C=qa("eventRender",C,C,Z);if(C===false)Z.remove();else{if(C&&C!==true){C=l(C).css({position:"absolute",left:A.left});Z.replaceWith(C);Z=C}A.element=Z}}}function g(x){var J,F=x.length,K,A;for(J=0;J<F;J++){K=x[J];(A=K.element)&&X(K.event,A)}}function k(x,J,F){var K,
A=x.length,C,Z,m;for(K=0;K<A;K++){C=x[K];if(Z=C.element){m=C.event;if(m._id===F)R(m,Z,C);else Z[0]._fci=K}}Ab(J,x,R)}function n(x){var J,F=x.length,K,A,C,Z,m={};for(J=0;J<F;J++){K=x[J];if(A=K.element){C=K.key=Bb(A[0]);Z=m[C];if(Z===ja)Z=m[C]=jb(A[0],true);K.hsides=Z}}}function o(x){var J,F=x.length,K,A;for(J=0;J<F;J++){K=x[J];if(A=K.element)A[0].style.width=Math.max(0,K.outerWidth-K.hsides)+"px"}}function u(x){var J,F=x.length,K,A,C,Z,m={};for(J=0;J<F;J++){K=x[J];if(A=K.element){C=K.key;Z=m[C];if(Z===
ja)Z=m[C]=Eb(A[0]);K.outerHeight=A[0].offsetHeight+Z}}}function z(){var x,J=ka(),F=[];for(x=0;x<J;x++)F[x]=w(x).find("td:first div.fc-day-content > div");return F}function O(x){var J,F=x.length,K=[];for(J=0;J<F;J++)K[J]=x[J][0].offsetTop;return K}function P(x,J){var F,K=x.length,A,C;for(F=0;F<K;F++){A=x[F];if(C=A.element){C[0].style.top=J[A.row]+(A.top||0)+"px";A=A.event;qa("eventAfterRender",A,A,C)}}}function s(x,J,F){if(!da("disableResizing")&&F.isEnd&&J.resizable){var K=da("isRTL"),A=K?"w":"e";
J.find("div.ui-resizable-"+A).mousedown(function(C){function Z(q){qa("eventResizeStop",this,x,q);l("body").css("cursor","auto");m.stop();ra();i&&ba(this,x,i,0,q)}if(C.which==1){var m=t.getHoverListener(),h=ka(),j=fa(),E=K?-1:1,S=K?j:0,c=J.css("top"),i,r,L=l.extend({},x),aa=d(x.start);ha();l("body").css("cursor",A+"-resize").one("mouseup",Z);qa("eventResizeStart",this,x,C);m.start(function(q,D){if(q){var N=Math.max(aa.row,q.row);q=q.col;if(h==1)N=0;if(N==aa.row)q=K?Math.min(aa.col,q):Math.max(aa.col,
q);i=N*j+q*E+S-(D.row*j+D.col*E+S);D=U(ca(x),i,true);if(i){L.end=D;N=r;r=b(T([L]),F.row,c);r.find("*").css("cursor",A+"-resize");N&&N.remove();oa(x)}else if(r){la(x);r.remove();r=null}ra();V(x.start,U(y(D),1))}},C)}})}}var t=this;t.renderDaySegs=a;t.resizableDayEvent=s;var da=t.opt,qa=t.trigger,ca=t.eventEnd,X=t.reportEventElement,la=t.showEvents,oa=t.hideEvents,ba=t.eventResize,ka=t.getRowCnt,fa=t.getColCnt,w=t.allDayTR,ia=t.allDayBounds,M=t.colContentLeft,Y=t.colContentRight,G=t.dayOfWeekCol,d=
t.dateCell,T=t.compileDaySegs,Q=t.getDaySegmentContainer,R=t.bindDaySeg,B=t.calendar.formatDates,V=t.renderDayOverlay,ra=t.clearOverlays,ha=t.clearSelection}function rb(){function a(P,s,t){b();s||(s=o(P,t));u(P,s,t);f(P,s,t)}function b(P){if(O){O=false;z();n("unselect",null,P)}}function f(P,s,t,da){O=true;n("select",null,P,s,t,da)}function e(P){var s=g.cellDate,t=g.cellIsAllDay,da=g.getHoverListener();if(P.which==1&&k("selectable")){b(P);var qa=this,ca;da.start(function(X,la){z();if(X&&t(X)){ca=[s(la),
s(X)].sort(ib);u(ca[0],ca[1],true)}else ca=null},P);l(document).one("mouseup",function(X){da.stop();if(ca){+ca[0]==+ca[1]&&n("dayClick",qa,ca[0],true,X);f(ca[0],ca[1],true,X)}})}}var g=this;g.select=a;g.unselect=b;g.reportSelection=f;g.daySelectionMousedown=e;var k=g.opt,n=g.trigger,o=g.defaultSelectionEnd,u=g.renderSelection,z=g.clearSelection,O=false;k("selectable")&&k("unselectAuto")&&l(document).mousedown(function(P){var s=k("unselectCancel");if(s)if(l(P.target).parents(s).length)return;b(P)})}
function qb(){function a(k,n){var o=g.shift();o||(o=l("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=n[0]&&o.appendTo(n);e.push(o.css(k).show());return o}function b(){for(var k;k=e.shift();)g.push(k.hide().unbind())}var f=this;f.renderOverlay=a;f.clearOverlays=b;var e=[],g=[]}function sb(a){var b=this,f,e;b.build=function(){f=[];e=[];a(f,e)};b.cell=function(g,k){var n=f.length,o=e.length,u,z=-1,O=-1;for(u=0;u<n;u++)if(k>=f[u][0]&&k<f[u][1]){z=u;break}for(u=
0;u<o;u++)if(g>=e[u][0]&&g<e[u][1]){O=u;break}return z>=0&&O>=0?{row:z,col:O}:null};b.rect=function(g,k,n,o,u){u=u.offset();return{top:f[g][0]-u.top,left:e[k][0]-u.left,width:e[o][1]-e[k][0],height:f[n][1]-f[g][0]}}}function tb(a){function b(o){o=a.cell(o.pageX,o.pageY);if(!o!=!n||o&&(o.row!=n.row||o.col!=n.col)){if(o){k||(k=o);g(o,k,o.row-k.row,o.col-k.col)}else g(o,k);n=o}}var f=this,e,g,k,n;f.start=function(o,u,z){g=o;k=n=null;a.build();b(u);e=z||"mousemove";l(document).bind(e,b)};f.stop=function(){l(document).unbind(e,
b);return n}}function ub(a){function b(n){return e[n]=e[n]||a(n)}var f=this,e={},g={},k={};f.left=function(n){return g[n]=g[n]===ja?b(n).position().left:g[n]};f.right=function(n){return k[n]=k[n]===ja?f.left(n)+Ra(b(n)):k[n]};f.clear=function(){e={};g={};k={}}}function Wa(a,b,f){a.setFullYear(a.getFullYear()+b);f||Ia(a);return a}function Xa(a,b,f){if(+a){b=a.getMonth()+b;var e=y(a);e.setDate(1);e.setMonth(b);a.setMonth(b);for(f||Ia(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}
function U(a,b,f){if(+a){b=a.getDate()+b;var e=y(a);e.setHours(9);e.setDate(b);a.setDate(b);f||Ia(a);kb(a,e)}return a}function kb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Ub)}function ua(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ia(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function y(a,b){if(b)return Ia(new Date(+a));return new Date(+a)}function yb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function va(a,
b,f){for(b=b||1;!a.getDay()||f&&a.getDay()==1||!f&&a.getDay()==6;)U(a,b);return a}function Aa(a,b){return Math.round((y(a,true)-y(b,true))/ob)}function nb(a,b,f,e){if(b!==ja&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(f!==ja&&f!=a.getMonth()){a.setDate(1);a.setMonth(f)}e!==ja&&a.setDate(e)}function ab(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a,10)*1E3);if(b===ja)b=true;
return Fb(a,b)||(a?new Date(a):null)}return null}function Fb(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var f=new Date(a[1],0,1);if(b||!a[14]){b=new Date(a[1],0,1,9,0);if(a[3]){f.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){f.setDate(a[5]);b.setDate(a[5])}kb(f,b);a[7]&&f.setHours(a[7]);a[8]&&f.setMinutes(a[8]);a[10]&&f.setSeconds(a[10]);a[12]&&f.setMilliseconds(Number("0."+a[12])*
1E3);kb(f,b)}else{f.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);f.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1;f=new Date(+f+b*60*1E3)}return f}function fb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2],10):0)}}function Ka(a,
b,f){return Ya(a,null,b,f)}function Ya(a,b,f,e){e=e||Qa;var g=a,k=b,n,o=f.length,u,z,O,P="";for(n=0;n<o;n++){u=f.charAt(n);if(u=="'")for(z=n+1;z<o;z++){if(f.charAt(z)=="'"){if(g){P+=z==n+1?"'":f.substring(n+1,z);n=z}break}}else if(u=="(")for(z=n+1;z<o;z++){if(f.charAt(z)==")"){n=Ka(g,f.substring(n+1,z),e);if(parseInt(n.replace(/\D/,""),10))P+=n;n=z;break}}else if(u=="[")for(z=n+1;z<o;z++){if(f.charAt(z)=="]"){u=f.substring(n+1,z);n=Ka(g,u,e);if(n!=Ka(k,u,e))P+=n;n=z;break}}else if(u=="{"){g=b;k=a}else if(u==
"}"){g=a;k=b}else{for(z=o;z>n;z--)if(O=Vb[f.substring(n,z)]){if(g)P+=O(g,e);n=z-1;break}if(z==n)if(g)P+=u}}return P}function Pa(a){return a.end?Wb(a.end,a.allDay):U(y(a.start),1)}function Wb(a,b){a=y(a);return b||a.getHours()||a.getMinutes()?U(a,1):Ia(a)}function Xb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Cb(a,b){return a.end>b.start&&a.start<b.end}function eb(a,b,f,e){var g=
[],k,n=a.length,o,u,z,O,P;for(k=0;k<n;k++){o=a[k];u=o.start;z=b[k];if(z>f&&u<e){if(u<f){u=y(f);O=false}else{u=u;O=true}if(z>e){z=y(e);P=false}else{z=z;P=true}g.push({event:o,start:u,end:z,isStart:O,isEnd:P,msLength:z-u})}}return g.sort(Xb)}function db(a){var b=[],f,e=a.length,g,k,n,o;for(f=0;f<e;f++){g=a[f];for(k=0;;){n=false;if(b[k])for(o=0;o<b[k].length;o++)if(Cb(b[k][o],g)){n=true;break}if(n)k++;else break}if(b[k])b[k].push(g);else b[k]=[g]}return b}function Ab(a,b,f){a.unbind("mouseover").mouseover(function(e){for(var g=
e.target,k;g!=this;){k=g;g=g.parentNode}if((g=k._fci)!==ja){k._fci=ja;k=b[g];f(k.event,k.element,k);l(e.target).trigger(e)}e.stopPropagation()})}function za(a,b,f){a.each(function(e,g){g.style.width=Math.max(0,b-jb(g,f))+"px"})}function Ja(a,b,f){a.each(function(e,g){g.style.height=Math.max(0,b-Va(g,f))+"px"})}function jb(a,b){return(parseFloat(l.curCSS(a,"paddingLeft",true))||0)+(parseFloat(l.curCSS(a,"paddingRight",true))||0)+(parseFloat(l.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(l.curCSS(a,
"borderRightWidth",true))||0)+(b?Yb(a):0)}function Yb(a){return(parseFloat(l.curCSS(a,"marginLeft",true))||0)+(parseFloat(l.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(l.curCSS(a,"paddingTop",true))||0)+(parseFloat(l.curCSS(a,"paddingBottom",true))||0)+(parseFloat(l.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(l.curCSS(a,"borderBottomWidth",true))||0)+(b?Eb(a):0)}function Eb(a){return(parseFloat(l.curCSS(a,"marginTop",true))||0)+(parseFloat(l.curCSS(a,"marginBottom",true))||
0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Da(a){if(Sa)return a.innerHeight();return a.height()}function Ra(a){if(Sa)return a.innerWidth();return a.width()}function mb(){}function ib(a,b){return a-b}function Db(a){return Math.max.apply(Math,a)}function Oa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==ja)return a[b];b=b.split(/(?=[A-Z])/);for(var f=b.length-1,e;f>=0;f--){e=a[b[f].toLowerCase()];if(e!==ja)return e}return a[""]}
function Na(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Bb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function $a(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Qa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,
allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov",
"Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Zb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",
next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ga=l.fullCalendar={version:"1.4.9-gcalendar"},Ha=Ga.views={},Sa=false;if(l.ui&&l.browser.msie&&parseInt(l.browser.version,10)>=9){Sa=true;var $b=l.ui.mouse.prototype._mouseMove;l.ui.mouse.prototype._mouseMove=function(a){a.button=1;$b.apply(this,[a])}}l.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,
1),f;this.each(function(){var g=l.data(this,"fullCalendar");if(g&&l.isFunction(g[a])){g=g[a].apply(g,b);if(f===ja)f=g;a=="destroy"&&l.removeData(this,"fullCalendar")}});if(f!==ja)return f;return this}var e=a.eventSources||[];delete a.eventSources;if(a.events){e.push(a.events);delete a.events}a=l.extend(true,{},Qa,a.isRTL||a.isRTL===ja&&Qa.isRTL?Zb:{},a);this.each(function(g,k){g=l(k);k=new Gb(g,a,e);g.data("fullCalendar",k);k.render()});return this};var Jb=1;Ha.month=Kb;Ha.basicWeek=Lb;Ha.basicDay=
Mb;var cb;lb({weekMode:"fixed"});Ha.agendaWeek=Ob;Ha.agendaDay=Pb;lb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ga.addDays=U;Ga.cloneDate=y;Ga.parseDate=ab;Ga.parseISO8601=Fb;Ga.parseTime=fb;Ga.formatDate=Ka;Ga.formatDates=Ya;var Ea=["sun","mon","tue","wed","thu","fri","sat"],ob=864E5,Ub=36E5,Tb=6E4,Vb={s:function(a){return a.getSeconds()},ss:function(a){return Oa(a.getSeconds())},
m:function(a){return a.getMinutes()},mm:function(a){return Oa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Oa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Oa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Oa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Oa(a.getMonth()+1)},MMM:function(a,
b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ka(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st",
"nd","rd"][a%10-1]||"th"},w:function(a){return a.getWeek()}};if(Date.prototype.getWeek===ja)Date.prototype.getWeek=function(){var a,b,f;f=new Date(this.getFullYear(),0,4,this.getHours());b=Math.round((this-f)/864E5);a=(f.getDay()+6)%7;a=Math.floor((b+a)/7)+1;b=(this.getDay()+6)%7;if(this.getMonth()==11&&this.getDate()>=28){f.setFullYear(this.getFullYear()+1);a=(f.getDay()+6)%7;if(b<a)return 1;f=new Date(this-6048E5);a=f.getWeek()+1}if(a===0&&b>3&&this.getMonth()==0){f=new Date(this-6048E5);a=f.getWeek()+
1}return a}})(jQuery);

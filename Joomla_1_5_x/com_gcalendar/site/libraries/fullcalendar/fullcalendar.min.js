/*

 FullCalendar v1.4.8-IE9
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Thu Oct 14 12:48:53 2010 +0200

*/
(function(m,aa){function jb(a){m.extend(true,Sa,a)}function Eb(a,b,d){function h(f){if(na){E();ia();S();F(f)}else i()}function i(){va=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");na=m("<div class='fc-content "+va+"-widget-content' style='position:relative'/>").prependTo(a);la=new Fb(s,b);(xa=la.render())&&a.prepend(xa);y(b.defaultView);m(window).resize(A);u()||t()}function t(){setTimeout(function(){!B.start&&u()&&F()},0)}function j(){m(window).unbind("resize",
A);la.destroy();na.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function n(){return ba.offsetWidth!==0}function u(){return m("body")[0].offsetWidth!==0}function y(f){if(!B||f!=B.name){g++;O();var q=B,G;if(q){if(q.eventsChanged){S();q.eventDirty=q.eventsChanged=false}(q.beforeHide||kb)();Ua(na,Ea(na));q.element.hide()}else Ua(na,1);na.css("overflow","hidden");if(B=fa[f])B.element.show();else B=fa[f]=new Ka[f](G=ua=m("<div class='fc-view fc-view-"+f+"' style='position:absolute'/>").appendTo(na),
s);q&&la.deactivateButton(q.name);la.activateButton(f);F();na.css("overflow","");q&&Ua(na,1);G||(B.afterShow||kb)();g--}}function F(f){if(n()){g++;O();ja===aa&&E();if(!B.start||f||p<B.start||p>=B.end){B.render(p,f||0);I(true);!b.lazyFetching||V()?Y():B.renderEvents(ea())}else if(B.sizeDirty||B.eventsDirty||!b.lazyFetching){B.clearEvents();B.sizeDirty&&I();!b.lazyFetching||V()?Y():B.renderEvents(ea())}ga=a.outerWidth();B.sizeDirty=false;B.eventsDirty=false;la.updateTitle(B.title);f=new Date;f>=B.start&&
f<B.end?la.disableButton("today"):la.enableButton("today");g--;B.trigger("viewDisplay",ba)}}function E(){ja=b.contentHeight?b.contentHeight:b.height?b.height-Va(na[0])-(xa?Ea(xa):0):Math.round(Qa(na)/Math.max(b.aspectRatio,0.5))}function I(f){g++;B.setHeight(ja,f);if(ua){ua.css("position","relative");ua=null}B.setWidth(Qa(na),f);g--}function A(){if(!g)if(B.start){var f=++c;setTimeout(function(){if(f==c&&!g&&n())if(ga!=(ga=a.outerWidth())){g++;P();B.trigger("windowResize",ba);g--}},200)}else t()}function P(){ia();
if(n()){E();I();O();B.rerenderEvents();B.sizeDirty=false}}function ia(){m.each(fa,function(f,q){q.sizeDirty=true})}function U(){S();if(n()){B.clearEvents();B.renderEvents(ea());B.eventsDirty=false}}function S(){m.each(fa,function(f,q){q.eventsDirty=true})}function Y(){Z(function(f){B.renderEvents(f)})}function W(f,q,G){B.select(f,q,G===aa?true:G)}function O(){B&&B.unselect()}function $(){F(-1)}function v(){F(1)}function D(){Wa(p,-1);F()}function L(){Wa(p,1);F()}function k(){p=new Date;F()}function o(f,
q,G){if(f instanceof Date)p=z(f);else lb(p,f,q,G);F()}function K(f,q,G){f!==aa&&Wa(p,f);q!==aa&&Xa(p,q);G!==aa&&M(p,G);F()}function e(){return z(p)}function H(){return B}function N(f,q){if(q===aa)return b[f];if(f=="height"||f=="contentHeight"||f=="aspectRatio"){b[f]=q;P()}}function l(f,q){if(b[f])return b[f].apply(q||ba,Array.prototype.slice.call(arguments,2))}var s=this;s.options=b;s.render=h;s.destroy=j;s.changeView=y;s.select=W;s.unselect=O;s.rerenderEvents=U;s.prev=$;s.next=v;s.prevYear=D;s.nextYear=
L;s.today=k;s.gotoDate=o;s.incrementDate=K;s.formatDate=function(f,q){return Ma(f,q,b)};s.formatDates=function(f,q,G){return Ya(f,q,G,b)};s.getDate=e;s.getView=H;s.option=N;s.trigger=l;Gb.call(s,b,d);var Z=s.fetchEvents,V=s.isFetchNeeded,ea=s.clientEvents,ba=a[0],la,xa,na,va,B,fa={},ga,ja,ua,c=0,g=0,p=new Date;lb(p,b.year,b.month,b.date);var w;b.droppable&&m(document).bind("dragstart",function(f,q){var G=f.target,R=m(G);if(!R.parents(".fc").length){var Q=b.dropAccept;if(m.isFunction(Q)?Q.call(G,R):
R.is(Q)){w=G;B.dragStart(w,f,q)}}}).bind("dragstop",function(f,q){if(w){B.dragStop(w,f,q);w=null}})}function Fb(a,b){function d(){I=b.theme?"ui":"fc";var A=b.header;if(A)return E=m("<table class='fc-header'/>").append(m("<tr/>").append(m("<td class='fc-header-left'/>").append(i(A.left))).append(m("<td class='fc-header-center'/>").append(i(A.center))).append(m("<td class='fc-header-right'/>").append(i(A.right))))}function h(){E.remove()}function i(A){if(A){var P=m("<tr/>");m.each(A.split(" "),function(ia){ia>
0&&P.append("<td><span class='fc-header-space'/></td>");var U;m.each(this.split(","),function(S,Y){if(Y=="title"){P.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");U&&U.addClass(I+"-corner-right");U=null}else{var W;if(a[Y])W=a[Y];else if(Ka[Y])W=function(){O.removeClass(I+"-state-hover");a.changeView(Y)};if(W){U&&U.addClass(I+"-no-right");var O;S=b.theme?Za(b.buttonIcons,Y):null;var $=Za(b.buttonText,Y);if(S)O=m("<div class='fc-button-"+Y+" ui-state-default'><a><span class='ui-icon ui-icon-"+
S+"'/></a></div>");else if($)O=m("<div class='fc-button-"+Y+" "+I+"-state-default'><a><span>"+$+"</span></a></div>");if(O){O.click(function(){O.hasClass(I+"-state-disabled")||W()}).mousedown(function(){O.not("."+I+"-state-active").not("."+I+"-state-disabled").addClass(I+"-state-down")}).mouseup(function(){O.removeClass(I+"-state-down")}).hover(function(){O.not("."+I+"-state-active").not("."+I+"-state-disabled").addClass(I+"-state-hover")},function(){O.removeClass(I+"-state-hover").removeClass(I+"-state-down")}).appendTo(m("<td/>").appendTo(P));
U?U.addClass(I+"-no-right"):O.addClass(I+"-corner-left");$a(O.closest("td"));U=O}}}});U&&U.addClass(I+"-corner-right")});return m("<table/>").append(P)}}function t(A){E.find("h2.fc-header-title").html(A)}function j(A){E.find("div.fc-button-"+A).addClass(I+"-state-active")}function n(A){E.find("div.fc-button-"+A).removeClass(I+"-state-active")}function u(A){E.find("div.fc-button-"+A).addClass(I+"-state-disabled")}function y(A){E.find("div.fc-button-"+A).removeClass(I+"-state-disabled")}var F=this;
F.render=d;F.destroy=h;F.updateTitle=t;F.activateButton=j;F.deactivateButton=n;F.disableButton=u;F.enableButton=y;var E=m([]),I}function Gb(a,b){function d(e){b.indexOf(e)<0&&b.push(e)}function h(e){d(e);y(e,v)}function i(){o=b=[];b=[].concat(b);v()}function t(e){var H=[];b=m.grep(b,function(N){if(typeof N==="object"&&e!==N)H=H.concat(N);return N!=e});o=m.grep(o,function(N){return N.source!=e});b=H.concat(b);v()}function j(e){o=[];n(b,e)}function n(e,H){function N(ea,ba){if(l==D&&L>=Z.visStart&&k<=
Z.visEnd){if(m.inArray(ea,b)!=-1){for(var la=0;la<ba.length;la++){Y(ba[la]);ba[la].source=ea}o=o.concat(ba)}--s||H&&H(o)}}var l=++D,s=e.length,Z=O();L=z(Z.visStart);k=z(Z.visEnd);for(var V=0;V<e.length;V++)u(e[V],N)}function u(e,H){function N(Z){H(e,Z)}function l(Z){N(Z);S()}if(typeof e=="string"){var s={};s[a.startParam]=Math.round(L.getTime()/1E3);s[a.endParam]=Math.round(k.getTime()/1E3);s.browserTimezone=L.getTimezoneOffset();if(a.cacheParam)s[a.cacheParam]=(new Date).getTime();U();m.ajax({url:e,
global:false,type:a.requestMethod||"GET",dataType:"json",data:s,cache:a.cacheParam||false,success:l})}else if(m.isFunction(e)){U();e(z(L),z(k),l)}else e&&N(e)}function y(e,H){n([e],H)}function F(){j(v)}function E(){var e=O();return!L||e.visStart<L||e.visEnd>k}function I(e){var H,N=o.length,l,s=O().defaultEventEnd,Z=e.start-e._start,V=e.end?e.end-(e._end||s(e)):0;for(H=0;H<N;H++){l=o[H];if(l._id==e._id&&l!=e){l.start=new Date(+l.start+Z);l.end=e.end?l.end?new Date(+l.end+V):new Date(+s(l)+V):null;
l.title=e.title;l.url=e.url;l.allDay=e.allDay;l.className=e.className;l.editable=e.editable;l.resizable=e.resizable;l.color=e.color;l.bgColor=e.bgColor;l.borderColor=e.borderColor;Y(l)}}Y(e);v()}function A(e,H){Y(e);if(!e.source){if(H)(e.source=b[0]).push(e);o.push(e)}v()}function P(e){if(e){if(!m.isFunction(e)){var H=e+"";e=function(l){return l._id==H}}o=m.grep(o,e,true);for(N=0;N<b.length;N++)if(typeof b[N]=="object")b[N]=m.grep(b[N],e,true)}else{o=[];for(var N=0;N<b.length;N++)if(typeof b[N]==
"object")b[N]=[]}v()}function ia(e){if(m.isFunction(e))return m.grep(o,e);else if(e){e+="";return m.grep(o,function(H){return H._id==e})}return o}function U(){K++||$("loading",null,true)}function S(){--K||$("loading",null,false)}function Y(e){e._id=e._id||(e.id===aa?"_fc"+Hb++:e.id+"");if(e.date){if(!e.start)e.start=e.date;delete e.date}e._start=z(e.start=ab(e.start,a.ignoreTimezone));e.end=ab(e.end,a.ignoreTimezone);if(e.end&&e.end<=e.start)e.end=null;e._end=e.end?z(e.end):null;if(e.allDay===aa)e.allDay=
a.allDayDefault;if(e.className){if(typeof e.className=="string")e.className=e.className.split(/\s+/)}else e.className=[]}var W=this;W.fetchEvents=j;W.refetchEvents=F;W.isFetchNeeded=E;W.addEventSource=h;W.addEventSourceFast=d;W.clearEventSources=i;W.removeEventSource=t;W.updateEvent=I;W.renderEvent=A;W.removeEvents=P;W.clientEvents=ia;W.normalizeEvent=Y;var O=W.getView,$=W.trigger,v=W.rerenderEvents,D=0,L,k,o=[],K=0;b.unshift([])}function Ib(a,b){function d(n,u){if(u){Xa(n,u);n.setDate(1)}n=z(n,true);
n.setDate(1);u=Xa(z(n),1);var y=z(n),F=z(u),E=i("firstDay"),I=i("weekends")?0:1;if(I){wa(y);wa(F,-1,true)}M(y,-((y.getDay()-Math.max(E,I)+7)%7));M(F,(7-F.getDay()+Math.max(E,I))%7);E=Math.round((F-y)/(mb*7));if(i("weekMode")=="fixed"){M(F,(6-E)*7);E=6}h.title=j(n,i("titleFormat"));h.start=n;h.end=u;h.visStart=y;h.visEnd=F;t(E,I?5:7,true)}var h=this;h.render=d;bb.call(h,a,b,"month");var i=h.opt,t=h.renderBasic,j=b.formatDate}function Jb(a,b){function d(n,u){u&&M(n,u*7);n=M(z(n),-((n.getDay()-i("firstDay")+
7)%7));u=M(z(n),7);var y=z(n),F=z(u),E=i("weekends");if(!E){wa(y);wa(F,-1,true)}h.title=j(y,M(z(F),-1),i("titleFormat"));h.start=n;h.end=u;h.visStart=y;h.visEnd=F;t(1,E?7:5,false)}var h=this;h.render=d;bb.call(h,a,b,"basicWeek");var i=h.opt,t=h.renderBasic,j=b.formatDates}function Kb(a,b){function d(n,u){if(u){M(n,u);i("weekends")||wa(n,u<0?-1:1)}h.title=j(n,i("titleFormat"));h.start=h.visStart=z(n,true);h.end=h.visEnd=M(z(h.start),1);t(1,1,false)}var h=this;h.render=d;bb.call(h,a,b,"basicDay");var i=
h.opt,t=h.renderBasic,j=b.formatDate}function bb(a,b,d){function h(c,g,p){ea=c;ba=g;if(N=D("isRTL")){l=-1;s=ba-1}else{l=1;s=0}Z=D("firstDay");V=D("weekends")?0:1;var w=D("theme")?"ui":"fc",f=D("columnFormat"),q=v.start.getMonth(),G=La(new Date),R,Q=z(v.visStart);if(B){k();g=B.find("tr").length;if(ea<g)B.find("tr:gt("+(ea-1)+")").remove();else if(ea>g){c="";for(g=g;g<ea;g++){c+="<tr class='fc-week"+g+"'>";for(R=0;R<ba;R++){c+="<td class='fc-"+Fa[Q.getDay()]+" "+w+"-state-default fc-new fc-day"+(g*
ba+R)+(R==s?" fc-leftmost":"")+"'>"+(p?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";M(Q,1);V&&wa(Q)}c+="</tr>"}B.append(c)}j(B.find("td.fc-new").removeClass("fc-new"));Q=z(v.visStart);B.find("td").each(function(){var ka=m(this);if(ea>1)Q.getMonth()==q?ka.removeClass("fc-other-month"):ka.addClass("fc-other-month");if(+Q==+G)ka.removeClass("fc-not-today fc-before-today").addClass(w+"-state-highlight fc-today");else+Q<+G?
ka.addClass("fc-not-today fc-before-today").removeClass(w+"-state-highlight fc-today"):ka.addClass("fc-not-today").removeClass(w+"-state-highlight fc-today fc-before-today");ka.find("div.fc-day-number").text(Q.getDate());M(Q,1);V&&wa(Q)});if(ea==1){Q=z(v.visStart);va.find("th").each(function(ka,ha){m(ha).text(H(Q,f));ha.className=ha.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[Q.getDay()]);M(Q,1);V&&wa(Q)});Q=z(v.visStart);B.find("td").each(function(ka,ha){ha.className=ha.className.replace(/^fc-\w+(?= )/,
"fc-"+Fa[Q.getDay()]);M(Q,1);V&&wa(Q)})}}else{var ca=m("<table/>").appendTo(a);c="<thead><tr>";for(g=0;g<ba;g++){c+="<th class='fc-"+Fa[Q.getDay()]+" "+w+"-state-default"+(g==s?" fc-leftmost":"")+"'>"+H(Q,f)+"</th>";M(Q,1);V&&wa(Q)}va=m(c+"</tr></thead>").appendTo(ca);c="<tbody>";Q=z(v.visStart);for(g=0;g<ea;g++){c+="<tr class='fc-week"+g+"'>";for(R=0;R<ba;R++){c+="<td class='fc-"+Fa[Q.getDay()]+" "+w+"-state-default fc-day"+(g*ba+R)+(R==s?" fc-leftmost":"")+(ea>1&&Q.getMonth()!=q?" fc-other-month":
"")+(+Q==+G?" fc-today "+w+"-state-highlight":+Q<+G?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(p?"<div class='fc-day-number'>"+Q.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";M(Q,1);V&&wa(Q)}c+="</tr>"}B=m(c+"</tbody>").appendTo(ca);j(B.find("td"));fa=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function i(c){na=c;c=B.find("tr td:first-child");var g=na-va.outerHeight(),p;if(D("weekMode")=="variable")p=
g=Math.floor(g/(ea==1?2:6));else{p=Math.floor(g/ea);g=g-p*(ea-1)}if(cb===aa){var w=B.find("tr:first").find("td:first");Ia(w,p);cb=p!=w.outerHeight()}if(cb){c.slice(0,-1).height(p);c.slice(-1).height(g)}else{Ia(c.slice(0,-1),p);Ia(c.slice(-1),g)}}function t(c){xa=c;ua.clear();la=Math.floor(xa/ba);Aa(va.find("th").slice(0,-1),la)}function j(c){c.click(n).mousedown(e)}function n(c){if(!D("selectable")){var g=parseInt(this.className.match(/fc\-day(\d+)/)[1]);g=M(z(v.visStart),Math.floor(g/ba)*7+g%ba);
L("dayClick",this,g,true,c)}}function u(c,g,p){p&&ga.build();p=z(v.visStart);for(var w=M(z(p),ba),f=0;f<ea;f++){var q=new Date(Math.max(p,c)),G=new Date(Math.min(w,g));if(q<G){var R;if(N){R=Ga(G,p)*l+s+1;q=Ga(q,p)*l+s+1}else{R=Ga(q,p);q=Ga(G,p)}j(y(f,R,f,q-1))}M(p,7);M(w,7)}}function y(c,g,p,w){c=ga.rect(c,g,p,w,a);return o(c,a)}function F(c){return z(c)}function E(c,g){u(c,M(z(g),1),true)}function I(){K()}function A(c,g){ja.start(function(p){K();p&&y(p.row,p.col,p.row,p.col)},g)}function P(c,g,p){var w=
ja.stop();K();if(w){w=W(w);L("drop",c,w,true,g,p)}}function ia(c){return z(c.start)}function U(c){return ua.left(c)}function S(c){return ua.right(c)}function Y(c){return(c-Math.max(Z,V)+ba)%ba}function W(c){return M(z(v.visStart),c.row*7+c.col*l+s)}function O(c){return B.find("tr:eq("+c+")")}function $(){return{left:0,right:xa}}var v=this;v.renderBasic=h;v.setHeight=i;v.setWidth=t;v.renderDayOverlay=u;v.defaultSelectionEnd=F;v.renderSelection=E;v.clearSelection=I;v.dragStart=A;v.dragStop=P;v.defaultEventEnd=
ia;v.getHoverListener=function(){return ja};v.colContentLeft=U;v.colContentRight=S;v.dayOfWeekCol=Y;v.cellDate=W;v.cellIsAllDay=function(){return true};v.allDayTR=O;v.allDayBounds=$;v.getRowCnt=function(){return ea};v.getColCnt=function(){return ba};v.getColWidth=function(){return la};v.getDaySegmentContainer=function(){return fa};nb.call(v,a,b,d);ob.call(v);pb.call(v);Lb.call(v);var D=v.opt,L=v.trigger,k=v.clearEvents,o=v.renderOverlay,K=v.clearOverlays,e=v.daySelectionMousedown,H=b.formatDate,N,
l,s,Z,V,ea,ba,la,xa,na,va,B,fa,ga,ja,ua;$a(a.addClass("fc-grid"));ga=new qb(function(c,g){var p,w,f,q=B.find("tr:first td");if(N)q=m(q.get().reverse());q.each(function(G,R){p=m(R);w=p.offset().left;if(G)f[1]=w;f=[w];g[G]=f});f[1]=w+p.outerWidth();B.find("tr").each(function(G,R){p=m(R);w=p.offset().top;if(G)f[1]=w;f=[w];c[G]=f});f[1]=w+p.outerHeight()});ja=new rb(ga);ua=new sb(function(c){return B.find("td:eq("+c+") div div")})}function Lb(){function a(L){y(D=L);$(h(L))}function b(L){d();$(h(D),L)}
function d(){F();ia().empty()}function h(L){var k=W(),o=O(),K=z(j.visStart);o=M(z(K),o);var e=m.map(L,Ra),H,N,l,s,Z,V,ea=[];for(H=0;H<k;H++){N=db(eb(L,e,K,o));for(l=0;l<N.length;l++){s=N[l];for(Z=0;Z<s.length;Z++){V=s[Z];V.row=H;V.level=l;ea.push(V)}}M(K,7);M(o,7)}return ea}function i(L,k,o){E(L,k);if(L.editable||L.editable===aa&&n("editable")){t(L,k);o.isEnd&&v(L,k)}}function t(L,k){if(!n("disableDragging")&&k.draggable){var o=U(),K;k.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),
start:function(e,H){u("eventDragStart",k,L,e,H);A(L,k);o.start(function(N,l,s,Z){k.draggable("option","revert",!N||!s&&!Z);Y();if(N){K=s*7+Z*(n("isRTL")?-1:1);S(M(z(L.start),K),M(Ra(L),K))}else K=0},e,"drag")},stop:function(e,H){o.stop();Y();u("eventDragStop",k,L,e,H);if(K){k.find("a").removeAttr("href");P(this,L,K,0,L.allDay,e,H)}else{m.browser.msie&&k.css("filter","");I(L,k)}}})}}var j=this;j.renderEvents=a;j.rerenderEvents=b;j.clearEvents=d;j.bindDaySeg=i;tb.call(j);var n=j.opt,u=j.trigger,y=j.reportEvents,
F=j.clearEventData,E=j.eventElementHandlers,I=j.showEvents,A=j.hideEvents,P=j.eventDrop,ia=j.getDaySegmentContainer,U=j.getHoverListener,S=j.renderDayOverlay,Y=j.clearOverlays,W=j.getRowCnt,O=j.getColCnt,$=j.renderDaySegs,v=j.resizableDayEvent,D=[]}function Mb(a,b){function d(n,u){u&&M(n,u*7);n=M(z(n),-((n.getDay()-i("firstDay")+7)%7));u=M(z(n),7);var y=z(n),F=z(u),E=i("weekends");if(!E){wa(y);wa(F,-1,true)}h.title=j(y,M(z(F),-1),i("titleFormat"));h.start=n;h.end=u;h.visStart=y;h.visEnd=F;t(E?7:5)}
var h=this;h.render=d;ub.call(h,a,b,"agendaWeek");var i=h.opt,t=h.renderAgenda,j=b.formatDates}function Nb(a,b){function d(n,u){if(u){M(n,u);i("weekends")||wa(n,u<0?-1:1)}u=z(n,true);var y=M(z(u),1);h.title=j(n,i("titleFormat"));h.start=h.visStart=u;h.end=h.visEnd=y;t(1)}var h=this;h.render=d;ub.call(h,a,b,"agendaDay");var i=h.opt,t=h.renderAgenda,j=b.formatDate}function ub(a,b,d){function h(r){g=r;ca=s("theme")?"ui":"fc";ha=s("weekends")?0:1;ka=s("firstDay");if(sa=s("isRTL")){da=-1;T=g-1}else{da=
1;T=0}pa=fb(s("minTime"));ma=fb(s("maxTime"));r=sa?M(z(l.visEnd),-1):z(l.visStart);var x=z(r),C=La(new Date),J=s("columnFormat");if(fa){V();fa.find("tr:first th").slice(1,-1).each(function(Na,ya){m(ya).text(B(x,J));ya.className=ya.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[x.getDay()]);M(x,da);ha&&wa(x,da)});x=z(r);c.find("td").each(function(Na,ya){ya.className=ya.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[x.getDay()]);if(+x==+C)m(ya).removeClass("fc-not-today fc-before-today").addClass(ca+"-state-highlight fc-today");
else+x<+C?m(ya).addClass("fc-not-today fc-before-today").removeClass(ca+"-state-highlight fc-today"):m(ya).addClass("fc-not-today").removeClass(ca+"-state-highlight fc-today fc-before-today");M(x,da);ha&&wa(x,da)})}else{var X,ra,Ha=s("slotMinutes")%15==0,qa="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(s("allDaySlot")?"":" fc-last")+"'><th class='fc-leftmost "+ca+"-state-default'>&nbsp;</th>";for(X=0;X<g;X++){qa+="<th class='fc-"+
Fa[x.getDay()]+" "+ca+"-state-default'>"+B(x,J)+"</th>";M(x,da);ha&&wa(x,da)}qa+="<th class='"+ca+"-state-default'>&nbsp;</th></tr>";if(s("allDaySlot"))qa+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+ca+"-state-default'>"+s("allDayText")+"</th><td colspan='"+g+"' class='"+ca+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+ca+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+(g+2)+"' class='"+
ca+"-state-default fc-leftmost'><div/></th></tr>";qa+="</table></div>";fa=m(qa).appendTo(a);y(fa.find("td"));vb=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(fa);x=wb();var gb=ta(z(x),ma);ta(x,pa);qa="<table>";for(X=0;x<gb;X++){ra=x.getMinutes();qa+="<tr class='"+(!X?"fc-first":!ra?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+ca+"-state-default'>"+(!Ha||!ra?B(x,s("axisFormat")):"&nbsp;")+"</th><td class='fc-slot"+X+" "+ca+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";
ta(x,s("slotMinutes"));p++}qa+="</table>";ga=m("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(ja=m("<div style='position:relative;overflow:hidden'>").append(ua=m(qa))).appendTo(a);F(ga.find("td"));xb=m("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ja);x=z(r);qa="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(X=0;X<g;X++){qa+="<td class='fc-"+Fa[x.getDay()]+
" "+ca+"-state-default "+(!X?"fc-leftmost ":"")+(+x==+C?ca+"-state-highlight fc-today":+x<+C?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";M(x,da);ha&&wa(x,da)}qa+="</tr></table></div>";c=m(qa).appendTo(a)}}function i(r,x){if(r===aa)r=R;R=r;Ba={};var C=r-Ea(fa);C=Math.min(C,Ea(ua));Ia(ga,C);Ta&&Ia(ga,r-Ea(fa)-1);q=Ea(ga.find("tr:first div"))+1;x&&j()}function t(r){G=r;Ca.clear();Aa(ga,r);ga.css("overflow","auto").width(r);var x=fa.find("tr:first th"),
C=fa.find("tr.fc-all-day th:last"),J=c.find("td"),X=ga[0].clientWidth;Aa(ua,X);X=ga[0].clientWidth;ua.width(X);w=0;var ra=fa.find("tr:lt(2) th:first").add(ga.find("tr:first th"));ra.width(1);ra.each(function(){w=Math.max(w,m(this).outerWidth())});Aa(ra,w);f=Math.floor((X-w)/g);Aa(x.slice(1,-2),f);Aa(J.slice(0,-1),f);if(r!=X){Aa(x.slice(-2,-1),X-w-f*(g-1));x.slice(-1).show();C.show()}else{ga.css("overflow","hidden");x.slice(-2,-1).width("");x.slice(-1).hide();C.hide()}c.css({top:Ea(fa.find("tr")),
left:w,width:X-w,height:R})}function j(){var r=wb(),x=z(r);x.setHours(s("firstHour"));var C=Y(r,x)+1;r=function(){ga.scrollTop(C)};r();setTimeout(r,0)}function n(){Q=ga.scrollTop()}function u(){ga.scrollTop(Q)}function y(r){r.click(E).mousedown(na)}function F(r){r.click(E).mousedown(e)}function E(r){if(!s("selectable")){var x=Math.min(g-1,Math.floor((r.pageX-c.offset().left)/f));x=M(z(l.visStart),x*da+T);var C=this.className.match(/fc-slot(\d+)/);if(C){C=parseInt(C[1])*s("slotMinutes");var J=Math.floor(C/
60);x.setHours(J);x.setMinutes(C%60+pa);Z("dayClick",this,x,false,r)}else Z("dayClick",this,x,true,r)}}function I(r,x,C){C&&oa.build();var J=z(l.visStart);if(sa){C=Ga(x,J)*da+T+1;r=Ga(r,J)*da+T+1}else{C=Ga(r,J);r=Ga(x,J)}C=Math.max(0,C);r=Math.min(g,r);C<r&&y(A(0,C,0,r-1))}function A(r,x,C,J){r=oa.rect(r,x,C,J,fa);return ea(r,fa)}function P(r,x){for(var C=z(l.visStart),J=M(z(C),1),X=0;X<g;X++){var ra=new Date(Math.max(C,r)),Ha=new Date(Math.min(J,x));if(ra<Ha){var qa=X*da+T;qa=oa.rect(0,qa,0,qa,ja);
ra=Y(C,ra);Ha=Y(C,Ha);qa.top=ra;qa.height=Ha-ra;F(ea(qa,ja))}M(C,1);M(J,1)}}function ia(r){return w+Ca.left(r)}function U(r){return w+Ca.right(r)}function S(r){return(r-Math.max(ka,ha)+g)%g*da+T}function Y(r,x){r=z(r,true);if(x<ta(z(r),pa))return 0;if(x>=ta(z(r),ma))return Ea(ja);r=s("slotMinutes");x=x.getHours()*60+x.getMinutes()-pa;var C=Math.floor(x/r),J=Ba[C];if(J===aa)J=Ba[C]=ga.find("tr:eq("+C+") td div")[0].offsetTop;return Math.max(0,Math.round(J-1+q*(x%r/r)))}function W(r){var x=M(z(l.visStart),
r.col*da+T);r=r.row;s("allDaySlot")&&r--;r>=0&&ta(x,pa+r*s("slotMinutes"));return x}function O(r){return s("allDaySlot")&&!r.row}function $(){return{left:w,right:G}}function v(){return fa.find("tr.fc-all-day")}function D(r){var x=z(r.start);if(r.allDay)return x;return ta(x,s("defaultEventMinutes"))}function L(r,x){if(x)return z(r);return ta(z(r),s("slotMinutes"))}function k(r,x,C){if(C)s("allDaySlot")&&I(r,M(z(x),1),true);else o(r,x)}function o(r,x){var C=s("selectHelper");oa.build();if(C){var J=
Ga(r,l.visStart)*da+T;if(J>=0&&J<g){J=oa.rect(0,J,0,J,ja);var X=Y(r,r),ra=Y(r,x);if(ra>X){J.top=X;J.height=ra-X;J.left+=2;J.width-=5;if(m.isFunction(C)){if(r=C(r,x)){J.position="absolute";J.zIndex=8;za=m(r).css(J).appendTo(ja)}}else{za=m(va({title:"",start:r,end:x,className:[],editable:false},J,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));m.browser.msie&&za.find("span.fc-event-bg").hide();za.css("opacity",s("dragOpacity"))}if(za){F(za);ja.append(za);Aa(za,J.width,true);Ia(za,J.height,
true)}}}}else P(r,x)}function K(){ba();if(za){za.remove();za=null}}function e(r){if(s("selectable")){xa(r);var x=this,C;Da.start(function(J,X){K();if(J&&J.col==X.col&&!O(J)){X=W(X);J=W(J);C=[X,ta(z(X),s("slotMinutes")),J,ta(z(J),s("slotMinutes"))].sort(yb);o(C[0],C[3])}else C=null},r);m(document).one("mouseup",function(J){Da.stop();if(C){+C[0]==+C[1]&&Z("dayClick",x,C[0],false,J);la(C[0],C[3],false,J)}})}}function H(r,x){Da.start(function(C){ba();if(C)if(O(C))A(C.row,C.col,C.row,C.col);else{C=W(C);
var J=ta(z(C),s("defaultEventMinutes"));P(C,J)}},x)}function N(r,x,C){var J=Da.stop();ba();J&&Z("drop",r,W(J),O(J),x,C)}var l=this;l.renderAgenda=h;l.setWidth=t;l.setHeight=i;l.beforeHide=n;l.afterShow=u;l.defaultEventEnd=D;l.timePosition=Y;l.dayOfWeekCol=S;l.cellDate=W;l.cellIsAllDay=O;l.allDayTR=v;l.allDayBounds=$;l.getHoverListener=function(){return Da};l.colContentLeft=ia;l.colContentRight=U;l.getDaySegmentContainer=function(){return vb};l.getSlotSegmentContainer=function(){return xb};l.getMinMinute=
function(){return pa};l.getMaxMinute=function(){return ma};l.getBodyContent=function(){return ja};l.getRowCnt=function(){return 1};l.getColCnt=function(){return g};l.getColWidth=function(){return f};l.getSlotHeight=function(){return q};l.defaultSelectionEnd=L;l.renderDayOverlay=I;l.renderSelection=k;l.clearSelection=K;l.dragStart=H;l.dragStop=N;nb.call(l,a,b,d);ob.call(l);pb.call(l);Ob.call(l);var s=l.opt,Z=l.trigger,V=l.clearEvents,ea=l.renderOverlay,ba=l.clearOverlays,la=l.reportSelection,xa=l.unselect,
na=l.daySelectionMousedown,va=l.slotSegHtml,B=b.formatDate,fa,ga,ja,ua,c,g,p=0,w,f,q,G,R,Q,ca,ka,ha,sa,da,T,pa,ma,oa,Da,Ca,Ba={},za,vb,xb;$a(a.addClass("fc-agenda"));oa=new qb(function(r,x){function C(ya){return Math.max(qa,Math.min(gb,ya))}var J,X,ra;c.find("td").each(function(ya,Pb){J=m(Pb);X=J.offset().left;if(ya)ra[1]=X;ra=[X];x[ya]=ra});ra[1]=X+J.outerWidth();if(s("allDaySlot")){J=fa.find("td");X=J.offset().top;r[0]=[X,X+J.outerHeight()]}for(var Ha=ja.offset().top,qa=ga.offset().top,gb=qa+ga.outerHeight(),
Na=0;Na<p;Na++)r.push([C(Ha+q*Na),C(Ha+q*(Na+1))])});Da=new rb(oa);Ca=new sb(function(r){return c.find("td:eq("+r+") div div")})}function Ob(){function a(c,g){S(ua=c);var p,w=c.length,f=[],q=[];for(p=0;p<w;p++)c[p].allDay?f.push(c[p]):q.push(c[p]);if(P("allDaySlot")){H(h(f),g);O()}j(i(q),g)}function b(c){d();a(ua,c)}function d(){Y();$().empty();v().empty()}function h(c){c=db(eb(c,m.map(c,Ra),A.visStart,A.visEnd));var g,p=c.length,w,f,q,G=[];for(g=0;g<p;g++){w=c[g];for(f=0;f<w.length;f++){q=w[f];q.row=
0;q.level=g;G.push(q)}}return G}function i(c){var g=l(),p=k(),w=L(),f=ta(z(A.visStart),p),q=m.map(c,t),G,R,Q,ca,ka,ha,sa=[];for(G=0;G<g;G++){R=db(eb(c,q,f,ta(z(f),w-p)));Qb(R);for(Q=0;Q<R.length;Q++){ca=R[Q];for(ka=0;ka<ca.length;ka++){ha=ca[ka];ha.col=G;ha.level=Q;sa.push(ha)}}M(f,1,true)}return sa}function t(c){return c.end?z(c.end):ta(z(c.start),P("defaultEventMinutes"))}function j(c,g){var p,w=c.length,f,q,G,R,Q,ca,ka,ha,sa,da,T="",pa,ma,oa={},Da={},Ca=v(),Ba;p=l();if(pa=P("isRTL")){ma=-1;Ba=
p-1}else{ma=1;Ba=0}for(p=0;p<w;p++){f=c[p];q=f.event;G="fc-event fc-event-vert ";if(f.isStart)G+="fc-corner-top ";if(f.isEnd)G+="fc-corner-bottom ";R=o(f.start,f.start);Q=o(f.start,f.end);ca=f.col;ka=f.level;ha=f.forward||0;sa=K(ca*ma+Ba);da=e(ca*ma+Ba)-sa;da=Math.min(da-6,da*0.95);ca=ka?da/(ka+ha+1):ha?(da/(ha+1)-6)*2:da;ka=sa+da/(ka+ha+1)*ka*ma+(pa?da-ca:0);f.top=R;f.left=ka;f.outerWidth=ca;f.outerHeight=Q-R;T+=n(q,f,G)}Ca[0].innerHTML=T;pa=Ca.children();for(p=0;p<w;p++){f=c[p];q=f.event;T=m(pa[p]);
ma=ia("eventRender",q,q,T);if(ma===false)T.remove();else{if(ma&&ma!==true){T.remove();T=m(ma).css({position:"absolute",top:f.top,left:f.left}).appendTo(Ca)}f.element=T;if(q._id===g)y(q,T,f);else T[0]._fci=p;ea(q,T)}}zb(Ca,c,y);for(p=0;p<w;p++){f=c[p];if(T=f.element){q=oa[g=f.key=Ab(T[0])];f.vsides=q===aa?(oa[g]=Va(T[0],true)):q;q=Da[g];f.hsides=q===aa?(Da[g]=hb(T[0],true)):q;g=T.find("span.fc-event-title");if(g.length)f.titleTop=g[0].offsetTop}}for(p=0;p<w;p++){f=c[p];if(T=f.element){T[0].style.width=
Math.max(0,f.outerWidth-f.hsides)+"px";oa=Math.max(0,f.outerHeight-f.vsides);T[0].style.height=oa+"px";q=f.event;if(f.titleTop!==aa&&oa-f.titleTop<10){T.find("span.fc-event-time").text(ga(q.start,P("timeFormat"))+" - "+q.title);T.find("span.fc-event-title").remove()}ia("eventAfterRender",q,q,T)}}}function n(c,g,p){var w="";if(c.color)w+="color:"+c.color+";";if(c.bgColor)w+="background-color:"+c.bgColor+";";if(c.borderColor)w+="border-color:"+c.borderColor+";";return"<div class='"+p+c.className.join(" ")+
"' style='position:absolute;z-index:8;top:"+g.top+"px;left:"+g.left+"px'><a"+(c.url?" href='"+Oa(c.url)+"'":"")+(w?" style='"+w+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Oa(ja(c.start,c.end,P("timeFormat")))+"</span><span class='fc-event-title'>"+Oa(c.title)+"</span></a>"+((c.resizable||c.resizable===aa)&&(c.editable||c.editable===aa&&P("editable"))&&!P("disableResizing")&&m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":"")+"</div>"}function u(c,
g,p){W(c,g);if(c.editable||c.editable===aa&&P("editable")){F(c,g,p.isStart);p.isEnd&&N(c,g,s())}}function y(c,g,p){W(c,g);if(c.editable||c.editable===aa&&P("editable")){var w=g.find("span.fc-event-time");E(c,g,w);p.isEnd&&I(c,g,w)}}function F(c,g,p){if(!P("disableDragging")&&g.draggable){var w,f=true,q,G=P("isRTL")?-1:1,R=D(),Q=s(),ca=Z(),ka=k();g.draggable({zIndex:9,opacity:P("dragOpacity","month"),revertDuration:P("dragRevertDuration"),start:function(sa,da){ia("eventDragStart",g,c,sa,da);la(c,g);
w=Qa(g);R.start(function(T,pa,ma,oa){g.draggable("option","revert",!T||!ma&&!oa);B();if(T){q=oa*G;if(T.row){if(p&&f){Aa(g,Q-10);Ia(g,ca*Math.round((c.end?(c.end-c.start)/Rb:P("defaultEventMinutes"))/P("slotMinutes")));g.draggable("option","grid",[Q,1]);f=false}}else{va(M(z(c.start),q),M(Ra(c),q));ha()}}},sa,"drag")},stop:function(sa,da){var T=R.stop();B();ia("eventDragStop",g,c,sa,da);if(T&&(!f||q)){g.find("a").removeAttr("href");T=0;f||(T=Math.round((g.offset().top-V().offset().top)/ca)*P("slotMinutes")+
ka-(c.start.getHours()*60+c.start.getMinutes()));xa(this,c,q,T,f,sa,da)}else{ha();m.browser.msie&&g.css("filter","");ba(c,g)}}});function ha(){if(!f){Aa(g,w);g.height("");g.draggable("option","grid",null);f=true}}}}function E(c,g,p){if(!P("disableDragging")&&g.draggable){var w,f=false,q,G,R,Q=P("isRTL")?-1:1,ca=D(),ka=l(),ha=s(),sa=Z();g.draggable({zIndex:9,scroll:false,grid:[ha,sa],axis:ka==1?"y":false,opacity:P("dragOpacity"),revertDuration:P("dragRevertDuration"),start:function(pa,ma){ia("eventDragStart",
g,c,pa,ma);la(c,g);m.browser.msie&&g.find("span.fc-event-bg").hide();w=g.position();G=R=0;ca.start(function(oa,Da,Ca,Ba){g.draggable("option","revert",!oa);B();if(oa){q=Ba*Q;if(P("allDaySlot")&&!oa.row){if(!f){f=true;p.hide();g.draggable("option","grid",null)}va(M(z(c.start),q),M(Ra(c),q))}else T()}},pa,"drag")},drag:function(pa,ma){G=Math.round((ma.position.top-w.top)/sa)*P("slotMinutes");if(G!=R){f||da(G);R=G}},stop:function(pa,ma){var oa=ca.stop();B();ia("eventDragStop",g,c,pa,ma);if(oa&&(q||G||
f))xa(this,c,q,f?0:G,f,pa,ma);else{T();g.css(w);da(0);m.browser.msie&&g.css("filter","").find("span.fc-event-bg").css("display","");ba(c,g)}}});function da(pa){var ma=ta(z(c.start),pa),oa;if(c.end)oa=ta(z(c.end),pa);p.text(ja(ma,oa,P("timeFormat")))}function T(){if(f){p.css("display","");g.draggable("option","grid",[ha,sa]);f=false}}}}function I(c,g,p){if(!P("disableResizing")&&g.resizable){var w,f,q=Z();g.resizable({handles:{s:"div.ui-resizable-s"},grid:q,start:function(G,R){w=f=0;la(c,g);m.browser.msie&&
m.browser.version=="6.0"&&g.css("overflow","hidden");g.css("z-index",9);ia("eventResizeStart",this,c,G,R)},resize:function(G,R){w=Math.round((Math.max(q,Ea(g))-R.originalSize.height)/q);if(w!=f){p.text(ja(c.start,!w&&!c.end?null:ta(U(c),P("slotMinutes")*w),P("timeFormat")));f=w}},stop:function(G,R){ia("eventResizeStop",this,c,G,R);if(w)na(this,c,0,P("slotMinutes")*w,G,R);else{g.css("z-index",8);ba(c,g)}}})}}var A=this;A.renderEvents=a;A.rerenderEvents=b;A.clearEvents=d;A.slotSegHtml=n;A.bindDaySeg=
u;tb.call(A);var P=A.opt,ia=A.trigger,U=A.eventEnd,S=A.reportEvents,Y=A.clearEventData,W=A.eventElementHandlers,O=A.setHeight,$=A.getDaySegmentContainer,v=A.getSlotSegmentContainer,D=A.getHoverListener,L=A.getMaxMinute,k=A.getMinMinute,o=A.timePosition,K=A.colContentLeft,e=A.colContentRight,H=A.renderDaySegs,N=A.resizableDayEvent,l=A.getColCnt,s=A.getColWidth,Z=A.getSlotHeight,V=A.getBodyContent,ea=A.reportEventElement,ba=A.showEvents,la=A.hideEvents,xa=A.eventDrop,na=A.eventResize,va=A.renderDayOverlay,
B=A.clearOverlays,fa=A.calendar,ga=fa.formatDate,ja=fa.formatDates,ua=[]}function Qb(a){var b,d,h,i,t,j;for(b=a.length-1;b>0;b--){i=a[b];for(d=0;d<i.length;d++){t=i[d];for(h=0;h<a[b-1].length;h++){j=a[b-1][h];if(Bb(t,j))j.forward=Math.max(j.forward||0,(t.forward||0)+1)}}}}function nb(a,b,d){function h(k,o){k=L[k];if(typeof k=="object")return Za(k,o||d);return k}function i(k,o){return b.trigger.apply(b,[k,o||S].concat(Array.prototype.slice.call(arguments,2),[S]))}function t(k){$={};var o,K=k.length,
e;for(o=0;o<K;o++){e=k[o];if($[e._id])$[e._id].push(e);else $[e._id]=[e]}}function j(){v=[];D={}}function n(k){return k.end?z(k.end):Y(k)}function u(k,o){v.push(o);if(D[k._id])D[k._id].push(o);else D[k._id]=[o]}function y(k,o){o.click(function(K){if(!o.hasClass("ui-draggable-dragging")&&!o.hasClass("ui-resizable-resizing"))return i("eventClick",this,k,K)}).hover(function(K){i("eventMouseover",this,k,K)},function(K){i("eventMouseout",this,k,K)})}function F(k,o){I(k,o,"show")}function E(k,o){I(k,o,
"hide")}function I(k,o,K){k=D[k._id];var e,H=k.length;for(e=0;e<H;e++)k[e][0]!=o[0]&&k[e][K]()}function A(k,o,K,e,H,N,l){var s=o.allDay,Z=o._id;ia($[Z],K,e,H);i("eventDrop",k,o,K,e,H,function(){ia($[Z],-K,-e,s);O()},N,l);S.eventsChanged=true;O(Z)}function P(k,o,K,e,H,N){var l=o._id;U($[l],K,e);i("eventResize",k,o,K,e,function(){U($[l],-K,-e);O()},H,N);S.eventsChanged=true;O(l)}function ia(k,o,K,e){K=K||0;for(var H,N=k.length,l=0;l<N;l++){H=k[l];if(e!==aa)H.allDay=e;ta(M(H.start,o,true),K);if(H.end)H.end=
ta(M(H.end,o,true),K);W(H,L)}}function U(k,o,K){K=K||0;for(var e,H=k.length,N=0;N<H;N++){e=k[N];e.end=ta(M(n(e),o,true),K);W(e,L)}}var S=this;S.element=a;S.calendar=b;S.name=d;S.opt=h;S.trigger=i;S.reportEvents=t;S.clearEventData=j;S.eventEnd=n;S.reportEventElement=u;S.eventElementHandlers=y;S.showEvents=F;S.hideEvents=E;S.eventDrop=A;S.eventResize=P;var Y=S.defaultEventEnd,W=b.normalizeEvent,O=b.rerenderEvents,$={},v=[],D={},L=b.options}function tb(){function a(O,$){var v=h("isRTL"),D,L=O.length,
k,o,K,e,H,N="",l,s={},Z={},V,ea=[],ba=[];D=A();l=D.left;var la=D.right,xa=y();F();var na=S();for(D=0;D<L;D++){k=O[D];o=k.event;K="fc-event fc-event-hori ";if(v){if(k.isStart)K+="fc-corner-right ";if(k.isEnd)K+="fc-corner-left ";e=k.isEnd?P(U(k.end.getDay()-1)):l;H=k.isStart?ia(U(k.start.getDay())):la}else{if(k.isStart)K+="fc-corner-left ";if(k.isEnd)K+="fc-corner-right ";e=k.isStart?P(U(k.start.getDay())):l;H=k.isEnd?ia(U(k.end.getDay()-1)):la}var va="";if(o.color)va="color:"+o.color+";";if(o.bgColor)va+=
"background-color:"+o.bgColor+";";if(o.borderColor)va+="border-color:"+o.borderColor+";";N+="<div class='"+K+o.className.join(" ")+"' style='position:absolute;z-index:8;left:"+e+"px'><a"+(o.url?" href='"+Oa(o.url)+"'":"")+(va?" style='"+va+"'":"")+">"+(!o.allDay&&k.isStart?"<span class='fc-event-time'>"+Oa(W(o.start,o.end,h("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Oa(o.title)+"</span></a>"+((o.resizable||o.resizable===aa)&&(o.editable||o.editable===aa&&h("editable"))&&!h("disableResizing")&&
m.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(v?"w":"e")+"'></div>":"")+"</div>";k.left=e;k.outerWidth=H-e}na[0].innerHTML=N;N=na.children();for(D=0;D<L;D++){k=O[D];v=m(N[D]);o=k.event;l=i("eventRender",o,o,v);if(l===false)v.remove();else{if(l&&l!==true){v.remove();v=m(l).css({position:"absolute",left:k.left}).appendTo(na)}k.element=v;if(o._id===$)Y(o,v,k);else v[0]._fci=D;t(o,v)}}zb(na,O,Y);for(D=0;D<L;D++){k=O[D];if(v=k.element){o=s[$=k.key=Ab(v[0])];k.hsides=o===aa?(s[$]=hb(v[0],
true)):o}}for(D=0;D<L;D++){k=O[D];if(v=k.element)v[0].style.width=Math.max(0,k.outerWidth-k.hsides)+"px"}for(D=0;D<L;D++){k=O[D];if(v=k.element){o=Z[$=k.key];k.outerHeight=v[0].offsetHeight+(o===aa?(Z[$]=Cb(v[0])):o)}}var B,fa,ga={0:0},ja={0:0};for(V=0;V<xa;V++){for(fa=s=0;fa<7;fa++){B=0;jQuery.each(O,function(ua,c){if(c.row==V&&c.start.getDay()==fa){B=Math.max(B,c.level);ga[c.level]=c.outerHeight||0}});for(D=0;D<B;D++)ja[D+1]=ja[D]+ga[D];jQuery.each(O,function(ua,c){if(c.row==V&&c.start.getDay()==
fa)c.top=ja[c.level]});s=Math.max(s,ja[B]+ga[B])}ea[V]=I(V).find("td:first div.fc-day-content > div");Ia(ea[V],s)}for(V=0;V<xa;V++)ba[V]=ea[V][0].offsetTop;for(D=0;D<L;D++){k=O[D];if(v=k.element){v[0].style.top=ba[k.row]+k.top+"px";o=k.event;i("eventAfterRender",o,o,v)}}}function b(O,$){if(!h("disableResizing")&&$.resizable){var v=E();$.resizable({handles:h("isRTL")?{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},grid:v,minWidth:v/2,containment:d.element.parent().parent(),start:function(D,L){$.css("z-index",
9);n(O,$);i("eventResizeStart",this,O,D,L)},stop:function(D,L){i("eventResizeStop",this,O,D,L);var k=Math.round((Qa($)-L.originalSize.width)/v);if(k)u(this,O,k,0,D,L);else{$.css("z-index",8);j(O,$)}}})}}var d=this;d.renderDaySegs=a;d.resizableDayEvent=b;var h=d.opt,i=d.trigger,t=d.reportEventElement,j=d.showEvents,n=d.hideEvents,u=d.eventResize,y=d.getRowCnt,F=d.getColCnt,E=d.getColWidth,I=d.allDayTR,A=d.allDayBounds,P=d.colContentLeft,ia=d.colContentRight,U=d.dayOfWeekCol,S=d.getDaySegmentContainer,
Y=d.bindDaySeg,W=d.calendar.formatDates}function pb(){function a(E,I,A){b();I||(I=n(E,A));u(E,I,A);d(E,I,A)}function b(E){if(F){F=false;y();j("unselect",null,E)}}function d(E,I,A,P){F=true;j("select",null,E,I,A,P)}function h(E){var I=i.cellDate,A=i.cellIsAllDay,P=i.getHoverListener();if(t("selectable")){b(E);var ia=this,U;P.start(function(S,Y){y();if(S&&A(S)){U=[I(Y),I(S)].sort(yb);u(U[0],U[1],true)}else U=null},E);m(document).one("mouseup",function(S){P.stop();if(U){+U[0]==+U[1]&&j("dayClick",ia,
U[0],true,S);d(U[0],U[1],true,S)}})}}var i=this;i.select=a;i.unselect=b;i.reportSelection=d;i.daySelectionMousedown=h;var t=i.opt,j=i.trigger,n=i.defaultSelectionEnd,u=i.renderSelection,y=i.clearSelection,F=false;t("selectable")&&t("unselectAuto")&&m(document).mousedown(function(E){var I=t("unselectCancel");if(I)if(m(E.target).parents(I).length)return;b(E)})}function ob(){function a(t,j){var n=i.shift();n||(n=m("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));n[0].parentNode!=
j[0]&&n.appendTo(j);h.push(n.css(t).show());return n}function b(){for(var t;t=h.shift();)i.push(t.hide().unbind())}var d=this;d.renderOverlay=a;d.clearOverlays=b;var h=[],i=[]}function qb(a){var b=this,d,h;b.build=function(){d=[];h=[];a(d,h)};b.cell=function(i,t){var j=d.length,n=h.length,u,y=-1,F=-1;for(u=0;u<j;u++)if(t>=d[u][0]&&t<d[u][1]){y=u;break}for(u=0;u<n;u++)if(i>=h[u][0]&&i<h[u][1]){F=u;break}return y>=0&&F>=0?{row:y,col:F}:null};b.rect=function(i,t,j,n,u){u=u.offset();return{top:d[i][0]-
u.top,left:h[t][0]-u.left,width:h[n][1]-h[t][0],height:d[j][1]-d[i][0]}}}function rb(a){function b(n){n=a.cell(n.pageX,n.pageY);if(!n!=!j||n&&(n.row!=j.row||n.col!=j.col)){if(n){t||(t=n);i(n,t,n.row-t.row,n.col-t.col)}else i(n,t);j=n}}var d=this,h,i,t,j;d.start=function(n,u,y){i=n;t=j=null;a.build();b(u);h=y||"mousemove";m(document).bind(h,b)};d.stop=function(){m(document).unbind(h,b);return j}}function sb(a){function b(j){return h[j]=h[j]||a(j)}var d=this,h={},i={},t={};d.left=function(j){return i[j]=
i[j]===aa?b(j).position().left:i[j]};d.right=function(j){return t[j]=t[j]===aa?d.left(j)+Qa(b(j)):t[j]};d.clear=function(){h={};i={};t={}}}function Wa(a,b,d){a.setFullYear(a.getFullYear()+b);d||La(a);return a}function Xa(a,b,d){if(+a){b=a.getMonth()+b;var h=z(a);h.setDate(1);h.setMonth(b);a.setMonth(b);for(d||La(a);a.getMonth()!=h.getMonth();)a.setDate(a.getDate()+(a<h?1:-1))}return a}function M(a,b,d){if(+a){b=a.getDate()+b;var h=z(a);h.setHours(9);h.setDate(b);a.setDate(b);d||La(a);ib(a,h)}return a}
function ib(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Sb)}function ta(a,b){a.setMinutes(a.getMinutes()+b);return a}function La(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function z(a,b){if(b)return La(new Date(+a));return new Date(+a)}function wb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function wa(a,b,d){for(b=b||1;!a.getDay()||d&&a.getDay()==1||!d&&a.getDay()==6;)M(a,b);return a}function Ga(a,b){return Math.round((z(a,
true)-z(b,true))/mb)}function lb(a,b,d,h){if(b!==aa&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(d!==aa&&d!=a.getMonth()){a.setDate(1);a.setMonth(d)}h!==aa&&a.setDate(h)}function ab(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);if(b===aa)b=true;return Db(a,b)||(a?new Date(a):null)}return null}function Db(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);
if(!a)return null;var d=new Date(a[1],0,1);if(b){b=new Date(a[1],0,1,9,0);if(a[3]){d.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){d.setDate(a[5]);b.setDate(a[5])}ib(d,b);a[7]&&d.setHours(a[7]);a[8]&&d.setMinutes(a[8]);a[10]&&d.setSeconds(a[10]);a[12]&&d.setMilliseconds(Number("0."+a[12])*1E3);ib(d,b)}else{b=0;d.setUTCFullYear(a[1]);a[3]&&d.setUTCMonth(a[3]-1);a[5]&&d.setUTCDate(a[5]);a[7]&&d.setUTCHours(a[7]);a[8]&&d.setUTCMinutes(a[8]);a[10]&&d.setUTCSeconds(a[10]);a[12]&&d.setUTCMilliseconds(Number("0."+
a[12])*1E3);if(a[14]){b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1}d=new Date(+d+b*60*1E3)}return d}function fb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}}function Ma(a,b,d){return Ya(a,null,b,d)}function Ya(a,b,d,h){h=h||Sa;var i=a,t=b,j,n=d.length,u,y,F,E="";for(j=0;j<n;j++){u=d.charAt(j);
if(u=="'")for(y=j+1;y<n;y++){if(d.charAt(y)=="'"){if(i){E+=y==j+1?"'":d.substring(j+1,y);j=y}break}}else if(u=="(")for(y=j+1;y<n;y++){if(d.charAt(y)==")"){j=Ma(i,d.substring(j+1,y),h);if(parseInt(j.replace(/\D/,"")))E+=j;j=y;break}}else if(u=="[")for(y=j+1;y<n;y++){if(d.charAt(y)=="]"){u=d.substring(j+1,y);j=Ma(i,u,h);if(j!=Ma(t,u,h))E+=j;j=y;break}}else if(u=="{"){i=b;t=a}else if(u=="}"){i=a;t=b}else{for(y=n;y>j;y--)if(F=Tb[d.substring(j,y)]){if(i)E+=F(i,h);j=y-1;break}if(y==j)if(i)E+=u}}return E}
function Ra(a){return a.end?Ub(a.end,a.allDay):M(z(a.start),1)}function Ub(a,b){a=z(a);return b||a.getHours()||a.getMinutes()?M(a,1):La(a)}function Vb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Bb(a,b){return a.end>b.start&&a.start<b.end}function eb(a,b,d,h){var i=[],t,j=a.length,n,u,y,F,E;for(t=0;t<j;t++){n=a[t];u=n.start;y=b[t];if(y>d&&u<h){if(u<d){u=z(d);F=false}else{u=u;F=
true}if(y>h){y=z(h);E=false}else{y=y;E=true}i.push({event:n,start:u,end:y,isStart:F,isEnd:E,msLength:y-u})}}return i.sort(Vb)}function db(a){var b=[],d,h=a.length,i,t,j,n;for(d=0;d<h;d++){i=a[d];for(t=0;;){j=false;if(b[t])for(n=0;n<b[t].length;n++)if(Bb(b[t][n],i)){j=true;break}if(j)t++;else break}if(b[t])b[t].push(i);else b[t]=[i]}return b}function zb(a,b,d){a.unbind("mouseover").mouseover(function(h){for(var i=h.target,t;i!=this;){t=i;i=i.parentNode}if((i=t._fci)!==aa){t._fci=aa;t=b[i];d(t.event,
t.element,t);m(h.target).trigger(h)}h.stopPropagation()})}function Aa(a,b,d){a.each(function(h,i){i.style.width=Math.max(0,b-hb(i,d))+"px"})}function Ia(a,b,d){a.each(function(h,i){i.style.height=Math.max(0,b-Va(i,d))+"px"})}function hb(a,b){return(parseFloat(m.curCSS(a,"paddingLeft",true))||0)+(parseFloat(m.curCSS(a,"paddingRight",true))||0)+(parseFloat(m.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(m.curCSS(a,"borderRightWidth",true))||0)+(b?Wb(a):0)}function Wb(a){return(parseFloat(m.curCSS(a,
"marginLeft",true))||0)+(parseFloat(m.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(m.curCSS(a,"paddingTop",true))||0)+(parseFloat(m.curCSS(a,"paddingBottom",true))||0)+(parseFloat(m.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(m.curCSS(a,"borderBottomWidth",true))||0)+(b?Cb(a):0)}function Cb(a){return(parseFloat(m.curCSS(a,"marginTop",true))||0)+(parseFloat(m.curCSS(a,"marginBottom",true))||0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+
b+";_height:"+b}function Ea(a){if(Ta)return a.innerHeight();return a.height()}function Qa(a){if(Ta)return a.innerWidth();return a.width()}function kb(){}function yb(a,b){return a-b}function Pa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==aa)return a[b];b=b.split(/(?=[A-Z])/);for(var d=b.length-1,h;d>=0;d--){h=a[b[d].toLowerCase()];if(h!==aa)return h}return a[""]}function Oa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,
"<br />")}function Ab(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function $a(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Ta=false;if(m.ui&&m.browser.msie&&parseInt(m.browser.version,10)>=9){Ta=true;var Xb=m.ui.mouse.prototype._mouseMove;m.ui.mouse.prototype._mouseMove=function(a){a.button=1;Xb.apply(this,[a])}}var Sa={defaultView:"month",aspectRatio:1.35,header:{left:"title",
center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar",
"Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Yb={header:{left:"next,prev today",
center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ja=m.fullCalendar={},Ka=Ja.views={};m.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),d;this.each(function(){var i=m.data(this,"fullCalendar");if(i&&m.isFunction(i[a])){i=i[a].apply(i,b);if(d===aa)d=i;a=="destroy"&&m.removeData(this,
"fullCalendar")}});if(d!==aa)return d;return this}var h=a.eventSources||[];delete a.eventSources;if(a.events){h.push(a.events);delete a.events}a=m.extend(true,{},Sa,a.isRTL||a.isRTL===aa&&Sa.isRTL?Yb:{},a);this.each(function(i,t){i=m(t);t=new Eb(i,a,h);i.data("fullCalendar",t);t.render()});return this};var Hb=1;Ka.month=Ib;Ka.basicWeek=Jb;Ka.basicDay=Kb;var cb;jb({weekMode:"fixed"});Ka.agendaWeek=Mb;Ka.agendaDay=Nb;jb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,
axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ja.addDays=M;Ja.cloneDate=z;Ja.parseDate=ab;Ja.parseISO8601=Db;Ja.parseTime=fb;Ja.formatDate=Ma;Ja.formatDates=Ya;var Fa=["sun","mon","tue","wed","thu","fri","sat"],mb=864E5,Sb=36E5,Rb=6E4,Tb={s:function(a){return a.getSeconds()},ss:function(a){return Pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Pa(a.getHours()%
12||12)},H:function(a){return a.getHours()},HH:function(a){return Pa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Pa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Pa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},
yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ma(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}}})(jQuery);

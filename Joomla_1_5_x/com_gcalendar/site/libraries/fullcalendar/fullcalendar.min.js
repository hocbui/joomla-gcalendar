/*

 FullCalendar v1.4.8-IE9
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Wed Sep 29 18:57:53 2010 +0200

*/
(function(l,Z){function jb(a){l.extend(true,Sa,a)}function Eb(a,b,e){function h(f){if(ma){H();ga();K();I(f)}else i()}function i(){va=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");ma=l("<div class='fc-content "+va+"-widget-content' style='position:relative'/>").prependTo(a);qa=new Fb(u,b);(xa=qa.render())&&a.prepend(xa);y(b.defaultView);l(window).resize(A);t()||r()}function r(){setTimeout(function(){!C.start&&t()&&I()},0)}function j(){l(window).unbind("resize",
A);qa.destroy();ma.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function m(){return X.offsetWidth!==0}function t(){return l("body")[0].offsetWidth!==0}function y(f){if(!C||f!=C.name){g++;Q();var o=C,J;if(o){if(o.eventsChanged){K();o.eventDirty=o.eventsChanged=false}(o.beforeHide||kb)();Ua(ma,Ea(ma));o.element.hide()}else Ua(ma,1);ma.css("overflow","hidden");if(C=ea[f])C.element.show();else C=ea[f]=new Ka[f](J=ua=l("<div class='fc-view fc-view-"+f+"' style='position:absolute'/>").appendTo(ma),
u);o&&qa.deactivateButton(o.name);qa.activateButton(f);I();ma.css("overflow","");o&&Ua(ma,1);J||(C.afterShow||kb)();g--}}function I(f){if(m()){g++;Q();ja===Z&&H();if(!C.start||f||n<C.start||n>=C.end){C.render(n,f||0);L(true);!b.lazyFetching||T()?aa():C.renderEvents(da())}else if(C.sizeDirty||C.eventsDirty||!b.lazyFetching){C.clearEvents();C.sizeDirty&&L();!b.lazyFetching||T()?aa():C.renderEvents(da())}fa=a.outerWidth();C.sizeDirty=false;C.eventsDirty=false;qa.updateTitle(C.title);f=new Date;f>=C.start&&
f<C.end?qa.disableButton("today"):qa.enableButton("today");g--;C.trigger("viewDisplay",X)}}function H(){ja=b.contentHeight?b.contentHeight:b.height?b.height-Va(ma[0])-(xa?Ea(xa):0):Math.round(Qa(ma)/Math.max(b.aspectRatio,0.5))}function L(f){g++;C.setHeight(ja,f);if(ua){ua.css("position","relative");ua=null}C.setWidth(Qa(ma),f);g--}function A(){if(!g)if(C.start){var f=++c;setTimeout(function(){if(f==c&&!g&&m())if(fa!=(fa=a.outerWidth())){g++;P();C.trigger("windowResize",X);g--}},200)}else r()}function P(){ga();
if(m()){H();L();Q();C.rerenderEvents();C.sizeDirty=false}}function ga(){l.each(ea,function(f,o){o.sizeDirty=true})}function U(){K();if(m()){C.clearEvents();C.renderEvents(da());C.eventsDirty=false}}function K(){l.each(ea,function(f,o){o.eventsDirty=true})}function aa(){$(function(f){C.renderEvents(f)})}function ha(f,o,J){C.select(f,o,J===Z?true:J)}function Q(){C&&C.unselect()}function V(){I(-1)}function v(){I(1)}function E(){Wa(n,-1);I()}function F(){Wa(n,1);I()}function k(){n=new Date;I()}function q(f,
o,J){if(f instanceof Date)n=z(f);else lb(n,f,o,J);I()}function d(f,o,J){f!==Z&&Wa(n,f);o!==Z&&Xa(n,o);J!==Z&&O(n,J);I()}function B(){return z(n)}function G(){return C}function M(f,o){if(o===Z)return b[f];if(f=="height"||f=="contentHeight"||f=="aspectRatio"){b[f]=o;P()}}function s(f,o){if(b[f])return b[f].apply(o||X,Array.prototype.slice.call(arguments,2))}var u=this;u.options=b;u.render=h;u.destroy=j;u.changeView=y;u.select=ha;u.unselect=Q;u.rerenderEvents=U;u.prev=V;u.next=v;u.prevYear=E;u.nextYear=
F;u.today=k;u.gotoDate=q;u.incrementDate=d;u.formatDate=function(f,o){return Ma(f,o,b)};u.formatDates=function(f,o,J){return Ya(f,o,J,b)};u.getDate=B;u.getView=G;u.option=M;u.trigger=s;Gb.call(u,b,e);var $=u.fetchEvents,T=u.isFetchNeeded,da=u.clientEvents,X=a[0],qa,xa,ma,va,C,ea={},fa,ja,ua,c=0,g=0,n=new Date;lb(n,b.year,b.month,b.date);var w;b.droppable&&l(document).bind("dragstart",function(f,o){var J=f.target,S=l(J);if(!S.parents(".fc").length){var R=b.dropAccept;if(l.isFunction(R)?R.call(J,S):
S.is(R)){w=J;C.dragStart(w,f,o)}}}).bind("dragstop",function(f,o){if(w){C.dragStop(w,f,o);w=null}})}function Fb(a,b){function e(){L=b.theme?"ui":"fc";var A=b.header;if(A)return H=l("<table class='fc-header'/>").append(l("<tr/>").append(l("<td class='fc-header-left'/>").append(i(A.left))).append(l("<td class='fc-header-center'/>").append(i(A.center))).append(l("<td class='fc-header-right'/>").append(i(A.right))))}function h(){H.remove()}function i(A){if(A){var P=l("<tr/>");l.each(A.split(" "),function(ga){ga>
0&&P.append("<td><span class='fc-header-space'/></td>");var U;l.each(this.split(","),function(K,aa){if(aa=="title"){P.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");U&&U.addClass(L+"-corner-right");U=null}else{var ha;if(a[aa])ha=a[aa];else if(Ka[aa])ha=function(){Q.removeClass(L+"-state-hover");a.changeView(aa)};if(ha){U&&U.addClass(L+"-no-right");var Q;K=b.theme?Za(b.buttonIcons,aa):null;var V=Za(b.buttonText,aa);if(K)Q=l("<div class='fc-button-"+aa+" ui-state-default'><a><span class='ui-icon ui-icon-"+
K+"'/></a></div>");else if(V)Q=l("<div class='fc-button-"+aa+" "+L+"-state-default'><a><span>"+V+"</span></a></div>");if(Q){Q.click(function(){Q.hasClass(L+"-state-disabled")||ha()}).mousedown(function(){Q.not("."+L+"-state-active").not("."+L+"-state-disabled").addClass(L+"-state-down")}).mouseup(function(){Q.removeClass(L+"-state-down")}).hover(function(){Q.not("."+L+"-state-active").not("."+L+"-state-disabled").addClass(L+"-state-hover")},function(){Q.removeClass(L+"-state-hover").removeClass(L+
"-state-down")}).appendTo(l("<td/>").appendTo(P));U?U.addClass(L+"-no-right"):Q.addClass(L+"-corner-left");$a(Q.closest("td"));U=Q}}}});U&&U.addClass(L+"-corner-right")});return l("<table/>").append(P)}}function r(A){H.find("h2.fc-header-title").html(A)}function j(A){H.find("div.fc-button-"+A).addClass(L+"-state-active")}function m(A){H.find("div.fc-button-"+A).removeClass(L+"-state-active")}function t(A){H.find("div.fc-button-"+A).addClass(L+"-state-disabled")}function y(A){H.find("div.fc-button-"+
A).removeClass(L+"-state-disabled")}var I=this;I.render=e;I.destroy=h;I.updateTitle=r;I.activateButton=j;I.deactivateButton=m;I.disableButton=t;I.enableButton=y;var H=l([]),L}function Gb(a,b){function e(d){b.indexOf(d)<0&&b.push(d)}function h(d){e(d);m(d,V)}function i(){F=b=[];b=[].concat(b);V()}function r(d){var B=[];b=l.grep(b,function(G){if(typeof G==="object"&&d!==G)B=B.concat(G);return G!=d});F=l.grep(F,function(G){return G.source!=d});b=B.concat(b);V()}function j(d){var B=ha();F=[];v=z(B.visStart);
E=z(B.visEnd);var G=b.length;B=function(){--G||d&&d(F)};for(var M=0;M<b.length;M++)m(b[M],B)}function m(d,B){ha();aa();var G=function(T,da){if(l.inArray(da,b)!=-1){for(var X=0;X<T.length;X++){U(T[X]);T[X].source=da}F=F.concat(T);B&&B(T)}},M=function(T,da,X){if(X&&X.src&&q[X.src]){q[X.src]=0;G(T,X.src)}else if(!X){G(T,d);ga()}},s=function(T){if(q[d]>1)return false;T.src=d;P()},u=function(T){if(T.src)q[T.src]=0;ga()};if(typeof d=="string"){q[d]=1+(q[d]||0);var $={};$[a.startParam]=Math.round(v.getTime()/
1E3);$[a.endParam]=Math.round(E.getTime()/1E3);$.browserTimezone=v.getTimezoneOffset();if(a.cacheParam)$[a.cacheParam]=(new Date).getTime();l.ajax({url:d,global:false,type:a.requestMethod||"GET",dataType:"json",data:$,cache:a.cacheParam||false,success:M,beforeSend:s,complete:u})}else if(l.isFunction(d)){P();d(z(v),z(E),M)}else d&&G(d,d)}function t(){j(V)}function y(){var d=ha();return!v||d.visStart<v||d.visEnd>E}function I(d){var B,G=F.length,M,s=ha().defaultEventEnd,u=d.start-d._start,$=d.end?d.end-
(d._end||s(d)):0;for(B=0;B<G;B++){M=F[B];if(M._id==d._id&&M!=d){M.start=new Date(+M.start+u);M.end=d.end?M.end?new Date(+M.end+$):new Date(+s(M)+$):null;M.title=d.title;M.url=d.url;M.allDay=d.allDay;M.className=d.className;M.editable=d.editable;M.resizable=d.resizable;M.color=d.color;M.bgColor=d.bgColor;M.borderColor=d.borderColor;U(M)}}U(d);V()}function H(d,B){U(d);if(!d.source){if(B)(d.source=b[0]).push(d);F.push(d)}V()}function L(d){if(d){if(!l.isFunction(d)){var B=d+"";d=function(M){return M._id==
B}}F=l.grep(F,d,true);for(G=0;G<b.length;G++)if(typeof b[G]=="object")b[G]=l.grep(b[G],d,true)}else{F=[];for(var G=0;G<b.length;G++)if(typeof b[G]=="object")b[G]=[]}V()}function A(d){if(l.isFunction(d))return l.grep(F,d);else if(d){d+="";return l.grep(F,function(B){return B._id==d})}return F}function P(){k++||Q("loading",null,true)}function ga(){--k||Q("loading",null,false)}function U(d){d._id=d._id||(d.id===Z?"_fc"+Hb++:d.id+"");if(d.date){if(!d.start)d.start=d.date;delete d.date}d._start=z(d.start=
ab(d.start,a.ignoreTimezone));d.end=ab(d.end,a.ignoreTimezone);if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?z(d.end):null;if(d.allDay===Z)d.allDay=a.allDayDefault;if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=[]}var K=this;K.fetchEvents=j;K.refetchEvents=t;K.isFetchNeeded=y;K.addEventSource=h;K.addEventSourceFast=e;K.clearEventSources=i;K.removeEventSource=r;K.updateEvent=I;K.renderEvent=H;K.removeEvents=L;K.clientEvents=A;K.normalizeEvent=
U;var aa=K.getDate,ha=K.getView,Q=K.trigger,V=K.rerenderEvents,v,E,F=[],k=0,q={};b.unshift([])}function Ib(a,b){function e(m,t){if(t){Xa(m,t);m.setDate(1)}m=z(m,true);m.setDate(1);t=Xa(z(m),1);var y=z(m),I=z(t),H=i("firstDay"),L=i("weekends")?0:1;if(L){wa(y);wa(I,-1,true)}O(y,-((y.getDay()-Math.max(H,L)+7)%7));O(I,(7-I.getDay()+Math.max(H,L))%7);H=Math.round((I-y)/(mb*7));if(i("weekMode")=="fixed"){O(I,(6-H)*7);H=6}h.title=j(m,i("titleFormat"));h.start=m;h.end=t;h.visStart=y;h.visEnd=I;r(H,L?5:7,
true)}var h=this;h.render=e;bb.call(h,a,b,"month");var i=h.opt,r=h.renderBasic,j=b.formatDate}function Jb(a,b){function e(m,t){t&&O(m,t*7);m=O(z(m),-((m.getDay()-i("firstDay")+7)%7));t=O(z(m),7);var y=z(m),I=z(t),H=i("weekends");if(!H){wa(y);wa(I,-1,true)}h.title=j(y,O(z(I),-1),i("titleFormat"));h.start=m;h.end=t;h.visStart=y;h.visEnd=I;r(1,H?7:5,false)}var h=this;h.render=e;bb.call(h,a,b,"basicWeek");var i=h.opt,r=h.renderBasic,j=b.formatDates}function Kb(a,b){function e(m,t){if(t){O(m,t);i("weekends")||
wa(m,t<0?-1:1)}h.title=j(m,i("titleFormat"));h.start=h.visStart=z(m,true);h.end=h.visEnd=O(z(h.start),1);r(1,1,false)}var h=this;h.render=e;bb.call(h,a,b,"basicDay");var i=h.opt,r=h.renderBasic,j=b.formatDate}function bb(a,b,e){function h(c,g,n){da=c;X=g;if(M=E("isRTL")){s=-1;u=X-1}else{s=1;u=0}$=E("firstDay");T=E("weekends")?0:1;var w=E("theme")?"ui":"fc",f=E("columnFormat"),o=v.start.getMonth(),J=La(new Date),S,R=z(v.visStart);if(C){k();g=C.find("tr").length;if(da<g)C.find("tr:gt("+(da-1)+")").remove();
else if(da>g){c="";for(g=g;g<da;g++){c+="<tr class='fc-week"+g+"'>";for(S=0;S<X;S++){c+="<td class='fc-"+Fa[R.getDay()]+" "+w+"-state-default fc-new fc-day"+(g*X+S)+(S==u?" fc-leftmost":"")+"'>"+(n?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";O(R,1);T&&wa(R)}c+="</tr>"}C.append(c)}j(C.find("td.fc-new").removeClass("fc-new"));R=z(v.visStart);C.find("td").each(function(){var ka=l(this);if(da>1)R.getMonth()==o?ka.removeClass("fc-other-month"):
ka.addClass("fc-other-month");if(+R==+J)ka.removeClass("fc-not-today fc-before-today").addClass(w+"-state-highlight fc-today");else+R<+J?ka.addClass("fc-not-today fc-before-today").removeClass(w+"-state-highlight fc-today"):ka.addClass("fc-not-today").removeClass(w+"-state-highlight fc-today fc-before-today");ka.find("div.fc-day-number").text(R.getDate());O(R,1);T&&wa(R)});if(da==1){R=z(v.visStart);va.find("th").each(function(ka,ia){l(ia).text(G(R,f));ia.className=ia.className.replace(/^fc-\w+(?= )/,
"fc-"+Fa[R.getDay()]);O(R,1);T&&wa(R)});R=z(v.visStart);C.find("td").each(function(ka,ia){ia.className=ia.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[R.getDay()]);O(R,1);T&&wa(R)})}}else{var ba=l("<table/>").appendTo(a);c="<thead><tr>";for(g=0;g<X;g++){c+="<th class='fc-"+Fa[R.getDay()]+" "+w+"-state-default"+(g==u?" fc-leftmost":"")+"'>"+G(R,f)+"</th>";O(R,1);T&&wa(R)}va=l(c+"</tr></thead>").appendTo(ba);c="<tbody>";R=z(v.visStart);for(g=0;g<da;g++){c+="<tr class='fc-week"+g+"'>";for(S=0;S<X;S++){c+=
"<td class='fc-"+Fa[R.getDay()]+" "+w+"-state-default fc-day"+(g*X+S)+(S==u?" fc-leftmost":"")+(da>1&&R.getMonth()!=o?" fc-other-month":"")+(+R==+J?" fc-today "+w+"-state-highlight":+R<+J?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(n?"<div class='fc-day-number'>"+R.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";O(R,1);T&&wa(R)}c+="</tr>"}C=l(c+"</tbody>").appendTo(ba);j(C.find("td"));ea=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}
function i(c){ma=c;c=C.find("tr td:first-child");var g=ma-va.outerHeight(),n;if(E("weekMode")=="variable")n=g=Math.floor(g/(da==1?2:6));else{n=Math.floor(g/da);g=g-n*(da-1)}if(cb===Z){var w=C.find("tr:first").find("td:first");Ia(w,n);cb=n!=w.outerHeight()}if(cb){c.slice(0,-1).height(n);c.slice(-1).height(g)}else{Ia(c.slice(0,-1),n);Ia(c.slice(-1),g)}}function r(c){xa=c;ua.clear();qa=Math.floor(xa/X);Aa(va.find("th").slice(0,-1),qa)}function j(c){c.click(m).mousedown(B)}function m(c){if(!E("selectable")){var g=
parseInt(this.className.match(/fc\-day(\d+)/)[1]);g=O(z(v.visStart),Math.floor(g/X)*7+g%X);F("dayClick",this,g,true,c)}}function t(c,g,n){n&&fa.build();n=z(v.visStart);for(var w=O(z(n),X),f=0;f<da;f++){var o=new Date(Math.max(n,c)),J=new Date(Math.min(w,g));if(o<J){var S;if(M){S=Ga(J,n)*s+u+1;o=Ga(o,n)*s+u+1}else{S=Ga(o,n);o=Ga(J,n)}j(y(f,S,f,o-1))}O(n,7);O(w,7)}}function y(c,g,n,w){c=fa.rect(c,g,n,w,a);return q(c,a)}function I(c){return z(c)}function H(c,g){t(c,O(z(g),1),true)}function L(){d()}function A(c,
g){ja.start(function(n){d();n&&y(n.row,n.col,n.row,n.col)},g)}function P(c,g,n){var w=ja.stop();d();if(w){w=ha(w);F("drop",c,w,true,g,n)}}function ga(c){return z(c.start)}function U(c){return ua.left(c)}function K(c){return ua.right(c)}function aa(c){return(c-Math.max($,T)+X)%X}function ha(c){return O(z(v.visStart),c.row*7+c.col*s+u)}function Q(c){return C.find("tr:eq("+c+")")}function V(){return{left:0,right:xa}}var v=this;v.renderBasic=h;v.setHeight=i;v.setWidth=r;v.renderDayOverlay=t;v.defaultSelectionEnd=
I;v.renderSelection=H;v.clearSelection=L;v.dragStart=A;v.dragStop=P;v.defaultEventEnd=ga;v.getHoverListener=function(){return ja};v.colContentLeft=U;v.colContentRight=K;v.dayOfWeekCol=aa;v.cellDate=ha;v.cellIsAllDay=function(){return true};v.allDayTR=Q;v.allDayBounds=V;v.getRowCnt=function(){return da};v.getColCnt=function(){return X};v.getColWidth=function(){return qa};v.getDaySegmentContainer=function(){return ea};nb.call(v,a,b,e);ob.call(v);pb.call(v);Lb.call(v);var E=v.opt,F=v.trigger,k=v.clearEvents,
q=v.renderOverlay,d=v.clearOverlays,B=v.daySelectionMousedown,G=b.formatDate,M,s,u,$,T,da,X,qa,xa,ma,va,C,ea,fa,ja,ua;$a(a.addClass("fc-grid"));fa=new qb(function(c,g){var n,w,f,o=C.find("tr:first td");if(M)o=l(o.get().reverse());o.each(function(J,S){n=l(S);w=n.offset().left;if(J)f[1]=w;f=[w];g[J]=f});f[1]=w+n.outerWidth();C.find("tr").each(function(J,S){n=l(S);w=n.offset().top;if(J)f[1]=w;f=[w];c[J]=f});f[1]=w+n.outerHeight()});ja=new rb(fa);ua=new sb(function(c){return C.find("td:eq("+c+") div div")})}
function Lb(){function a(F){y(E=F);V(h(F))}function b(F){e();V(h(E),F)}function e(){I();ga().empty()}function h(F){var k=ha(),q=Q(),d=z(j.visStart);q=O(z(d),q);var B=l.map(F,Ra),G,M,s,u,$,T,da=[];for(G=0;G<k;G++){M=db(eb(F,B,d,q));for(s=0;s<M.length;s++){u=M[s];for($=0;$<u.length;$++){T=u[$];T.row=G;T.level=s;da.push(T)}}O(d,7);O(q,7)}return da}function i(F,k,q){H(F,k);if(F.editable||F.editable===Z&&m("editable")){r(F,k);q.isEnd&&v(F,k)}}function r(F,k){if(!m("disableDragging")&&k.draggable){var q=
U(),d;k.draggable({zIndex:9,delay:50,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(B,G){t("eventDragStart",k,F,B,G);A(F,k);q.start(function(M,s,u,$){k.draggable("option","revert",!M||!u&&!$);aa();if(M){d=u*7+$*(m("isRTL")?-1:1);K(O(z(F.start),d),O(Ra(F),d))}else d=0},B,"drag")},stop:function(B,G){q.stop();aa();t("eventDragStop",k,F,B,G);if(d){k.find("a").removeAttr("href");P(this,F,d,0,F.allDay,B,G)}else{l.browser.msie&&k.css("filter","");L(F,k)}}})}}var j=this;j.renderEvents=
a;j.rerenderEvents=b;j.clearEvents=e;j.bindDaySeg=i;tb.call(j);var m=j.opt,t=j.trigger,y=j.reportEvents,I=j.clearEventData,H=j.eventElementHandlers,L=j.showEvents,A=j.hideEvents,P=j.eventDrop,ga=j.getDaySegmentContainer,U=j.getHoverListener,K=j.renderDayOverlay,aa=j.clearOverlays,ha=j.getRowCnt,Q=j.getColCnt,V=j.renderDaySegs,v=j.resizableDayEvent,E=[]}function Mb(a,b){function e(m,t){t&&O(m,t*7);m=O(z(m),-((m.getDay()-i("firstDay")+7)%7));t=O(z(m),7);var y=z(m),I=z(t),H=i("weekends");if(!H){wa(y);
wa(I,-1,true)}h.title=j(y,O(z(I),-1),i("titleFormat"));h.start=m;h.end=t;h.visStart=y;h.visEnd=I;r(H?7:5)}var h=this;h.render=e;ub.call(h,a,b,"agendaWeek");var i=h.opt,r=h.renderAgenda,j=b.formatDates}function Nb(a,b){function e(m,t){if(t){O(m,t);i("weekends")||wa(m,t<0?-1:1)}t=z(m,true);var y=O(z(t),1);h.title=j(m,i("titleFormat"));h.start=h.visStart=t;h.end=h.visEnd=y;r(1)}var h=this;h.render=e;ub.call(h,a,b,"agendaDay");var i=h.opt,r=h.renderAgenda,j=b.formatDate}function ub(a,b,e){function h(p){g=
p;ba=u("theme")?"ui":"fc";ia=u("weekends")?0:1;ka=u("firstDay");if(sa=u("isRTL")){ca=-1;W=g-1}else{ca=1;W=0}oa=fb(u("minTime"));la=fb(u("maxTime"));p=sa?O(z(s.visEnd),-1):z(s.visStart);var x=z(p),D=La(new Date),N=u("columnFormat");if(ea){T();ea.find("tr:first th").slice(1,-1).each(function(Na,ya){l(ya).text(C(x,N));ya.className=ya.className.replace(/^fc-\w+(?= )/,"fc-"+Fa[x.getDay()]);O(x,ca);ia&&wa(x,ca)});x=z(p);c.find("td").each(function(Na,ya){ya.className=ya.className.replace(/^fc-\w+(?= )/,
"fc-"+Fa[x.getDay()]);if(+x==+D)l(ya).removeClass("fc-not-today fc-before-today").addClass(ba+"-state-highlight fc-today");else+x<+D?l(ya).addClass("fc-not-today fc-before-today").removeClass(ba+"-state-highlight fc-today"):l(ya).addClass("fc-not-today").removeClass(ba+"-state-highlight fc-today fc-before-today");O(x,ca);ia&&wa(x,ca)})}else{var Y,ra,Ha=u("slotMinutes")%15==0,pa="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(u("allDaySlot")?
"":" fc-last")+"'><th class='fc-leftmost "+ba+"-state-default'>&nbsp;</th>";for(Y=0;Y<g;Y++){pa+="<th class='fc-"+Fa[x.getDay()]+" "+ba+"-state-default'>"+C(x,N)+"</th>";O(x,ca);ia&&wa(x,ca)}pa+="<th class='"+ba+"-state-default'>&nbsp;</th></tr>";if(u("allDaySlot"))pa+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+ba+"-state-default'>"+u("allDayText")+"</th><td colspan='"+g+"' class='"+ba+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+
ba+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+(g+2)+"' class='"+ba+"-state-default fc-leftmost'><div/></th></tr>";pa+="</table></div>";ea=l(pa).appendTo(a);y(ea.find("td"));vb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ea);x=wb();var gb=ta(z(x),la);ta(x,oa);pa="<table>";for(Y=0;x<gb;Y++){ra=x.getMinutes();pa+="<tr class='"+(!Y?"fc-first":!ra?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+ba+"-state-default'>"+(!Ha||!ra?C(x,u("axisFormat")):
"&nbsp;")+"</th><td class='fc-slot"+Y+" "+ba+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";ta(x,u("slotMinutes"));n++}pa+="</table>";fa=l("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(ja=l("<div style='position:relative;overflow:hidden'>").append(ua=l(pa))).appendTo(a);I(fa.find("td"));xb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ja);x=z(p);pa="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";
for(Y=0;Y<g;Y++){pa+="<td class='fc-"+Fa[x.getDay()]+" "+ba+"-state-default "+(!Y?"fc-leftmost ":"")+(+x==+D?ba+"-state-highlight fc-today":+x<+D?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";O(x,ca);ia&&wa(x,ca)}pa+="</tr></table></div>";c=l(pa).appendTo(a)}}function i(p,x){if(p===Z)p=S;S=p;Ba={};var D=p-Ea(ea);D=Math.min(D,Ea(ua));Ia(fa,D);Ta&&Ia(fa,p-Ea(ea)-1);o=Ea(fa.find("tr:first div"))+1;x&&j()}function r(p){J=p;Ca.clear();Aa(fa,
p);fa.css("overflow","auto").width(p);var x=ea.find("tr:first th"),D=ea.find("tr.fc-all-day th:last"),N=c.find("td"),Y=fa[0].clientWidth;Aa(ua,Y);Y=fa[0].clientWidth;ua.width(Y);w=0;var ra=ea.find("tr:lt(2) th:first").add(fa.find("tr:first th"));ra.width(1);ra.each(function(){w=Math.max(w,l(this).outerWidth())});Aa(ra,w);f=Math.floor((Y-w)/g);Aa(x.slice(1,-2),f);Aa(N.slice(0,-1),f);if(p!=Y){Aa(x.slice(-2,-1),Y-w-f*(g-1));x.slice(-1).show();D.show()}else{fa.css("overflow","hidden");x.slice(-2,-1).width("");
x.slice(-1).hide();D.hide()}c.css({top:Ea(ea.find("tr")),left:w,width:Y-w,height:S})}function j(){var p=wb(),x=z(p);x.setHours(u("firstHour"));var D=aa(p,x)+1;p=function(){fa.scrollTop(D)};p();setTimeout(p,0)}function m(){R=fa.scrollTop()}function t(){fa.scrollTop(R)}function y(p){p.click(H).mousedown(ma)}function I(p){p.click(H).mousedown(B)}function H(p){if(!u("selectable")){var x=Math.min(g-1,Math.floor((p.pageX-c.offset().left)/f));x=O(z(s.visStart),x*ca+W);var D=this.className.match(/fc-slot(\d+)/);
if(D){D=parseInt(D[1])*u("slotMinutes");var N=Math.floor(D/60);x.setHours(N);x.setMinutes(D%60+oa);$("dayClick",this,x,false,p)}else $("dayClick",this,x,true,p)}}function L(p,x,D){D&&na.build();var N=z(s.visStart);if(sa){D=Ga(x,N)*ca+W+1;p=Ga(p,N)*ca+W+1}else{D=Ga(p,N);p=Ga(x,N)}D=Math.max(0,D);p=Math.min(g,p);D<p&&y(A(0,D,0,p-1))}function A(p,x,D,N){p=na.rect(p,x,D,N,ea);return da(p,ea)}function P(p,x){for(var D=z(s.visStart),N=O(z(D),1),Y=0;Y<g;Y++){var ra=new Date(Math.max(D,p)),Ha=new Date(Math.min(N,
x));if(ra<Ha){var pa=Y*ca+W;pa=na.rect(0,pa,0,pa,ja);ra=aa(D,ra);Ha=aa(D,Ha);pa.top=ra;pa.height=Ha-ra;I(da(pa,ja))}O(D,1);O(N,1)}}function ga(p){return w+Ca.left(p)}function U(p){return w+Ca.right(p)}function K(p){return(p-Math.max(ka,ia)+g)%g*ca+W}function aa(p,x){p=z(p,true);if(x<ta(z(p),oa))return 0;if(x>=ta(z(p),la))return Ea(ja);p=u("slotMinutes");x=x.getHours()*60+x.getMinutes()-oa;var D=Math.floor(x/p),N=Ba[D];if(N===Z)N=Ba[D]=fa.find("tr:eq("+D+") td div")[0].offsetTop;return Math.max(0,
Math.round(N-1+o*(x%p/p)))}function ha(p){var x=O(z(s.visStart),p.col*ca+W);p=p.row;u("allDaySlot")&&p--;p>=0&&ta(x,oa+p*u("slotMinutes"));return x}function Q(p){return u("allDaySlot")&&!p.row}function V(){return{left:w,right:J}}function v(){return ea.find("tr.fc-all-day")}function E(p){var x=z(p.start);if(p.allDay)return x;return ta(x,u("defaultEventMinutes"))}function F(p,x){if(x)return z(p);return ta(z(p),u("slotMinutes"))}function k(p,x,D){if(D)u("allDaySlot")&&L(p,O(z(x),1),true);else q(p,x)}
function q(p,x){var D=u("selectHelper");na.build();if(D){var N=Ga(p,s.visStart)*ca+W;if(N>=0&&N<g){N=na.rect(0,N,0,N,ja);var Y=aa(p,p),ra=aa(p,x);if(ra>Y){N.top=Y;N.height=ra-Y;N.left+=2;N.width-=5;if(l.isFunction(D)){if(p=D(p,x)){N.position="absolute";N.zIndex=8;za=l(p).css(N).appendTo(ja)}}else{za=l(va({title:"",start:p,end:x,className:[],editable:false},N,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));l.browser.msie&&za.find("span.fc-event-bg").hide();za.css("opacity",u("dragOpacity"))}if(za){I(za);
ja.append(za);Aa(za,N.width,true);Ia(za,N.height,true)}}}}else P(p,x)}function d(){X();if(za){za.remove();za=null}}function B(p){if(u("selectable")){xa(p);var x=this,D;Da.start(function(N,Y){d();if(N&&N.col==Y.col&&!Q(N)){Y=ha(Y);N=ha(N);D=[Y,ta(z(Y),u("slotMinutes")),N,ta(z(N),u("slotMinutes"))].sort(yb);q(D[0],D[3])}else D=null},p);l(document).one("mouseup",function(N){Da.stop();if(D){+D[0]==+D[1]&&$("dayClick",x,D[0],false,N);qa(D[0],D[3],false,N)}})}}function G(p,x){Da.start(function(D){X();if(D)if(Q(D))A(D.row,
D.col,D.row,D.col);else{D=ha(D);var N=ta(z(D),u("defaultEventMinutes"));P(D,N)}},x)}function M(p,x,D){var N=Da.stop();X();N&&$("drop",p,ha(N),Q(N),x,D)}var s=this;s.renderAgenda=h;s.setWidth=r;s.setHeight=i;s.beforeHide=m;s.afterShow=t;s.defaultEventEnd=E;s.timePosition=aa;s.dayOfWeekCol=K;s.cellDate=ha;s.cellIsAllDay=Q;s.allDayTR=v;s.allDayBounds=V;s.getHoverListener=function(){return Da};s.colContentLeft=ga;s.colContentRight=U;s.getDaySegmentContainer=function(){return vb};s.getSlotSegmentContainer=
function(){return xb};s.getMinMinute=function(){return oa};s.getMaxMinute=function(){return la};s.getBodyContent=function(){return ja};s.getRowCnt=function(){return 1};s.getColCnt=function(){return g};s.getColWidth=function(){return f};s.getSlotHeight=function(){return o};s.defaultSelectionEnd=F;s.renderDayOverlay=L;s.renderSelection=k;s.clearSelection=d;s.dragStart=G;s.dragStop=M;nb.call(s,a,b,e);ob.call(s);pb.call(s);Ob.call(s);var u=s.opt,$=s.trigger,T=s.clearEvents,da=s.renderOverlay,X=s.clearOverlays,
qa=s.reportSelection,xa=s.unselect,ma=s.daySelectionMousedown,va=s.slotSegHtml,C=b.formatDate,ea,fa,ja,ua,c,g,n=0,w,f,o,J,S,R,ba,ka,ia,sa,ca,W,oa,la,na,Da,Ca,Ba={},za,vb,xb;$a(a.addClass("fc-agenda"));na=new qb(function(p,x){function D(ya){return Math.max(pa,Math.min(gb,ya))}var N,Y,ra;c.find("td").each(function(ya,Pb){N=l(Pb);Y=N.offset().left;if(ya)ra[1]=Y;ra=[Y];x[ya]=ra});ra[1]=Y+N.outerWidth();if(u("allDaySlot")){N=ea.find("td");Y=N.offset().top;p[0]=[Y,Y+N.outerHeight()]}for(var Ha=ja.offset().top,
pa=fa.offset().top,gb=pa+fa.outerHeight(),Na=0;Na<n;Na++)p.push([D(Ha+o*Na),D(Ha+o*(Na+1))])});Da=new rb(na);Ca=new sb(function(p){return c.find("td:eq("+p+") div div")})}function Ob(){function a(c,g){K(ua=c);var n,w=c.length,f=[],o=[];for(n=0;n<w;n++)c[n].allDay?f.push(c[n]):o.push(c[n]);if(P("allDaySlot")){G(h(f),g);Q()}j(i(o),g)}function b(c){e();a(ua,c)}function e(){aa();V().empty();v().empty()}function h(c){c=db(eb(c,l.map(c,Ra),A.visStart,A.visEnd));var g,n=c.length,w,f,o,J=[];for(g=0;g<n;g++){w=
c[g];for(f=0;f<w.length;f++){o=w[f];o.row=0;o.level=g;J.push(o)}}return J}function i(c){var g=s(),n=k(),w=F(),f=ta(z(A.visStart),n),o=l.map(c,r),J,S,R,ba,ka,ia,sa=[];for(J=0;J<g;J++){S=db(eb(c,o,f,ta(z(f),w-n)));Qb(S);for(R=0;R<S.length;R++){ba=S[R];for(ka=0;ka<ba.length;ka++){ia=ba[ka];ia.col=J;ia.level=R;sa.push(ia)}}O(f,1,true)}return sa}function r(c){return c.end?z(c.end):ta(z(c.start),P("defaultEventMinutes"))}function j(c,g){var n,w=c.length,f,o,J,S,R,ba,ka,ia,sa,ca,W="",oa,la,na={},Da={},Ca=
v(),Ba;n=s();if(oa=P("isRTL")){la=-1;Ba=n-1}else{la=1;Ba=0}for(n=0;n<w;n++){f=c[n];o=f.event;J="fc-event fc-event-vert ";if(f.isStart)J+="fc-corner-top ";if(f.isEnd)J+="fc-corner-bottom ";S=q(f.start,f.start);R=q(f.start,f.end);ba=f.col;ka=f.level;ia=f.forward||0;sa=d(ba*la+Ba);ca=B(ba*la+Ba)-sa;ca=Math.min(ca-6,ca*0.95);ba=ka?ca/(ka+ia+1):ia?(ca/(ia+1)-6)*2:ca;ka=sa+ca/(ka+ia+1)*ka*la+(oa?ca-ba:0);f.top=S;f.left=ka;f.outerWidth=ba;f.outerHeight=R-S;W+=m(o,f,J)}Ca[0].innerHTML=W;oa=Ca.children();
for(n=0;n<w;n++){f=c[n];o=f.event;W=l(oa[n]);la=ga("eventRender",o,o,W);if(la===false)W.remove();else{if(la&&la!==true){W.remove();W=l(la).css({position:"absolute",top:f.top,left:f.left}).appendTo(Ca)}f.element=W;if(o._id===g)y(o,W,f);else W[0]._fci=n;da(o,W)}}zb(Ca,c,y);for(n=0;n<w;n++){f=c[n];if(W=f.element){o=na[g=f.key=Ab(W[0])];f.vsides=o===Z?(na[g]=Va(W[0],true)):o;o=Da[g];f.hsides=o===Z?(Da[g]=hb(W[0],true)):o;g=W.find("span.fc-event-title");if(g.length)f.titleTop=g[0].offsetTop}}for(n=0;n<
w;n++){f=c[n];if(W=f.element){W[0].style.width=f.outerWidth-f.hsides+"px";W[0].style.height=(na=f.outerHeight-f.vsides)+"px";o=f.event;if(f.titleTop!==Z&&na-f.titleTop<10){W.find("span.fc-event-time").text(fa(o.start,P("timeFormat"))+" - "+o.title);W.find("span.fc-event-title").remove()}ga("eventAfterRender",o,o,W)}}}function m(c,g,n){var w="";if(c.color)w+="color:"+c.color+";";if(c.bgColor)w+="background-color:"+c.bgColor+";";if(c.borderColor)w+="border-color:"+c.borderColor+";";return"<div class='"+
n+c.className.join(" ")+"' style='position:absolute;z-index:8;top:"+g.top+"px;left:"+g.left+"px'><a"+(c.url?" href='"+Oa(c.url)+"'":"")+(w?" style='"+w+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Oa(ja(c.start,c.end,P("timeFormat")))+"</span><span class='fc-event-title'>"+Oa(c.title)+"</span></a>"+((c.resizable||c.resizable===Z)&&(c.editable||c.editable===Z&&P("editable"))&&!P("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":
"")+"</div>"}function t(c,g,n){ha(c,g);if(c.editable||c.editable===Z&&P("editable")){I(c,g,n.isStart);n.isEnd&&M(c,g,u())}}function y(c,g,n){ha(c,g);if(c.editable||c.editable===Z&&P("editable")){var w=g.find("span.fc-event-time");H(c,g,w);n.isEnd&&L(c,g,w)}}function I(c,g,n){if(!P("disableDragging")&&g.draggable){var w,f=true,o,J=P("isRTL")?-1:1,S=E(),R=u(),ba=$(),ka=k();g.draggable({zIndex:9,opacity:P("dragOpacity","month"),revertDuration:P("dragRevertDuration"),start:function(sa,ca){ga("eventDragStart",
g,c,sa,ca);qa(c,g);w=Qa(g);S.start(function(W,oa,la,na){g.draggable("option","revert",!W||!la&&!na);C();if(W){o=na*J;if(W.row){if(n&&f){Aa(g,R-10);Ia(g,ba*Math.round((c.end?(c.end-c.start)/Rb:P("defaultEventMinutes"))/P("slotMinutes")));g.draggable("option","grid",[R,1]);f=false}}else{va(O(z(c.start),o),O(Ra(c),o));ia()}}},sa,"drag")},stop:function(sa,ca){var W=S.stop();C();ga("eventDragStop",g,c,sa,ca);if(W&&(!f||o)){g.find("a").removeAttr("href");W=0;f||(W=Math.round((g.offset().top-T().offset().top)/
ba)*P("slotMinutes")+ka-(c.start.getHours()*60+c.start.getMinutes()));xa(this,c,o,W,f,sa,ca)}else{ia();l.browser.msie&&g.css("filter","");X(c,g)}}});function ia(){if(!f){Aa(g,w);g.height("");g.draggable("option","grid",null);f=true}}}}function H(c,g,n){if(!P("disableDragging")&&g.draggable){var w,f=false,o,J,S,R=P("isRTL")?-1:1,ba=E(),ka=s(),ia=u(),sa=$();g.draggable({zIndex:9,scroll:false,grid:[ia,sa],axis:ka==1?"y":false,opacity:P("dragOpacity"),revertDuration:P("dragRevertDuration"),start:function(oa,
la){ga("eventDragStart",g,c,oa,la);qa(c,g);l.browser.msie&&g.find("span.fc-event-bg").hide();w=g.position();J=S=0;ba.start(function(na,Da,Ca,Ba){g.draggable("option","revert",!na);C();if(na){o=Ba*R;if(P("allDaySlot")&&!na.row){if(!f){f=true;n.hide();g.draggable("option","grid",null)}va(O(z(c.start),o),O(Ra(c),o))}else W()}},oa,"drag")},drag:function(oa,la){J=Math.round((la.position.top-w.top)/sa)*P("slotMinutes");if(J!=S){f||ca(J);S=J}},stop:function(oa,la){var na=ba.stop();C();ga("eventDragStop",
g,c,oa,la);if(na&&(o||J||f))xa(this,c,o,f?0:J,f,oa,la);else{W();g.css(w);ca(0);l.browser.msie&&g.css("filter","").find("span.fc-event-bg").css("display","");X(c,g)}}});function ca(oa){var la=ta(z(c.start),oa),na;if(c.end)na=ta(z(c.end),oa);n.text(ja(la,na,P("timeFormat")))}function W(){if(f){n.css("display","");g.draggable("option","grid",[ia,sa]);f=false}}}}function L(c,g,n){if(!P("disableResizing")&&g.resizable){var w,f,o=$();g.resizable({handles:{s:"div.ui-resizable-s"},grid:o,start:function(J,
S){w=f=0;qa(c,g);l.browser.msie&&l.browser.version=="6.0"&&g.css("overflow","hidden");g.css("z-index",9);ga("eventResizeStart",this,c,J,S)},resize:function(J,S){w=Math.round((Math.max(o,Ea(g))-S.originalSize.height)/o);if(w!=f){n.text(ja(c.start,!w&&!c.end?null:ta(U(c),P("slotMinutes")*w),P("timeFormat")));f=w}},stop:function(J,S){ga("eventResizeStop",this,c,J,S);if(w)ma(this,c,0,P("slotMinutes")*w,J,S);else{g.css("z-index",8);X(c,g)}}})}}var A=this;A.renderEvents=a;A.rerenderEvents=b;A.clearEvents=
e;A.slotSegHtml=m;A.bindDaySeg=t;tb.call(A);var P=A.opt,ga=A.trigger,U=A.eventEnd,K=A.reportEvents,aa=A.clearEventData,ha=A.eventElementHandlers,Q=A.setHeight,V=A.getDaySegmentContainer,v=A.getSlotSegmentContainer,E=A.getHoverListener,F=A.getMaxMinute,k=A.getMinMinute,q=A.timePosition,d=A.colContentLeft,B=A.colContentRight,G=A.renderDaySegs,M=A.resizableDayEvent,s=A.getColCnt,u=A.getColWidth,$=A.getSlotHeight,T=A.getBodyContent,da=A.reportEventElement,X=A.showEvents,qa=A.hideEvents,xa=A.eventDrop,
ma=A.eventResize,va=A.renderDayOverlay,C=A.clearOverlays,ea=A.calendar,fa=ea.formatDate,ja=ea.formatDates,ua=[]}function Qb(a){var b,e,h,i,r,j;for(b=a.length-1;b>0;b--){i=a[b];for(e=0;e<i.length;e++){r=i[e];for(h=0;h<a[b-1].length;h++){j=a[b-1][h];if(Bb(r,j))j.forward=Math.max(j.forward||0,(r.forward||0)+1)}}}}function nb(a,b,e){function h(k,q){k=F[k];if(typeof k=="object")return Za(k,q||e);return k}function i(k,q){return b.trigger.apply(b,[k,q||K].concat(Array.prototype.slice.call(arguments,2),[K]))}
function r(k){V={};var q,d=k.length,B;for(q=0;q<d;q++){B=k[q];if(V[B._id])V[B._id].push(B);else V[B._id]=[B]}}function j(){v=[];E={}}function m(k){return k.end?z(k.end):aa(k)}function t(k,q){v.push(q);if(E[k._id])E[k._id].push(q);else E[k._id]=[q]}function y(k,q){q.click(function(d){if(!q.hasClass("ui-draggable-dragging")&&!q.hasClass("ui-resizable-resizing"))return i("eventClick",this,k,d)}).hover(function(d){i("eventMouseover",this,k,d)},function(d){i("eventMouseout",this,k,d)})}function I(k,q){L(k,
q,"show")}function H(k,q){L(k,q,"hide")}function L(k,q,d){k=E[k._id];var B,G=k.length;for(B=0;B<G;B++)k[B][0]!=q[0]&&k[B][d]()}function A(k,q,d,B,G,M,s){var u=q.allDay,$=q._id;ga(V[$],d,B,G);i("eventDrop",k,q,d,B,G,function(){ga(V[$],-d,-B,u);Q()},M,s);K.eventsChanged=true;Q($)}function P(k,q,d,B,G,M){var s=q._id;U(V[s],d,B);i("eventResize",k,q,d,B,function(){U(V[s],-d,-B);Q()},G,M);K.eventsChanged=true;Q(s)}function ga(k,q,d,B){d=d||0;for(var G,M=k.length,s=0;s<M;s++){G=k[s];if(B!==Z)G.allDay=B;
ta(O(G.start,q,true),d);if(G.end)G.end=ta(O(G.end,q,true),d);ha(G,F)}}function U(k,q,d){d=d||0;for(var B,G=k.length,M=0;M<G;M++){B=k[M];B.end=ta(O(m(B),q,true),d);ha(B,F)}}var K=this;K.element=a;K.calendar=b;K.name=e;K.opt=h;K.trigger=i;K.reportEvents=r;K.clearEventData=j;K.eventEnd=m;K.reportEventElement=t;K.eventElementHandlers=y;K.showEvents=I;K.hideEvents=H;K.eventDrop=A;K.eventResize=P;var aa=K.defaultEventEnd,ha=b.normalizeEvent,Q=b.rerenderEvents,V={},v=[],E={},F=b.options}function tb(){function a(Q,
V){var v=h("isRTL"),E,F=Q.length,k,q,d,B,G,M="",s,u={},$={},T,da=[],X=[];E=A();s=E.left;var qa=E.right,xa=y();I();var ma=K();for(E=0;E<F;E++){k=Q[E];q=k.event;d="fc-event fc-event-hori ";if(v){if(k.isStart)d+="fc-corner-right ";if(k.isEnd)d+="fc-corner-left ";B=k.isEnd?P(U(k.end.getDay()-1)):s;G=k.isStart?ga(U(k.start.getDay())):qa}else{if(k.isStart)d+="fc-corner-left ";if(k.isEnd)d+="fc-corner-right ";B=k.isStart?P(U(k.start.getDay())):s;G=k.isEnd?ga(U(k.end.getDay()-1)):qa}var va="";if(q.color)va=
"color:"+q.color+";";if(q.bgColor)va+="background-color:"+q.bgColor+";";if(q.borderColor)va+="border-color:"+q.borderColor+";";M+="<div class='"+d+q.className.join(" ")+"' style='position:absolute;z-index:8;left:"+B+"px'><a"+(q.url?" href='"+Oa(q.url)+"'":"")+(va?" style='"+va+"'":"")+">"+(!q.allDay&&k.isStart?"<span class='fc-event-time'>"+Oa(ha(q.start,q.end,h("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Oa(q.title)+"</span></a>"+((q.resizable||q.resizable===Z)&&(q.editable||q.editable===
Z&&h("editable"))&&!h("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-"+(v?"w":"e")+"'></div>":"")+"</div>";k.left=B;k.outerWidth=G-B}ma[0].innerHTML=M;M=ma.children();for(E=0;E<F;E++){k=Q[E];v=l(M[E]);q=k.event;s=i("eventRender",q,q,v);if(s===false)v.remove();else{if(s&&s!==true){v.remove();v=l(s).css({position:"absolute",left:k.left}).appendTo(ma)}k.element=v;if(q._id===V)aa(q,v,k);else v[0]._fci=E;r(q,v)}}zb(ma,Q,aa);for(E=0;E<F;E++){k=Q[E];if(v=k.element){q=u[V=
k.key=Ab(v[0])];k.hsides=q===Z?(u[V]=hb(v[0],true)):q}}for(E=0;E<F;E++){k=Q[E];if(v=k.element)v[0].style.width=k.outerWidth-k.hsides+"px"}for(E=0;E<F;E++){k=Q[E];if(v=k.element){q=$[V=k.key];k.outerHeight=v[0].offsetHeight+(q===Z?($[V]=Cb(v[0])):q)}}var C,ea,fa={0:0},ja={0:0};for(T=0;T<xa;T++){for(ea=u=0;ea<7;ea++){C=0;jQuery.each(Q,function(ua,c){if(c.row==T&&c.start.getDay()==ea){C=Math.max(C,c.level);fa[c.level]=c.outerHeight||0}});for(E=0;E<C;E++)ja[E+1]=ja[E]+fa[E];jQuery.each(Q,function(ua,
c){if(c.row==T&&c.start.getDay()==ea)c.top=ja[c.level]});u=Math.max(u,ja[C]+fa[C])}da[T]=L(T).find("td:first div.fc-day-content > div");Ia(da[T],u)}for(T=0;T<xa;T++)X[T]=da[T][0].offsetTop;for(E=0;E<F;E++){k=Q[E];if(v=k.element){v[0].style.top=X[k.row]+k.top+"px";q=k.event;i("eventAfterRender",q,q,v)}}}function b(Q,V){if(!h("disableResizing")&&V.resizable){var v=H();V.resizable({handles:h("isRTL")?{w:"div.ui-resizable-w"}:{e:"div.ui-resizable-e"},grid:v,minWidth:v/2,containment:e.element.parent().parent(),
start:function(E,F){V.css("z-index",9);m(Q,V);i("eventResizeStart",this,Q,E,F)},stop:function(E,F){i("eventResizeStop",this,Q,E,F);var k=Math.round((Qa(V)-F.originalSize.width)/v);if(k)t(this,Q,k,0,E,F);else{V.css("z-index",8);j(Q,V)}}})}}var e=this;e.renderDaySegs=a;e.resizableDayEvent=b;var h=e.opt,i=e.trigger,r=e.reportEventElement,j=e.showEvents,m=e.hideEvents,t=e.eventResize,y=e.getRowCnt,I=e.getColCnt,H=e.getColWidth,L=e.allDayTR,A=e.allDayBounds,P=e.colContentLeft,ga=e.colContentRight,U=e.dayOfWeekCol,
K=e.getDaySegmentContainer,aa=e.bindDaySeg,ha=e.calendar.formatDates}function pb(){function a(H,L,A){b();L||(L=m(H,A));t(H,L,A);e(H,L,A)}function b(H){if(I){I=false;y();j("unselect",null,H)}}function e(H,L,A,P){I=true;j("select",null,H,L,A,P)}function h(H){var L=i.cellDate,A=i.cellIsAllDay,P=i.getHoverListener();if(r("selectable")){b(H);var ga=this,U;P.start(function(K,aa){y();if(K&&A(K)){U=[L(aa),L(K)].sort(yb);t(U[0],U[1],true)}else U=null},H);l(document).one("mouseup",function(K){P.stop();if(U){+U[0]==
+U[1]&&j("dayClick",ga,U[0],true,K);e(U[0],U[1],true,K)}})}}var i=this;i.select=a;i.unselect=b;i.reportSelection=e;i.daySelectionMousedown=h;var r=i.opt,j=i.trigger,m=i.defaultSelectionEnd,t=i.renderSelection,y=i.clearSelection,I=false;r("selectable")&&r("unselectAuto")&&l(document).mousedown(function(H){var L=r("unselectCancel");if(L)if(l(H.target).parents(L).length)return;b(H)})}function ob(){function a(r,j){var m=i.shift();m||(m=l("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));
m[0].parentNode!=j[0]&&m.appendTo(j);h.push(m.css(r).show());return m}function b(){for(var r;r=h.shift();)i.push(r.hide().unbind())}var e=this;e.renderOverlay=a;e.clearOverlays=b;var h=[],i=[]}function qb(a){var b=this,e,h;b.build=function(){e=[];h=[];a(e,h)};b.cell=function(i,r){var j=e.length,m=h.length,t,y=-1,I=-1;for(t=0;t<j;t++)if(r>=e[t][0]&&r<e[t][1]){y=t;break}for(t=0;t<m;t++)if(i>=h[t][0]&&i<h[t][1]){I=t;break}return y>=0&&I>=0?{row:y,col:I}:null};b.rect=function(i,r,j,m,t){t=t.offset();
return{top:e[i][0]-t.top,left:h[r][0]-t.left,width:h[m][1]-h[r][0],height:e[j][1]-e[i][0]}}}function rb(a){function b(m){m=a.cell(m.pageX,m.pageY);if(!m!=!j||m&&(m.row!=j.row||m.col!=j.col)){if(m){r||(r=m);i(m,r,m.row-r.row,m.col-r.col)}else i(m,r);j=m}}var e=this,h,i,r,j;e.start=function(m,t,y){i=m;r=j=null;a.build();b(t);h=y||"mousemove";l(document).bind(h,b)};e.stop=function(){l(document).unbind(h,b);return j}}function sb(a){function b(j){return h[j]=h[j]||a(j)}var e=this,h={},i={},r={};e.left=
function(j){return i[j]=i[j]===Z?b(j).position().left:i[j]};e.right=function(j){return r[j]=r[j]===Z?e.left(j)+Qa(b(j)):r[j]};e.clear=function(){h={};i={};r={}}}function Wa(a,b,e){a.setFullYear(a.getFullYear()+b);e||La(a);return a}function Xa(a,b,e){if(+a){b=a.getMonth()+b;var h=z(a);h.setDate(1);h.setMonth(b);a.setMonth(b);for(e||La(a);a.getMonth()!=h.getMonth();)a.setDate(a.getDate()+(a<h?1:-1))}return a}function O(a,b,e){if(+a){b=a.getDate()+b;var h=z(a);h.setHours(9);h.setDate(b);a.setDate(b);
e||La(a);ib(a,h)}return a}function ib(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Sb)}function ta(a,b){a.setMinutes(a.getMinutes()+b);return a}function La(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function z(a,b){if(b)return La(new Date(+a));return new Date(+a)}function wb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function wa(a,b,e){for(b=b||1;!a.getDay()||e&&a.getDay()==1||!e&&a.getDay()==6;)O(a,b);return a}function Ga(a,
b){return Math.round((z(a,true)-z(b,true))/mb)}function lb(a,b,e,h){if(b!==Z&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(e!==Z&&e!=a.getMonth()){a.setDate(1);a.setMonth(e)}h!==Z&&a.setDate(h)}function ab(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a)*1E3);if(b===Z)b=true;return Db(a,b)||(a?new Date(a):null)}return null}function Db(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);
if(!a)return null;var e=new Date(a[1],0,1);if(b){b=new Date(a[1],0,1,9,0);if(a[3]){e.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){e.setDate(a[5]);b.setDate(a[5])}ib(e,b);a[7]&&e.setHours(a[7]);a[8]&&e.setMinutes(a[8]);a[10]&&e.setSeconds(a[10]);a[12]&&e.setMilliseconds(Number("0."+a[12])*1E3);ib(e,b)}else{b=0;e.setUTCFullYear(a[1]);a[3]&&e.setUTCMonth(a[3]-1);a[5]&&e.setUTCDate(a[5]);a[7]&&e.setUTCHours(a[7]);a[8]&&e.setUTCMinutes(a[8]);a[10]&&e.setUTCSeconds(a[10]);a[12]&&e.setUTCMilliseconds(Number("0."+
a[12])*1E3);if(a[14]){b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1}e=new Date(+e+b*60*1E3)}return e}function fb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1]);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2]):0)}}function Ma(a,b,e){return Ya(a,null,b,e)}function Ya(a,b,e,h){h=h||Sa;var i=a,r=b,j,m=e.length,t,y,I,H="";for(j=0;j<m;j++){t=e.charAt(j);
if(t=="'")for(y=j+1;y<m;y++){if(e.charAt(y)=="'"){if(i){H+=y==j+1?"'":e.substring(j+1,y);j=y}break}}else if(t=="(")for(y=j+1;y<m;y++){if(e.charAt(y)==")"){j=Ma(i,e.substring(j+1,y),h);if(parseInt(j.replace(/\D/,"")))H+=j;j=y;break}}else if(t=="[")for(y=j+1;y<m;y++){if(e.charAt(y)=="]"){t=e.substring(j+1,y);j=Ma(i,t,h);if(j!=Ma(r,t,h))H+=j;j=y;break}}else if(t=="{"){i=b;r=a}else if(t=="}"){i=a;r=b}else{for(y=m;y>j;y--)if(I=Tb[e.substring(j,y)]){if(i)H+=I(i,h);j=y-1;break}if(y==j)if(i)H+=t}}return H}
function Ra(a){return a.end?Ub(a.end,a.allDay):O(z(a.start),1)}function Ub(a,b){a=z(a);return b||a.getHours()||a.getMinutes()?O(a,1):La(a)}function Vb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Bb(a,b){return a.end>b.start&&a.start<b.end}function eb(a,b,e,h){var i=[],r,j=a.length,m,t,y,I,H;for(r=0;r<j;r++){m=a[r];t=m.start;y=b[r];if(y>e&&t<h){if(t<e){t=z(e);I=false}else{t=t;I=
true}if(y>h){y=z(h);H=false}else{y=y;H=true}i.push({event:m,start:t,end:y,isStart:I,isEnd:H,msLength:y-t})}}return i.sort(Vb)}function db(a){var b=[],e,h=a.length,i,r,j,m;for(e=0;e<h;e++){i=a[e];for(r=0;;){j=false;if(b[r])for(m=0;m<b[r].length;m++)if(Bb(b[r][m],i)){j=true;break}if(j)r++;else break}if(b[r])b[r].push(i);else b[r]=[i]}return b}function zb(a,b,e){a.unbind("mouseover").mouseover(function(h){for(var i=h.target,r;i!=this;){r=i;i=i.parentNode}if((i=r._fci)!==Z){r._fci=Z;r=b[i];e(r.event,
r.element,r);l(h.target).trigger(h)}h.stopPropagation()})}function Aa(a,b,e){a.each(function(h,i){i.style.width=b-hb(i,e)+"px"})}function Ia(a,b,e){a.each(function(h,i){i.style.height=b-Va(i,e)+"px"})}function hb(a,b){return(parseFloat(l.curCSS(a,"paddingLeft",true))||0)+(parseFloat(l.curCSS(a,"paddingRight",true))||0)+(parseFloat(l.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(l.curCSS(a,"borderRightWidth",true))||0)+(b?Wb(a):0)}function Wb(a){return(parseFloat(l.curCSS(a,"marginLeft",true))||
0)+(parseFloat(l.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(l.curCSS(a,"paddingTop",true))||0)+(parseFloat(l.curCSS(a,"paddingBottom",true))||0)+(parseFloat(l.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(l.curCSS(a,"borderBottomWidth",true))||0)+(b?Cb(a):0)}function Cb(a){return(parseFloat(l.curCSS(a,"marginTop",true))||0)+(parseFloat(l.curCSS(a,"marginBottom",true))||0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}
function Ea(a){if(Ta)return a.innerHeight();return a.height()}function Qa(a){if(Ta)return a.innerWidth();return a.width()}function kb(){}function yb(a,b){return a-b}function Pa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==Z)return a[b];b=b.split(/(?=[A-Z])/);for(var e=b.length-1,h;e>=0;e--){h=a[b[e].toLowerCase()];if(h!==Z)return h}return a[""]}function Oa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,
"<br />")}function Ab(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function $a(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Ta=false;if(l.ui&&l.browser.msie&&parseInt(l.browser.version,10)>=9){Ta=true;var Xb=l.ui.mouse.prototype._mouseMove;l.ui.mouse.prototype._mouseMove=function(a){a.button=1;Xb.apply(this,[a])}}var Sa={defaultView:"month",aspectRatio:1.35,header:{left:"title",
center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar",
"Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Yb={header:{left:"next,prev today",
center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ja=l.fullCalendar={},Ka=Ja.views={};l.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),e;this.each(function(){var i=l.data(this,"fullCalendar");if(i&&l.isFunction(i[a])){i=i[a].apply(i,b);if(e===Z)e=i;a=="destroy"&&l.removeData(this,
"fullCalendar")}});if(e!==Z)return e;return this}var h=a.eventSources||[];delete a.eventSources;if(a.events){h.push(a.events);delete a.events}a=l.extend(true,{},Sa,a.isRTL||a.isRTL===Z&&Sa.isRTL?Yb:{},a);this.each(function(i,r){i=l(r);r=new Eb(i,a,h);i.data("fullCalendar",r);r.render()});return this};var Hb=1;Ka.month=Ib;Ka.basicWeek=Jb;Ka.basicDay=Kb;var cb;jb({weekMode:"fixed"});Ka.agendaWeek=Mb;Ka.agendaDay=Nb;jb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,
axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ja.addDays=O;Ja.cloneDate=z;Ja.parseDate=ab;Ja.parseISO8601=Db;Ja.parseTime=fb;Ja.formatDate=Ma;Ja.formatDates=Ya;var Fa=["sun","mon","tue","wed","thu","fri","sat"],mb=864E5,Sb=36E5,Rb=6E4,Tb={s:function(a){return a.getSeconds()},ss:function(a){return Pa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Pa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Pa(a.getHours()%
12||12)},H:function(a){return a.getHours()},HH:function(a){return Pa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Pa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Pa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},
yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ma(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"}}})(jQuery);

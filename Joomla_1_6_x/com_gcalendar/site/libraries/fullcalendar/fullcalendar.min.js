/*

 FullCalendar v1.4.11-gcalendar
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Tue Apr 12 21:38:18 2011 +0200

*/
(function(l,ia){function lb(a){l.extend(true,Qa,a)}function Gb(a,b,f){function e(r){if(D){t();s();ja();Q(r)}else g()}function g(){Y=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");D=l("<div class='fc-content "+Y+"-widget-content' style='position:relative'/>").prependTo(a);K=new Hb(fa,b);(A=K.render())&&a.prepend(A);z(b.defaultView);l(window).resize(pa);u()||j()}function j(){setTimeout(function(){!m.start&&u()&&Q()},0)}function n(){l(window).unbind("resize",
pa);K.destroy();D.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function o(){return H.offsetWidth!==0}function u(){return l("body")[0].offsetWidth!==0}function z(r){if(!m||r!=m.name){i++;w();var B=m,P;if(B){(B.beforeHide||mb)();Ua(D,Da(D));B.element.hide()}else Ua(D,1);D.css("overflow","hidden");if(m=h[r])m.element.show();else m=h[r]=new Ha[r](P=S=l("<div class='fc-view fc-view-"+r+"' style='position:absolute'/>").appendTo(D),fa);B&&K.deactivateButton(B.name);K.activateButton(r);Q();D.css("overflow",
"");B&&Ua(D,1);P||(m.afterShow||mb)();i--}}function Q(r){if(o()){i++;w();E===ia&&t();var B=false;if(!m.start||r||p<m.start||p>=m.end){m.render(p,r||0);ca(true);B=true}else if(m.sizeDirty){m.clearEvents();ca();B=true}else if(m.eventsDirty){m.clearEvents();B=true}m.sizeDirty=false;m.eventsDirty=false;ba(B);k=a.outerWidth();K.updateTitle(m.title);r=new Date;r>=m.start&&r<m.end?K.disableButton("today"):K.enableButton("today");i--;m.trigger("viewDisplay",H)}}function R(){s();if(o()){t();ca();w();m.clearEvents();
m.renderEvents(N);m.sizeDirty=false}}function s(){l.each(h,function(r,B){B.sizeDirty=true})}function t(){E=b.contentHeight?b.contentHeight:b.height?b.height-Va(D[0])-(A?Da(A):0):Math.round(Ra(D)/Math.max(b.aspectRatio,0.5))}function ca(r){i++;m.setHeight(E,r);if(S){S.css("position","relative");S=null}m.setWidth(Ra(D),r);i--}function pa(){if(!i)if(m.start){var r=++c;setTimeout(function(){if(r==c&&!i&&o())if(k!=(k=a.outerWidth())){i++;R();m.trigger("windowResize",H);i--}},200)}else j()}function ba(r){if(!b.lazyFetching||
x(m.visStart,m.visEnd))X();else r&&aa()}function X(){J(m.visStart,m.visEnd)}function ma(r){N=r;aa()}function oa(r){aa(r)}function aa(r){ja();if(o()){m.clearEvents();m.renderEvents(N,r);m.eventsDirty=false}}function ja(){l.each(h,function(r,B){B.eventsDirty=true})}function ea(r,B,P){m.select(r,B,P===ia?true:P)}function w(){m&&m.unselect()}function ga(){Q(-1)}function L(){Q(1)}function F(){Wa(p,-1);Q()}function d(){Wa(p,1);Q()}function G(){p=new Date;Q()}function O(r,B,P){if(r instanceof Date)p=y(r);
else nb(p,r,B,P);Q()}function T(r,B,P){r!==ia&&Wa(p,r);B!==ia&&Xa(p,B);P!==ia&&V(p,P);Q()}function ka(){return y(p)}function C(){return m}function U(r,B){if(B===ia)return b[r];if(r=="height"||r=="contentHeight"||r=="aspectRatio"){b[r]=B;R()}}function sa(r,B){if(b[r])return b[r].apply(B||H,Array.prototype.slice.call(arguments,2))}var fa=this;fa.options=b;fa.render=e;fa.destroy=n;fa.refetchEvents=X;fa.reportEvents=ma;fa.reportEventChange=oa;fa.rerenderEvents=aa;fa.changeView=z;fa.select=ea;fa.unselect=
w;fa.prev=ga;fa.next=L;fa.prevYear=F;fa.nextYear=d;fa.today=G;fa.gotoDate=O;fa.incrementDate=T;fa.formatDate=function(r,B){return Ka(r,B,b)};fa.formatDates=function(r,B,P){return Ya(r,B,P,b)};fa.getDate=ka;fa.getView=C;fa.option=U;fa.trigger=sa;Ib.call(fa,b,f);var x=fa.isFetchNeeded,J=fa.fetchEvents,H=a[0],K,A,D,Y,m,h={},k,E,S,c=0,i=0,p=new Date,N=[],Z;nb(p,b.year,b.month,b.date);b.droppable&&l(document).bind("dragstart",function(r,B){var P=r.target,M=l(P);if(!M.parents(".fc").length){var na=b.dropAccept;
if(l.isFunction(na)?na.call(P,M):M.is(na)){Z=P;m.dragStart(Z,r,B)}}}).bind("dragstop",function(r,B){if(Z){m.dragStop(Z,r,B);Z=null}})}function Hb(a,b){function f(){s=b.theme?"ui":"fc";var t=b.header;if(t)return R=l("<table class='fc-header'/>").append(l("<tr/>").append(l("<td class='fc-header-left'/>").append(g(t.left))).append(l("<td class='fc-header-center'/>").append(g(t.center))).append(l("<td class='fc-header-right'/>").append(g(t.right))))}function e(){R.remove()}function g(t){if(t){var ca=
l("<tr/>");l.each(t.split(" "),function(pa){pa>0&&ca.append("<td><span class='fc-header-space'/></td>");var ba;l.each(this.split(","),function(X,ma){if(ma=="title"){ca.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");ba&&ba.addClass(s+"-corner-right");ba=null}else{var oa;if(a[ma])oa=a[ma];else if(Ha[ma])oa=function(){aa.removeClass(s+"-state-hover");a.changeView(ma)};if(oa){ba&&ba.addClass(s+"-no-right");var aa;X=b.theme?Za(b.buttonIcons,ma):null;var ja=Za(b.buttonText,ma);if(X)aa=l("<div class='fc-button-"+
ma+" ui-state-default'><a><span class='ui-icon ui-icon-"+X+"'/></a></div>");else if(ja)aa=l("<div class='fc-button-"+ma+" "+s+"-state-default'><a><span>"+ja+"</span></a></div>");if(aa){aa.click(function(){aa.hasClass(s+"-state-disabled")||oa()}).mousedown(function(){aa.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-down")}).mouseup(function(){aa.removeClass(s+"-state-down")}).hover(function(){aa.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-hover")},
function(){aa.removeClass(s+"-state-hover").removeClass(s+"-state-down")}).appendTo(l("<td/>").appendTo(ca));ba?ba.addClass(s+"-no-right"):aa.addClass(s+"-corner-left");$a(aa.closest("td"));ba=aa}}}});ba&&ba.addClass(s+"-corner-right")});return l("<table/>").append(ca)}}function j(t){R.find("h2.fc-header-title").html(t)}function n(t){R.find("div.fc-button-"+t).addClass(s+"-state-active")}function o(t){R.find("div.fc-button-"+t).removeClass(s+"-state-active")}function u(t){R.find("div.fc-button-"+
t).addClass(s+"-state-disabled")}function z(t){R.find("div.fc-button-"+t).removeClass(s+"-state-disabled")}var Q=this;Q.render=f;Q.destroy=e;Q.updateTitle=j;Q.activateButton=n;Q.deactivateButton=o;Q.disableButton=u;Q.enableButton=z;var R=l([]),s}function Ib(a,b){function f(d,G){return!ja||d<ja||G>ea}function e(d,G){ja=d;ea=G;F=[];d=++w;ga=G=b.length;for(var O=0;O<G;O++)g(b[O],d)}function g(d,G){j(d,function(O){if(G==w){for(var T=0;T<O.length;T++){ba(O[T]);O[T].source=d}F=F.concat(O);ga--;ga||aa(F)}})}
function j(d,G){if(typeof d=="string"){var O={};O[a.startParam]=Math.round(ja.getTime()/1E3);O[a.endParam]=Math.round(ea.getTime()/1E3);O.browserTimezone=ja.getTimezoneOffset();if(a.cacheParam)O[a.cacheParam]=(new Date).getTime();ca();l.ajax({global:false,type:a.requestMethod||"GET",url:d,dataType:"json",data:O,cache:a.cacheParam||false,success:function(T){pa();G(T)}})}else if(l.isFunction(d)){ca();d(y(ja),y(ea),function(T){pa();G(T)})}else d&&G(d)}function n(d){b.push(d);ga++;g(d,w)}function o(d){var G=
[];b=l.grep(b,function(O){if(typeof O==="object"&&d!==O)G=G.concat(O);return O!=d});F=l.grep(F,function(O){return O.source!=d});b=G.concat(b);aa(F)}function u(d){if(b.indexOf(d)<0){b.push(d);ga++}}function z(){F=b=[];b=[].concat(b);aa(F)}function Q(d){var G,O=F.length,T,ka=oa().defaultEventEnd,C=d.start-d._start,U=d.end?d.end-(d._end||ka(d)):0;for(G=0;G<O;G++){T=F[G];if(T._id==d._id&&T!=d){T.start=new Date(+T.start+C);T.end=d.end?T.end?new Date(+T.end+U):new Date(+ka(T)+U):null;T.title=d.title;T.url=
d.url;T.allDay=d.allDay;T.className=d.className;T.editable=d.editable;T.resizable=d.resizable;T.color=d.color;T.bgColor=d.bgColor;T.borderColor=d.borderColor;ba(T)}}ba(d);aa(F)}function R(d,G){ba(d);if(!d.source){if(G){b[0].push(d);d.source=b[0]}F.push(d)}aa(F)}function s(d){if(d){if(!l.isFunction(d)){var G=d+"";d=function(T){return T._id==G}}F=l.grep(F,d,true);for(O=0;O<b.length;O++)if(typeof b[O]=="object")b[O]=l.grep(b[O],d,true)}else{F=[];for(var O=0;O<b.length;O++)if(typeof b[O]=="object")b[O]=
[]}aa(F)}function t(d){if(l.isFunction(d))return l.grep(F,d);else if(d){d+="";return l.grep(F,function(G){return G._id==d})}return F}function ca(){L++||ma("loading",null,true)}function pa(){--L||ma("loading",null,false)}function ba(d){d._id=d._id||(d.id===ia?"_fc"+Jb++:d.id+"");if(d.date){if(!d.start)d.start=d.date;delete d.date}d._start=y(d.start=ab(d.start,a.ignoreTimezone));d.end=ab(d.end,a.ignoreTimezone);if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?y(d.end):null;if(d.allDay===ia)d.allDay=
a.allDayDefault;if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=[]}var X=this;X.isFetchNeeded=f;X.fetchEvents=e;X.addEventSource=n;X.addEventSourceFast=u;X.clearEventSources=z;X.removeEventSource=o;X.updateEvent=Q;X.renderEvent=R;X.removeEvents=s;X.clientEvents=t;X.normalizeEvent=ba;var ma=X.trigger,oa=X.getView,aa=X.reportEvents,ja,ea,w=0,ga=0,L=0,F=[];b.unshift([])}function Kb(a,b){function f(o,u){if(u){Xa(o,u);o.setDate(1)}o=y(o,true);o.setDate(1);
u=Xa(y(o),1);var z=y(o),Q=y(u),R=g("firstDay"),s=g("weekends")?0:1;if(s){va(z);va(Q,-1,true)}V(z,-((z.getDay()-Math.max(R,s)+7)%7));V(Q,(7-Q.getDay()+Math.max(R,s))%7);R=Math.round((Q-z)/(ob*7));if(g("weekMode")=="fixed"){V(Q,(6-R)*7);R=6}e.title=n(o,g("titleFormat"));e.start=o;e.end=u;e.visStart=z;e.visEnd=Q;j(R,s?5:7,true)}var e=this;e.render=f;bb.call(e,a,b,"month");var g=e.opt,j=e.renderBasic,n=b.formatDate}function Lb(a,b){function f(o,u){u&&V(o,u*7);o=V(y(o),-((o.getDay()-g("firstDay")+7)%7));
u=V(y(o),7);var z=y(o),Q=y(u),R=g("weekends");if(!R){va(z);va(Q,-1,true)}e.title=n(z,V(y(Q),-1),g("titleFormat"));e.start=o;e.end=u;e.visStart=z;e.visEnd=Q;j(1,R?7:5,false)}var e=this;e.render=f;bb.call(e,a,b,"basicWeek");var g=e.opt,j=e.renderBasic,n=b.formatDates}function Mb(a,b){function f(o,u){if(u){V(o,u);g("weekends")||va(o,u<0?-1:1)}e.title=n(o,g("titleFormat"));e.start=e.visStart=y(o,true);e.end=e.visEnd=V(y(e.start),1);j(1,1,false)}var e=this;e.render=f;bb.call(e,a,b,"basicDay");var g=e.opt,
j=e.renderBasic,n=b.formatDate}function bb(a,b,f){function e(c,i,p){J=c;H=i;sa=ga("weekNumbers")?1:0;if(ka=ga("isRTL")){C=-1;U=H-1;sa&&U++}else{C=1;U=0;sa&&U--}fa=ga("firstDay");x=ga("weekends")?0:1;var N=ga("theme")?"ui":"fc",Z=ga("columnFormat"),r=w.start.getMonth(),B=Ia(new Date),P,M=y(w.visStart);if(m){F();i=m.find("tr").length;if(J<i)m.find("tr:gt("+(J-1)+")").remove();else if(J>i){c="";for(i=i;i<J;i++){c+="<tr class='fc-week"+i+"'>";if(sa){P=y(M);V(P,1);c+="<th class='fc-axis "+N+"-state-default fc-leftmost fc-weeknumber'>"+
P.getWeek()+"</th>"}for(P=0;P<H;P++){c+="<td class='fc-"+Ea[M.getDay()]+" "+N+"-state-default fc-new fc-day"+(i*H+P)+(P==U?" fc-leftmost":"")+"'>"+(p?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";V(M,1);x&&va(M)}c+="</tr>"}m.append(c)}n(m.find("td.fc-new").removeClass("fc-new"));M=y(w.visStart);m.find("td").each(function(){var $=l(this);sa&&M.getDay()==1&&$.closest("tr").find("th").text(M.getWeek());if(J>1)M.getMonth()==
r?$.removeClass("fc-other-month"):$.addClass("fc-other-month");if(+M==+B)$.removeClass("fc-not-today fc-before-today").addClass(N+"-state-highlight fc-today");else+M<+B?$.addClass("fc-not-today fc-before-today").removeClass(N+"-state-highlight fc-today"):$.addClass("fc-not-today").removeClass(N+"-state-highlight fc-today fc-before-today");$.find("div.fc-day-number").text(M.getDate());V(M,1);x&&va(M)});if(J==1){M=y(w.visStart);Y.find("th").not(".fc-axis").each(function($,la){l(la).text(T(M,Z));la.className=
la.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[M.getDay()]);V(M,1);x&&va(M)});M=y(w.visStart);m.find("td").each(function($,la){la.className=la.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[M.getDay()]);V(M,1);x&&va(M)})}}else{var na=l("<table/>").appendTo(a);c="<thead><tr>";if(sa)c+="<th width='25px' class='fc-axis fc-leftmost "+N+"-state-default'>&nbsp;</th>";for(i=0;i<H;i++){c+="<th class='fc-"+Ea[M.getDay()]+" "+N+"-state-default"+(i==U?" fc-leftmost":"")+"'>"+T(M,Z)+"</th>";V(M,1);x&&va(M)}Y=l(c+"</tr></thead>").appendTo(na);
c="<tbody>";M=y(w.visStart);for(i=0;i<J;i++){c+="<tr class='fc-week"+i+"'>";if(sa){P=y(M);V(P,1);c+="<th class='fc-axis "+N+"-state-default fc-leftmost fc-weeknumber'>"+P.getWeek()+"</th>"}for(P=0;P<H;P++){c+="<td class='fc-"+Ea[M.getDay()]+" "+N+"-state-default fc-new fc-day"+(i*H+P)+(P==U?" fc-leftmost":"")+(J>1&&M.getMonth()!=r?" fc-other-month":"")+(+M==+B?" fc-today "+N+"-state-highlight":+M<+B?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(p?"<div class='fc-day-number'>"+M.getDate()+
"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";V(M,1);x&&va(M)}c+="</tr>"}m=l(c+"</tbody>").appendTo(na);n(m.find("td.fc-new").removeClass("fc-new"));h=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function g(c){D=c;c=m.find("tr td:first-child");var i=D-Y.outerHeight(),p;if(sa)c=m.find("tr th:first-child");if(ga("weekMode")=="variable")p=i=Math.floor(i/(J==1?2:6));else{p=Math.floor(i/J);i=i-p*(J-1)}if(cb===ia){var N=m.find("tr:first").find("td:first");
Ja(N,p);cb=p!=N.outerHeight()}if(cb){c.slice(0,-1).height(p);c.slice(-1).height(i)}else{Ja(c.slice(0,-1),p);Ja(c.slice(-1),i)}}function j(c){A=c;S.clear();if(sa){K=Math.floor((A-25)/H);Aa(Y.find("th").slice(1,-1),K)}else{K=Math.floor(A/H);Aa(Y.find("th").slice(0,-1),K)}}function n(c){c.click(o).mousedown(O)}function o(c){if(!ga("selectable")){var i=parseInt(this.className.match(/fc\-day(\d+)/)[1],10);i=V(y(w.visStart),Math.floor(i/H)*7+i%H);L("dayClick",this,i,true,c)}}function u(c,i,p){p&&k.build();
p=y(w.visStart);for(var N=V(y(p),H),Z=0;Z<J;Z++){var r=new Date(Math.max(p,c)),B=new Date(Math.min(N,i));if(r<B){var P;if(ka){P=Ba(B,p)*C+U+1;r=Ba(r,p)*C+U+1}else{P=Ba(r,p);r=Ba(B,p)}n(z(Z,P,Z,r-1))}V(p,7);V(N,7)}}function z(c,i,p,N){c=k.rect(c,i,p,N,a);return d(c,a)}function Q(c){return y(c)}function R(c,i){u(c,V(y(i),1),true)}function s(){G()}function t(c,i){E.start(function(p){G();p&&z(p.row,p.col,p.row,p.col)},i)}function ca(c,i,p){var N=E.stop();G();if(N){N=aa(N);L("drop",c,N,true,i,p)}}function pa(c){return y(c.start)}
function ba(c){return S.left(c)}function X(c){return S.right(c)}function ma(c){return(c-Math.max(fa,x)+H)%H}function oa(c){return{row:Math.floor(Ba(c,w.visStart)/7),col:ma(c.getDay())*C+U}}function aa(c){return V(y(w.visStart),c.row*7+c.col*C+U+sa)}function ja(c){return m.find("tr:eq("+c+")")}function ea(){return{left:0,right:A}}var w=this;w.renderBasic=e;w.setHeight=g;w.setWidth=j;w.renderDayOverlay=u;w.defaultSelectionEnd=Q;w.renderSelection=R;w.clearSelection=s;w.dragStart=t;w.dragStop=ca;w.defaultEventEnd=
pa;w.getHoverListener=function(){return E};w.colContentLeft=ba;w.colContentRight=X;w.dayOfWeekCol=ma;w.dateCell=oa;w.cellDate=aa;w.cellIsAllDay=function(){return true};w.allDayTR=ja;w.allDayBounds=ea;w.getRowCnt=function(){return J};w.getColCnt=function(){return H};w.getColWidth=function(){return K};w.getDaySegmentContainer=function(){return h};pb.call(w,a,b,f);qb.call(w);rb.call(w);Nb.call(w);var ga=w.opt,L=w.trigger,F=w.clearEvents,d=w.renderOverlay,G=w.clearOverlays,O=w.daySelectionMousedown,T=
b.formatDate,ka,C,U,sa,fa,x,J,H,K,A,D,Y,m,h,k,E,S;$a(a.addClass("fc-grid"));k=new sb(function(c,i){var p,N,Z,r=m.find("tr:first td");if(ka)r=l(r.get().reverse());r.each(function(B,P){p=l(P);N=p.offset().left;if(B)Z[1]=N;Z=[N];i[B]=Z});Z[1]=N+p.outerWidth();m.find("tr").each(function(B,P){p=l(P);N=p.offset().top;if(B)Z[1]=N;Z=[N];c[B]=Z});Z[1]=N+p.outerHeight()});E=new tb(k);S=new ub(function(c){return m.find("td:eq("+c+") div div")})}function Nb(){function a(ea,w){u(ea);aa(f(ea),w)}function b(){z();
ca().empty()}function f(ea){var w=ma(),ga=oa(),L=y(j.visStart);ga=V(y(L),ga);var F=l.map(ea,Pa),d,G,O,T,ka,C,U=[];for(d=0;d<w;d++){G=db(eb(ea,F,L,ga));for(O=0;O<G.length;O++){T=G[O];for(ka=0;ka<T.length;ka++){C=T[ka];C.row=d;C.level=O;U.push(C)}}V(L,7);V(ga,7)}return U}function e(ea,w,ga){Q(ea,w);if(ea.editable||ea.editable===ia&&n("editable")){g(ea,w);ga.isEnd&&ja(ea,w,ga)}}function g(ea,w){if(!n("disableDragging")&&w.draggable){var ga=pa(),L;w.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),
revertDuration:n("dragRevertDuration"),start:function(F,d){o("eventDragStart",w,ea,F,d);s(ea,w);ga.start(function(G,O,T,ka){w.draggable("option","revert",!G||!T&&!ka);X();if(G){L=T*7+ka*(n("isRTL")?-1:1);ba(V(y(ea.start),L),V(Pa(ea),L))}else L=0},F,"drag")},stop:function(F,d){ga.stop();X();o("eventDragStop",w,ea,F,d);if(L){w.find("a").removeAttr("href");t(this,ea,L,0,ea.allDay,F,d)}else{l.browser.msie&&w.css("filter","");R(ea,w)}}})}}var j=this;j.renderEvents=a;j.compileDaySegs=f;j.clearEvents=b;
j.bindDaySeg=e;vb.call(j);var n=j.opt,o=j.trigger,u=j.reportEvents,z=j.reportEventClear,Q=j.eventElementHandlers,R=j.showEvents,s=j.hideEvents,t=j.eventDrop,ca=j.getDaySegmentContainer,pa=j.getHoverListener,ba=j.renderDayOverlay,X=j.clearOverlays,ma=j.getRowCnt,oa=j.getColCnt,aa=j.renderDaySegs,ja=j.resizableDayEvent}function Ob(a,b){function f(o,u){u&&V(o,u*7);o=V(y(o),-((o.getDay()-g("firstDay")+7)%7));u=V(y(o),7);var z=y(o),Q=y(u),R=g("weekends");if(!R){va(z);va(Q,-1,true)}e.title=n(z,V(y(Q),-1),
g("titleFormat"));e.start=o;e.end=u;e.visStart=z;e.visEnd=Q;j(R?7:5)}var e=this;e.render=f;wb.call(e,a,b,"agendaWeek");var g=e.opt,j=e.renderAgenda,n=b.formatDates}function Pb(a,b){function f(o,u){if(u){V(o,u);g("weekends")||va(o,u<0?-1:1)}u=y(o,true);var z=V(y(u),1);e.title=n(o,g("titleFormat"));e.start=e.visStart=u;e.end=e.visEnd=z;j(1)}var e=this;e.render=f;wb.call(e,a,b,"agendaDay");var g=e.opt,j=e.renderAgenda,n=b.formatDate}function wb(a,b,f){function e(q){c=q;M=U("theme")?"ui":"fc";$=U("weekends")?
0:1;na=U("firstDay");if(la=U("isRTL")){ha=-1;qa=c-1}else{ha=1;qa=0}ya=fb(U("minTime"));Ca=fb(U("maxTime"));q=la?V(y(C.visEnd),-1):y(C.visStart);var v=y(q),I=Ia(new Date),W=U("columnFormat");if(m){fa();U("weekNumbers")&&m.find("tr:first th:first").text(Y(C.visStart,"w"));m.find("tr:first th").slice(1,-1).each(function(La,wa){l(wa).text(Y(v,W));wa.className=wa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[v.getDay()]);V(v,ha);$&&va(v,ha)});v=y(q);S.find("td").each(function(La,wa){wa.className=wa.className.replace(/^fc-\w+(?= )/,
"fc-"+Ea[v.getDay()]);if(+v==+I)l(wa).removeClass("fc-not-today fc-before-today").addClass(M+"-state-highlight fc-today");else+v<+I?l(wa).addClass("fc-not-today fc-before-today").removeClass(M+"-state-highlight fc-today"):l(wa).addClass("fc-not-today").removeClass(M+"-state-highlight fc-today fc-before-today");V(v,ha);$&&va(v,ha)})}else{var da,ta,Fa=U("slotMinutes")%15==0,ra="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(U("allDaySlot")?
"":" fc-last")+"'><th class='fc-leftmost "+M+"-state-default'>"+(U("weekNumbers")?Y(C.visStart,"w"):"&nbsp;")+"</th>";for(da=0;da<c;da++){ra+="<th class='fc-"+Ea[v.getDay()]+" "+M+"-state-default'>"+Y(v,W)+"</th>";V(v,ha);$&&va(v,ha)}ra+="<th class='"+M+"-state-default'>&nbsp;</th></tr>";if(U("allDaySlot"))ra+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+M+"-state-default'>"+U("allDayText")+"</th><td colspan='"+c+"' class='"+M+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+
M+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+(c+2)+"' class='"+M+"-state-default fc-leftmost'><div/></th></tr>";ra+="</table></div>";m=l(ra).appendTo(a);z(m.find("td"));xb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(m);v=yb();var gb=ua(y(v),Ca);ua(v,ya);ra="<table>";for(da=0;v<gb;da++){ta=v.getMinutes();ra+="<tr class='"+(!da?"fc-first":!ta?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+M+"-state-default'>"+(!Fa||!ta?Y(v,U("axisFormat")):
"&nbsp;")+"</th><td class='fc-slot"+da+" "+M+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";ua(v,U("slotMinutes"));i++}ra+="</table>";h=l("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(k=l("<div style='position:relative;overflow:hidden'>").append(E=l(ra))).appendTo(a);Q(h.find("td"));zb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(k);v=y(q);ra="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";
for(da=0;da<c;da++){ra+="<td class='fc-"+Ea[v.getDay()]+" "+M+"-state-default "+(!da?"fc-leftmost ":"")+(+v==+I?M+"-state-highlight fc-today":+v<+I?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";V(v,ha);$&&va(v,ha)}ra+="</tr></table></div>";S=l(ra).appendTo(a)}}function g(q,v){if(q===ia)q=B;B=q;hb={};var I=q-Da(m);I=Math.min(I,Da(E));Ja(h,I);Sa&&Ja(h,q-Da(m)-1);Z=Da(h.find("tr:first div"))+1;v&&n()}function j(q){r=q;Ta.clear();Aa(h,q);
h.css("overflow","auto").width(q);var v=m.find("tr:first th"),I=m.find("tr.fc-all-day th:last"),W=S.find("td"),da=h[0].clientWidth;Aa(E,da);da=h[0].clientWidth;E.width(da);p=0;var ta=m.find("tr:lt(2) th:first").add(h.find("tr:first th"));ta.width(1);ta.each(function(){p=Math.max(p,l(this).outerWidth())});Aa(ta,p);N=Math.floor((da-p)/c);Aa(v.slice(1,-2),N);Aa(W.slice(0,-1),N);if(q!=da){Aa(v.slice(-2,-1),da-p-N*(c-1));v.slice(-1).show();I.show()}else{h.css("overflow","hidden");v.slice(-2,-1).width("");
v.slice(-1).hide();I.hide()}S.css({top:Da(m.find("tr")),left:p,width:da-p,height:B})}function n(){var q=yb(),v=y(q);v.setHours(U("firstHour"));var I=oa(q,v)+1;q=function(){h.scrollTop(I)};q();setTimeout(q,0)}function o(){P=h.scrollTop()}function u(){h.scrollTop(P)}function z(q){q.click(R).mousedown(A)}function Q(q){q.click(R).mousedown(O)}function R(q){if(!U("selectable")){var v=Math.min(c-1,Math.floor((q.pageX-S.offset().left)/N));v=V(y(C.visStart),v*ha+qa);var I=this.className.match(/fc-slot(\d+)/);
if(I){I=parseInt(I[1],10)*U("slotMinutes");var W=Math.floor(I/60);v.setHours(W);v.setMinutes(I%60+ya);sa("dayClick",this,v,false,q)}else sa("dayClick",this,v,true,q)}}function s(q,v,I){I&&xa.build();var W=y(C.visStart);if(la){I=Ba(v,W)*ha+qa+1;q=Ba(q,W)*ha+qa+1}else{I=Ba(q,W);q=Ba(v,W)}I=Math.max(0,I);q=Math.min(c,q);I<q&&z(t(0,I,0,q-1))}function t(q,v,I,W){q=xa.rect(q,v,I,W,m);return x(q,m)}function ca(q,v){for(var I=y(C.visStart),W=V(y(I),1),da=0;da<c;da++){var ta=new Date(Math.max(I,q)),Fa=new Date(Math.min(W,
v));if(ta<Fa){var ra=da*ha+qa;ra=xa.rect(0,ra,0,ra,k);ta=oa(I,ta);Fa=oa(I,Fa);ra.top=ta;ra.height=Fa-ta;Q(x(ra,k))}V(I,1);V(W,1)}}function pa(q){return p+Ta.left(q)}function ba(q){return p+Ta.right(q)}function X(q){return(q-Math.max(na,$)+c)%c*ha+qa}function ma(q){return{row:Math.floor(Ba(q,C.visStart)/7),col:X(q.getDay())}}function oa(q,v){q=y(q,true);if(v<ua(y(q),ya))return 0;if(v>=ua(y(q),Ca))return Da(k);q=U("slotMinutes");v=v.getHours()*60+v.getMinutes()-ya;var I=Math.floor(v/q),W=hb[I];if(W===
ia)W=hb[I]=h.find("tr:eq("+I+") td div")[0].offsetTop;return Math.max(0,Math.round(W-1+Z*(v%q/q)))}function aa(q){var v=V(y(C.visStart),q.col*ha+qa);q=q.row;U("allDaySlot")&&q--;q>=0&&ua(v,ya+q*U("slotMinutes"));return v}function ja(q){return U("allDaySlot")&&!q.row}function ea(){return{left:p,right:r}}function w(){return m.find("tr.fc-all-day")}function ga(q){var v=y(q.start);if(q.allDay)return v;return ua(v,U("defaultEventMinutes"))}function L(q,v){if(v)return y(q);return ua(y(q),U("slotMinutes"))}
function F(q,v,I){if(I)U("allDaySlot")&&s(q,V(y(v),1),true);else d(q,v)}function d(q,v){var I=U("selectHelper");xa.build();if(I){var W=Ba(q,C.visStart)*ha+qa;if(W>=0&&W<c){W=xa.rect(0,W,0,W,k);var da=oa(q,q),ta=oa(q,v);if(ta>da){W.top=da;W.height=ta-da;W.left+=2;W.width-=5;if(l.isFunction(I)){if(q=I(q,v)){W.position="absolute";W.zIndex=8;za=l(q).css(W).appendTo(k)}}else{za=l(D({title:"",start:q,end:v,className:[],editable:false},W,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));l.browser.msie&&
za.find("span.fc-event-bg").hide();za.css("opacity",U("dragOpacity"))}if(za){Q(za);k.append(za);Aa(za,W.width,true);Ja(za,W.height,true)}}}}else ca(q,v)}function G(){J();if(za){za.remove();za=null}}function O(q){if(q.which==1&&U("selectable")){K(q);var v=this,I;Ma.start(function(W,da){G();if(W&&W.col==da.col&&!ja(W)){da=aa(da);W=aa(W);I=[da,ua(y(da),U("slotMinutes")),W,ua(y(W),U("slotMinutes"))].sort(ib);d(I[0],I[3])}else I=null},q);l(document).one("mouseup",function(W){Ma.stop();if(I){+I[0]==+I[1]&&
sa("dayClick",v,I[0],false,W);H(I[0],I[3],false,W)}})}}function T(q,v){Ma.start(function(I){J();if(I)if(ja(I))t(I.row,I.col,I.row,I.col);else{I=aa(I);var W=ua(y(I),U("defaultEventMinutes"));ca(I,W)}},v)}function ka(q,v,I){var W=Ma.stop();J();W&&sa("drop",q,aa(W),ja(W),v,I)}var C=this;C.renderAgenda=e;C.setWidth=j;C.setHeight=g;C.beforeHide=o;C.afterShow=u;C.defaultEventEnd=ga;C.timePosition=oa;C.dayOfWeekCol=X;C.dateCell=ma;C.cellDate=aa;C.cellIsAllDay=ja;C.allDayTR=w;C.allDayBounds=ea;C.getHoverListener=
function(){return Ma};C.colContentLeft=pa;C.colContentRight=ba;C.getDaySegmentContainer=function(){return xb};C.getSlotSegmentContainer=function(){return zb};C.getMinMinute=function(){return ya};C.getMaxMinute=function(){return Ca};C.getBodyContent=function(){return k};C.getRowCnt=function(){return 1};C.getColCnt=function(){return c};C.getColWidth=function(){return N};C.getSlotHeight=function(){return Z};C.defaultSelectionEnd=L;C.renderDayOverlay=s;C.renderSelection=F;C.clearSelection=G;C.dragStart=
T;C.dragStop=ka;pb.call(C,a,b,f);qb.call(C);rb.call(C);Qb.call(C);var U=C.opt,sa=C.trigger,fa=C.clearEvents,x=C.renderOverlay,J=C.clearOverlays,H=C.reportSelection,K=C.unselect,A=C.daySelectionMousedown,D=C.slotSegHtml,Y=b.formatDate,m,h,k,E,S,c,i=0,p,N,Z,r,B,P,M,na,$,la,ha,qa,ya,Ca,xa,Ma,Ta,hb={},za,xb,zb;$a(a.addClass("fc-agenda"));xa=new sb(function(q,v){function I(wa){return Math.max(ra,Math.min(gb,wa))}var W,da,ta;S.find("td").each(function(wa,Rb){W=l(Rb);da=W.offset().left;if(wa)ta[1]=da;ta=
[da];v[wa]=ta});ta[1]=da+W.outerWidth();if(U("allDaySlot")){W=m.find("td");da=W.offset().top;q[0]=[da,da+W.outerHeight()]}for(var Fa=k.offset().top,ra=h.offset().top,gb=ra+h.outerHeight(),La=0;La<i;La++)q.push([I(Fa+Z*La),I(Fa+Z*(La+1))])});Ma=new tb(xa);Ta=new ub(function(q){return S.find("td:eq("+q+") div div")})}function Qb(){function a(h,k){ba(h);var E,S=h.length,c=[],i=[];for(E=0;E<S;E++)h[E].allDay?c.push(h[E]):i.push(h[E]);if(t("allDaySlot")){G(f(c),k);oa()}j(e(i),k)}function b(){X();aa().empty();
ja().empty()}function f(h){h=db(eb(h,l.map(h,Pa),s.visStart,s.visEnd));var k,E=h.length,S,c,i,p=[];for(k=0;k<E;k++){S=h[k];for(c=0;c<S.length;c++){i=S[c];i.row=0;i.level=k;p.push(i)}}return p}function e(h){var k=T(),E=ga(),S=w(),c=ua(y(s.visStart),E),i=l.map(h,g),p,N,Z,r,B,P,M=[];for(p=0;p<k;p++){N=db(eb(h,i,c,ua(y(c),S-E)));Sb(N);for(Z=0;Z<N.length;Z++){r=N[Z];for(B=0;B<r.length;B++){P=r[B];P.col=p;P.level=Z;M.push(P)}}V(c,1,true)}return M}function g(h){return h.end?y(h.end):ua(y(h.start),t("defaultEventMinutes"))}
function j(h,k){var E,S=h.length,c,i,p,N,Z,r,B,P,M,na,$="",la,ha,qa={},ya={},Ca=ja(),xa;E=T();if(la=t("isRTL")){ha=-1;xa=E-1}else{ha=1;xa=0}for(E=0;E<S;E++){c=h[E];i=c.event;p="fc-event fc-event-vert ";if(c.isStart)p+="fc-corner-top ";if(c.isEnd)p+="fc-corner-bottom ";N=L(c.start,c.start);Z=L(c.start,c.end);r=c.col;B=c.level;P=c.forward||0;M=F(r*ha+xa);na=d(r*ha+xa)-M;na=Math.min(na-6,na*0.95);r=B?na/(B+P+1):P?(na/(P+1)-6)*2:na;B=M+na/(B+P+1)*B*ha+(la?na-r:0);c.top=N;c.left=B;c.outerWidth=r;c.outerHeight=
Z-N;$+=n(i,c,p)}Ca[0].innerHTML=$;la=Ca.children();for(E=0;E<S;E++){c=h[E];i=c.event;$=l(la[E]);ha=ca("eventRender",i,i,$);if(ha===false)$.remove();else{if(ha&&ha!==true){$.remove();$=l(ha).css({position:"absolute",top:c.top,left:c.left}).appendTo(Ca)}c.element=$;if(i._id===k)u(i,$,c);else $[0]._fci=E;sa(i,$)}}Ab(Ca,h,u);for(E=0;E<S;E++){c=h[E];if($=c.element){i=qa[k=c.key=Bb($[0])];c.vsides=i===ia?(qa[k]=Va($[0],true)):i;i=ya[k];c.hsides=i===ia?(ya[k]=jb($[0],true)):i;k=$.find("span.fc-event-title");
if(k.length)c.titleTop=k[0].offsetTop}}for(E=0;E<S;E++){c=h[E];if($=c.element){$[0].style.width=Math.max(0,c.outerWidth-c.hsides)+"px";qa=Math.max(0,c.outerHeight-c.vsides);$[0].style.height=qa+"px";i=c.event;if(c.titleTop!==ia&&qa-c.titleTop<10){$.find("span.fc-event-time").text(Y(i.start,t("timeFormat"))+" - "+i.title);$.find("span.fc-event-title").remove()}ca("eventAfterRender",i,i,$)}}}function n(h,k,E){var S="";if(h.color)S+="color:"+h.color+";";if(h.bgColor)S+="background-color:"+h.bgColor+
";";if(h.borderColor)S+="border-color:"+h.borderColor+";";return"<div class='"+E+h.className.join(" ")+"' style='position:absolute;z-index:8;top:"+k.top+"px;left:"+k.left+"px'><a"+(h.url?" href='"+Na(h.url)+"'":"")+(S?" style='"+S+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Na(m(h.start,h.end,t("timeFormat")))+"</span><span class='fc-event-title'>"+Na(h.title)+"</span></a>"+((h.resizable||h.resizable===ia)&&(h.editable||h.editable===ia&&t("editable"))&&!t("disableResizing")&&
l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":"")+"</div>"}function o(h,k,E){ma(h,k);if(h.editable||h.editable===ia&&t("editable")){z(h,k,E.isStart);E.isEnd&&O(h,k,E)}}function u(h,k,E){ma(h,k);if(h.editable||h.editable===ia&&t("editable")){var S=k.find("span.fc-event-time");Q(h,k,S);E.isEnd&&R(h,k,S)}}function z(h,k,E){if(!t("disableDragging")&&k.draggable){var S,c,i=true,p,N=t("isRTL")?-1:1,Z=ea(),r=ka(),B=C(),P=ga();k.draggable({zIndex:9,opacity:t("dragOpacity","month"),
revertDuration:t("dragRevertDuration"),start:function(na,$){ca("eventDragStart",k,h,na,$);x(h,k);S=Ra(k);Z.start(function(la,ha,qa,ya){A();if(la){c=false;p=ya*N;if(la.row)if(E){if(i){Aa(k,r-10);Ja(k,B*Math.round((h.end?(h.end-h.start)/Tb:t("defaultEventMinutes"))/t("slotMinutes")));k.draggable("option","grid",[r,1]);i=false}}else c=true;else{K(V(y(h.start),p),V(Pa(h),p));M()}c=c||i&&!p}else c=true;k.draggable("option","revert",c)},na,"drag")},stop:function(na,$){Z.stop();A();ca("eventDragStop",k,
h,na,$);if(c){M();l.browser.msie&&k.css("filter","");fa(h,k)}else{k.find("a").removeAttr("href");var la=0;i||(la=Math.round((k.offset().top-U().offset().top)/B)*t("slotMinutes")+P-(h.start.getHours()*60+h.start.getMinutes()));J(this,h,p,la,i,na,$)}}});function M(){if(!i){Aa(k,S);k.height("");k.draggable("option","grid",null);i=true}}}}function Q(h,k,E){if(!t("disableDragging")&&k.draggable){var S,c=false,i,p,N,Z=t("isRTL")?-1:1,r=ea(),B=T(),P=ka(),M=C();k.draggable({zIndex:9,scroll:false,grid:[P,
M],axis:B==1?"y":false,opacity:t("dragOpacity"),revertDuration:t("dragRevertDuration"),start:function(la,ha){ca("eventDragStart",k,h,la,ha);x(h,k);l.browser.msie&&k.find("span.fc-event-bg").hide();S=k.position();p=N=0;r.start(function(qa,ya,Ca,xa){k.draggable("option","revert",!qa);A();if(qa){i=xa*Z;if(t("allDaySlot")&&!qa.row){if(!c){c=true;E.hide();k.draggable("option","grid",null)}K(V(y(h.start),i),V(Pa(h),i))}else $()}},la,"drag")},drag:function(la,ha){p=Math.round((ha.position.top-S.top)/M)*
t("slotMinutes");if(p!=N){c||na(p);N=p}},stop:function(la,ha){var qa=r.stop();A();ca("eventDragStop",k,h,la,ha);if(qa&&(i||p||c))J(this,h,i,c?0:p,c,la,ha);else{$();k.css(S);na(0);l.browser.msie&&k.css("filter","").find("span.fc-event-bg").css("display","");fa(h,k)}}});function na(la){var ha=ua(y(h.start),la),qa;if(h.end)qa=ua(y(h.end),la);E.text(m(ha,qa,t("timeFormat")))}function $(){if(c){E.css("display","");k.draggable("option","grid",[P,M]);c=false}}}}function R(h,k,E){if(!t("disableResizing")&&
k.resizable){var S,c,i=C();k.resizable({handles:{s:"div.ui-resizable-s"},grid:i,start:function(p,N){S=c=0;x(h,k);l.browser.msie&&l.browser.version=="6.0"&&k.css("overflow","hidden");k.css("z-index",9);ca("eventResizeStart",this,h,p,N)},resize:function(p,N){S=Math.round((Math.max(i,Da(k))-N.originalSize.height)/i);if(S!=c){E.text(m(h.start,!S&&!h.end?null:ua(pa(h),t("slotMinutes")*S),t("timeFormat")));c=S}},stop:function(p,N){ca("eventResizeStop",this,h,p,N);if(S)H(this,h,0,t("slotMinutes")*S,p,N);
else{k.css("z-index",8);fa(h,k)}}})}}var s=this;s.renderEvents=a;s.compileDaySegs=f;s.clearEvents=b;s.slotSegHtml=n;s.bindDaySeg=o;vb.call(s);var t=s.opt,ca=s.trigger,pa=s.eventEnd,ba=s.reportEvents,X=s.reportEventClear,ma=s.eventElementHandlers,oa=s.setHeight,aa=s.getDaySegmentContainer,ja=s.getSlotSegmentContainer,ea=s.getHoverListener,w=s.getMaxMinute,ga=s.getMinMinute,L=s.timePosition,F=s.colContentLeft,d=s.colContentRight,G=s.renderDaySegs,O=s.resizableDayEvent,T=s.getColCnt,ka=s.getColWidth,
C=s.getSlotHeight,U=s.getBodyContent,sa=s.reportEventElement,fa=s.showEvents,x=s.hideEvents,J=s.eventDrop,H=s.eventResize,K=s.renderDayOverlay,A=s.clearOverlays,D=s.calendar,Y=D.formatDate,m=D.formatDates}function Sb(a){var b,f,e,g,j,n;for(b=a.length-1;b>0;b--){g=a[b];for(f=0;f<g.length;f++){j=g[f];for(e=0;e<a[b-1].length;e++){n=a[b-1][e];if(Cb(j,n))n.forward=Math.max(n.forward||0,(j.forward||0)+1)}}}}function pb(a,b,f){function e(L,F){L=ga[L];if(typeof L=="object")return Za(L,F||f);return L}function g(L,
F){return b.trigger.apply(b,[L,F||X].concat(Array.prototype.slice.call(arguments,2),[X]))}function j(L){ja={};var F,d=L.length,G;for(F=0;F<d;F++){G=L[F];if(ja[G._id])ja[G._id].push(G);else ja[G._id]=[G]}}function n(L){return L.end?y(L.end):ma(L)}function o(L,F){ea.push(F);if(w[L._id])w[L._id].push(F);else w[L._id]=[F]}function u(){ea=[];w={}}function z(L,F){F.click(function(d){if(!F.hasClass("ui-draggable-dragging")&&!F.hasClass("ui-resizable-resizing"))return g("eventClick",this,L,d)}).hover(function(d){g("eventMouseover",
this,L,d)},function(d){g("eventMouseout",this,L,d)})}function Q(L,F){s(L,F,"show")}function R(L,F){s(L,F,"hide")}function s(L,F,d){L=w[L._id];var G,O=L.length;for(G=0;G<O;G++)if(!F||L[G][0]!=F[0])L[G][d]()}function t(L,F,d,G,O,T,ka){var C=F.allDay,U=F._id;pa(ja[U],d,G,O);g("eventDrop",L,F,d,G,O,function(){pa(ja[U],-d,-G,C);aa(U)},T,ka);aa(U)}function ca(L,F,d,G,O,T){var ka=F._id;ba(ja[ka],d,G);g("eventResize",L,F,d,G,function(){ba(ja[ka],-d,-G);aa(ka)},O,T);aa(ka)}function pa(L,F,d,G){d=d||0;for(var O,
T=L.length,ka=0;ka<T;ka++){O=L[ka];if(G!==ia)O.allDay=G;ua(V(O.start,F,true),d);if(O.end)O.end=ua(V(O.end,F,true),d);oa(O,ga)}}function ba(L,F,d){d=d||0;for(var G,O=L.length,T=0;T<O;T++){G=L[T];G.end=ua(V(n(G),F,true),d);oa(G,ga)}}var X=this;X.element=a;X.calendar=b;X.name=f;X.opt=e;X.trigger=g;X.reportEvents=j;X.eventEnd=n;X.reportEventElement=o;X.reportEventClear=u;X.eventElementHandlers=z;X.showEvents=Q;X.hideEvents=R;X.eventDrop=t;X.eventResize=ca;var ma=X.defaultEventEnd,oa=b.normalizeEvent,
aa=b.reportEventChange,ja={},ea=[],w={},ga=b.options}function vb(){function a(x,J){var H=T(),K=ja(),A=ea(),D=0,Y,m,h=x.length,k,E;H[0].innerHTML=f(x);e(x,H.children());g(x);j(x,H,J);n(x);o(x);u(x);J=z();for(H=0;H<K;H++){Y=[];for(m=0;m<A;m++)Y[m]=0;for(;D<h&&(k=x[D]).row==H;){m=Db(Y.slice(k.startCol,k.endCol));k.top=m;m+=k.outerHeight;for(E=k.startCol;E<k.endCol;E++)Y[E]=m;D++}J[H].height(Db(Y))}R(x,Q(J))}function b(x,J,H){var K=l("<div/>"),A=T(),D=x.length,Y;K[0].innerHTML=f(x);K=K.children();A.append(K);
e(x,K);n(x);o(x);u(x);R(x,Q(z()));K=[];for(A=0;A<D;A++)if(Y=x[A].element){x[A].row===J&&Y.css("top",H);K.push(Y[0])}return l(K)}function f(x){var J=ca("isRTL"),H,K=x.length,A,D,Y;H=ga();var m=H.left,h=H.right,k=[],E,S,c="";for(H=0;H<K;H++){A=x[H];D=A.event;Y="fc-event fc-event-hori ";if(J){if(A.isStart)Y+="fc-corner-right ";if(A.isEnd)Y+="fc-corner-left ";k[0]=d(A.end.getDay()-1);k[1]=d(A.start.getDay());E=A.isEnd?L(k[0]):m;S=A.isStart?F(k[1]):h}else{if(A.isStart)Y+="fc-corner-left ";if(A.isEnd)Y+=
"fc-corner-right ";k[0]=d(A.start.getDay());k[1]=d(A.end.getDay()-1);E=A.isStart?L(k[0]):m;S=A.isEnd?F(k[1]):h}var i="";if(D.color)i="color:"+D.color+";";if(D.bgColor)i+="background-color:"+D.bgColor+";";if(D.borderColor)i+="border-color:"+D.borderColor+";";c+="<div class='"+Y+D.className.join(" ")+"' style='position:absolute;z-index:8;left:"+E+"px'><a"+(D.url?" href='"+Na(D.url)+"'":"")+(i?" style='"+i+"'":"")+">"+(!D.allDay&&A.isStart?"<span class='fc-event-time'>"+Na(C(D.start,D.end,ca("timeFormat")))+
"</span>":"")+"<span class='fc-event-title'>"+Na(D.title)+"</span></a>"+(A.isEnd&&(D.editable||D.editable===ia&&ca("editable"))&&!ca("disableResizing")?"<div class='ui-resizable-handle ui-resizable-"+(J?"w":"e")+"'></div>":"")+"</div>";A.left=E;A.outerWidth=S-E;k.sort(ib);A.startCol=k[0];A.endCol=k[1]+1}return c}function e(x,J){var H,K=x.length,A,D,Y;for(H=0;H<K;H++){A=x[H];D=A.event;Y=l(J[H]);D=pa("eventRender",D,D,Y);if(D===false)Y.remove();else{if(D&&D!==true){D=l(D).css({position:"absolute",left:A.left});
Y.replaceWith(D);Y=D}A.element=Y}}}function g(x){var J,H=x.length,K,A;for(J=0;J<H;J++){K=x[J];(A=K.element)&&X(K.event,A)}}function j(x,J,H){var K,A=x.length,D,Y,m;for(K=0;K<A;K++){D=x[K];if(Y=D.element){m=D.event;if(m._id===H)ka(m,Y,D);else Y[0]._fci=K}}Ab(J,x,ka)}function n(x){var J,H=x.length,K,A,D,Y,m={};for(J=0;J<H;J++){K=x[J];if(A=K.element){D=K.key=Bb(A[0]);Y=m[D];if(Y===ia)Y=m[D]=jb(A[0],true);K.hsides=Y}}}function o(x){var J,H=x.length,K,A;for(J=0;J<H;J++){K=x[J];if(A=K.element)A[0].style.width=
Math.max(0,K.outerWidth-K.hsides)+"px"}}function u(x){var J,H=x.length,K,A,D,Y,m={};for(J=0;J<H;J++){K=x[J];if(A=K.element){D=K.key;Y=m[D];if(Y===ia)Y=m[D]=Eb(A[0]);K.outerHeight=A[0].offsetHeight+Y}}}function z(){var x,J=ja(),H=[];for(x=0;x<J;x++)H[x]=w(x).find("td:first div.fc-day-content > div");return H}function Q(x){var J,H=x.length,K=[];for(J=0;J<H;J++)K[J]=x[J][0].offsetTop;return K}function R(x,J){var H,K=x.length,A,D;for(H=0;H<K;H++){A=x[H];if(D=A.element){D[0].style.top=J[A.row]+(A.top||
0)+"px";A=A.event;pa("eventAfterRender",A,A,D)}}}function s(x,J,H){if(!ca("disableResizing")&&H.isEnd&&J.resizable){var K=ca("isRTL"),A=K?"w":"e";J.find("div.ui-resizable-"+A).mousedown(function(D){function Y(r){pa("eventResizeStop",this,x,r);l("body").css("cursor","auto");m.stop();sa();i&&aa(this,x,i,0,r)}if(D.which==1){var m=t.getHoverListener(),h=ja(),k=ea(),E=K?-1:1,S=K?k:0,c=J.css("top"),i,p,N=l.extend({},x),Z=G(x.start);fa();l("body").css("cursor",A+"-resize").one("mouseup",Y);pa("eventResizeStart",
this,x,D);m.start(function(r,B){if(r){var P=Math.max(Z.row,r.row);r=r.col;if(h==1)P=0;if(P==Z.row)r=K?Math.min(Z.col,r):Math.max(Z.col,r);i=P*7+r*E+S-(B.row*7+B.col*E+S);B=V(ba(x),i,true);if(i){N.end=B;P=p;p=b(O([N]),H.row,c);p.find("*").css("cursor",A+"-resize");P&&P.remove();oa(x)}else if(p){ma(x);p.remove();p=null}sa();U(x.start,V(y(B),1))}},D)}})}}var t=this;t.renderDaySegs=a;t.resizableDayEvent=s;var ca=t.opt,pa=t.trigger,ba=t.eventEnd,X=t.reportEventElement,ma=t.showEvents,oa=t.hideEvents,aa=
t.eventResize,ja=t.getRowCnt,ea=t.getColCnt,w=t.allDayTR,ga=t.allDayBounds,L=t.colContentLeft,F=t.colContentRight,d=t.dayOfWeekCol,G=t.dateCell,O=t.compileDaySegs,T=t.getDaySegmentContainer,ka=t.bindDaySeg,C=t.calendar.formatDates,U=t.renderDayOverlay,sa=t.clearOverlays,fa=t.clearSelection}function rb(){function a(R,s,t){b();s||(s=o(R,t));u(R,s,t);f(R,s,t)}function b(R){if(Q){Q=false;z();n("unselect",null,R)}}function f(R,s,t,ca){Q=true;n("select",null,R,s,t,ca)}function e(R){var s=g.cellDate,t=g.cellIsAllDay,
ca=g.getHoverListener();if(R.which==1&&j("selectable")){b(R);var pa=this,ba;ca.start(function(X,ma){z();if(X&&t(X)){ba=[s(ma),s(X)].sort(ib);u(ba[0],ba[1],true)}else ba=null},R);l(document).one("mouseup",function(X){ca.stop();if(ba){+ba[0]==+ba[1]&&n("dayClick",pa,ba[0],true,X);f(ba[0],ba[1],true,X)}})}}var g=this;g.select=a;g.unselect=b;g.reportSelection=f;g.daySelectionMousedown=e;var j=g.opt,n=g.trigger,o=g.defaultSelectionEnd,u=g.renderSelection,z=g.clearSelection,Q=false;j("selectable")&&j("unselectAuto")&&
l(document).mousedown(function(R){var s=j("unselectCancel");if(s)if(l(R.target).parents(s).length)return;b(R)})}function qb(){function a(j,n){var o=g.shift();o||(o=l("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=n[0]&&o.appendTo(n);e.push(o.css(j).show());return o}function b(){for(var j;j=e.shift();)g.push(j.hide().unbind())}var f=this;f.renderOverlay=a;f.clearOverlays=b;var e=[],g=[]}function sb(a){var b=this,f,e;b.build=function(){f=[];e=[];a(f,e)};b.cell=
function(g,j){var n=f.length,o=e.length,u,z=-1,Q=-1;for(u=0;u<n;u++)if(j>=f[u][0]&&j<f[u][1]){z=u;break}for(u=0;u<o;u++)if(g>=e[u][0]&&g<e[u][1]){Q=u;break}return z>=0&&Q>=0?{row:z,col:Q}:null};b.rect=function(g,j,n,o,u){u=u.offset();return{top:f[g][0]-u.top,left:e[j][0]-u.left,width:e[o][1]-e[j][0],height:f[n][1]-f[g][0]}}}function tb(a){function b(o){o=a.cell(o.pageX,o.pageY);if(!o!=!n||o&&(o.row!=n.row||o.col!=n.col)){if(o){j||(j=o);g(o,j,o.row-j.row,o.col-j.col)}else g(o,j);n=o}}var f=this,e,
g,j,n;f.start=function(o,u,z){g=o;j=n=null;a.build();b(u);e=z||"mousemove";l(document).bind(e,b)};f.stop=function(){l(document).unbind(e,b);return n}}function ub(a){function b(n){return e[n]=e[n]||a(n)}var f=this,e={},g={},j={};f.left=function(n){return g[n]=g[n]===ia?b(n).position().left:g[n]};f.right=function(n){return j[n]=j[n]===ia?f.left(n)+Ra(b(n)):j[n]};f.clear=function(){e={};g={};j={}}}function Wa(a,b,f){a.setFullYear(a.getFullYear()+b);f||Ia(a);return a}function Xa(a,b,f){if(+a){b=a.getMonth()+
b;var e=y(a);e.setDate(1);e.setMonth(b);a.setMonth(b);for(f||Ia(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}function V(a,b,f){if(+a){b=a.getDate()+b;var e=y(a);e.setHours(9);e.setDate(b);a.setDate(b);f||Ia(a);kb(a,e)}return a}function kb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Ub)}function ua(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ia(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function y(a,b){if(b)return Ia(new Date(+a));
return new Date(+a)}function yb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function va(a,b,f){for(b=b||1;!a.getDay()||f&&a.getDay()==1||!f&&a.getDay()==6;)V(a,b);return a}function Ba(a,b){return Math.round((y(a,true)-y(b,true))/ob)}function nb(a,b,f,e){if(b!==ia&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(f!==ia&&f!=a.getMonth()){a.setDate(1);a.setMonth(f)}e!==ia&&a.setDate(e)}function ab(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*
1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a,10)*1E3);if(b===ia)b=true;return Fb(a,b)||(a?new Date(a):null)}return null}function Fb(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var f=new Date(a[1],0,1);if(b||!a[14]){b=new Date(a[1],0,1,9,0);if(a[3]){f.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){f.setDate(a[5]);b.setDate(a[5])}kb(f,b);a[7]&&f.setHours(a[7]);
a[8]&&f.setMinutes(a[8]);a[10]&&f.setSeconds(a[10]);a[12]&&f.setMilliseconds(Number("0."+a[12])*1E3);kb(f,b)}else{f.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);f.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1;f=new Date(+f+b*60*1E3)}return f}function fb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);if(a[3]){b%=
12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2],10):0)}}function Ka(a,b,f){return Ya(a,null,b,f)}function Ya(a,b,f,e){e=e||Qa;var g=a,j=b,n,o=f.length,u,z,Q,R="";for(n=0;n<o;n++){u=f.charAt(n);if(u=="'")for(z=n+1;z<o;z++){if(f.charAt(z)=="'"){if(g){R+=z==n+1?"'":f.substring(n+1,z);n=z}break}}else if(u=="(")for(z=n+1;z<o;z++){if(f.charAt(z)==")"){n=Ka(g,f.substring(n+1,z),e);if(parseInt(n.replace(/\D/,""),10))R+=n;n=z;break}}else if(u=="[")for(z=n+1;z<o;z++){if(f.charAt(z)==
"]"){u=f.substring(n+1,z);n=Ka(g,u,e);if(n!=Ka(j,u,e))R+=n;n=z;break}}else if(u=="{"){g=b;j=a}else if(u=="}"){g=a;j=b}else{for(z=o;z>n;z--)if(Q=Vb[f.substring(n,z)]){if(g)R+=Q(g,e);n=z-1;break}if(z==n)if(g)R+=u}}return R}function Pa(a){return a.end?Wb(a.end,a.allDay):V(y(a.start),1)}function Wb(a,b){a=y(a);return b||a.getHours()||a.getMinutes()?V(a,1):Ia(a)}function Xb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-
b.event.start)}function Cb(a,b){return a.end>b.start&&a.start<b.end}function eb(a,b,f,e){var g=[],j,n=a.length,o,u,z,Q,R;for(j=0;j<n;j++){o=a[j];u=o.start;z=b[j];if(z>f&&u<e){if(u<f){u=y(f);Q=false}else{u=u;Q=true}if(z>e){z=y(e);R=false}else{z=z;R=true}g.push({event:o,start:u,end:z,isStart:Q,isEnd:R,msLength:z-u})}}return g.sort(Xb)}function db(a){var b=[],f,e=a.length,g,j,n,o;for(f=0;f<e;f++){g=a[f];for(j=0;;){n=false;if(b[j])for(o=0;o<b[j].length;o++)if(Cb(b[j][o],g)){n=true;break}if(n)j++;else break}if(b[j])b[j].push(g);
else b[j]=[g]}return b}function Ab(a,b,f){a.unbind("mouseover").mouseover(function(e){for(var g=e.target,j;g!=this;){j=g;g=g.parentNode}if((g=j._fci)!==ia){j._fci=ia;j=b[g];f(j.event,j.element,j);l(e.target).trigger(e)}e.stopPropagation()})}function Aa(a,b,f){a.each(function(e,g){g.style.width=Math.max(0,b-jb(g,f))+"px"})}function Ja(a,b,f){a.each(function(e,g){g.style.height=Math.max(0,b-Va(g,f))+"px"})}function jb(a,b){return(parseFloat(l.curCSS(a,"paddingLeft",true))||0)+(parseFloat(l.curCSS(a,
"paddingRight",true))||0)+(parseFloat(l.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(l.curCSS(a,"borderRightWidth",true))||0)+(b?Yb(a):0)}function Yb(a){return(parseFloat(l.curCSS(a,"marginLeft",true))||0)+(parseFloat(l.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(l.curCSS(a,"paddingTop",true))||0)+(parseFloat(l.curCSS(a,"paddingBottom",true))||0)+(parseFloat(l.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(l.curCSS(a,"borderBottomWidth",true))||0)+(b?Eb(a):0)}function Eb(a){return(parseFloat(l.curCSS(a,
"marginTop",true))||0)+(parseFloat(l.curCSS(a,"marginBottom",true))||0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Da(a){if(Sa)return a.innerHeight();return a.height()}function Ra(a){if(Sa)return a.innerWidth();return a.width()}function mb(){}function ib(a,b){return a-b}function Db(a){return Math.max.apply(Math,a)}function Oa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==ia)return a[b];b=b.split(/(?=[A-Z])/);for(var f=b.length-
1,e;f>=0;f--){e=a[b[f].toLowerCase()];if(e!==ia)return e}return a[""]}function Na(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Bb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function $a(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Qa={defaultView:"month",aspectRatio:1.35,
header:{left:"title",center:"",right:"today prev,next"},weekends:true,allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan",
"Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Zb=
{header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ga=l.fullCalendar={version:"1.4.11-gcalendar"},Ha=Ga.views={},Sa=false;if(l.ui&&l.browser.msie&&parseInt(l.browser.version,10)>=9){Sa=true;var $b=l.ui.mouse.prototype._mouseMove;l.ui.mouse.prototype._mouseMove=function(a){a.button=1;$b.apply(this,[a])}}l.fn.fullCalendar=
function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,1),f;this.each(function(){var g=l.data(this,"fullCalendar");if(g&&l.isFunction(g[a])){g=g[a].apply(g,b);if(f===ia)f=g;a=="destroy"&&l.removeData(this,"fullCalendar")}});if(f!==ia)return f;return this}var e=a.eventSources||[];delete a.eventSources;if(a.events){e.push(a.events);delete a.events}a=l.extend(true,{},Qa,a.isRTL||a.isRTL===ia&&Qa.isRTL?Zb:{},a);this.each(function(g,j){g=l(j);j=new Gb(g,a,e);g.data("fullCalendar",
j);j.render()});return this};var Jb=1;Ha.month=Kb;Ha.basicWeek=Lb;Ha.basicDay=Mb;var cb;lb({weekMode:"fixed"});Ha.agendaWeek=Ob;Ha.agendaDay=Pb;lb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ga.addDays=V;Ga.cloneDate=y;Ga.parseDate=ab;Ga.parseISO8601=Fb;Ga.parseTime=fb;Ga.formatDate=Ka;Ga.formatDates=Ya;var Ea=["sun","mon","tue","wed","thu","fri","sat"],
ob=864E5,Ub=36E5,Tb=6E4,Vb={s:function(a){return a.getSeconds()},ss:function(a){return Oa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return Oa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Oa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Oa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Oa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},
M:function(a){return a.getMonth()+1},MM:function(a){return Oa(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ka(a,
"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st","nd","rd"][a%10-1]||"th"},w:function(a){return a.getWeek()}};if(Date.prototype.getWeek===ia)Date.prototype.getWeek=function(){var a,b,f;f=new Date(this.getFullYear(),0,4,this.getHours());b=Math.round((this-f)/864E5);a=(f.getDay()+6)%7;a=Math.floor((b+a)/7)+1;b=(this.getDay()+6)%7;if(this.getMonth()==11&&this.getDate()>=28){f.setFullYear(this.getFullYear()+1);a=(f.getDay()+6)%7;if(b<a)return 1;f=new Date(this-
6048E5);a=f.getWeek()+1}if(a===0&&b>3&&this.getMonth()==0){f=new Date(this-6048E5);a=f.getWeek()+1}return a}})(jQuery);

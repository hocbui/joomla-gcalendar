/*

 FullCalendar v1.4.10-gcalendar
 http://arshaw.com/fullcalendar/

 with some adaptations for joomla gcalendar component
 http://github.com/tpruvot/fullcalendar

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2010 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Tue Apr 12 15:58:42 2011 +0200

*/
(function(l,ia){function lb(a){l.extend(true,Qa,a)}function Gb(a,b,f){function e(q){if(C){t();s();ja();Q(q)}else g()}function g(){Y=b.theme?"ui":"fc";a.addClass("fc");b.isRTL&&a.addClass("fc-rtl");b.theme&&a.addClass("ui-widget");C=l("<div class='fc-content "+Y+"-widget-content' style='position:relative'/>").prependTo(a);L=new Hb(ga,b);(A=L.render())&&a.prepend(A);z(b.defaultView);l(window).resize(qa);u()||j()}function j(){setTimeout(function(){!m.start&&u()&&Q()},0)}function n(){l(window).unbind("resize",
qa);L.destroy();C.remove();a.removeClass("fc fc-rtl fc-ui-widget")}function o(){return H.offsetWidth!==0}function u(){return l("body")[0].offsetWidth!==0}function z(q){if(!m||q!=m.name){i++;w();var D=m,O;if(D){(D.beforeHide||mb)();Ua(C,Da(C));D.element.hide()}else Ua(C,1);C.css("overflow","hidden");if(m=h[q])m.element.show();else m=h[q]=new Ha[q](O=S=l("<div class='fc-view fc-view-"+q+"' style='position:absolute'/>").appendTo(C),ga);D&&L.deactivateButton(D.name);L.activateButton(q);Q();C.css("overflow",
"");D&&Ua(C,1);O||(m.afterShow||mb)();i--}}function Q(q){if(o()){i++;w();E===ia&&t();var D=false;if(!m.start||q||r<m.start||r>=m.end){m.render(r,q||0);ca(true);D=true}else if(m.sizeDirty){m.clearEvents();ca();D=true}else if(m.eventsDirty){m.clearEvents();D=true}m.sizeDirty=false;m.eventsDirty=false;ba(D);k=a.outerWidth();L.updateTitle(m.title);q=new Date;q>=m.start&&q<m.end?L.disableButton("today"):L.enableButton("today");i--;m.trigger("viewDisplay",H)}}function R(){s();if(o()){t();ca();w();m.clearEvents();
m.renderEvents(M);m.sizeDirty=false}}function s(){l.each(h,function(q,D){D.sizeDirty=true})}function t(){E=b.contentHeight?b.contentHeight:b.height?b.height-Va(C[0])-(A?Da(A):0):Math.round(Ra(C)/Math.max(b.aspectRatio,0.5))}function ca(q){i++;m.setHeight(E,q);if(S){S.css("position","relative");S=null}m.setWidth(Ra(C),q);i--}function qa(){if(!i)if(m.start){var q=++c;setTimeout(function(){if(q==c&&!i&&o())if(k!=(k=a.outerWidth())){i++;R();m.trigger("windowResize",H);i--}},200)}else j()}function ba(q){if(!b.lazyFetching||
x(m.visStart,m.visEnd))X();else q&&aa()}function X(){K(m.visStart,m.visEnd)}function la(q){M=q;aa()}function oa(q){aa(q)}function aa(q){ja();if(o()){m.clearEvents();m.renderEvents(M,q);m.eventsDirty=false}}function ja(){l.each(h,function(q,D){D.eventsDirty=true})}function ea(q,D,O){m.select(q,D,O===ia?true:O)}function w(){m&&m.unselect()}function ha(){Q(-1)}function N(){Q(1)}function F(){Wa(r,-1);Q()}function d(){Wa(r,1);Q()}function G(){r=new Date;Q()}function P(q,D,O){if(q instanceof Date)r=y(q);
else nb(r,q,D,O);Q()}function T(q,D,O){q!==ia&&Wa(r,q);D!==ia&&Xa(r,D);O!==ia&&V(r,O);Q()}function ka(){return y(r)}function B(){return m}function U(q,D){if(D===ia)return b[q];if(q=="height"||q=="contentHeight"||q=="aspectRatio"){b[q]=D;R()}}function sa(q,D){if(b[q])return b[q].apply(D||H,Array.prototype.slice.call(arguments,2))}var ga=this;ga.options=b;ga.render=e;ga.destroy=n;ga.refetchEvents=X;ga.reportEvents=la;ga.reportEventChange=oa;ga.changeView=z;ga.select=ea;ga.unselect=w;ga.prev=ha;ga.next=
N;ga.prevYear=F;ga.nextYear=d;ga.today=G;ga.gotoDate=P;ga.incrementDate=T;ga.formatDate=function(q,D){return Ka(q,D,b)};ga.formatDates=function(q,D,O){return Ya(q,D,O,b)};ga.getDate=ka;ga.getView=B;ga.option=U;ga.trigger=sa;Ib.call(ga,b,f);var x=ga.isFetchNeeded,K=ga.fetchEvents,H=a[0],L,A,C,Y,m,h={},k,E,S,c=0,i=0,r=new Date,M=[],$;nb(r,b.year,b.month,b.date);b.droppable&&l(document).bind("dragstart",function(q,D){var O=q.target,I=l(O);if(!I.parents(".fc").length){var ma=b.dropAccept;if(l.isFunction(ma)?
ma.call(O,I):I.is(ma)){$=O;m.dragStart($,q,D)}}}).bind("dragstop",function(q,D){if($){m.dragStop($,q,D);$=null}})}function Hb(a,b){function f(){s=b.theme?"ui":"fc";var t=b.header;if(t)return R=l("<table class='fc-header'/>").append(l("<tr/>").append(l("<td class='fc-header-left'/>").append(g(t.left))).append(l("<td class='fc-header-center'/>").append(g(t.center))).append(l("<td class='fc-header-right'/>").append(g(t.right))))}function e(){R.remove()}function g(t){if(t){var ca=l("<tr/>");l.each(t.split(" "),
function(qa){qa>0&&ca.append("<td><span class='fc-header-space'/></td>");var ba;l.each(this.split(","),function(X,la){if(la=="title"){ca.append("<td><h2 class='fc-header-title'>&nbsp;</h2></td>");ba&&ba.addClass(s+"-corner-right");ba=null}else{var oa;if(a[la])oa=a[la];else if(Ha[la])oa=function(){aa.removeClass(s+"-state-hover");a.changeView(la)};if(oa){ba&&ba.addClass(s+"-no-right");var aa;X=b.theme?Za(b.buttonIcons,la):null;var ja=Za(b.buttonText,la);if(X)aa=l("<div class='fc-button-"+la+" ui-state-default'><a><span class='ui-icon ui-icon-"+
X+"'/></a></div>");else if(ja)aa=l("<div class='fc-button-"+la+" "+s+"-state-default'><a><span>"+ja+"</span></a></div>");if(aa){aa.click(function(){aa.hasClass(s+"-state-disabled")||oa()}).mousedown(function(){aa.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-down")}).mouseup(function(){aa.removeClass(s+"-state-down")}).hover(function(){aa.not("."+s+"-state-active").not("."+s+"-state-disabled").addClass(s+"-state-hover")},function(){aa.removeClass(s+"-state-hover").removeClass(s+
"-state-down")}).appendTo(l("<td/>").appendTo(ca));ba?ba.addClass(s+"-no-right"):aa.addClass(s+"-corner-left");$a(aa.closest("td"));ba=aa}}}});ba&&ba.addClass(s+"-corner-right")});return l("<table/>").append(ca)}}function j(t){R.find("h2.fc-header-title").html(t)}function n(t){R.find("div.fc-button-"+t).addClass(s+"-state-active")}function o(t){R.find("div.fc-button-"+t).removeClass(s+"-state-active")}function u(t){R.find("div.fc-button-"+t).addClass(s+"-state-disabled")}function z(t){R.find("div.fc-button-"+
t).removeClass(s+"-state-disabled")}var Q=this;Q.render=f;Q.destroy=e;Q.updateTitle=j;Q.activateButton=n;Q.deactivateButton=o;Q.disableButton=u;Q.enableButton=z;var R=l([]),s}function Ib(a,b){function f(d,G){return!ja||d<ja||G>ea}function e(d,G){ja=d;ea=G;F=[];d=++w;ha=G=b.length;for(var P=0;P<G;P++)g(b[P],d)}function g(d,G){j(d,function(P){if(G==w){for(var T=0;T<P.length;T++){ba(P[T]);P[T].source=d}F=F.concat(P);ha--;ha||aa(F)}})}function j(d,G){if(typeof d=="string"){var P={};P[a.startParam]=Math.round(ja.getTime()/
1E3);P[a.endParam]=Math.round(ea.getTime()/1E3);P.browserTimezone=ja.getTimezoneOffset();if(a.cacheParam)P[a.cacheParam]=(new Date).getTime();ca();l.ajax({global:false,type:a.requestMethod||"GET",url:d,dataType:"json",data:P,cache:a.cacheParam||false,success:function(T){qa();G(T)}})}else if(l.isFunction(d)){ca();d(y(ja),y(ea),function(T){qa();G(T)})}else d&&G(d)}function n(d){b.push(d);ha++;g(d,w)}function o(d){var G=[];b=l.grep(b,function(P){if(typeof P==="object"&&d!==P)G=G.concat(P);return P!=
d});F=l.grep(F,function(P){return P.source!=d});b=G.concat(b);aa(F)}function u(d){if(b.indexOf(d)<0){b.push(d);ha++}}function z(){F=b=[];b=[].concat(b);aa(F)}function Q(d){var G,P=F.length,T,ka=oa().defaultEventEnd,B=d.start-d._start,U=d.end?d.end-(d._end||ka(d)):0;for(G=0;G<P;G++){T=F[G];if(T._id==d._id&&T!=d){T.start=new Date(+T.start+B);T.end=d.end?T.end?new Date(+T.end+U):new Date(+ka(T)+U):null;T.title=d.title;T.url=d.url;T.allDay=d.allDay;T.className=d.className;T.editable=d.editable;T.resizable=
d.resizable;T.color=d.color;T.bgColor=d.bgColor;T.borderColor=d.borderColor;ba(T)}}ba(d);aa(F)}function R(d,G){ba(d);if(!d.source){if(G){b[0].push(d);d.source=b[0]}F.push(d)}aa(F)}function s(d){if(d){if(!l.isFunction(d)){var G=d+"";d=function(T){return T._id==G}}F=l.grep(F,d,true);for(P=0;P<b.length;P++)if(typeof b[P]=="object")b[P]=l.grep(b[P],d,true)}else{F=[];for(var P=0;P<b.length;P++)if(typeof b[P]=="object")b[P]=[]}aa(F)}function t(d){if(l.isFunction(d))return l.grep(F,d);else if(d){d+="";return l.grep(F,
function(G){return G._id==d})}return F}function ca(){N++||la("loading",null,true)}function qa(){--N||la("loading",null,false)}function ba(d){d._id=d._id||(d.id===ia?"_fc"+Jb++:d.id+"");if(d.date){if(!d.start)d.start=d.date;delete d.date}d._start=y(d.start=ab(d.start,a.ignoreTimezone));d.end=ab(d.end,a.ignoreTimezone);if(d.end&&d.end<=d.start)d.end=null;d._end=d.end?y(d.end):null;if(d.allDay===ia)d.allDay=a.allDayDefault;if(d.className){if(typeof d.className=="string")d.className=d.className.split(/\s+/)}else d.className=
[]}var X=this;X.isFetchNeeded=f;X.fetchEvents=e;X.addEventSource=n;X.addEventSourceFast=u;X.clearEventSources=z;X.removeEventSource=o;X.updateEvent=Q;X.renderEvent=R;X.removeEvents=s;X.clientEvents=t;X.normalizeEvent=ba;var la=X.trigger,oa=X.getView,aa=X.reportEvents,ja,ea,w=0,ha=0,N=0,F=[];b.unshift([])}function Kb(a,b){function f(o,u){if(u){Xa(o,u);o.setDate(1)}o=y(o,true);o.setDate(1);u=Xa(y(o),1);var z=y(o),Q=y(u),R=g("firstDay"),s=g("weekends")?0:1;if(s){va(z);va(Q,-1,true)}V(z,-((z.getDay()-
Math.max(R,s)+7)%7));V(Q,(7-Q.getDay()+Math.max(R,s))%7);R=Math.round((Q-z)/(ob*7));if(g("weekMode")=="fixed"){V(Q,(6-R)*7);R=6}e.title=n(o,g("titleFormat"));e.start=o;e.end=u;e.visStart=z;e.visEnd=Q;j(R,s?5:7,true)}var e=this;e.render=f;bb.call(e,a,b,"month");var g=e.opt,j=e.renderBasic,n=b.formatDate}function Lb(a,b){function f(o,u){u&&V(o,u*7);o=V(y(o),-((o.getDay()-g("firstDay")+7)%7));u=V(y(o),7);var z=y(o),Q=y(u),R=g("weekends");if(!R){va(z);va(Q,-1,true)}e.title=n(z,V(y(Q),-1),g("titleFormat"));
e.start=o;e.end=u;e.visStart=z;e.visEnd=Q;j(1,R?7:5,false)}var e=this;e.render=f;bb.call(e,a,b,"basicWeek");var g=e.opt,j=e.renderBasic,n=b.formatDates}function Mb(a,b){function f(o,u){if(u){V(o,u);g("weekends")||va(o,u<0?-1:1)}e.title=n(o,g("titleFormat"));e.start=e.visStart=y(o,true);e.end=e.visEnd=V(y(e.start),1);j(1,1,false)}var e=this;e.render=f;bb.call(e,a,b,"basicDay");var g=e.opt,j=e.renderBasic,n=b.formatDate}function bb(a,b,f){function e(c,i,r){K=c;H=i;sa=0+ha("weekNumbers");if(ka=ha("isRTL")){B=
-1;U=H-1;sa&&U++}else{B=1;U=0;sa&&U--}ga=ha("firstDay");x=ha("weekends")?0:1;var M=ha("theme")?"ui":"fc",$=ha("columnFormat"),q=w.start.getMonth(),D=Ia(new Date),O,I=y(w.visStart);if(m){F();i=m.find("tr").length;if(K<i)m.find("tr:gt("+(K-1)+")").remove();else if(K>i){c="";for(i=i;i<K;i++){c+="<tr class='fc-week"+i+"'>";if(sa){O=y(I);V(O,1);c+="<th class='fc-axis "+M+"-state-default fc-leftmost fc-weeknumber'>"+O.getWeek()+"</th>"}for(O=0;O<H;O++){c+="<td class='fc-"+Ea[I.getDay()]+" "+M+"-state-default fc-new fc-day"+
(i*H+O)+(O==U?" fc-leftmost":"")+"'>"+(r?"<div class='fc-day-number'></div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";V(I,1);x&&va(I)}c+="</tr>"}m.append(c)}n(m.find("td.fc-new").removeClass("fc-new"));I=y(w.visStart);m.find("td").each(function(){var Z=l(this);sa&&I.getDay()==1&&Z.closest("tr").find("th").text(I.getWeek());if(K>1)I.getMonth()==q?Z.removeClass("fc-other-month"):Z.addClass("fc-other-month");if(+I==+D)Z.removeClass("fc-not-today fc-before-today").addClass(M+
"-state-highlight fc-today");else+I<+D?Z.addClass("fc-not-today fc-before-today").removeClass(M+"-state-highlight fc-today"):Z.addClass("fc-not-today").removeClass(M+"-state-highlight fc-today fc-before-today");Z.find("div.fc-day-number").text(I.getDate());V(I,1);x&&va(I)});if(K==1){I=y(w.visStart);Y.find("th").not(".fc-axis").each(function(Z,pa){l(pa).text(T(I,$));pa.className=pa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[I.getDay()]);V(I,1);x&&va(I)});I=y(w.visStart);m.find("td").each(function(Z,
pa){pa.className=pa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[I.getDay()]);V(I,1);x&&va(I)})}}else{var ma=l("<table/>").appendTo(a);c="<thead><tr>";if(sa)c+="<th width='25px' class='fc-axis fc-leftmost "+M+"-state-default'>&nbsp;</th>";for(i=0;i<H;i++){c+="<th class='fc-"+Ea[I.getDay()]+" "+M+"-state-default"+(i==U?" fc-leftmost":"")+"'>"+T(I,$)+"</th>";V(I,1);x&&va(I)}Y=l(c+"</tr></thead>").appendTo(ma);c="<tbody>";I=y(w.visStart);for(i=0;i<K;i++){c+="<tr class='fc-week"+i+"'>";if(sa){O=y(I);V(O,
1);c+="<th class='fc-axis "+M+"-state-default fc-leftmost fc-weeknumber'>"+O.getWeek()+"</th>"}for(O=0;O<H;O++){c+="<td class='fc-"+Ea[I.getDay()]+" "+M+"-state-default fc-new fc-day"+(i*H+O)+(O==U?" fc-leftmost":"")+(K>1&&I.getMonth()!=q?" fc-other-month":"")+(+I==+D?" fc-today "+M+"-state-highlight":+I<+D?" fc-before-today fc-not-today":" fc-not-today")+"'>"+(r?"<div class='fc-day-number'>"+I.getDate()+"</div>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td>";
V(I,1);x&&va(I)}c+="</tr>"}m=l(c+"</tbody>").appendTo(ma);n(m.find("td.fc-new").removeClass("fc-new"));h=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)}}function g(c){C=c;c=m.find("tr td:first-child");var i=C-Y.outerHeight(),r;if(sa)c=m.find("tr th:first-child");if(ha("weekMode")=="variable")r=i=Math.floor(i/(K==1?2:6));else{r=Math.floor(i/K);i=i-r*(K-1)}if(cb===ia){var M=m.find("tr:first").find("td:first");Ja(M,r);cb=r!=M.outerHeight()}if(cb){c.slice(0,-1).height(r);c.slice(-1).height(i)}else{Ja(c.slice(0,
-1),r);Ja(c.slice(-1),i)}}function j(c){A=c;S.clear();if(sa){L=Math.floor((A-25)/H);za(Y.find("th").slice(1,-1),L)}else{L=Math.floor(A/H);za(Y.find("th").slice(0,-1),L)}}function n(c){c.click(o).mousedown(P)}function o(c){if(!ha("selectable")){var i=parseInt(this.className.match(/fc\-day(\d+)/)[1],10);i=V(y(w.visStart),Math.floor(i/H)*7+i%H);N("dayClick",this,i,true,c)}}function u(c,i,r){r&&k.build();r=y(w.visStart);for(var M=V(y(r),H),$=0;$<K;$++){var q=new Date(Math.max(r,c)),D=new Date(Math.min(M,
i));if(q<D){var O;if(ka){O=Aa(D,r)*B+U+1;q=Aa(q,r)*B+U+1}else{O=Aa(q,r);q=Aa(D,r)}n(z($,O,$,q-1))}V(r,7);V(M,7)}}function z(c,i,r,M){c=k.rect(c,i,r,M,a);return d(c,a)}function Q(c){return y(c)}function R(c,i){u(c,V(y(i),1),true)}function s(){G()}function t(c,i){E.start(function(r){G();r&&z(r.row,r.col,r.row,r.col)},i)}function ca(c,i,r){var M=E.stop();G();if(M){M=aa(M);N("drop",c,M,true,i,r)}}function qa(c){return y(c.start)}function ba(c){return S.left(c)}function X(c){return S.right(c)}function la(c){return(c-
Math.max(ga,x)+H)%H}function oa(c){return{row:Math.floor(Aa(c,w.visStart)/7),col:la(c.getDay())*B+U}}function aa(c){return V(y(w.visStart),c.row*7+c.col*B+U+sa)}function ja(c){return m.find("tr:eq("+c+")")}function ea(){return{left:0,right:A}}var w=this;w.renderBasic=e;w.setHeight=g;w.setWidth=j;w.renderDayOverlay=u;w.defaultSelectionEnd=Q;w.renderSelection=R;w.clearSelection=s;w.dragStart=t;w.dragStop=ca;w.defaultEventEnd=qa;w.getHoverListener=function(){return E};w.colContentLeft=ba;w.colContentRight=
X;w.dayOfWeekCol=la;w.dateCell=oa;w.cellDate=aa;w.cellIsAllDay=function(){return true};w.allDayTR=ja;w.allDayBounds=ea;w.getRowCnt=function(){return K};w.getColCnt=function(){return H};w.getColWidth=function(){return L};w.getDaySegmentContainer=function(){return h};pb.call(w,a,b,f);qb.call(w);rb.call(w);Nb.call(w);var ha=w.opt,N=w.trigger,F=w.clearEvents,d=w.renderOverlay,G=w.clearOverlays,P=w.daySelectionMousedown,T=b.formatDate,ka,B,U,sa,ga,x,K,H,L,A,C,Y,m,h,k,E,S;$a(a.addClass("fc-grid"));k=new sb(function(c,
i){var r,M,$,q=m.find("tr:first td");if(ka)q=l(q.get().reverse());q.each(function(D,O){r=l(O);M=r.offset().left;if(D)$[1]=M;$=[M];i[D]=$});$[1]=M+r.outerWidth();m.find("tr").each(function(D,O){r=l(O);M=r.offset().top;if(D)$[1]=M;$=[M];c[D]=$});$[1]=M+r.outerHeight()});E=new tb(k);S=new ub(function(c){return m.find("td:eq("+c+") div div")})}function Nb(){function a(ea,w){u(ea);aa(f(ea),w)}function b(){z();ca().empty()}function f(ea){var w=la(),ha=oa(),N=y(j.visStart);ha=V(y(N),ha);var F=l.map(ea,Pa),
d,G,P,T,ka,B,U=[];for(d=0;d<w;d++){G=db(eb(ea,F,N,ha));for(P=0;P<G.length;P++){T=G[P];for(ka=0;ka<T.length;ka++){B=T[ka];B.row=d;B.level=P;U.push(B)}}V(N,7);V(ha,7)}return U}function e(ea,w,ha){Q(ea,w);if(ea.editable||ea.editable===ia&&n("editable")){g(ea,w);ha.isEnd&&ja(ea,w,ha)}}function g(ea,w){if(!n("disableDragging")&&w.draggable){var ha=qa(),N;w.draggable({zIndex:9,delay:50,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(F,d){o("eventDragStart",w,ea,F,d);s(ea,
w);ha.start(function(G,P,T,ka){w.draggable("option","revert",!G||!T&&!ka);X();if(G){N=T*7+ka*(n("isRTL")?-1:1);ba(V(y(ea.start),N),V(Pa(ea),N))}else N=0},F,"drag")},stop:function(F,d){ha.stop();X();o("eventDragStop",w,ea,F,d);if(N){w.find("a").removeAttr("href");t(this,ea,N,0,ea.allDay,F,d)}else{l.browser.msie&&w.css("filter","");R(ea,w)}}})}}var j=this;j.renderEvents=a;j.compileDaySegs=f;j.clearEvents=b;j.bindDaySeg=e;vb.call(j);var n=j.opt,o=j.trigger,u=j.reportEvents,z=j.reportEventClear,Q=j.eventElementHandlers,
R=j.showEvents,s=j.hideEvents,t=j.eventDrop,ca=j.getDaySegmentContainer,qa=j.getHoverListener,ba=j.renderDayOverlay,X=j.clearOverlays,la=j.getRowCnt,oa=j.getColCnt,aa=j.renderDaySegs,ja=j.resizableDayEvent}function Ob(a,b){function f(o,u){u&&V(o,u*7);o=V(y(o),-((o.getDay()-g("firstDay")+7)%7));u=V(y(o),7);var z=y(o),Q=y(u),R=g("weekends");if(!R){va(z);va(Q,-1,true)}e.title=n(z,V(y(Q),-1),g("titleFormat"));e.start=o;e.end=u;e.visStart=z;e.visEnd=Q;j(R?7:5)}var e=this;e.render=f;wb.call(e,a,b,"agendaWeek");
var g=e.opt,j=e.renderAgenda,n=b.formatDates}function Pb(a,b){function f(o,u){if(u){V(o,u);g("weekends")||va(o,u<0?-1:1)}u=y(o,true);var z=V(y(u),1);e.title=n(o,g("titleFormat"));e.start=e.visStart=u;e.end=e.visEnd=z;j(1)}var e=this;e.render=f;wb.call(e,a,b,"agendaDay");var g=e.opt,j=e.renderAgenda,n=b.formatDate}function wb(a,b,f){function e(p){c=p;I=U("theme")?"ui":"fc";Z=U("weekends")?0:1;ma=U("firstDay");if(pa=U("isRTL")){fa=-1;na=c-1}else{fa=1;na=0}Ba=fb(U("minTime"));Ca=fb(U("maxTime"));p=pa?
V(y(B.visEnd),-1):y(B.visStart);var v=y(p),J=Ia(new Date),W=U("columnFormat");if(m){ga();U("weekNumbers")&&m.find("tr:first th:first").text(Y(B.visStart,"w"));m.find("tr:first th").slice(1,-1).each(function(La,wa){l(wa).text(Y(v,W));wa.className=wa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[v.getDay()]);V(v,fa);Z&&va(v,fa)});v=y(p);S.find("td").each(function(La,wa){wa.className=wa.className.replace(/^fc-\w+(?= )/,"fc-"+Ea[v.getDay()]);if(+v==+J)l(wa).removeClass("fc-not-today fc-before-today").addClass(I+
"-state-highlight fc-today");else+v<+J?l(wa).addClass("fc-not-today fc-before-today").removeClass(I+"-state-highlight fc-today"):l(wa).addClass("fc-not-today").removeClass(I+"-state-highlight fc-today fc-before-today");V(v,fa);Z&&va(v,fa)})}else{var da,ta,Fa=U("slotMinutes")%15==0,ra="<div class='fc-agenda-head' style='position:relative;z-index:4'><table style='width:100%'><tr class='fc-first"+(U("allDaySlot")?"":" fc-last")+"'><th class='fc-leftmost "+I+"-state-default'>"+(U("weekNumbers")?Y(B.visStart,
"w"):"&nbsp;")+"</th>";for(da=0;da<c;da++){ra+="<th class='fc-"+Ea[v.getDay()]+" "+I+"-state-default'>"+Y(v,W)+"</th>";V(v,fa);Z&&va(v,fa)}ra+="<th class='"+I+"-state-default'>&nbsp;</th></tr>";if(U("allDaySlot"))ra+="<tr class='fc-all-day'><th class='fc-axis fc-leftmost "+I+"-state-default'>"+U("allDayText")+"</th><td colspan='"+c+"' class='"+I+"-state-default'><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></td><th class='"+I+"-state-default'>&nbsp;</th></tr><tr class='fc-divider fc-last'><th colspan='"+
(c+2)+"' class='"+I+"-state-default fc-leftmost'><div/></th></tr>";ra+="</table></div>";m=l(ra).appendTo(a);z(m.find("td"));xb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(m);v=yb();var gb=ua(y(v),Ca);ua(v,Ba);ra="<table>";for(da=0;v<gb;da++){ta=v.getMinutes();ra+="<tr class='"+(!da?"fc-first":!ta?"":"fc-minor")+"'><th class='fc-axis fc-leftmost "+I+"-state-default'>"+(!Fa||!ta?Y(v,U("axisFormat")):"&nbsp;")+"</th><td class='fc-slot"+da+" "+I+"-state-default'><div style='position:relative'>&nbsp;</div></td></tr>";
ua(v,U("slotMinutes"));i++}ra+="</table>";h=l("<div class='fc-agenda-body' style='position:relative;z-index:2;overflow:auto'/>").append(k=l("<div style='position:relative;overflow:hidden'>").append(E=l(ra))).appendTo(a);Q(h.find("td"));zb=l("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(k);v=y(p);ra="<div class='fc-agenda-bg' style='position:absolute;z-index:1'><table style='width:100%;height:100%'><tr class='fc-first'>";for(da=0;da<c;da++){ra+="<td class='fc-"+Ea[v.getDay()]+
" "+I+"-state-default "+(!da?"fc-leftmost ":"")+(+v==+J?I+"-state-highlight fc-today":+v<+J?" fc-before-today fc-not-today":"fc-not-today")+"'><div class='fc-day-content'><div>&nbsp;</div></div></td>";V(v,fa);Z&&va(v,fa)}ra+="</tr></table></div>";S=l(ra).appendTo(a)}}function g(p,v){if(p===ia)p=D;D=p;hb={};var J=p-Da(m);J=Math.min(J,Da(E));Ja(h,J);Sa&&Ja(h,p-Da(m)-1);$=Da(h.find("tr:first div"))+1;v&&n()}function j(p){q=p;Ta.clear();za(h,p);h.css("overflow","auto").width(p);var v=m.find("tr:first th"),
J=m.find("tr.fc-all-day th:last"),W=S.find("td"),da=h[0].clientWidth;za(E,da);da=h[0].clientWidth;E.width(da);r=0;var ta=m.find("tr:lt(2) th:first").add(h.find("tr:first th"));ta.width(1);ta.each(function(){r=Math.max(r,l(this).outerWidth())});za(ta,r);M=Math.floor((da-r)/c);za(v.slice(1,-2),M);za(W.slice(0,-1),M);if(p!=da){za(v.slice(-2,-1),da-r-M*(c-1));v.slice(-1).show();J.show()}else{h.css("overflow","hidden");v.slice(-2,-1).width("");v.slice(-1).hide();J.hide()}S.css({top:Da(m.find("tr")),left:r,
width:da-r,height:D})}function n(){var p=yb(),v=y(p);v.setHours(U("firstHour"));var J=oa(p,v)+1;p=function(){h.scrollTop(J)};p();setTimeout(p,0)}function o(){O=h.scrollTop()}function u(){h.scrollTop(O)}function z(p){p.click(R).mousedown(A)}function Q(p){p.click(R).mousedown(P)}function R(p){if(!U("selectable")){var v=Math.min(c-1,Math.floor((p.pageX-S.offset().left)/M));v=V(y(B.visStart),v*fa+na);var J=this.className.match(/fc-slot(\d+)/);if(J){J=parseInt(J[1],10)*U("slotMinutes");var W=Math.floor(J/
60);v.setHours(W);v.setMinutes(J%60+Ba);sa("dayClick",this,v,false,p)}else sa("dayClick",this,v,true,p)}}function s(p,v,J){J&&xa.build();var W=y(B.visStart);if(pa){J=Aa(v,W)*fa+na+1;p=Aa(p,W)*fa+na+1}else{J=Aa(p,W);p=Aa(v,W)}J=Math.max(0,J);p=Math.min(c,p);J<p&&z(t(0,J,0,p-1))}function t(p,v,J,W){p=xa.rect(p,v,J,W,m);return x(p,m)}function ca(p,v){for(var J=y(B.visStart),W=V(y(J),1),da=0;da<c;da++){var ta=new Date(Math.max(J,p)),Fa=new Date(Math.min(W,v));if(ta<Fa){var ra=da*fa+na;ra=xa.rect(0,ra,
0,ra,k);ta=oa(J,ta);Fa=oa(J,Fa);ra.top=ta;ra.height=Fa-ta;Q(x(ra,k))}V(J,1);V(W,1)}}function qa(p){return r+Ta.left(p)}function ba(p){return r+Ta.right(p)}function X(p){return(p-Math.max(ma,Z)+c)%c*fa+na}function la(p){return{row:Math.floor(Aa(p,B.visStart)/7),col:X(p.getDay())}}function oa(p,v){p=y(p,true);if(v<ua(y(p),Ba))return 0;if(v>=ua(y(p),Ca))return Da(k);p=U("slotMinutes");v=v.getHours()*60+v.getMinutes()-Ba;var J=Math.floor(v/p),W=hb[J];if(W===ia)W=hb[J]=h.find("tr:eq("+J+") td div")[0].offsetTop;
return Math.max(0,Math.round(W-1+$*(v%p/p)))}function aa(p){var v=V(y(B.visStart),p.col*fa+na);p=p.row;U("allDaySlot")&&p--;p>=0&&ua(v,Ba+p*U("slotMinutes"));return v}function ja(p){return U("allDaySlot")&&!p.row}function ea(){return{left:r,right:q}}function w(){return m.find("tr.fc-all-day")}function ha(p){var v=y(p.start);if(p.allDay)return v;return ua(v,U("defaultEventMinutes"))}function N(p,v){if(v)return y(p);return ua(y(p),U("slotMinutes"))}function F(p,v,J){if(J)U("allDaySlot")&&s(p,V(y(v),
1),true);else d(p,v)}function d(p,v){var J=U("selectHelper");xa.build();if(J){var W=Aa(p,B.visStart)*fa+na;if(W>=0&&W<c){W=xa.rect(0,W,0,W,k);var da=oa(p,p),ta=oa(p,v);if(ta>da){W.top=da;W.height=ta-da;W.left+=2;W.width-=5;if(l.isFunction(J)){if(p=J(p,v)){W.position="absolute";W.zIndex=8;ya=l(p).css(W).appendTo(k)}}else{ya=l(C({title:"",start:p,end:v,className:[],editable:false},W,"fc-event fc-event-vert fc-corner-top fc-corner-bottom "));l.browser.msie&&ya.find("span.fc-event-bg").hide();ya.css("opacity",
U("dragOpacity"))}if(ya){Q(ya);k.append(ya);za(ya,W.width,true);Ja(ya,W.height,true)}}}}else ca(p,v)}function G(){K();if(ya){ya.remove();ya=null}}function P(p){if(p.which==1&&U("selectable")){L(p);var v=this,J;Ma.start(function(W,da){G();if(W&&W.col==da.col&&!ja(W)){da=aa(da);W=aa(W);J=[da,ua(y(da),U("slotMinutes")),W,ua(y(W),U("slotMinutes"))].sort(ib);d(J[0],J[3])}else J=null},p);l(document).one("mouseup",function(W){Ma.stop();if(J){+J[0]==+J[1]&&sa("dayClick",v,J[0],false,W);H(J[0],J[3],false,
W)}})}}function T(p,v){Ma.start(function(J){K();if(J)if(ja(J))t(J.row,J.col,J.row,J.col);else{J=aa(J);var W=ua(y(J),U("defaultEventMinutes"));ca(J,W)}},v)}function ka(p,v,J){var W=Ma.stop();K();W&&sa("drop",p,aa(W),ja(W),v,J)}var B=this;B.renderAgenda=e;B.setWidth=j;B.setHeight=g;B.beforeHide=o;B.afterShow=u;B.defaultEventEnd=ha;B.timePosition=oa;B.dayOfWeekCol=X;B.dateCell=la;B.cellDate=aa;B.cellIsAllDay=ja;B.allDayTR=w;B.allDayBounds=ea;B.getHoverListener=function(){return Ma};B.colContentLeft=
qa;B.colContentRight=ba;B.getDaySegmentContainer=function(){return xb};B.getSlotSegmentContainer=function(){return zb};B.getMinMinute=function(){return Ba};B.getMaxMinute=function(){return Ca};B.getBodyContent=function(){return k};B.getRowCnt=function(){return 1};B.getColCnt=function(){return c};B.getColWidth=function(){return M};B.getSlotHeight=function(){return $};B.defaultSelectionEnd=N;B.renderDayOverlay=s;B.renderSelection=F;B.clearSelection=G;B.dragStart=T;B.dragStop=ka;pb.call(B,a,b,f);qb.call(B);
rb.call(B);Qb.call(B);var U=B.opt,sa=B.trigger,ga=B.clearEvents,x=B.renderOverlay,K=B.clearOverlays,H=B.reportSelection,L=B.unselect,A=B.daySelectionMousedown,C=B.slotSegHtml,Y=b.formatDate,m,h,k,E,S,c,i=0,r,M,$,q,D,O,I,ma,Z,pa,fa,na,Ba,Ca,xa,Ma,Ta,hb={},ya,xb,zb;$a(a.addClass("fc-agenda"));xa=new sb(function(p,v){function J(wa){return Math.max(ra,Math.min(gb,wa))}var W,da,ta;S.find("td").each(function(wa,Rb){W=l(Rb);da=W.offset().left;if(wa)ta[1]=da;ta=[da];v[wa]=ta});ta[1]=da+W.outerWidth();if(U("allDaySlot")){W=
m.find("td");da=W.offset().top;p[0]=[da,da+W.outerHeight()]}for(var Fa=k.offset().top,ra=h.offset().top,gb=ra+h.outerHeight(),La=0;La<i;La++)p.push([J(Fa+$*La),J(Fa+$*(La+1))])});Ma=new tb(xa);Ta=new ub(function(p){return S.find("td:eq("+p+") div div")})}function Qb(){function a(h,k){ba(h);var E,S=h.length,c=[],i=[];for(E=0;E<S;E++)h[E].allDay?c.push(h[E]):i.push(h[E]);if(t("allDaySlot")){G(f(c),k);oa()}j(e(i),k)}function b(){X();aa().empty();ja().empty()}function f(h){h=db(eb(h,l.map(h,Pa),s.visStart,
s.visEnd));var k,E=h.length,S,c,i,r=[];for(k=0;k<E;k++){S=h[k];for(c=0;c<S.length;c++){i=S[c];i.row=0;i.level=k;r.push(i)}}return r}function e(h){var k=T(),E=ha(),S=w(),c=ua(y(s.visStart),E),i=l.map(h,g),r,M,$,q,D,O,I=[];for(r=0;r<k;r++){M=db(eb(h,i,c,ua(y(c),S-E)));Sb(M);for($=0;$<M.length;$++){q=M[$];for(D=0;D<q.length;D++){O=q[D];O.col=r;O.level=$;I.push(O)}}V(c,1,true)}return I}function g(h){return h.end?y(h.end):ua(y(h.start),t("defaultEventMinutes"))}function j(h,k){var E,S=h.length,c,i,r,M,
$,q,D,O,I,ma,Z="",pa,fa,na={},Ba={},Ca=ja(),xa;E=T();if(pa=t("isRTL")){fa=-1;xa=E-1}else{fa=1;xa=0}for(E=0;E<S;E++){c=h[E];i=c.event;r="fc-event fc-event-vert ";if(c.isStart)r+="fc-corner-top ";if(c.isEnd)r+="fc-corner-bottom ";M=N(c.start,c.start);$=N(c.start,c.end);q=c.col;D=c.level;O=c.forward||0;I=F(q*fa+xa);ma=d(q*fa+xa)-I;ma=Math.min(ma-6,ma*0.95);q=D?ma/(D+O+1):O?(ma/(O+1)-6)*2:ma;D=I+ma/(D+O+1)*D*fa+(pa?ma-q:0);c.top=M;c.left=D;c.outerWidth=q;c.outerHeight=$-M;Z+=n(i,c,r)}Ca[0].innerHTML=
Z;pa=Ca.children();for(E=0;E<S;E++){c=h[E];i=c.event;Z=l(pa[E]);fa=ca("eventRender",i,i,Z);if(fa===false)Z.remove();else{if(fa&&fa!==true){Z.remove();Z=l(fa).css({position:"absolute",top:c.top,left:c.left}).appendTo(Ca)}c.element=Z;if(i._id===k)u(i,Z,c);else Z[0]._fci=E;sa(i,Z)}}Ab(Ca,h,u);for(E=0;E<S;E++){c=h[E];if(Z=c.element){i=na[k=c.key=Bb(Z[0])];c.vsides=i===ia?(na[k]=Va(Z[0],true)):i;i=Ba[k];c.hsides=i===ia?(Ba[k]=jb(Z[0],true)):i;k=Z.find("span.fc-event-title");if(k.length)c.titleTop=k[0].offsetTop}}for(E=
0;E<S;E++){c=h[E];if(Z=c.element){Z[0].style.width=Math.max(0,c.outerWidth-c.hsides)+"px";na=Math.max(0,c.outerHeight-c.vsides);Z[0].style.height=na+"px";i=c.event;if(c.titleTop!==ia&&na-c.titleTop<10){Z.find("span.fc-event-time").text(Y(i.start,t("timeFormat"))+" - "+i.title);Z.find("span.fc-event-title").remove()}ca("eventAfterRender",i,i,Z)}}}function n(h,k,E){var S="";if(h.color)S+="color:"+h.color+";";if(h.bgColor)S+="background-color:"+h.bgColor+";";if(h.borderColor)S+="border-color:"+h.borderColor+
";";return"<div class='"+E+h.className.join(" ")+"' style='position:absolute;z-index:8;top:"+k.top+"px;left:"+k.left+"px'><a"+(h.url?" href='"+Na(h.url)+"'":"")+(S?" style='"+S+"'":"")+"><span class='fc-event-bg'></span><span class='fc-event-time'>"+Na(m(h.start,h.end,t("timeFormat")))+"</span><span class='fc-event-title'>"+Na(h.title)+"</span></a>"+((h.resizable||h.resizable===ia)&&(h.editable||h.editable===ia&&t("editable"))&&!t("disableResizing")&&l.fn.resizable?"<div class='ui-resizable-handle ui-resizable-s'>=</div>":
"")+"</div>"}function o(h,k,E){la(h,k);if(h.editable||h.editable===ia&&t("editable")){z(h,k,E.isStart);E.isEnd&&P(h,k,E)}}function u(h,k,E){la(h,k);if(h.editable||h.editable===ia&&t("editable")){var S=k.find("span.fc-event-time");Q(h,k,S);E.isEnd&&R(h,k,S)}}function z(h,k,E){if(!t("disableDragging")&&k.draggable){var S,c=true,i,r=t("isRTL")?-1:1,M=ea(),$=ka(),q=B(),D=ha();k.draggable({zIndex:9,opacity:t("dragOpacity","month"),revertDuration:t("dragRevertDuration"),start:function(I,ma){ca("eventDragStart",
k,h,I,ma);x(h,k);S=Ra(k);M.start(function(Z,pa,fa,na){k.draggable("option","revert",!Z||!fa&&!na);A();if(Z){i=na*r;if(Z.row){if(E&&c){za(k,$-10);Ja(k,q*Math.round((h.end?(h.end-h.start)/Tb:t("defaultEventMinutes"))/t("slotMinutes")));k.draggable("option","grid",[$,1]);c=false}}else{L(V(y(h.start),i),V(Pa(h),i));O()}}},I,"drag")},stop:function(I,ma){var Z=M.stop();A();ca("eventDragStop",k,h,I,ma);if(Z&&(!c||i)){k.find("a").removeAttr("href");Z=0;c||(Z=Math.round((k.offset().top-U().offset().top)/q)*
t("slotMinutes")+D-(h.start.getHours()*60+h.start.getMinutes()));K(this,h,i,Z,c,I,ma)}else{O();l.browser.msie&&k.css("filter","");ga(h,k)}}});function O(){if(!c){za(k,S);k.height("");k.draggable("option","grid",null);c=true}}}}function Q(h,k,E){if(!t("disableDragging")&&k.draggable){var S,c=false,i,r,M,$=t("isRTL")?-1:1,q=ea(),D=T(),O=ka(),I=B();k.draggable({zIndex:9,scroll:false,grid:[O,I],axis:D==1?"y":false,opacity:t("dragOpacity"),revertDuration:t("dragRevertDuration"),start:function(pa,fa){ca("eventDragStart",
k,h,pa,fa);x(h,k);l.browser.msie&&k.find("span.fc-event-bg").hide();S=k.position();r=M=0;q.start(function(na,Ba,Ca,xa){k.draggable("option","revert",!na);A();if(na){i=xa*$;if(t("allDaySlot")&&!na.row){if(!c){c=true;E.hide();k.draggable("option","grid",null)}L(V(y(h.start),i),V(Pa(h),i))}else Z()}},pa,"drag")},drag:function(pa,fa){r=Math.round((fa.position.top-S.top)/I)*t("slotMinutes");if(r!=M){c||ma(r);M=r}},stop:function(pa,fa){var na=q.stop();A();ca("eventDragStop",k,h,pa,fa);if(na&&(i||r||c))K(this,
h,i,c?0:r,c,pa,fa);else{Z();k.css(S);ma(0);l.browser.msie&&k.css("filter","").find("span.fc-event-bg").css("display","");ga(h,k)}}});function ma(pa){var fa=ua(y(h.start),pa),na;if(h.end)na=ua(y(h.end),pa);E.text(m(fa,na,t("timeFormat")))}function Z(){if(c){E.css("display","");k.draggable("option","grid",[O,I]);c=false}}}}function R(h,k,E){if(!t("disableResizing")&&k.resizable){var S,c,i=B();k.resizable({handles:{s:"div.ui-resizable-s"},grid:i,start:function(r,M){S=c=0;x(h,k);l.browser.msie&&l.browser.version==
"6.0"&&k.css("overflow","hidden");k.css("z-index",9);ca("eventResizeStart",this,h,r,M)},resize:function(r,M){S=Math.round((Math.max(i,Da(k))-M.originalSize.height)/i);if(S!=c){E.text(m(h.start,!S&&!h.end?null:ua(qa(h),t("slotMinutes")*S),t("timeFormat")));c=S}},stop:function(r,M){ca("eventResizeStop",this,h,r,M);if(S)H(this,h,0,t("slotMinutes")*S,r,M);else{k.css("z-index",8);ga(h,k)}}})}}var s=this;s.renderEvents=a;s.compileDaySegs=f;s.clearEvents=b;s.slotSegHtml=n;s.bindDaySeg=o;vb.call(s);var t=
s.opt,ca=s.trigger,qa=s.eventEnd,ba=s.reportEvents,X=s.reportEventClear,la=s.eventElementHandlers,oa=s.setHeight,aa=s.getDaySegmentContainer,ja=s.getSlotSegmentContainer,ea=s.getHoverListener,w=s.getMaxMinute,ha=s.getMinMinute,N=s.timePosition,F=s.colContentLeft,d=s.colContentRight,G=s.renderDaySegs,P=s.resizableDayEvent,T=s.getColCnt,ka=s.getColWidth,B=s.getSlotHeight,U=s.getBodyContent,sa=s.reportEventElement,ga=s.showEvents,x=s.hideEvents,K=s.eventDrop,H=s.eventResize,L=s.renderDayOverlay,A=s.clearOverlays,
C=s.calendar,Y=C.formatDate,m=C.formatDates}function Sb(a){var b,f,e,g,j,n;for(b=a.length-1;b>0;b--){g=a[b];for(f=0;f<g.length;f++){j=g[f];for(e=0;e<a[b-1].length;e++){n=a[b-1][e];if(Cb(j,n))n.forward=Math.max(n.forward||0,(j.forward||0)+1)}}}}function pb(a,b,f){function e(N,F){N=ha[N];if(typeof N=="object")return Za(N,F||f);return N}function g(N,F){return b.trigger.apply(b,[N,F||X].concat(Array.prototype.slice.call(arguments,2),[X]))}function j(N){ja={};var F,d=N.length,G;for(F=0;F<d;F++){G=N[F];
if(ja[G._id])ja[G._id].push(G);else ja[G._id]=[G]}}function n(N){return N.end?y(N.end):la(N)}function o(N,F){ea.push(F);if(w[N._id])w[N._id].push(F);else w[N._id]=[F]}function u(){ea=[];w={}}function z(N,F){F.click(function(d){if(!F.hasClass("ui-draggable-dragging")&&!F.hasClass("ui-resizable-resizing"))return g("eventClick",this,N,d)}).hover(function(d){g("eventMouseover",this,N,d)},function(d){g("eventMouseout",this,N,d)})}function Q(N,F){s(N,F,"show")}function R(N,F){s(N,F,"hide")}function s(N,
F,d){N=w[N._id];var G,P=N.length;for(G=0;G<P;G++)if(!F||N[G][0]!=F[0])N[G][d]()}function t(N,F,d,G,P,T,ka){var B=F.allDay,U=F._id;qa(ja[U],d,G,P);g("eventDrop",N,F,d,G,P,function(){qa(ja[U],-d,-G,B);aa(U)},T,ka);aa(U)}function ca(N,F,d,G,P,T){var ka=F._id;ba(ja[ka],d,G);g("eventResize",N,F,d,G,function(){ba(ja[ka],-d,-G);aa(ka)},P,T);aa(ka)}function qa(N,F,d,G){d=d||0;for(var P,T=N.length,ka=0;ka<T;ka++){P=N[ka];if(G!==ia)P.allDay=G;ua(V(P.start,F,true),d);if(P.end)P.end=ua(V(P.end,F,true),d);oa(P,
ha)}}function ba(N,F,d){d=d||0;for(var G,P=N.length,T=0;T<P;T++){G=N[T];G.end=ua(V(n(G),F,true),d);oa(G,ha)}}var X=this;X.element=a;X.calendar=b;X.name=f;X.opt=e;X.trigger=g;X.reportEvents=j;X.eventEnd=n;X.reportEventElement=o;X.reportEventClear=u;X.eventElementHandlers=z;X.showEvents=Q;X.hideEvents=R;X.eventDrop=t;X.eventResize=ca;var la=X.defaultEventEnd,oa=b.normalizeEvent,aa=b.reportEventChange,ja={},ea=[],w={},ha=b.options}function vb(){function a(x,K){var H=T(),L=ja(),A=ea(),C=0,Y,m,h=x.length,
k,E;H[0].innerHTML=f(x);e(x,H.children());g(x);j(x,H,K);n(x);o(x);u(x);K=z();for(H=0;H<L;H++){Y=[];for(m=0;m<A;m++)Y[m]=0;for(;C<h&&(k=x[C]).row==H;){m=Db(Y.slice(k.startCol,k.endCol));k.top=m;m+=k.outerHeight;for(E=k.startCol;E<k.endCol;E++)Y[E]=m;C++}K[H].height(Db(Y))}R(x,Q(K))}function b(x,K,H){var L=l("<div/>"),A=T(),C=x.length,Y;L[0].innerHTML=f(x);L=L.children();A.append(L);e(x,L);n(x);o(x);u(x);R(x,Q(z()));L=[];for(A=0;A<C;A++)if(Y=x[A].element){x[A].row===K&&Y.css("top",H);L.push(Y[0])}return l(L)}
function f(x){var K=ca("isRTL"),H,L=x.length,A,C,Y;H=ha();var m=H.left,h=H.right,k=[],E,S,c="";for(H=0;H<L;H++){A=x[H];C=A.event;Y="fc-event fc-event-hori ";if(K){if(A.isStart)Y+="fc-corner-right ";if(A.isEnd)Y+="fc-corner-left ";k[0]=d(A.end.getDay()-1);k[1]=d(A.start.getDay());E=A.isEnd?N(k[0]):m;S=A.isStart?F(k[1]):h}else{if(A.isStart)Y+="fc-corner-left ";if(A.isEnd)Y+="fc-corner-right ";k[0]=d(A.start.getDay());k[1]=d(A.end.getDay()-1);E=A.isStart?N(k[0]):m;S=A.isEnd?F(k[1]):h}var i="";if(C.color)i=
"color:"+C.color+";";if(C.bgColor)i+="background-color:"+C.bgColor+";";if(C.borderColor)i+="border-color:"+C.borderColor+";";c+="<div class='"+Y+C.className.join(" ")+"' style='position:absolute;z-index:8;left:"+E+"px'><a"+(C.url?" href='"+Na(C.url)+"'":"")+(i?" style='"+i+"'":"")+">"+(!C.allDay&&A.isStart?"<span class='fc-event-time'>"+Na(B(C.start,C.end,ca("timeFormat")))+"</span>":"")+"<span class='fc-event-title'>"+Na(C.title)+"</span></a>"+(A.isEnd&&(C.editable||C.editable===ia&&ca("editable"))&&
!ca("disableResizing")?"<div class='ui-resizable-handle ui-resizable-"+(K?"w":"e")+"'></div>":"")+"</div>";A.left=E;A.outerWidth=S-E;k.sort(ib);A.startCol=k[0];A.endCol=k[1]+1}return c}function e(x,K){var H,L=x.length,A,C,Y;for(H=0;H<L;H++){A=x[H];C=A.event;Y=l(K[H]);C=qa("eventRender",C,C,Y);if(C===false)Y.remove();else{if(C&&C!==true){C=l(C).css({position:"absolute",left:A.left});Y.replaceWith(C);Y=C}A.element=Y}}}function g(x){var K,H=x.length,L,A;for(K=0;K<H;K++){L=x[K];(A=L.element)&&X(L.event,
A)}}function j(x,K,H){var L,A=x.length,C,Y,m;for(L=0;L<A;L++){C=x[L];if(Y=C.element){m=C.event;if(m._id===H)ka(m,Y,C);else Y[0]._fci=L}}Ab(K,x,ka)}function n(x){var K,H=x.length,L,A,C,Y,m={};for(K=0;K<H;K++){L=x[K];if(A=L.element){C=L.key=Bb(A[0]);Y=m[C];if(Y===ia)Y=m[C]=jb(A[0],true);L.hsides=Y}}}function o(x){var K,H=x.length,L,A;for(K=0;K<H;K++){L=x[K];if(A=L.element)A[0].style.width=Math.max(0,L.outerWidth-L.hsides)+"px"}}function u(x){var K,H=x.length,L,A,C,Y,m={};for(K=0;K<H;K++){L=x[K];if(A=
L.element){C=L.key;Y=m[C];if(Y===ia)Y=m[C]=Eb(A[0]);L.outerHeight=A[0].offsetHeight+Y}}}function z(){var x,K=ja(),H=[];for(x=0;x<K;x++)H[x]=w(x).find("td:first div.fc-day-content > div");return H}function Q(x){var K,H=x.length,L=[];for(K=0;K<H;K++)L[K]=x[K][0].offsetTop;return L}function R(x,K){var H,L=x.length,A,C;for(H=0;H<L;H++){A=x[H];if(C=A.element){C[0].style.top=K[A.row]+(A.top||0)+"px";A=A.event;qa("eventAfterRender",A,A,C)}}}function s(x,K,H){if(!ca("disableResizing")&&H.isEnd&&K.resizable){var L=
ca("isRTL"),A=L?"w":"e";K.find("div.ui-resizable-"+A).mousedown(function(C){function Y(q){qa("eventResizeStop",this,x,q);l("body").css("cursor","auto");m.stop();sa();i&&aa(this,x,i,0,q)}if(C.which==1){var m=t.getHoverListener(),h=ja(),k=ea(),E=L?-1:1,S=L?k:0,c=K.css("top"),i,r,M=l.extend({},x),$=G(x.start);ga();l("body").css("cursor",A+"-resize").one("mouseup",Y);qa("eventResizeStart",this,x,C);m.start(function(q,D){if(q){var O=Math.max($.row,q.row);q=q.col;if(h==1)O=0;if(O==$.row)q=L?Math.min($.col,
q):Math.max($.col,q);i=O*7+q*E+S-(D.row*7+D.col*E+S);D=V(ba(x),i,true);if(i){M.end=D;O=r;r=b(P([M]),H.row,c);r.find("*").css("cursor",A+"-resize");O&&O.remove();oa(x)}else if(r){la(x);r.remove();r=null}sa();U(x.start,V(y(D),1))}},C)}})}}var t=this;t.renderDaySegs=a;t.resizableDayEvent=s;var ca=t.opt,qa=t.trigger,ba=t.eventEnd,X=t.reportEventElement,la=t.showEvents,oa=t.hideEvents,aa=t.eventResize,ja=t.getRowCnt,ea=t.getColCnt,w=t.allDayTR,ha=t.allDayBounds,N=t.colContentLeft,F=t.colContentRight,d=
t.dayOfWeekCol,G=t.dateCell,P=t.compileDaySegs,T=t.getDaySegmentContainer,ka=t.bindDaySeg,B=t.calendar.formatDates,U=t.renderDayOverlay,sa=t.clearOverlays,ga=t.clearSelection}function rb(){function a(R,s,t){b();s||(s=o(R,t));u(R,s,t);f(R,s,t)}function b(R){if(Q){Q=false;z();n("unselect",null,R)}}function f(R,s,t,ca){Q=true;n("select",null,R,s,t,ca)}function e(R){var s=g.cellDate,t=g.cellIsAllDay,ca=g.getHoverListener();if(R.which==1&&j("selectable")){b(R);var qa=this,ba;ca.start(function(X,la){z();
if(X&&t(X)){ba=[s(la),s(X)].sort(ib);u(ba[0],ba[1],true)}else ba=null},R);l(document).one("mouseup",function(X){ca.stop();if(ba){+ba[0]==+ba[1]&&n("dayClick",qa,ba[0],true,X);f(ba[0],ba[1],true,X)}})}}var g=this;g.select=a;g.unselect=b;g.reportSelection=f;g.daySelectionMousedown=e;var j=g.opt,n=g.trigger,o=g.defaultSelectionEnd,u=g.renderSelection,z=g.clearSelection,Q=false;j("selectable")&&j("unselectAuto")&&l(document).mousedown(function(R){var s=j("unselectCancel");if(s)if(l(R.target).parents(s).length)return;
b(R)})}function qb(){function a(j,n){var o=g.shift();o||(o=l("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));o[0].parentNode!=n[0]&&o.appendTo(n);e.push(o.css(j).show());return o}function b(){for(var j;j=e.shift();)g.push(j.hide().unbind())}var f=this;f.renderOverlay=a;f.clearOverlays=b;var e=[],g=[]}function sb(a){var b=this,f,e;b.build=function(){f=[];e=[];a(f,e)};b.cell=function(g,j){var n=f.length,o=e.length,u,z=-1,Q=-1;for(u=0;u<n;u++)if(j>=f[u][0]&&j<f[u][1]){z=u;break}for(u=
0;u<o;u++)if(g>=e[u][0]&&g<e[u][1]){Q=u;break}return z>=0&&Q>=0?{row:z,col:Q}:null};b.rect=function(g,j,n,o,u){u=u.offset();return{top:f[g][0]-u.top,left:e[j][0]-u.left,width:e[o][1]-e[j][0],height:f[n][1]-f[g][0]}}}function tb(a){function b(o){o=a.cell(o.pageX,o.pageY);if(!o!=!n||o&&(o.row!=n.row||o.col!=n.col)){if(o){j||(j=o);g(o,j,o.row-j.row,o.col-j.col)}else g(o,j);n=o}}var f=this,e,g,j,n;f.start=function(o,u,z){g=o;j=n=null;a.build();b(u);e=z||"mousemove";l(document).bind(e,b)};f.stop=function(){l(document).unbind(e,
b);return n}}function ub(a){function b(n){return e[n]=e[n]||a(n)}var f=this,e={},g={},j={};f.left=function(n){return g[n]=g[n]===ia?b(n).position().left:g[n]};f.right=function(n){return j[n]=j[n]===ia?f.left(n)+Ra(b(n)):j[n]};f.clear=function(){e={};g={};j={}}}function Wa(a,b,f){a.setFullYear(a.getFullYear()+b);f||Ia(a);return a}function Xa(a,b,f){if(+a){b=a.getMonth()+b;var e=y(a);e.setDate(1);e.setMonth(b);a.setMonth(b);for(f||Ia(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}
function V(a,b,f){if(+a){b=a.getDate()+b;var e=y(a);e.setHours(9);e.setDate(b);a.setDate(b);f||Ia(a);kb(a,e)}return a}function kb(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*Ub)}function ua(a,b){a.setMinutes(a.getMinutes()+b);return a}function Ia(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function y(a,b){if(b)return Ia(new Date(+a));return new Date(+a)}function yb(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function va(a,
b,f){for(b=b||1;!a.getDay()||f&&a.getDay()==1||!f&&a.getDay()==6;)V(a,b);return a}function Aa(a,b){return Math.round((y(a,true)-y(b,true))/ob)}function nb(a,b,f,e){if(b!==ia&&b!=a.getFullYear()){a.setDate(1);a.setMonth(0);a.setFullYear(b)}if(f!==ia&&f!=a.getMonth()){a.setDate(1);a.setMonth(f)}e!==ia&&a.setDate(e)}function ab(a,b){if(typeof a=="object")return a;if(typeof a=="number")return new Date(a*1E3);if(typeof a=="string"){if(a.match(/^\d+$/))return new Date(parseInt(a,10)*1E3);if(b===ia)b=true;
return Fb(a,b)||(a?new Date(a):null)}return null}function Fb(a,b){a=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?$/);if(!a)return null;var f=new Date(a[1],0,1);if(b||!a[14]){b=new Date(a[1],0,1,9,0);if(a[3]){f.setMonth(a[3]-1);b.setMonth(a[3]-1)}if(a[5]){f.setDate(a[5]);b.setDate(a[5])}kb(f,b);a[7]&&f.setHours(a[7]);a[8]&&f.setMinutes(a[8]);a[10]&&f.setSeconds(a[10]);a[12]&&f.setMilliseconds(Number("0."+a[12])*
1E3);kb(f,b)}else{f.setUTCFullYear(a[1],a[3]?a[3]-1:0,a[5]||1);f.setUTCHours(a[7]||0,a[8]||0,a[10]||0,a[12]?Number("0."+a[12])*1E3:0);b=Number(a[16])*60+Number(a[17]);b*=a[15]=="-"?1:-1;f=new Date(+f+b*60*1E3)}return f}function fb(a){if(typeof a=="number")return a*60;if(typeof a=="object")return a.getHours()*60+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);if(a[3]){b%=12;if(a[3].toLowerCase().charAt(0)=="p")b+=12}return b*60+(a[2]?parseInt(a[2],10):0)}}function Ka(a,
b,f){return Ya(a,null,b,f)}function Ya(a,b,f,e){e=e||Qa;var g=a,j=b,n,o=f.length,u,z,Q,R="";for(n=0;n<o;n++){u=f.charAt(n);if(u=="'")for(z=n+1;z<o;z++){if(f.charAt(z)=="'"){if(g){R+=z==n+1?"'":f.substring(n+1,z);n=z}break}}else if(u=="(")for(z=n+1;z<o;z++){if(f.charAt(z)==")"){n=Ka(g,f.substring(n+1,z),e);if(parseInt(n.replace(/\D/,""),10))R+=n;n=z;break}}else if(u=="[")for(z=n+1;z<o;z++){if(f.charAt(z)=="]"){u=f.substring(n+1,z);n=Ka(g,u,e);if(n!=Ka(j,u,e))R+=n;n=z;break}}else if(u=="{"){g=b;j=a}else if(u==
"}"){g=a;j=b}else{for(z=o;z>n;z--)if(Q=Vb[f.substring(n,z)]){if(g)R+=Q(g,e);n=z-1;break}if(z==n)if(g)R+=u}}return R}function Pa(a){return a.end?Wb(a.end,a.allDay):V(y(a.start),1)}function Wb(a,b){a=y(a);return b||a.getHours()||a.getMinutes()?V(a,1):Ia(a)}function Xb(a,b){if(a.event.allDay&&!b.event.allDay)return-1;if(!a.event.allDay&&b.event.allDay)return 1;return(b.msLength-a.msLength)*100+(a.event.start-b.event.start)}function Cb(a,b){return a.end>b.start&&a.start<b.end}function eb(a,b,f,e){var g=
[],j,n=a.length,o,u,z,Q,R;for(j=0;j<n;j++){o=a[j];u=o.start;z=b[j];if(z>f&&u<e){if(u<f){u=y(f);Q=false}else{u=u;Q=true}if(z>e){z=y(e);R=false}else{z=z;R=true}g.push({event:o,start:u,end:z,isStart:Q,isEnd:R,msLength:z-u})}}return g.sort(Xb)}function db(a){var b=[],f,e=a.length,g,j,n,o;for(f=0;f<e;f++){g=a[f];for(j=0;;){n=false;if(b[j])for(o=0;o<b[j].length;o++)if(Cb(b[j][o],g)){n=true;break}if(n)j++;else break}if(b[j])b[j].push(g);else b[j]=[g]}return b}function Ab(a,b,f){a.unbind("mouseover").mouseover(function(e){for(var g=
e.target,j;g!=this;){j=g;g=g.parentNode}if((g=j._fci)!==ia){j._fci=ia;j=b[g];f(j.event,j.element,j);l(e.target).trigger(e)}e.stopPropagation()})}function za(a,b,f){a.each(function(e,g){g.style.width=Math.max(0,b-jb(g,f))+"px"})}function Ja(a,b,f){a.each(function(e,g){g.style.height=Math.max(0,b-Va(g,f))+"px"})}function jb(a,b){return(parseFloat(l.curCSS(a,"paddingLeft",true))||0)+(parseFloat(l.curCSS(a,"paddingRight",true))||0)+(parseFloat(l.curCSS(a,"borderLeftWidth",true))||0)+(parseFloat(l.curCSS(a,
"borderRightWidth",true))||0)+(b?Yb(a):0)}function Yb(a){return(parseFloat(l.curCSS(a,"marginLeft",true))||0)+(parseFloat(l.curCSS(a,"marginRight",true))||0)}function Va(a,b){return(parseFloat(l.curCSS(a,"paddingTop",true))||0)+(parseFloat(l.curCSS(a,"paddingBottom",true))||0)+(parseFloat(l.curCSS(a,"borderTopWidth",true))||0)+(parseFloat(l.curCSS(a,"borderBottomWidth",true))||0)+(b?Eb(a):0)}function Eb(a){return(parseFloat(l.curCSS(a,"marginTop",true))||0)+(parseFloat(l.curCSS(a,"marginBottom",true))||
0)}function Ua(a,b){b=typeof b=="number"?b+"px":b;a[0].style.cssText+=";min-height:"+b+";_height:"+b}function Da(a){if(Sa)return a.innerHeight();return a.height()}function Ra(a){if(Sa)return a.innerWidth();return a.width()}function mb(){}function ib(a,b){return a-b}function Db(a){return Math.max.apply(Math,a)}function Oa(a){return(a<10?"0":"")+a}function Za(a,b){if(a[b]!==ia)return a[b];b=b.split(/(?=[A-Z])/);for(var f=b.length-1,e;f>=0;f--){e=a[b[f].toLowerCase()];if(e!==ia)return e}return a[""]}
function Na(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Bb(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function $a(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})}var Qa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,
allDayDefault:true,ignoreTimezone:true,lazyFetching:true,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:false,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov",
"Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",month:"month",week:"week",day:"day"},theme:false,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:true,dropAccept:"*"},Zb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",
next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ga=l.fullCalendar={version:"1.4.10-gcalendar"},Ha=Ga.views={},Sa=false;if(l.ui&&l.browser.msie&&parseInt(l.browser.version,10)>=9){Sa=true;var $b=l.ui.mouse.prototype._mouseMove;l.ui.mouse.prototype._mouseMove=function(a){a.button=1;$b.apply(this,[a])}}l.fn.fullCalendar=function(a){if(typeof a=="string"){var b=Array.prototype.slice.call(arguments,
1),f;this.each(function(){var g=l.data(this,"fullCalendar");if(g&&l.isFunction(g[a])){g=g[a].apply(g,b);if(f===ia)f=g;a=="destroy"&&l.removeData(this,"fullCalendar")}});if(f!==ia)return f;return this}var e=a.eventSources||[];delete a.eventSources;if(a.events){e.push(a.events);delete a.events}a=l.extend(true,{},Qa,a.isRTL||a.isRTL===ia&&Qa.isRTL?Zb:{},a);this.each(function(g,j){g=l(j);j=new Gb(g,a,e);g.data("fullCalendar",j);j.render()});return this};var Jb=1;Ha.month=Kb;Ha.basicWeek=Lb;Ha.basicDay=
Mb;var cb;lb({weekMode:"fixed"});Ha.agendaWeek=Ob;Ha.agendaDay=Pb;lb({allDaySlot:true,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24});Ga.addDays=V;Ga.cloneDate=y;Ga.parseDate=ab;Ga.parseISO8601=Fb;Ga.parseTime=fb;Ga.formatDate=Ka;Ga.formatDates=Ya;var Ea=["sun","mon","tue","wed","thu","fri","sat"],ob=864E5,Ub=36E5,Tb=6E4,Vb={s:function(a){return a.getSeconds()},ss:function(a){return Oa(a.getSeconds())},
m:function(a){return a.getMinutes()},mm:function(a){return Oa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return Oa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return Oa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return Oa(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return Oa(a.getMonth()+1)},MMM:function(a,
b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return a.getHours()<12?"a":"p"},tt:function(a){return a.getHours()<12?"am":"pm"},T:function(a){return a.getHours()<12?"A":"P"},TT:function(a){return a.getHours()<12?"AM":"PM"},u:function(a){return Ka(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();if(a>10&&a<20)return"th";return["st",
"nd","rd"][a%10-1]||"th"},w:function(a){return a.getWeek()}};if(Date.prototype.getWeek===ia)Date.prototype.getWeek=function(){var a,b,f;f=new Date(this.getFullYear(),0,4,this.getHours());b=Math.round((this-f)/864E5);a=(f.getDay()+6)%7;a=Math.floor((b+a)/7)+1;b=(this.getDay()+6)%7;if(this.getMonth()==11&&this.getDate()>=28){f.setFullYear(this.getFullYear()+1);a=(f.getDay()+6)%7;if(b<a)return 1;f=new Date(this-6048E5);a=f.getWeek()+1}if(a===0&&b>3&&this.getMonth()==0){f=new Date(this-6048E5);a=f.getWeek()+
1}return a}})(jQuery);
